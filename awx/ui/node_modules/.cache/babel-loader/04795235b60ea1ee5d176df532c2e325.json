{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{Card,PageSection}from'@patternfly/react-core';import{useHistory}from'react-router-dom';import{CardBody}from'components/Card';import{CredentialTypesAPI}from'api';import{parseVariableField}from'util/yaml';import CredentialTypeForm from'../shared/CredentialTypeForm';import{jsx as _jsx}from\"react/jsx-runtime\";function CredentialTypeAdd(){var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),submitError=_useState2[0],setSubmitError=_useState2[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var _yield$CredentialType,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return CredentialTypesAPI.create(_objectSpread(_objectSpread({},values),{},{injectors:parseVariableField(values.injectors),inputs:parseVariableField(values.inputs),kind:'cloud'}));case 3:_yield$CredentialType=_context.sent;response=_yield$CredentialType.data;history.push(\"/credential_types/\".concat(response.id,\"/details\"));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setSubmitError(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){history.push(\"/credential_types\");};return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(CredentialTypeForm,{onSubmit:handleSubmit,submitError:submitError,onCancel:handleCancel})})})});}export default CredentialTypeAdd;","map":{"version":3,"names":["React","useState","Card","PageSection","useHistory","CardBody","CredentialTypesAPI","parseVariableField","CredentialTypeForm","jsx","_jsx","CredentialTypeAdd","history","_useState","_useState2","_slicedToArray","submitError","setSubmitError","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","_yield$CredentialType","response","wrap","_callee$","_context","prev","next","create","_objectSpread","injectors","inputs","kind","sent","data","push","concat","id","t0","stop","_x","apply","arguments","handleCancel","children","onSubmit","onCancel"],"sources":["/awx_devel/awx/ui/src/screens/CredentialType/CredentialTypeAdd/CredentialTypeAdd.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { useHistory } from 'react-router-dom';\n\nimport { CardBody } from 'components/Card';\nimport { CredentialTypesAPI } from 'api';\nimport { parseVariableField } from 'util/yaml';\nimport CredentialTypeForm from '../shared/CredentialTypeForm';\n\nfunction CredentialTypeAdd() {\n  const history = useHistory();\n  const [submitError, setSubmitError] = useState(null);\n\n  const handleSubmit = async (values) => {\n    try {\n      const { data: response } = await CredentialTypesAPI.create({\n        ...values,\n        injectors: parseVariableField(values.injectors),\n        inputs: parseVariableField(values.inputs),\n        kind: 'cloud',\n      });\n      history.push(`/credential_types/${response.id}/details`);\n    } catch (error) {\n      setSubmitError(error);\n    }\n  };\n\n  const handleCancel = () => {\n    history.push(`/credential_types`);\n  };\n\n  return (\n    <PageSection>\n      <Card>\n        <CardBody>\n          <CredentialTypeForm\n            onSubmit={handleSubmit}\n            submitError={submitError}\n            onCancel={handleCancel}\n          />\n        </CardBody>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default CredentialTypeAdd;\n"],"mappings":"8ZAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,IAAI,CAAEC,WAAW,KAAQ,wBAAwB,CAC1D,OAASC,UAAU,KAAQ,kBAAkB,CAE7C,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,kBAAkB,KAAQ,KAAK,CACxC,OAASC,kBAAkB,KAAQ,WAAW,CAC9C,MAAO,CAAAC,kBAAkB,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9D,QAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC3B,GAAM,CAAAC,OAAO,CAAGR,UAAU,CAAC,CAAC,CAC5B,IAAAS,SAAA,CAAsCZ,QAAQ,CAAC,IAAI,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAElC,GAAM,CAAAI,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,qBAAA,CAAAC,QAAA,QAAAL,mBAAA,CAAAM,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEG,CAAAzB,kBAAkB,CAAC0B,MAAM,CAAAC,aAAA,CAAAA,aAAA,IACrDT,MAAM,MACTU,SAAS,CAAE3B,kBAAkB,CAACiB,MAAM,CAACU,SAAS,CAAC,CAC/CC,MAAM,CAAE5B,kBAAkB,CAACiB,MAAM,CAACW,MAAM,CAAC,CACzCC,IAAI,CAAE,OAAO,EACd,CAAC,QAAAX,qBAAA,CAAAI,QAAA,CAAAQ,IAAA,CALYX,QAAQ,CAAAD,qBAAA,CAAda,IAAI,CAMZ1B,OAAO,CAAC2B,IAAI,sBAAAC,MAAA,CAAsBd,QAAQ,CAACe,EAAE,YAAU,CAAC,CAACZ,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAa,EAAA,CAAAb,QAAA,aAEzDZ,cAAc,CAAAY,QAAA,CAAAa,EAAM,CAAC,CAAC,yBAAAb,QAAA,CAAAc,IAAA,OAAApB,OAAA,gBAEzB,kBAZK,CAAAL,YAAYA,CAAA0B,EAAA,SAAAzB,IAAA,CAAA0B,KAAA,MAAAC,SAAA,OAYjB,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBnC,OAAO,CAAC2B,IAAI,oBAAoB,CAAC,CACnC,CAAC,CAED,mBACE7B,IAAA,CAACP,WAAW,EAAA6C,QAAA,cACVtC,IAAA,CAACR,IAAI,EAAA8C,QAAA,cACHtC,IAAA,CAACL,QAAQ,EAAA2C,QAAA,cACPtC,IAAA,CAACF,kBAAkB,EACjByC,QAAQ,CAAE/B,YAAa,CACvBF,WAAW,CAAEA,WAAY,CACzBkC,QAAQ,CAAEH,YAAa,CACxB,CAAC,CACM,CAAC,CACP,CAAC,CACI,CAAC,CAElB,CAEA,cAAe,CAAApC,iBAAiB"},"metadata":{},"sourceType":"module"}