{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useRef,useState}from'react';import{WorkflowStateContext}from'contexts/Workflow';import{generateLine,getLinePoints,getLinkOverlayPoints}from'components/Workflow/WorkflowUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WorkflowOutputLink(_ref){var link=_ref.link,mouseEnter=_ref.mouseEnter,mouseLeave=_ref.mouseLeave;var ref=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hovering=_useState2[0],setHovering=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),pathD=_useState4[0],setPathD=_useState4[1];var _useState5=useState('#CCCCCC'),_useState6=_slicedToArray(_useState5,2),pathStroke=_useState6[0],setPathStroke=_useState6[1];var _useContext=useContext(WorkflowStateContext),nodePositions=_useContext.nodePositions;var handleLinkMouseEnter=function handleLinkMouseEnter(){ref.current.parentNode.appendChild(ref.current);setHovering(true);mouseEnter();};var handleLinkMouseLeave=function handleLinkMouseLeave(){ref.current.parentNode.prepend(ref.current);setHovering(null);mouseLeave();};useEffect(function(){if(link.linkType==='failure'){setPathStroke('#d9534f');}if(link.linkType==='success'){setPathStroke('#5cb85c');}if(link.linkType==='always'){setPathStroke('#337ab7');}},[link.linkType]);useEffect(function(){var linePoints=getLinePoints(link,nodePositions);setPathD(generateLine(linePoints));},[link,nodePositions]);return/*#__PURE__*/_jsxs(\"g\",{ref:ref,id:\"link-\".concat(link.source.id,\"-\").concat(link.target.id),onMouseEnter:handleLinkMouseEnter,onMouseLeave:handleLinkMouseLeave,children:[/*#__PURE__*/_jsx(\"polygon\",{fill:\"#E1E1E1\",id:\"link-\".concat(link.source.id,\"-\").concat(link.target.id,\"-overlay\"),opacity:hovering?'1':'0',points:getLinkOverlayPoints(link,nodePositions)}),/*#__PURE__*/_jsx(\"path\",{d:pathD,stroke:pathStroke,strokeWidth:\"2px\"}),/*#__PURE__*/_jsx(\"polygon\",{onMouseEnter:function onMouseEnter(){return mouseEnter();},onMouseLeave:function onMouseLeave(){return mouseLeave();},opacity:\"0\",points:getLinkOverlayPoints(link,nodePositions)})]});}export default WorkflowOutputLink;","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","WorkflowStateContext","generateLine","getLinePoints","getLinkOverlayPoints","jsx","_jsx","jsxs","_jsxs","WorkflowOutputLink","_ref","link","mouseEnter","mouseLeave","ref","_useState","_useState2","_slicedToArray","hovering","setHovering","_useState3","_useState4","pathD","setPathD","_useState5","_useState6","pathStroke","setPathStroke","_useContext","nodePositions","handleLinkMouseEnter","current","parentNode","appendChild","handleLinkMouseLeave","prepend","linkType","linePoints","id","concat","source","target","onMouseEnter","onMouseLeave","children","fill","opacity","points","d","stroke","strokeWidth"],"sources":["/awx_devel/awx/ui/src/screens/Job/WorkflowOutput/WorkflowOutputLink.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from 'react';\nimport { func, shape } from 'prop-types';\nimport { WorkflowStateContext } from 'contexts/Workflow';\nimport {\n  generateLine,\n  getLinePoints,\n  getLinkOverlayPoints,\n} from 'components/Workflow/WorkflowUtils';\n\nfunction WorkflowOutputLink({ link, mouseEnter, mouseLeave }) {\n  const ref = useRef(null);\n  const [hovering, setHovering] = useState(false);\n  const [pathD, setPathD] = useState();\n  const [pathStroke, setPathStroke] = useState('#CCCCCC');\n  const { nodePositions } = useContext(WorkflowStateContext);\n\n  const handleLinkMouseEnter = () => {\n    ref.current.parentNode.appendChild(ref.current);\n    setHovering(true);\n    mouseEnter();\n  };\n\n  const handleLinkMouseLeave = () => {\n    ref.current.parentNode.prepend(ref.current);\n    setHovering(null);\n    mouseLeave();\n  };\n\n  useEffect(() => {\n    if (link.linkType === 'failure') {\n      setPathStroke('#d9534f');\n    }\n    if (link.linkType === 'success') {\n      setPathStroke('#5cb85c');\n    }\n    if (link.linkType === 'always') {\n      setPathStroke('#337ab7');\n    }\n  }, [link.linkType]);\n\n  useEffect(() => {\n    const linePoints = getLinePoints(link, nodePositions);\n    setPathD(generateLine(linePoints));\n  }, [link, nodePositions]);\n\n  return (\n    <g\n      ref={ref}\n      id={`link-${link.source.id}-${link.target.id}`}\n      onMouseEnter={handleLinkMouseEnter}\n      onMouseLeave={handleLinkMouseLeave}\n    >\n      <polygon\n        fill=\"#E1E1E1\"\n        id={`link-${link.source.id}-${link.target.id}-overlay`}\n        opacity={hovering ? '1' : '0'}\n        points={getLinkOverlayPoints(link, nodePositions)}\n      />\n      <path d={pathD} stroke={pathStroke} strokeWidth=\"2px\" />\n      <polygon\n        onMouseEnter={() => mouseEnter()}\n        onMouseLeave={() => mouseLeave()}\n        opacity=\"0\"\n        points={getLinkOverlayPoints(link, nodePositions)}\n      />\n    </g>\n  );\n}\n\nWorkflowOutputLink.propTypes = {\n  link: shape().isRequired,\n  mouseEnter: func.isRequired,\n  mouseLeave: func.isRequired,\n};\n\nexport default WorkflowOutputLink;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}