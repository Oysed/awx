{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useContext,useState}from'react';import{Button,FormGroup,Modal}from'@patternfly/react-core';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import AnsibleSelect from'components/AnsibleSelect';import{jsx as _jsx}from\"react/jsx-runtime\";function LinkModal(_ref){var header=_ref.header,onConfirm=_ref.onConfirm;var dispatch=useContext(WorkflowDispatchContext);var _useContext=useContext(WorkflowStateContext),linkToEdit=_useContext.linkToEdit;var _useState=useState(linkToEdit?linkToEdit.linkType:'success'),_useState2=_slicedToArray(_useState,2),linkType=_useState2[0],setLinkType=_useState2[1];return/*#__PURE__*/_jsx(Modal,{width:600,header:header,isOpen:true,title:/*i18n*/i18n._(\"Workflow Link\"),\"aria-label\":/*i18n*/i18n._(\"Workflow link modal\"),onClose:function onClose(){return dispatch({type:'CANCEL_LINK_MODAL'});},actions:[/*#__PURE__*/_jsx(Button,{ouiaId:\"link-confirm-button\",id:\"link-confirm\",variant:\"primary\",\"aria-label\":/*i18n*/i18n._(\"Save link changes\"),onClick:function onClick(){return onConfirm(linkType);},children:/*i18n*/i18n._(\"Save\")},\"save\"),/*#__PURE__*/_jsx(Button,{ouiaId:\"link-cancel-button\",id:\"link-cancel\",variant:\"link\",\"aria-label\":/*i18n*/i18n._(\"Cancel link changes\"),onClick:function onClick(){return dispatch({type:'CANCEL_LINK_MODAL'});},children:/*i18n*/i18n._(\"Cancel\")},\"cancel\")],children:/*#__PURE__*/_jsx(FormGroup,{fieldId:\"link-select\",label:/*i18n*/i18n._(\"Run\"),children:/*#__PURE__*/_jsx(AnsibleSelect,{id:\"link-select\",name:\"linkType\",value:linkType,data:[{value:'always',key:'always',label:/*i18n*/i18n._(\"Always\")},{value:'success',key:'success',label:/*i18n*/i18n._(\"On Success\")},{value:'failure',key:'failure',label:/*i18n*/i18n._(\"On Failure\")}],onChange:function onChange(event,value){setLinkType(value);}})})});}export default LinkModal;","map":{"version":3,"names":["React","useContext","useState","Button","FormGroup","Modal","WorkflowDispatchContext","WorkflowStateContext","AnsibleSelect","jsx","_jsx","LinkModal","_ref","header","onConfirm","dispatch","_useContext","linkToEdit","_useState","linkType","_useState2","_slicedToArray","setLinkType","width","isOpen","title","i18n","_","onClose","type","actions","ouiaId","id","variant","onClick","children","fieldId","label","name","value","data","key","onChange","event"],"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/Modals/LinkModals/LinkModal.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Button, FormGroup, Modal } from '@patternfly/react-core';\n\nimport { t } from '@lingui/macro';\nimport { func } from 'prop-types';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\nimport AnsibleSelect from 'components/AnsibleSelect';\n\nfunction LinkModal({ header, onConfirm }) {\n  const dispatch = useContext(WorkflowDispatchContext);\n  const { linkToEdit } = useContext(WorkflowStateContext);\n  const [linkType, setLinkType] = useState(\n    linkToEdit ? linkToEdit.linkType : 'success'\n  );\n  return (\n    <Modal\n      width={600}\n      header={header}\n      isOpen\n      title={t`Workflow Link`}\n      aria-label={t`Workflow link modal`}\n      onClose={() => dispatch({ type: 'CANCEL_LINK_MODAL' })}\n      actions={[\n        <Button\n          ouiaId=\"link-confirm-button\"\n          id=\"link-confirm\"\n          key=\"save\"\n          variant=\"primary\"\n          aria-label={t`Save link changes`}\n          onClick={() => onConfirm(linkType)}\n        >\n          {t`Save`}\n        </Button>,\n        <Button\n          ouiaId=\"link-cancel-button\"\n          id=\"link-cancel\"\n          key=\"cancel\"\n          variant=\"link\"\n          aria-label={t`Cancel link changes`}\n          onClick={() => dispatch({ type: 'CANCEL_LINK_MODAL' })}\n        >\n          {t`Cancel`}\n        </Button>,\n      ]}\n    >\n      <FormGroup fieldId=\"link-select\" label={t`Run`}>\n        <AnsibleSelect\n          id=\"link-select\"\n          name=\"linkType\"\n          value={linkType}\n          data={[\n            {\n              value: 'always',\n              key: 'always',\n              label: t`Always`,\n            },\n            {\n              value: 'success',\n              key: 'success',\n              label: t`On Success`,\n            },\n            {\n              value: 'failure',\n              key: 'failure',\n              label: t`On Failure`,\n            },\n          ]}\n          onChange={(event, value) => {\n            setLinkType(value);\n          }}\n        />\n      </FormGroup>\n    </Modal>\n  );\n}\n\nLinkModal.propTypes = {\n  onConfirm: func.isRequired,\n};\n\nexport default LinkModal;\n"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,MAAM,CAAEC,SAAS,CAAEC,KAAK,KAAQ,wBAAwB,CAIjE,OACEC,uBAAuB,CACvBC,oBAAoB,KACf,mBAAmB,CAC1B,MAAO,CAAAC,aAAa,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAwB,IAArB,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,SAAS,CAAAF,IAAA,CAATE,SAAS,CACpC,GAAM,CAAAC,QAAQ,CAAGd,UAAU,CAACK,uBAAuB,CAAC,CACpD,IAAAU,WAAA,CAAuBf,UAAU,CAACM,oBAAoB,CAAC,CAA/CU,UAAU,CAAAD,WAAA,CAAVC,UAAU,CAClB,IAAAC,SAAA,CAAgChB,QAAQ,CACtCe,UAAU,CAAGA,UAAU,CAACE,QAAQ,CAAG,SACrC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAH,SAAA,IAFMC,QAAQ,CAAAC,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAG5B,mBACEV,IAAA,CAACL,KAAK,EACJkB,KAAK,CAAE,GAAI,CACXV,MAAM,CAAEA,MAAO,CACfW,MAAM,MACNC,KAAK,SAAEC,IAAA,CAAAC,CAAA,gBAAe,CAAE,CACxB,qBAAYD,IAAA,CAAAC,CAAA,sBAAqB,CAAE,CACnCC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAb,QAAQ,CAAC,CAAEc,IAAI,CAAE,mBAAoB,CAAC,CAAC,EAAC,CACvDC,OAAO,CAAE,cACPpB,IAAA,CAACP,MAAM,EACL4B,MAAM,CAAC,qBAAqB,CAC5BC,EAAE,CAAC,cAAc,CAEjBC,OAAO,CAAC,SAAS,CACjB,qBAAYP,IAAA,CAAAC,CAAA,oBAAmB,CAAE,CACjCO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAApB,SAAS,CAACK,QAAQ,CAAC,EAAC,CAAAgB,QAAA,SAElCT,IAAA,CAAAC,CAAA,OAAM,CAAC,EALJ,MAME,CAAC,cACTjB,IAAA,CAACP,MAAM,EACL4B,MAAM,CAAC,oBAAoB,CAC3BC,EAAE,CAAC,aAAa,CAEhBC,OAAO,CAAC,MAAM,CACd,qBAAYP,IAAA,CAAAC,CAAA,sBAAqB,CAAE,CACnCO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAnB,QAAQ,CAAC,CAAEc,IAAI,CAAE,mBAAoB,CAAC,CAAC,EAAC,CAAAM,QAAA,SAEtDT,IAAA,CAAAC,CAAA,SAAQ,CAAC,EALN,QAME,CAAC,CACT,CAAAQ,QAAA,cAEFzB,IAAA,CAACN,SAAS,EAACgC,OAAO,CAAC,aAAa,CAACC,KAAK,SAAEX,IAAA,CAAAC,CAAA,MAAK,CAAE,CAAAQ,QAAA,cAC7CzB,IAAA,CAACF,aAAa,EACZwB,EAAE,CAAC,aAAa,CAChBM,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEpB,QAAS,CAChBqB,IAAI,CAAE,CACJ,CACED,KAAK,CAAE,QAAQ,CACfE,GAAG,CAAE,QAAQ,CACbJ,KAAK,SAAEX,IAAA,CAAAC,CAAA,SAAQ,CACjB,CAAC,CACD,CACEY,KAAK,CAAE,SAAS,CAChBE,GAAG,CAAE,SAAS,CACdJ,KAAK,SAAEX,IAAA,CAAAC,CAAA,aAAY,CACrB,CAAC,CACD,CACEY,KAAK,CAAE,SAAS,CAChBE,GAAG,CAAE,SAAS,CACdJ,KAAK,SAAEX,IAAA,CAAAC,CAAA,aAAY,CACrB,CAAC,CACD,CACFe,QAAQ,CAAE,SAAAA,SAACC,KAAK,CAAEJ,KAAK,CAAK,CAC1BjB,WAAW,CAACiB,KAAK,CAAC,CACpB,CAAE,CACH,CAAC,CACO,CAAC,CACP,CAAC,CAEZ,CAMA,cAAe,CAAA5B,SAAS"},"metadata":{},"sourceType":"module"}