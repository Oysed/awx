{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _excluded=[\"STDOUT_MAX_BYTES_DISPLAY\",\"EVENT_STDOUT_MAX_BYTES_DISPLAY\"];import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link}from'react-router-dom';import{Button}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{CardBody,CardActionsRow}from'components/Card';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import{DetailList}from'components/DetailList';import RoutedTabs from'components/RoutedTabs';import useRequest from'hooks/useRequest';import{useConfig}from'contexts/Config';import{useSettings}from'contexts/Settings';import{SettingsAPI}from'api';import{sortNestedDetails}from'../../shared/settingUtils';import{SettingDetail}from'../../shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JobsDetail(){var _useConfig=useConfig(),me=_useConfig.me;var _useSettings=useSettings(),options=_useSettings.GET;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$SettingsAPI$re,data,STDOUT_MAX_BYTES_DISPLAY,EVENT_STDOUT_MAX_BYTES_DISPLAY,jobsData,mergedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return SettingsAPI.readCategory('jobs');case 2:_yield$SettingsAPI$re=_context.sent;data=_yield$SettingsAPI$re.data;STDOUT_MAX_BYTES_DISPLAY=data.STDOUT_MAX_BYTES_DISPLAY,EVENT_STDOUT_MAX_BYTES_DISPLAY=data.EVENT_STDOUT_MAX_BYTES_DISPLAY,jobsData=_objectWithoutProperties(data,_excluded);mergedData={};Object.keys(jobsData).forEach(function(key){mergedData[key]=options[key];mergedData[key].value=jobsData[key];});return _context.abrupt(\"return\",sortNestedDetails(mergedData));case 8:case\"end\":return _context.stop();}}},_callee);})),[options]),null),isLoading=_useRequest.isLoading,error=_useRequest.error,request=_useRequest.request,jobs=_useRequest.result;useEffect(function(){request();},[request]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Settings\")]}),link:\"/settings\",id:99},{name:/*i18n*/i18n._(\"Details\"),link:\"/settings/jobs/details\",id:0}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(CardBody,{children:[isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&error&&/*#__PURE__*/_jsx(ContentError,{error:error}),!isLoading&&jobs&&/*#__PURE__*/_jsx(DetailList,{children:jobs.map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],detail=_ref3[1];return/*#__PURE__*/_jsx(SettingDetail,{id:key,helpText:detail===null||detail===void 0?void 0:detail.help_text,label:detail===null||detail===void 0?void 0:detail.label,type:detail===null||detail===void 0?void 0:detail.type,unit:detail===null||detail===void 0?void 0:detail.unit,value:detail===null||detail===void 0?void 0:detail.value},key);})}),(me===null||me===void 0?void 0:me.is_superuser)&&/*#__PURE__*/_jsx(CardActionsRow,{children:/*#__PURE__*/_jsx(Button,{ouiaId:\"jobs-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"Edit\"),component:Link,to:\"/settings/jobs/edit\",children:/*i18n*/i18n._(\"Edit\")})})]})]});}export default JobsDetail;","map":{"version":3,"names":["React","useEffect","useCallback","Link","Button","CaretLeftIcon","CardBody","CardActionsRow","ContentError","ContentLoading","DetailList","RoutedTabs","useRequest","useConfig","useSettings","SettingsAPI","sortNestedDetails","SettingDetail","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","JobsDetail","_useConfig","me","_useSettings","options","GET","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$SettingsAPI$re","data","STDOUT_MAX_BYTES_DISPLAY","EVENT_STDOUT_MAX_BYTES_DISPLAY","jobsData","mergedData","wrap","_callee$","_context","prev","next","readCategory","sent","_objectWithoutProperties","_excluded","Object","keys","forEach","key","value","abrupt","stop","isLoading","error","request","jobs","result","tabsArray","name","children","i18n","_","link","id","map","_ref2","_ref3","_slicedToArray","detail","helpText","help_text","label","type","unit","is_superuser","ouiaId","component","to"],"sources":["/awx_devel/awx/ui/src/screens/Setting/Jobs/JobsDetail/JobsDetail.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Button } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport { DetailList } from 'components/DetailList';\nimport RoutedTabs from 'components/RoutedTabs';\nimport useRequest from 'hooks/useRequest';\nimport { useConfig } from 'contexts/Config';\nimport { useSettings } from 'contexts/Settings';\nimport { SettingsAPI } from 'api';\nimport { sortNestedDetails } from '../../shared/settingUtils';\nimport { SettingDetail } from '../../shared';\n\nfunction JobsDetail() {\n  const { me } = useConfig();\n  const { GET: options } = useSettings();\n\n  const {\n    isLoading,\n    error,\n    request,\n    result: jobs,\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await SettingsAPI.readCategory('jobs');\n\n      const {\n        STDOUT_MAX_BYTES_DISPLAY,\n        EVENT_STDOUT_MAX_BYTES_DISPLAY,\n        ...jobsData\n      } = data;\n\n      const mergedData = {};\n      Object.keys(jobsData).forEach((key) => {\n        mergedData[key] = options[key];\n        mergedData[key].value = jobsData[key];\n      });\n\n      return sortNestedDetails(mergedData);\n    }, [options]),\n    null\n  );\n\n  useEffect(() => {\n    request();\n  }, [request]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Settings`}\n        </>\n      ),\n      link: `/settings`,\n      id: 99,\n    },\n    {\n      name: t`Details`,\n      link: `/settings/jobs/details`,\n      id: 0,\n    },\n  ];\n\n  return (\n    <>\n      <RoutedTabs tabsArray={tabsArray} />\n      <CardBody>\n        {isLoading && <ContentLoading />}\n        {!isLoading && error && <ContentError error={error} />}\n        {!isLoading && jobs && (\n          <DetailList>\n            {jobs.map(([key, detail]) => (\n              <SettingDetail\n                key={key}\n                id={key}\n                helpText={detail?.help_text}\n                label={detail?.label}\n                type={detail?.type}\n                unit={detail?.unit}\n                value={detail?.value}\n              />\n            ))}\n          </DetailList>\n        )}\n        {me?.is_superuser && (\n          <CardActionsRow>\n            <Button\n              ouiaId=\"jobs-detail-edit-button\"\n              aria-label={t`Edit`}\n              component={Link}\n              to=\"/settings/jobs/edit\"\n            >\n              {t`Edit`}\n            </Button>\n          </CardActionsRow>\n        )}\n      </CardBody>\n    </>\n  );\n}\n\nexport default JobsDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}