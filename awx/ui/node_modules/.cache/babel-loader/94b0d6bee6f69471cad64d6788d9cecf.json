{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect}from'react';import{Switch,Route,Redirect,Link,useRouteMatch,useLocation}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import JobList from'components/JobList';import{HostsAPI}from'api';import useRequest from'hooks/useRequest';import HostFacts from'./HostFacts';import HostDetail from'./HostDetail';import HostEdit from'./HostEdit';import HostGroups from'./HostGroups';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Host(_ref){var setBreadcrumb=_ref.setBreadcrumb;var location=useLocation();var match=useRouteMatch('/hosts/:id');var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$HostsAPI$readD,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return HostsAPI.readDetail(match.params.id);case 2:_yield$HostsAPI$readD=_context.sent;data=_yield$HostsAPI$readD.data;setBreadcrumb(data);return _context.abrupt(\"return\",data);case 6:case\"end\":return _context.stop();}}},_callee);})),[match.params.id,setBreadcrumb])),error=_useRequest.error,isLoading=_useRequest.isLoading,host=_useRequest.result,fetchHost=_useRequest.request;useEffect(function(){fetchHost();},[fetchHost,location.pathname]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Hosts\")]}),link:\"/hosts\",id:99,persistentFilterKey:'hosts'},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Facts\"),link:\"\".concat(match.url,\"/facts\"),id:1},{name:/*i18n*/i18n._(\"Groups\"),link:\"\".concat(match.url,\"/groups\"),id:2},{name:/*i18n*/i18n._(\"Jobs\"),link:\"\".concat(match.url,\"/jobs\"),id:3}];if(isLoading){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentLoading,{})})});}if(error){var _error$response;return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:error,children:(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Host not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/hosts\",children:/*i18n*/i18n._(\"View all Hosts.\")})]})})})});}var showCardHeader=true;if(location.pathname.endsWith('edit')){showCardHeader=false;}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/hosts/:id\",to:\"/hosts/:id/details\",exact:true}),host&&[/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/details\",children:/*#__PURE__*/_jsx(HostDetail,{host:host})},\"details\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/edit\",children:/*#__PURE__*/_jsx(HostEdit,{host:host})},\"edit\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/facts\",children:/*#__PURE__*/_jsx(HostFacts,{host:host})},\"facts\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/groups\",children:/*#__PURE__*/_jsx(HostGroups,{host:host})},\"groups\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/jobs\",children:/*#__PURE__*/_jsx(JobList,{defaultParams:{job__hosts:host.id}})},\"jobs\")],/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(match.url,\"/details\"),children:/*i18n*/i18n._(\"View Host Details\")})})},\"not-found\")]})]})});}export default Host;export{Host as _Host};","map":{"version":3,"names":["React","useCallback","useEffect","Switch","Route","Redirect","Link","useRouteMatch","useLocation","CaretLeftIcon","Card","PageSection","RoutedTabs","ContentError","ContentLoading","JobList","HostsAPI","useRequest","HostFacts","HostDetail","HostEdit","HostGroups","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Host","_ref","setBreadcrumb","location","match","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$HostsAPI$readD","data","wrap","_callee$","_context","prev","next","readDetail","params","id","sent","abrupt","stop","error","isLoading","host","result","fetchHost","request","pathname","tabsArray","name","children","i18n","_","link","persistentFilterKey","concat","url","_error$response","response","status","to","showCardHeader","endsWith","from","exact","path","defaultParams","job__hosts","isNotFound","_Host"],"sources":["/awx_devel/awx/ui/src/screens/Host/Host.js"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Switch,\n  Route,\n  Redirect,\n  Link,\n  useRouteMatch,\n  useLocation,\n} from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport JobList from 'components/JobList';\nimport { HostsAPI } from 'api';\nimport useRequest from 'hooks/useRequest';\nimport HostFacts from './HostFacts';\nimport HostDetail from './HostDetail';\nimport HostEdit from './HostEdit';\nimport HostGroups from './HostGroups';\n\nfunction Host({ setBreadcrumb }) {\n  const location = useLocation();\n  const match = useRouteMatch('/hosts/:id');\n  const {\n    error,\n    isLoading,\n    result: host,\n    request: fetchHost,\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await HostsAPI.readDetail(match.params.id);\n      setBreadcrumb(data);\n      return data;\n    }, [match.params.id, setBreadcrumb])\n  );\n\n  useEffect(() => {\n    fetchHost();\n  }, [fetchHost, location.pathname]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Hosts`}\n        </>\n      ),\n      link: `/hosts`,\n      id: 99,\n      persistentFilterKey: 'hosts',\n    },\n    {\n      name: t`Details`,\n      link: `${match.url}/details`,\n      id: 0,\n    },\n    {\n      name: t`Facts`,\n      link: `${match.url}/facts`,\n      id: 1,\n    },\n    {\n      name: t`Groups`,\n      link: `${match.url}/groups`,\n      id: 2,\n    },\n    {\n      name: t`Jobs`,\n      link: `${match.url}/jobs`,\n      id: 3,\n    },\n  ];\n\n  if (isLoading) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentLoading />\n        </Card>\n      </PageSection>\n    );\n  }\n\n  if (error) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={error}>\n            {error?.response?.status === 404 && (\n              <span>\n                {t`Host not found.`}{' '}\n                <Link to=\"/hosts\">{t`View all Hosts.`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  let showCardHeader = true;\n\n  if (location.pathname.endsWith('edit')) {\n    showCardHeader = false;\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n        <Switch>\n          <Redirect from=\"/hosts/:id\" to=\"/hosts/:id/details\" exact />\n          {host && [\n            <Route path=\"/hosts/:id/details\" key=\"details\">\n              <HostDetail host={host} />\n            </Route>,\n            <Route path=\"/hosts/:id/edit\" key=\"edit\">\n              <HostEdit host={host} />\n            </Route>,\n            <Route key=\"facts\" path=\"/hosts/:id/facts\">\n              <HostFacts host={host} />\n            </Route>,\n            <Route path=\"/hosts/:id/groups\" key=\"groups\">\n              <HostGroups host={host} />\n            </Route>,\n            <Route path=\"/hosts/:id/jobs\" key=\"jobs\">\n              <JobList defaultParams={{ job__hosts: host.id }} />\n            </Route>,\n          ]}\n          <Route key=\"not-found\" path=\"*\">\n            <ContentError isNotFound>\n              <Link to={`${match.url}/details`}>{t`View Host Details`}</Link>\n            </ContentError>\n          </Route>\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default Host;\nexport { Host as _Host };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}