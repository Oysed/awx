{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{useField,useFormikContext}from'formik';import getDocsBaseUrl from'util/getDocsBaseUrl';import{useConfig}from'contexts/Config';import CredentialLookup from'components/Lookup/CredentialLookup';import{required}from'util/validators';import{OptionsField,VerbosityField,EnabledVarField,EnabledValueField,HostFilterField,SourceVarsField}from'./SharedFields';import getHelpText from'../Inventory.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ControllerSubForm=function ControllerSubForm(_ref){var autoPopulateCredential=_ref.autoPopulateCredential;var helpText=getHelpText();var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched;var _useField=useField('credential'),_useField2=_slicedToArray(_useField,3),credentialField=_useField2[0],credentialMeta=_useField2[1],credentialHelpers=_useField2[2];var config=useConfig();var handleCredentialUpdate=useCallback(function(value){setFieldValue('credential',value);setFieldTouched('credential',true,false);},[setFieldValue,setFieldTouched]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CredentialLookup,{credentialTypeNamespace:\"controller\",label:/*i18n*/i18n._(\"Credential\"),helperTextInvalid:credentialMeta.error,isValid:!credentialMeta.touched||!credentialMeta.error,onBlur:function onBlur(){return credentialHelpers.setTouched();},onChange:handleCredentialUpdate,value:credentialField.value,required:true,autoPopulate:autoPopulateCredential,validate:required(/*i18n*/i18n._(\"Select a value for this field\"))}),/*#__PURE__*/_jsx(VerbosityField,{}),/*#__PURE__*/_jsx(HostFilterField,{}),/*#__PURE__*/_jsx(EnabledVarField,{}),/*#__PURE__*/_jsx(EnabledValueField,{}),/*#__PURE__*/_jsx(OptionsField,{}),/*#__PURE__*/_jsx(SourceVarsField,{popoverContent:helpText.sourceVars(getDocsBaseUrl(config),'controller')})]});};export default ControllerSubForm;","map":{"version":3,"names":["React","useCallback","useField","useFormikContext","getDocsBaseUrl","useConfig","CredentialLookup","required","OptionsField","VerbosityField","EnabledVarField","EnabledValueField","HostFilterField","SourceVarsField","getHelpText","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ControllerSubForm","_ref","autoPopulateCredential","helpText","_useFormikContext","setFieldValue","setFieldTouched","_useField","_useField2","_slicedToArray","credentialField","credentialMeta","credentialHelpers","config","handleCredentialUpdate","value","children","credentialTypeNamespace","label","i18n","_","helperTextInvalid","error","isValid","touched","onBlur","setTouched","onChange","autoPopulate","validate","popoverContent","sourceVars"],"sources":["/awx_devel/awx/ui/src/screens/Inventory/shared/InventorySourceSubForms/ControllerSubForm.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { useField, useFormikContext } from 'formik';\n\nimport { t } from '@lingui/macro';\nimport getDocsBaseUrl from 'util/getDocsBaseUrl';\nimport { useConfig } from 'contexts/Config';\nimport CredentialLookup from 'components/Lookup/CredentialLookup';\nimport { required } from 'util/validators';\nimport {\n  OptionsField,\n  VerbosityField,\n  EnabledVarField,\n  EnabledValueField,\n  HostFilterField,\n  SourceVarsField,\n} from './SharedFields';\nimport getHelpText from '../Inventory.helptext';\n\nconst ControllerSubForm = ({ autoPopulateCredential }) => {\n  const helpText = getHelpText();\n  const { setFieldValue, setFieldTouched } = useFormikContext();\n  const [credentialField, credentialMeta, credentialHelpers] =\n    useField('credential');\n  const config = useConfig();\n  const handleCredentialUpdate = useCallback(\n    (value) => {\n      setFieldValue('credential', value);\n      setFieldTouched('credential', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  return (\n    <>\n      <CredentialLookup\n        credentialTypeNamespace=\"controller\"\n        label={t`Credential`}\n        helperTextInvalid={credentialMeta.error}\n        isValid={!credentialMeta.touched || !credentialMeta.error}\n        onBlur={() => credentialHelpers.setTouched()}\n        onChange={handleCredentialUpdate}\n        value={credentialField.value}\n        required\n        autoPopulate={autoPopulateCredential}\n        validate={required(t`Select a value for this field`)}\n      />\n      <VerbosityField />\n      <HostFilterField />\n      <EnabledVarField />\n      <EnabledValueField />\n      <OptionsField />\n      <SourceVarsField\n        popoverContent={helpText.sourceVars(\n          getDocsBaseUrl(config),\n          'controller'\n        )}\n      />\n    </>\n  );\n};\n\nexport default ControllerSubForm;\n"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,KAAQ,OAAO,CAC1C,OAASC,QAAQ,CAAEC,gBAAgB,KAAQ,QAAQ,CAGnD,MAAO,CAAAC,cAAc,KAAM,qBAAqB,CAChD,OAASC,SAAS,KAAQ,iBAAiB,CAC3C,MAAO,CAAAC,gBAAgB,KAAM,oCAAoC,CACjE,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OACEC,YAAY,CACZC,cAAc,CACdC,eAAe,CACfC,iBAAiB,CACjBC,eAAe,CACfC,eAAe,KACV,gBAAgB,CACvB,MAAO,CAAAC,WAAW,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,GAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAAC,IAAA,CAAmC,IAA7B,CAAAC,sBAAsB,CAAAD,IAAA,CAAtBC,sBAAsB,CACjD,GAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,IAAAW,iBAAA,CAA2CtB,gBAAgB,CAAC,CAAC,CAArDuB,aAAa,CAAAD,iBAAA,CAAbC,aAAa,CAAEC,eAAe,CAAAF,iBAAA,CAAfE,eAAe,CACtC,IAAAC,SAAA,CACE1B,QAAQ,CAAC,YAAY,CAAC,CAAA2B,UAAA,CAAAC,cAAA,CAAAF,SAAA,IADjBG,eAAe,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAAEI,iBAAiB,CAAAJ,UAAA,IAEzD,GAAM,CAAAK,MAAM,CAAG7B,SAAS,CAAC,CAAC,CAC1B,GAAM,CAAA8B,sBAAsB,CAAGlC,WAAW,CACxC,SAACmC,KAAK,CAAK,CACTV,aAAa,CAAC,YAAY,CAAEU,KAAK,CAAC,CAClCT,eAAe,CAAC,YAAY,CAAE,IAAI,CAAE,KAAK,CAAC,CAC5C,CAAC,CACD,CAACD,aAAa,CAAEC,eAAe,CACjC,CAAC,CAED,mBACEP,KAAA,CAAAF,SAAA,EAAAmB,QAAA,eACErB,IAAA,CAACV,gBAAgB,EACfgC,uBAAuB,CAAC,YAAY,CACpCC,KAAK,SAAEC,IAAA,CAAAC,CAAA,aAAY,CAAE,CACrBC,iBAAiB,CAAEV,cAAc,CAACW,KAAM,CACxCC,OAAO,CAAE,CAACZ,cAAc,CAACa,OAAO,EAAI,CAACb,cAAc,CAACW,KAAM,CAC1DG,MAAM,CAAE,SAAAA,OAAA,QAAM,CAAAb,iBAAiB,CAACc,UAAU,CAAC,CAAC,EAAC,CAC7CC,QAAQ,CAAEb,sBAAuB,CACjCC,KAAK,CAAEL,eAAe,CAACK,KAAM,CAC7B7B,QAAQ,MACR0C,YAAY,CAAE1B,sBAAuB,CACrC2B,QAAQ,CAAE3C,QAAQ,SAACiC,IAAA,CAAAC,CAAA,gCAA+B,CAAC,CAAE,CACtD,CAAC,cACFzB,IAAA,CAACP,cAAc,GAAE,CAAC,cAClBO,IAAA,CAACJ,eAAe,GAAE,CAAC,cACnBI,IAAA,CAACN,eAAe,GAAE,CAAC,cACnBM,IAAA,CAACL,iBAAiB,GAAE,CAAC,cACrBK,IAAA,CAACR,YAAY,GAAE,CAAC,cAChBQ,IAAA,CAACH,eAAe,EACdsC,cAAc,CAAE3B,QAAQ,CAAC4B,UAAU,CACjChD,cAAc,CAAC8B,MAAM,CAAC,CACtB,YACF,CAAE,CACH,CAAC,EACF,CAAC,CAEP,CAAC,CAED,cAAe,CAAAb,iBAAiB"},"metadata":{},"sourceType":"module"}