{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{i18n}from\"@lingui/core\";export function initReducer(){return{addLinkSourceNode:null,addLinkTargetNode:null,addNodeSource:null,addNodeTarget:null,addingLink:false,contentError:null,defaultOrganization:null,isLoading:true,linkToDelete:null,linkToEdit:null,links:[],nextNodeId:0,nodePositions:null,nodes:[],nodeToDelete:null,nodeToEdit:null,nodeToView:null,showDeleteAllNodesModal:false,showLegend:false,showTools:false,showUnsavedChangesModal:false,unsavedChanges:false};}export default function visualizerReducer(state,action){switch(action.type){case'CREATE_LINK':return createLink(state,action.linkType);case'CREATE_NODE':return createNode(state,action.node);case'CANCEL_LINK':case'CANCEL_LINK_MODAL':return cancelLink(state);case'CANCEL_NODE_MODAL':return _objectSpread(_objectSpread({},state),{},{addNodeSource:null,addNodeTarget:null,nodeToEdit:null});case'DELETE_ALL_NODES':return deleteAllNodes(state);case'DELETE_LINK':return deleteLink(state);case'DELETE_NODE':return deleteNode(state);case'GENERATE_NODES_AND_LINKS':return generateNodesAndLinks(state,action.nodes);case'RESET':return initReducer();case'SELECT_SOURCE_FOR_LINKING':return selectSourceForLinking(state,action.node);case'SET_ADD_LINK_TARGET_NODE':return _objectSpread(_objectSpread({},state),{},{addLinkTargetNode:action.value});case'SET_CONTENT_ERROR':return _objectSpread(_objectSpread({},state),{},{contentError:action.value});case'SET_DEFAULT_ORGANIZATION':return _objectSpread(_objectSpread({},state),{},{defaultOrganization:action.value});case'SET_IS_LOADING':return _objectSpread(_objectSpread({},state),{},{isLoading:action.value});case'SET_LINK_TO_DELETE':return _objectSpread(_objectSpread({},state),{},{linkToDelete:action.value});case'SET_LINK_TO_EDIT':return _objectSpread(_objectSpread({},state),{},{linkToEdit:action.value});case'SET_NODES':return _objectSpread(_objectSpread({},state),{},{nodes:action.value});case'SET_NODE_POSITIONS':return _objectSpread(_objectSpread({},state),{},{nodePositions:action.value});case'SET_NODE_TO_DELETE':return _objectSpread(_objectSpread({},state),{},{nodeToDelete:action.value});case'SET_NODE_TO_EDIT':return _objectSpread(_objectSpread({},state),{},{nodeToEdit:action.value});case'SET_NODE_TO_VIEW':return _objectSpread(_objectSpread({},state),{},{nodeToView:action.value});case'SET_SHOW_DELETE_ALL_NODES_MODAL':return _objectSpread(_objectSpread({},state),{},{showDeleteAllNodesModal:action.value});case'START_ADD_NODE':return _objectSpread(_objectSpread({},state),{},{addNodeSource:action.sourceNodeId,addNodeTarget:action.targetNodeId||null});case'START_DELETE_LINK':return startDeleteLink(state,action.link);case'TOGGLE_DELETE_ALL_NODES_MODAL':return toggleDeleteAllNodesModal(state);case'TOGGLE_LEGEND':return toggleLegend(state);case'TOGGLE_TOOLS':return toggleTools(state);case'TOGGLE_UNSAVED_CHANGES_MODAL':return toggleUnsavedChangesModal(state);case'UPDATE_LINK':return updateLink(state,action.linkType);case'UPDATE_NODE':return updateNode(state,action.node);case'REFRESH_NODE':return refreshNode(state,action.node);default:throw new Error(\"Unrecognized action type: \".concat(action.type));}}function createLink(state,linkType){var addLinkSourceNode=state.addLinkSourceNode,addLinkTargetNode=state.addLinkTargetNode,links=state.links,nodes=state.nodes;var newLinks=_toConsumableArray(links);var newNodes=_toConsumableArray(nodes);newNodes.forEach(function(node){node.isInvalidLinkTarget=false;});newLinks.push({source:{id:addLinkSourceNode.id},target:{id:addLinkTargetNode.id},linkType:linkType});newLinks.forEach(function(link,index){if(link.source.id===1&&link.target.id===addLinkTargetNode.id){newLinks.splice(index,1);}});return _objectSpread(_objectSpread({},state),{},{addLinkSourceNode:null,addLinkTargetNode:null,addingLink:false,linkToEdit:null,links:newLinks,nodes:newNodes,unsavedChanges:true});}function createNode(state,node){var addNodeSource=state.addNodeSource,addNodeTarget=state.addNodeTarget,links=state.links,nodes=state.nodes,nextNodeId=state.nextNodeId;var newNodes=_toConsumableArray(nodes);var newLinks=_toConsumableArray(links);newNodes.push({id:nextNodeId,fullUnifiedJobTemplate:node.nodeResource,isInvalidLinkTarget:false,promptValues:node.promptValues,all_parents_must_converge:node.all_parents_must_converge,identifier:node.identifier});// Ensures that root nodes appear to always run\n// after \"START\"\nif(addNodeSource===1){node.linkType='always';}newLinks.push({source:{id:addNodeSource},target:{id:nextNodeId},linkType:node.linkType});if(addNodeTarget){newLinks.forEach(function(linkToCompare){if(linkToCompare.source.id===addNodeSource&&linkToCompare.target.id===addNodeTarget){linkToCompare.source={id:nextNodeId};}});}return _objectSpread(_objectSpread({},state),{},{addNodeSource:null,addNodeTarget:null,links:newLinks,nextNodeId:nextNodeId+1,nodes:newNodes,unsavedChanges:true});}function cancelLink(state){var nodes=state.nodes;var newNodes=_toConsumableArray(nodes);newNodes.forEach(function(node){node.isInvalidLinkTarget=false;});return _objectSpread(_objectSpread({},state),{},{addLinkSourceNode:null,addLinkTargetNode:null,addingLink:false,linkToEdit:null,nodes:newNodes});}function deleteAllNodes(state){var nodes=state.nodes;return _objectSpread(_objectSpread({},state),{},{addLinkSourceNode:null,addLinkTargetNode:null,addingLink:false,links:[],nodes:nodes.map(function(node){if(node.id!==1){node.isDeleted=true;}return node;}),showDeleteAllNodesModal:false,unsavedChanges:true});}function deleteLink(state){var links=state.links,linkToDelete=state.linkToDelete;var newLinks=_toConsumableArray(links);for(var i=newLinks.length;i--;){var link=newLinks[i];if(link.source.id===linkToDelete.source.id&&link.target.id===linkToDelete.target.id){newLinks.splice(i,1);}}if(!linkToDelete.isConvergenceLink){// Add a new link from the start node to the orphaned node\nnewLinks.push({source:{id:1},target:{id:linkToDelete.target.id},linkType:'always'});}return _objectSpread(_objectSpread({},state),{},{links:newLinks,linkToDelete:null,unsavedChanges:true});}function addLinksFromParentsToChildren(parents,children,newLinks,linkParentMapping){parents.forEach(function(parentId){children.forEach(function(child){if(parentId===1){// We only want to create a link from the start node to this node if it\n// doesn't have any other parents\nif(linkParentMapping[child.id].length===1){newLinks.push({source:{id:parentId},target:{id:child.id},linkType:'always'});}}else if(!linkParentMapping[child.id].includes(parentId)){newLinks.push({source:{id:parentId},target:{id:child.id},linkType:child.linkType});}});});}function removeLinksFromDeletedNode(nodeId,newLinks,linkParentMapping,children,parents){for(var i=newLinks.length;i--;){var link=newLinks[i];if(!linkParentMapping[link.target.id]){linkParentMapping[link.target.id]=[];}linkParentMapping[link.target.id].push(link.source.id);if(link.source.id===nodeId||link.target.id===nodeId){if(link.source.id===nodeId){children.push({id:link.target.id,linkType:link.linkType});}else if(link.target.id===nodeId){parents.push(link.source.id);}newLinks.splice(i,1);}}}function deleteNode(state){var links=state.links,nodes=state.nodes,nodeToDelete=state.nodeToDelete;var nodeId=nodeToDelete.id;var newNodes=_toConsumableArray(nodes);var newLinks=_toConsumableArray(links);newNodes.find(function(node){return node.id===nodeToDelete.id;}).isDeleted=true;// Update the links\nvar parents=[];var children=[];var linkParentMapping={};removeLinksFromDeletedNode(nodeId,newLinks,linkParentMapping,children,parents);addLinksFromParentsToChildren(parents,children,newLinks,linkParentMapping);return _objectSpread(_objectSpread({},state),{},{links:newLinks,nodeToDelete:null,nodes:newNodes,unsavedChanges:true});}function generateNodes(workflowNodes){var allNodeIds=[];var chartNodeIdToIndexMapping={};var nodeIdToChartNodeIdMapping={};var nodeIdCounter=2;var arrayOfNodesForChart=[{id:1,fullUnifiedJobTemplate:{name:/*i18n*/i18n._(\"START\")}}];workflowNodes.forEach(function(node){var _node$summary_fields,_node$summary_fields$;node.workflowMakerNodeId=nodeIdCounter;var nodeObj={id:nodeIdCounter,originalNodeObject:node};if(((_node$summary_fields=node.summary_fields)===null||_node$summary_fields===void 0?void 0:(_node$summary_fields$=_node$summary_fields.unified_job_template)===null||_node$summary_fields$===void 0?void 0:_node$summary_fields$.unified_job_type)==='workflow_approval'){nodeObj.fullUnifiedJobTemplate=_objectSpread(_objectSpread({},node.summary_fields.unified_job_template),{},{type:'workflow_approval_template'});}arrayOfNodesForChart.push(nodeObj);allNodeIds.push(node.id);nodeIdToChartNodeIdMapping[node.id]=node.workflowMakerNodeId;chartNodeIdToIndexMapping[nodeIdCounter]=nodeIdCounter-1;nodeIdCounter++;});return[arrayOfNodesForChart,allNodeIds,nodeIdToChartNodeIdMapping,chartNodeIdToIndexMapping,nodeIdCounter];}function generateLinks(workflowNodes,chartNodeIdToIndexMapping,nodeIdToChartNodeIdMapping,arrayOfNodesForChart){var arrayOfLinksForChart=[];var nonRootNodeIds=[];workflowNodes.forEach(function(node){var sourceIndex=chartNodeIdToIndexMapping[node.workflowMakerNodeId];node.success_nodes.forEach(function(nodeId){var targetIndex=chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[nodeId]];arrayOfLinksForChart.push({source:arrayOfNodesForChart[sourceIndex],target:arrayOfNodesForChart[targetIndex],linkType:'success'});nonRootNodeIds.push(nodeId);});node.failure_nodes.forEach(function(nodeId){var targetIndex=chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[nodeId]];arrayOfLinksForChart.push({source:arrayOfNodesForChart[sourceIndex],target:arrayOfNodesForChart[targetIndex],linkType:'failure'});nonRootNodeIds.push(nodeId);});node.always_nodes.forEach(function(nodeId){var targetIndex=chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[nodeId]];arrayOfLinksForChart.push({source:arrayOfNodesForChart[sourceIndex],target:arrayOfNodesForChart[targetIndex],linkType:'always'});nonRootNodeIds.push(nodeId);});});return[arrayOfLinksForChart,nonRootNodeIds];}function generateNodesAndLinks(state,workflowNodes){var _generateNodes=generateNodes(workflowNodes),_generateNodes2=_slicedToArray(_generateNodes,5),arrayOfNodesForChart=_generateNodes2[0],allNodeIds=_generateNodes2[1],nodeIdToChartNodeIdMapping=_generateNodes2[2],chartNodeIdToIndexMapping=_generateNodes2[3],nodeIdCounter=_generateNodes2[4];var _generateLinks=generateLinks(workflowNodes,chartNodeIdToIndexMapping,nodeIdToChartNodeIdMapping,arrayOfNodesForChart),_generateLinks2=_slicedToArray(_generateLinks,2),arrayOfLinksForChart=_generateLinks2[0],nonRootNodeIds=_generateLinks2[1];var uniqueNonRootNodeIds=Array.from(new Set(nonRootNodeIds));var rootNodes=allNodeIds.filter(function(nodeId){return!uniqueNonRootNodeIds.includes(nodeId);});rootNodes.forEach(function(rootNodeId){var targetIndex=chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[rootNodeId]];arrayOfLinksForChart.push({source:arrayOfNodesForChart[0],target:arrayOfNodesForChart[targetIndex],linkType:'always'});});return _objectSpread(_objectSpread({},state),{},{links:arrayOfLinksForChart,nodes:arrayOfNodesForChart,nextNodeId:nodeIdCounter});}function selectSourceForLinking(state,sourceNode){var links=state.links,nodes=state.nodes;var newNodes=_toConsumableArray(nodes);var parentMap={};var invalidLinkTargetIds=[];// Find and mark any ancestors as disabled to prevent cycles\nlinks.forEach(function(link){// id=1 is our artificial root node so we don't care about that\nif(link.source.id===1){return;}if(link.source.id===sourceNode.id){// Disables direct children from the add link process\ninvalidLinkTargetIds.push(link.target.id);}if(!parentMap[link.target.id]){parentMap[link.target.id]={parents:[],traversed:false};}parentMap[link.target.id].parents.push(link.source.id);});var getAncestors=function getAncestors(id){if(parentMap[id]&&!parentMap[id].traversed){parentMap[id].parents.forEach(function(parentId){invalidLinkTargetIds.push(parentId);getAncestors(parentId);});parentMap[id].traversed=true;}};getAncestors(sourceNode.id);// Filter out the duplicates\ninvalidLinkTargetIds.filter(function(element,index,array){return index===array.indexOf(element);}).forEach(function(ancestorId){newNodes.forEach(function(node){if(node.id===ancestorId){node.isInvalidLinkTarget=true;}});});return _objectSpread(_objectSpread({},state),{},{addLinkSourceNode:sourceNode,addingLink:true,nodes:newNodes});}function startDeleteLink(state,link){var links=state.links;var parentMap={};links.forEach(function(existingLink){if(!parentMap[existingLink.target.id]){parentMap[existingLink.target.id]=[];}parentMap[existingLink.target.id].push(existingLink.source.id);});link.isConvergenceLink=parentMap[link.target.id].length>1;return _objectSpread(_objectSpread({},state),{},{linkToDelete:link});}function toggleDeleteAllNodesModal(state){var showDeleteAllNodesModal=state.showDeleteAllNodesModal;return _objectSpread(_objectSpread({},state),{},{showDeleteAllNodesModal:!showDeleteAllNodesModal});}function toggleLegend(state){var showLegend=state.showLegend;return _objectSpread(_objectSpread({},state),{},{showLegend:!showLegend});}function toggleTools(state){var showTools=state.showTools;return _objectSpread(_objectSpread({},state),{},{showTools:!showTools});}function toggleUnsavedChangesModal(state){var showUnsavedChangesModal=state.showUnsavedChangesModal;return _objectSpread(_objectSpread({},state),{},{showUnsavedChangesModal:!showUnsavedChangesModal});}function updateLink(state,linkType){var linkToEdit=state.linkToEdit,links=state.links;var newLinks=_toConsumableArray(links);newLinks.forEach(function(link){if(link.source.id===linkToEdit.source.id&&link.target.id===linkToEdit.target.id){link.linkType=linkType;}});return _objectSpread(_objectSpread({},state),{},{linkToEdit:null,links:newLinks,unsavedChanges:true});}function updateNode(state,editedNode){var nodeToEdit=state.nodeToEdit,nodes=state.nodes;var nodeResource=editedNode.nodeResource,launchConfig=editedNode.launchConfig,promptValues=editedNode.promptValues,all_parents_must_converge=editedNode.all_parents_must_converge,identifier=editedNode.identifier;var newNodes=_toConsumableArray(nodes);var matchingNode=newNodes.find(function(node){return node.id===nodeToEdit.id;});matchingNode.all_parents_must_converge=all_parents_must_converge;matchingNode.fullUnifiedJobTemplate=nodeResource;matchingNode.isEdited=true;matchingNode.launchConfig=launchConfig;matchingNode.identifier=identifier;if(promptValues){matchingNode.promptValues=promptValues;}else{delete matchingNode.promptValues;}return _objectSpread(_objectSpread({},state),{},{nodeToEdit:null,nodes:newNodes,unsavedChanges:true});}function refreshNode(state,refreshedNode){var nodeToView=state.nodeToView,nodes=state.nodes;var newNodes=_toConsumableArray(nodes);var matchingNode=newNodes.find(function(node){return node.id===nodeToView.id;});if(refreshedNode.fullUnifiedJobTemplate){matchingNode.fullUnifiedJobTemplate=refreshedNode.fullUnifiedJobTemplate;}if(refreshedNode.originalNodeCredentials){matchingNode.originalNodeCredentials=refreshedNode.originalNodeCredentials;}return _objectSpread(_objectSpread({},state),{},{nodes:newNodes,nodeToView:matchingNode});}","map":{"version":3,"names":["initReducer","addLinkSourceNode","addLinkTargetNode","addNodeSource","addNodeTarget","addingLink","contentError","defaultOrganization","isLoading","linkToDelete","linkToEdit","links","nextNodeId","nodePositions","nodes","nodeToDelete","nodeToEdit","nodeToView","showDeleteAllNodesModal","showLegend","showTools","showUnsavedChangesModal","unsavedChanges","visualizerReducer","state","action","type","createLink","linkType","createNode","node","cancelLink","_objectSpread","deleteAllNodes","deleteLink","deleteNode","generateNodesAndLinks","selectSourceForLinking","value","sourceNodeId","targetNodeId","startDeleteLink","link","toggleDeleteAllNodesModal","toggleLegend","toggleTools","toggleUnsavedChangesModal","updateLink","updateNode","refreshNode","Error","concat","newLinks","_toConsumableArray","newNodes","forEach","isInvalidLinkTarget","push","source","id","target","index","splice","fullUnifiedJobTemplate","nodeResource","promptValues","all_parents_must_converge","identifier","linkToCompare","map","isDeleted","i","length","isConvergenceLink","addLinksFromParentsToChildren","parents","children","linkParentMapping","parentId","child","includes","removeLinksFromDeletedNode","nodeId","find","generateNodes","workflowNodes","allNodeIds","chartNodeIdToIndexMapping","nodeIdToChartNodeIdMapping","nodeIdCounter","arrayOfNodesForChart","name","i18n","_","_node$summary_fields","_node$summary_fields$","workflowMakerNodeId","nodeObj","originalNodeObject","summary_fields","unified_job_template","unified_job_type","generateLinks","arrayOfLinksForChart","nonRootNodeIds","sourceIndex","success_nodes","targetIndex","failure_nodes","always_nodes","_generateNodes","_generateNodes2","_slicedToArray","_generateLinks","_generateLinks2","uniqueNonRootNodeIds","Array","from","Set","rootNodes","filter","rootNodeId","sourceNode","parentMap","invalidLinkTargetIds","traversed","getAncestors","element","array","indexOf","ancestorId","existingLink","editedNode","launchConfig","matchingNode","isEdited","refreshedNode","originalNodeCredentials"],"sources":["/awx_devel/awx/ui/src/components/Workflow/workflowReducer.js"],"sourcesContent":["import { t } from '@lingui/macro';\n\nexport function initReducer() {\n  return {\n    addLinkSourceNode: null,\n    addLinkTargetNode: null,\n    addNodeSource: null,\n    addNodeTarget: null,\n    addingLink: false,\n    contentError: null,\n    defaultOrganization: null,\n    isLoading: true,\n    linkToDelete: null,\n    linkToEdit: null,\n    links: [],\n    nextNodeId: 0,\n    nodePositions: null,\n    nodes: [],\n    nodeToDelete: null,\n    nodeToEdit: null,\n    nodeToView: null,\n    showDeleteAllNodesModal: false,\n    showLegend: false,\n    showTools: false,\n    showUnsavedChangesModal: false,\n    unsavedChanges: false,\n  };\n}\n\nexport default function visualizerReducer(state, action) {\n  switch (action.type) {\n    case 'CREATE_LINK':\n      return createLink(state, action.linkType);\n    case 'CREATE_NODE':\n      return createNode(state, action.node);\n    case 'CANCEL_LINK':\n    case 'CANCEL_LINK_MODAL':\n      return cancelLink(state);\n    case 'CANCEL_NODE_MODAL':\n      return {\n        ...state,\n        addNodeSource: null,\n        addNodeTarget: null,\n        nodeToEdit: null,\n      };\n    case 'DELETE_ALL_NODES':\n      return deleteAllNodes(state);\n    case 'DELETE_LINK':\n      return deleteLink(state);\n    case 'DELETE_NODE':\n      return deleteNode(state);\n    case 'GENERATE_NODES_AND_LINKS':\n      return generateNodesAndLinks(state, action.nodes);\n    case 'RESET':\n      return initReducer();\n    case 'SELECT_SOURCE_FOR_LINKING':\n      return selectSourceForLinking(state, action.node);\n    case 'SET_ADD_LINK_TARGET_NODE':\n      return {\n        ...state,\n        addLinkTargetNode: action.value,\n      };\n    case 'SET_CONTENT_ERROR':\n      return {\n        ...state,\n        contentError: action.value,\n      };\n    case 'SET_DEFAULT_ORGANIZATION':\n      return {\n        ...state,\n        defaultOrganization: action.value,\n      };\n    case 'SET_IS_LOADING':\n      return {\n        ...state,\n        isLoading: action.value,\n      };\n    case 'SET_LINK_TO_DELETE':\n      return {\n        ...state,\n        linkToDelete: action.value,\n      };\n    case 'SET_LINK_TO_EDIT':\n      return {\n        ...state,\n        linkToEdit: action.value,\n      };\n    case 'SET_NODES':\n      return {\n        ...state,\n        nodes: action.value,\n      };\n    case 'SET_NODE_POSITIONS':\n      return {\n        ...state,\n        nodePositions: action.value,\n      };\n    case 'SET_NODE_TO_DELETE':\n      return {\n        ...state,\n        nodeToDelete: action.value,\n      };\n    case 'SET_NODE_TO_EDIT':\n      return {\n        ...state,\n        nodeToEdit: action.value,\n      };\n    case 'SET_NODE_TO_VIEW':\n      return {\n        ...state,\n        nodeToView: action.value,\n      };\n    case 'SET_SHOW_DELETE_ALL_NODES_MODAL':\n      return {\n        ...state,\n        showDeleteAllNodesModal: action.value,\n      };\n    case 'START_ADD_NODE':\n      return {\n        ...state,\n        addNodeSource: action.sourceNodeId,\n        addNodeTarget: action.targetNodeId || null,\n      };\n    case 'START_DELETE_LINK':\n      return startDeleteLink(state, action.link);\n    case 'TOGGLE_DELETE_ALL_NODES_MODAL':\n      return toggleDeleteAllNodesModal(state);\n    case 'TOGGLE_LEGEND':\n      return toggleLegend(state);\n    case 'TOGGLE_TOOLS':\n      return toggleTools(state);\n    case 'TOGGLE_UNSAVED_CHANGES_MODAL':\n      return toggleUnsavedChangesModal(state);\n    case 'UPDATE_LINK':\n      return updateLink(state, action.linkType);\n    case 'UPDATE_NODE':\n      return updateNode(state, action.node);\n    case 'REFRESH_NODE':\n      return refreshNode(state, action.node);\n    default:\n      throw new Error(`Unrecognized action type: ${action.type}`);\n  }\n}\n\nfunction createLink(state, linkType) {\n  const { addLinkSourceNode, addLinkTargetNode, links, nodes } = state;\n  const newLinks = [...links];\n  const newNodes = [...nodes];\n\n  newNodes.forEach((node) => {\n    node.isInvalidLinkTarget = false;\n  });\n\n  newLinks.push({\n    source: {\n      id: addLinkSourceNode.id,\n    },\n    target: {\n      id: addLinkTargetNode.id,\n    },\n    linkType,\n  });\n\n  newLinks.forEach((link, index) => {\n    if (link.source.id === 1 && link.target.id === addLinkTargetNode.id) {\n      newLinks.splice(index, 1);\n    }\n  });\n\n  return {\n    ...state,\n    addLinkSourceNode: null,\n    addLinkTargetNode: null,\n    addingLink: false,\n    linkToEdit: null,\n    links: newLinks,\n    nodes: newNodes,\n    unsavedChanges: true,\n  };\n}\n\nfunction createNode(state, node) {\n  const { addNodeSource, addNodeTarget, links, nodes, nextNodeId } = state;\n  const newNodes = [...nodes];\n  const newLinks = [...links];\n\n  newNodes.push({\n    id: nextNodeId,\n    fullUnifiedJobTemplate: node.nodeResource,\n    isInvalidLinkTarget: false,\n    promptValues: node.promptValues,\n    all_parents_must_converge: node.all_parents_must_converge,\n    identifier: node.identifier,\n  });\n\n  // Ensures that root nodes appear to always run\n  // after \"START\"\n  if (addNodeSource === 1) {\n    node.linkType = 'always';\n  }\n\n  newLinks.push({\n    source: {\n      id: addNodeSource,\n    },\n    target: {\n      id: nextNodeId,\n    },\n    linkType: node.linkType,\n  });\n\n  if (addNodeTarget) {\n    newLinks.forEach((linkToCompare) => {\n      if (\n        linkToCompare.source.id === addNodeSource &&\n        linkToCompare.target.id === addNodeTarget\n      ) {\n        linkToCompare.source = {\n          id: nextNodeId,\n        };\n      }\n    });\n  }\n\n  return {\n    ...state,\n    addNodeSource: null,\n    addNodeTarget: null,\n    links: newLinks,\n    nextNodeId: nextNodeId + 1,\n    nodes: newNodes,\n    unsavedChanges: true,\n  };\n}\n\nfunction cancelLink(state) {\n  const { nodes } = state;\n  const newNodes = [...nodes];\n\n  newNodes.forEach((node) => {\n    node.isInvalidLinkTarget = false;\n  });\n\n  return {\n    ...state,\n    addLinkSourceNode: null,\n    addLinkTargetNode: null,\n    addingLink: false,\n    linkToEdit: null,\n    nodes: newNodes,\n  };\n}\n\nfunction deleteAllNodes(state) {\n  const { nodes } = state;\n  return {\n    ...state,\n    addLinkSourceNode: null,\n    addLinkTargetNode: null,\n    addingLink: false,\n    links: [],\n    nodes: nodes.map((node) => {\n      if (node.id !== 1) {\n        node.isDeleted = true;\n      }\n\n      return node;\n    }),\n    showDeleteAllNodesModal: false,\n    unsavedChanges: true,\n  };\n}\n\nfunction deleteLink(state) {\n  const { links, linkToDelete } = state;\n  const newLinks = [...links];\n\n  for (let i = newLinks.length; i--; ) {\n    const link = newLinks[i];\n\n    if (\n      link.source.id === linkToDelete.source.id &&\n      link.target.id === linkToDelete.target.id\n    ) {\n      newLinks.splice(i, 1);\n    }\n  }\n\n  if (!linkToDelete.isConvergenceLink) {\n    // Add a new link from the start node to the orphaned node\n    newLinks.push({\n      source: {\n        id: 1,\n      },\n      target: {\n        id: linkToDelete.target.id,\n      },\n      linkType: 'always',\n    });\n  }\n\n  return {\n    ...state,\n    links: newLinks,\n    linkToDelete: null,\n    unsavedChanges: true,\n  };\n}\n\nfunction addLinksFromParentsToChildren(\n  parents,\n  children,\n  newLinks,\n  linkParentMapping\n) {\n  parents.forEach((parentId) => {\n    children.forEach((child) => {\n      if (parentId === 1) {\n        // We only want to create a link from the start node to this node if it\n        // doesn't have any other parents\n        if (linkParentMapping[child.id].length === 1) {\n          newLinks.push({\n            source: {\n              id: parentId,\n            },\n            target: {\n              id: child.id,\n            },\n            linkType: 'always',\n          });\n        }\n      } else if (!linkParentMapping[child.id].includes(parentId)) {\n        newLinks.push({\n          source: {\n            id: parentId,\n          },\n          target: {\n            id: child.id,\n          },\n          linkType: child.linkType,\n        });\n      }\n    });\n  });\n}\n\nfunction removeLinksFromDeletedNode(\n  nodeId,\n  newLinks,\n  linkParentMapping,\n  children,\n  parents\n) {\n  for (let i = newLinks.length; i--; ) {\n    const link = newLinks[i];\n\n    if (!linkParentMapping[link.target.id]) {\n      linkParentMapping[link.target.id] = [];\n    }\n\n    linkParentMapping[link.target.id].push(link.source.id);\n\n    if (link.source.id === nodeId || link.target.id === nodeId) {\n      if (link.source.id === nodeId) {\n        children.push({\n          id: link.target.id,\n          linkType: link.linkType,\n        });\n      } else if (link.target.id === nodeId) {\n        parents.push(link.source.id);\n      }\n      newLinks.splice(i, 1);\n    }\n  }\n}\n\nfunction deleteNode(state) {\n  const { links, nodes, nodeToDelete } = state;\n\n  const nodeId = nodeToDelete.id;\n  const newNodes = [...nodes];\n  const newLinks = [...links];\n\n  newNodes.find((node) => node.id === nodeToDelete.id).isDeleted = true;\n\n  // Update the links\n  const parents = [];\n  const children = [];\n  const linkParentMapping = {};\n\n  removeLinksFromDeletedNode(\n    nodeId,\n    newLinks,\n    linkParentMapping,\n    children,\n    parents\n  );\n\n  addLinksFromParentsToChildren(parents, children, newLinks, linkParentMapping);\n\n  return {\n    ...state,\n    links: newLinks,\n    nodeToDelete: null,\n    nodes: newNodes,\n    unsavedChanges: true,\n  };\n}\n\nfunction generateNodes(workflowNodes) {\n  const allNodeIds = [];\n  const chartNodeIdToIndexMapping = {};\n  const nodeIdToChartNodeIdMapping = {};\n  let nodeIdCounter = 2;\n  const arrayOfNodesForChart = [\n    {\n      id: 1,\n      fullUnifiedJobTemplate: {\n        name: t`START`,\n      },\n    },\n  ];\n  workflowNodes.forEach((node) => {\n    node.workflowMakerNodeId = nodeIdCounter;\n\n    const nodeObj = {\n      id: nodeIdCounter,\n      originalNodeObject: node,\n    };\n\n    if (\n      node.summary_fields?.unified_job_template?.unified_job_type ===\n      'workflow_approval'\n    ) {\n      nodeObj.fullUnifiedJobTemplate = {\n        ...node.summary_fields.unified_job_template,\n        type: 'workflow_approval_template',\n      };\n    }\n\n    arrayOfNodesForChart.push(nodeObj);\n    allNodeIds.push(node.id);\n    nodeIdToChartNodeIdMapping[node.id] = node.workflowMakerNodeId;\n    chartNodeIdToIndexMapping[nodeIdCounter] = nodeIdCounter - 1;\n    nodeIdCounter++;\n  });\n\n  return [\n    arrayOfNodesForChart,\n    allNodeIds,\n    nodeIdToChartNodeIdMapping,\n    chartNodeIdToIndexMapping,\n    nodeIdCounter,\n  ];\n}\n\nfunction generateLinks(\n  workflowNodes,\n  chartNodeIdToIndexMapping,\n  nodeIdToChartNodeIdMapping,\n  arrayOfNodesForChart\n) {\n  const arrayOfLinksForChart = [];\n  const nonRootNodeIds = [];\n  workflowNodes.forEach((node) => {\n    const sourceIndex = chartNodeIdToIndexMapping[node.workflowMakerNodeId];\n    node.success_nodes.forEach((nodeId) => {\n      const targetIndex =\n        chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[nodeId]];\n      arrayOfLinksForChart.push({\n        source: arrayOfNodesForChart[sourceIndex],\n        target: arrayOfNodesForChart[targetIndex],\n        linkType: 'success',\n      });\n      nonRootNodeIds.push(nodeId);\n    });\n    node.failure_nodes.forEach((nodeId) => {\n      const targetIndex =\n        chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[nodeId]];\n      arrayOfLinksForChart.push({\n        source: arrayOfNodesForChart[sourceIndex],\n        target: arrayOfNodesForChart[targetIndex],\n        linkType: 'failure',\n      });\n      nonRootNodeIds.push(nodeId);\n    });\n    node.always_nodes.forEach((nodeId) => {\n      const targetIndex =\n        chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[nodeId]];\n      arrayOfLinksForChart.push({\n        source: arrayOfNodesForChart[sourceIndex],\n        target: arrayOfNodesForChart[targetIndex],\n        linkType: 'always',\n      });\n      nonRootNodeIds.push(nodeId);\n    });\n  });\n\n  return [arrayOfLinksForChart, nonRootNodeIds];\n}\n\nfunction generateNodesAndLinks(state, workflowNodes) {\n  const [\n    arrayOfNodesForChart,\n    allNodeIds,\n    nodeIdToChartNodeIdMapping,\n    chartNodeIdToIndexMapping,\n    nodeIdCounter,\n  ] = generateNodes(workflowNodes);\n  const [arrayOfLinksForChart, nonRootNodeIds] = generateLinks(\n    workflowNodes,\n    chartNodeIdToIndexMapping,\n    nodeIdToChartNodeIdMapping,\n    arrayOfNodesForChart\n  );\n\n  const uniqueNonRootNodeIds = Array.from(new Set(nonRootNodeIds));\n\n  const rootNodes = allNodeIds.filter(\n    (nodeId) => !uniqueNonRootNodeIds.includes(nodeId)\n  );\n\n  rootNodes.forEach((rootNodeId) => {\n    const targetIndex =\n      chartNodeIdToIndexMapping[nodeIdToChartNodeIdMapping[rootNodeId]];\n    arrayOfLinksForChart.push({\n      source: arrayOfNodesForChart[0],\n      target: arrayOfNodesForChart[targetIndex],\n      linkType: 'always',\n    });\n  });\n\n  return {\n    ...state,\n    links: arrayOfLinksForChart,\n    nodes: arrayOfNodesForChart,\n    nextNodeId: nodeIdCounter,\n  };\n}\n\nfunction selectSourceForLinking(state, sourceNode) {\n  const { links, nodes } = state;\n  const newNodes = [...nodes];\n  const parentMap = {};\n  const invalidLinkTargetIds = [];\n  // Find and mark any ancestors as disabled to prevent cycles\n  links.forEach((link) => {\n    // id=1 is our artificial root node so we don't care about that\n    if (link.source.id === 1) {\n      return;\n    }\n    if (link.source.id === sourceNode.id) {\n      // Disables direct children from the add link process\n      invalidLinkTargetIds.push(link.target.id);\n    }\n    if (!parentMap[link.target.id]) {\n      parentMap[link.target.id] = {\n        parents: [],\n        traversed: false,\n      };\n    }\n    parentMap[link.target.id].parents.push(link.source.id);\n  });\n\n  const getAncestors = (id) => {\n    if (parentMap[id] && !parentMap[id].traversed) {\n      parentMap[id].parents.forEach((parentId) => {\n        invalidLinkTargetIds.push(parentId);\n        getAncestors(parentId);\n      });\n      parentMap[id].traversed = true;\n    }\n  };\n\n  getAncestors(sourceNode.id);\n\n  // Filter out the duplicates\n  invalidLinkTargetIds\n    .filter((element, index, array) => index === array.indexOf(element))\n    .forEach((ancestorId) => {\n      newNodes.forEach((node) => {\n        if (node.id === ancestorId) {\n          node.isInvalidLinkTarget = true;\n        }\n      });\n    });\n\n  return {\n    ...state,\n    addLinkSourceNode: sourceNode,\n    addingLink: true,\n    nodes: newNodes,\n  };\n}\n\nfunction startDeleteLink(state, link) {\n  const { links } = state;\n  const parentMap = {};\n  links.forEach((existingLink) => {\n    if (!parentMap[existingLink.target.id]) {\n      parentMap[existingLink.target.id] = [];\n    }\n    parentMap[existingLink.target.id].push(existingLink.source.id);\n  });\n\n  link.isConvergenceLink = parentMap[link.target.id].length > 1;\n\n  return {\n    ...state,\n    linkToDelete: link,\n  };\n}\n\nfunction toggleDeleteAllNodesModal(state) {\n  const { showDeleteAllNodesModal } = state;\n  return {\n    ...state,\n    showDeleteAllNodesModal: !showDeleteAllNodesModal,\n  };\n}\n\nfunction toggleLegend(state) {\n  const { showLegend } = state;\n  return {\n    ...state,\n    showLegend: !showLegend,\n  };\n}\n\nfunction toggleTools(state) {\n  const { showTools } = state;\n  return {\n    ...state,\n    showTools: !showTools,\n  };\n}\n\nfunction toggleUnsavedChangesModal(state) {\n  const { showUnsavedChangesModal } = state;\n  return {\n    ...state,\n    showUnsavedChangesModal: !showUnsavedChangesModal,\n  };\n}\n\nfunction updateLink(state, linkType) {\n  const { linkToEdit, links } = state;\n  const newLinks = [...links];\n\n  newLinks.forEach((link) => {\n    if (\n      link.source.id === linkToEdit.source.id &&\n      link.target.id === linkToEdit.target.id\n    ) {\n      link.linkType = linkType;\n    }\n  });\n\n  return {\n    ...state,\n    linkToEdit: null,\n    links: newLinks,\n    unsavedChanges: true,\n  };\n}\n\nfunction updateNode(state, editedNode) {\n  const { nodeToEdit, nodes } = state;\n  const {\n    nodeResource,\n    launchConfig,\n    promptValues,\n    all_parents_must_converge,\n    identifier,\n  } = editedNode;\n  const newNodes = [...nodes];\n\n  const matchingNode = newNodes.find((node) => node.id === nodeToEdit.id);\n  matchingNode.all_parents_must_converge = all_parents_must_converge;\n  matchingNode.fullUnifiedJobTemplate = nodeResource;\n  matchingNode.isEdited = true;\n  matchingNode.launchConfig = launchConfig;\n  matchingNode.identifier = identifier;\n\n  if (promptValues) {\n    matchingNode.promptValues = promptValues;\n  } else {\n    delete matchingNode.promptValues;\n  }\n\n  return {\n    ...state,\n    nodeToEdit: null,\n    nodes: newNodes,\n    unsavedChanges: true,\n  };\n}\n\nfunction refreshNode(state, refreshedNode) {\n  const { nodeToView, nodes } = state;\n  const newNodes = [...nodes];\n\n  const matchingNode = newNodes.find((node) => node.id === nodeToView.id);\n\n  if (refreshedNode.fullUnifiedJobTemplate) {\n    matchingNode.fullUnifiedJobTemplate = refreshedNode.fullUnifiedJobTemplate;\n  }\n\n  if (refreshedNode.originalNodeCredentials) {\n    matchingNode.originalNodeCredentials =\n      refreshedNode.originalNodeCredentials;\n  }\n\n  return {\n    ...state,\n    nodes: newNodes,\n    nodeToView: matchingNode,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}