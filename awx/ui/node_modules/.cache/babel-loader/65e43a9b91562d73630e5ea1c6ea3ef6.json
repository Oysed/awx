{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,Redirect,useRouteMatch}from'react-router-dom';import{Button}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{CardBody,CardActionsRow}from'components/Card';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import{DetailList}from'components/DetailList';import RoutedTabs from'components/RoutedTabs';import{useConfig}from'contexts/Config';import{useSettings}from'contexts/Settings';import useRequest from'hooks/useRequest';import{SettingsAPI}from'api';import{SettingDetail}from'../../shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GitHubDetail(){var _Object$values;var _useConfig=useConfig(),me=_useConfig.me;var _useSettings=useSettings(),options=_useSettings.GET;var baseURL='/settings/github';var _useRouteMatch=useRouteMatch(\"\".concat(baseURL,\"/:category/details\")),path=_useRouteMatch.path,category=_useRouteMatch.params.category;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,gitHubDefault,gitHubOrganization,gitHubTeam,gitHubEnterprise,gitHubEnterpriseOrganization,gitHubEnterpriseTeam;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([SettingsAPI.readCategory('github'),SettingsAPI.readCategory('github-org'),SettingsAPI.readCategory('github-team'),SettingsAPI.readCategory('github-enterprise'),SettingsAPI.readCategory('github-enterprise-org'),SettingsAPI.readCategory('github-enterprise-team')]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,6);gitHubDefault=_yield$Promise$all2[0].data;gitHubOrganization=_yield$Promise$all2[1].data;gitHubTeam=_yield$Promise$all2[2].data;gitHubEnterprise=_yield$Promise$all2[3].data;gitHubEnterpriseOrganization=_yield$Promise$all2[4].data;gitHubEnterpriseTeam=_yield$Promise$all2[5].data;return _context.abrupt(\"return\",{default:gitHubDefault,organization:gitHubOrganization,team:gitHubTeam,enterprise:gitHubEnterprise,enterprise_organization:gitHubEnterpriseOrganization,enterprise_team:gitHubEnterpriseTeam});case 11:case\"end\":return _context.stop();}}},_callee);})),[]),{default:null,organization:null,team:null,enterprise:null,enterprise_organization:null,enterprise_team:null}),isLoading=_useRequest.isLoading,error=_useRequest.error,request=_useRequest.request,gitHubDetails=_useRequest.result;useEffect(function(){request();},[request]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Settings\")]}),link:\"/settings\",id:99},{name:/*i18n*/i18n._(\"GitHub Default\"),link:\"\".concat(baseURL,\"/default/details\"),id:0},{name:/*i18n*/i18n._(\"GitHub Organization\"),link:\"\".concat(baseURL,\"/organization/details\"),id:1},{name:/*i18n*/i18n._(\"GitHub Team\"),link:\"\".concat(baseURL,\"/team/details\"),id:2},{name:/*i18n*/i18n._(\"GitHub Enterprise\"),link:\"\".concat(baseURL,\"/enterprise/details\"),id:3},{name:/*i18n*/i18n._(\"GitHub Enterprise Organization\"),link:\"\".concat(baseURL,\"/enterprise_organization/details\"),id:4},{name:/*i18n*/i18n._(\"GitHub Enterprise Team\"),link:\"\".concat(baseURL,\"/enterprise_team/details\"),id:5}];if(!Object.keys(gitHubDetails).includes(category)){return/*#__PURE__*/_jsx(Redirect,{from:path,to:\"\".concat(baseURL,\"/default/details\"),exact:true});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(CardBody,{children:[isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&error&&/*#__PURE__*/_jsx(ContentError,{error:error}),!isLoading&&!((_Object$values=Object.values(gitHubDetails))!==null&&_Object$values!==void 0&&_Object$values.includes(null))&&/*#__PURE__*/_jsx(DetailList,{children:Object.keys(gitHubDetails[category]).map(function(key){var record=options===null||options===void 0?void 0:options[key];return/*#__PURE__*/_jsx(SettingDetail,{id:key,helpText:record===null||record===void 0?void 0:record.help_text,label:record===null||record===void 0?void 0:record.label,type:record===null||record===void 0?void 0:record.type,unit:record===null||record===void 0?void 0:record.unit,value:gitHubDetails[category][key]},key);})}),(me===null||me===void 0?void 0:me.is_superuser)&&/*#__PURE__*/_jsx(CardActionsRow,{children:/*#__PURE__*/_jsx(Button,{ouiaId:\"github-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"Edit\"),component:Link,to:\"\".concat(baseURL,\"/\").concat(category,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")})})]})]});}export default GitHubDetail;","map":{"version":3,"names":["React","useEffect","useCallback","Link","Redirect","useRouteMatch","Button","CaretLeftIcon","CardBody","CardActionsRow","ContentError","ContentLoading","DetailList","RoutedTabs","useConfig","useSettings","useRequest","SettingsAPI","SettingDetail","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GitHubDetail","_Object$values","_useConfig","me","_useSettings","options","GET","baseURL","_useRouteMatch","concat","path","category","params","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$Promise$all","_yield$Promise$all2","gitHubDefault","gitHubOrganization","gitHubTeam","gitHubEnterprise","gitHubEnterpriseOrganization","gitHubEnterpriseTeam","wrap","_callee$","_context","prev","next","Promise","all","readCategory","sent","_slicedToArray","data","abrupt","default","organization","team","enterprise","enterprise_organization","enterprise_team","stop","isLoading","error","request","gitHubDetails","result","tabsArray","name","children","i18n","_","link","id","Object","keys","includes","from","to","exact","values","map","key","record","helpText","help_text","label","type","unit","value","is_superuser","ouiaId","component"],"sources":["/awx_devel/awx/ui/src/screens/Setting/GitHub/GitHubDetail/GitHubDetail.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { Link, Redirect, useRouteMatch } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Button } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport { DetailList } from 'components/DetailList';\nimport RoutedTabs from 'components/RoutedTabs';\nimport { useConfig } from 'contexts/Config';\nimport { useSettings } from 'contexts/Settings';\nimport useRequest from 'hooks/useRequest';\nimport { SettingsAPI } from 'api';\nimport { SettingDetail } from '../../shared';\n\nfunction GitHubDetail() {\n  const { me } = useConfig();\n  const { GET: options } = useSettings();\n\n  const baseURL = '/settings/github';\n  const {\n    path,\n    params: { category },\n  } = useRouteMatch(`${baseURL}/:category/details`);\n\n  const {\n    isLoading,\n    error,\n    request,\n    result: gitHubDetails,\n  } = useRequest(\n    useCallback(async () => {\n      const [\n        { data: gitHubDefault },\n        { data: gitHubOrganization },\n        { data: gitHubTeam },\n        { data: gitHubEnterprise },\n        { data: gitHubEnterpriseOrganization },\n        { data: gitHubEnterpriseTeam },\n      ] = await Promise.all([\n        SettingsAPI.readCategory('github'),\n        SettingsAPI.readCategory('github-org'),\n        SettingsAPI.readCategory('github-team'),\n        SettingsAPI.readCategory('github-enterprise'),\n        SettingsAPI.readCategory('github-enterprise-org'),\n        SettingsAPI.readCategory('github-enterprise-team'),\n      ]);\n      return {\n        default: gitHubDefault,\n        organization: gitHubOrganization,\n        team: gitHubTeam,\n        enterprise: gitHubEnterprise,\n        enterprise_organization: gitHubEnterpriseOrganization,\n        enterprise_team: gitHubEnterpriseTeam,\n      };\n    }, []),\n    {\n      default: null,\n      organization: null,\n      team: null,\n      enterprise: null,\n      enterprise_organization: null,\n      enterprise_team: null,\n    }\n  );\n\n  useEffect(() => {\n    request();\n  }, [request]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Settings`}\n        </>\n      ),\n      link: `/settings`,\n      id: 99,\n    },\n    {\n      name: t`GitHub Default`,\n      link: `${baseURL}/default/details`,\n      id: 0,\n    },\n    {\n      name: t`GitHub Organization`,\n      link: `${baseURL}/organization/details`,\n      id: 1,\n    },\n    {\n      name: t`GitHub Team`,\n      link: `${baseURL}/team/details`,\n      id: 2,\n    },\n    {\n      name: t`GitHub Enterprise`,\n      link: `${baseURL}/enterprise/details`,\n      id: 3,\n    },\n    {\n      name: t`GitHub Enterprise Organization`,\n      link: `${baseURL}/enterprise_organization/details`,\n      id: 4,\n    },\n    {\n      name: t`GitHub Enterprise Team`,\n      link: `${baseURL}/enterprise_team/details`,\n      id: 5,\n    },\n  ];\n\n  if (!Object.keys(gitHubDetails).includes(category)) {\n    return <Redirect from={path} to={`${baseURL}/default/details`} exact />;\n  }\n\n  return (\n    <>\n      <RoutedTabs tabsArray={tabsArray} />\n      <CardBody>\n        {isLoading && <ContentLoading />}\n        {!isLoading && error && <ContentError error={error} />}\n        {!isLoading && !Object.values(gitHubDetails)?.includes(null) && (\n          <DetailList>\n            {Object.keys(gitHubDetails[category]).map((key) => {\n              const record = options?.[key];\n              return (\n                <SettingDetail\n                  key={key}\n                  id={key}\n                  helpText={record?.help_text}\n                  label={record?.label}\n                  type={record?.type}\n                  unit={record?.unit}\n                  value={gitHubDetails[category][key]}\n                />\n              );\n            })}\n          </DetailList>\n        )}\n        {me?.is_superuser && (\n          <CardActionsRow>\n            <Button\n              ouiaId=\"github-detail-edit-button\"\n              aria-label={t`Edit`}\n              component={Link}\n              to={`${baseURL}/${category}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          </CardActionsRow>\n        )}\n      </CardBody>\n    </>\n  );\n}\n\nexport default GitHubDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}