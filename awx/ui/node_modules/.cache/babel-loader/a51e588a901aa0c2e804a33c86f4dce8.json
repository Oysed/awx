{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React from'react';import{Tr,Td}from'@patternfly/react-table';import{Link}from'react-router-dom';import{formatDateString}from'util/dates';import{ActionsTd,ActionItem}from'components/PaginatedTable';import ActivityStreamDetailButton from'./ActivityStreamDetailButton';import ActivityStreamDescription from'./ActivityStreamDescription';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ActivityStreamListItem(_ref){var streamItem=_ref.streamItem;var buildUser=function buildUser(item){var _item$summary_fields,_item$summary_fields$,_item$summary_fields2;var link;if(item!==null&&item!==void 0&&(_item$summary_fields=item.summary_fields)!==null&&_item$summary_fields!==void 0&&(_item$summary_fields$=_item$summary_fields.actor)!==null&&_item$summary_fields$!==void 0&&_item$summary_fields$.id){link=/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(item.summary_fields.actor.id,\"/details\"),children:item.summary_fields.actor.username});}else if(item!==null&&item!==void 0&&(_item$summary_fields2=item.summary_fields)!==null&&_item$summary_fields2!==void 0&&_item$summary_fields2.actor){link=/*i18n*/i18n._(\"{0} (deleted)\",{0:item.summary_fields.actor.username});}else{link=/*i18n*/i18n._(\"system\");}return link;};var labelId=\"check-action-\".concat(streamItem.id);var user=buildUser(streamItem);var description=/*#__PURE__*/_jsx(ActivityStreamDescription,{activity:streamItem});return/*#__PURE__*/_jsxs(Tr,{id:streamItem.id,ouiaId:streamItem.id,\"aria-labelledby\":labelId,children:[/*#__PURE__*/_jsx(Td,{}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Time\"),children:streamItem.timestamp?formatDateString(streamItem.timestamp):''}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Initiated By\"),children:user}),/*#__PURE__*/_jsx(Td,{id:labelId,dataLabel:/*i18n*/i18n._(\"Event\"),children:description}),/*#__PURE__*/_jsx(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),children:/*#__PURE__*/_jsx(ActionItem,{visible:true,tooltip:/*i18n*/i18n._(\"View event details\"),children:/*#__PURE__*/_jsx(ActivityStreamDetailButton,{streamItem:streamItem,user:user,description:description})})})]});}export default ActivityStreamListItem;","map":{"version":3,"names":["React","Tr","Td","Link","formatDateString","ActionsTd","ActionItem","ActivityStreamDetailButton","ActivityStreamDescription","jsx","_jsx","jsxs","_jsxs","ActivityStreamListItem","_ref","streamItem","buildUser","item","_item$summary_fields","_item$summary_fields$","_item$summary_fields2","link","summary_fields","actor","id","to","concat","children","username","i18n","_","0","labelId","user","description","activity","ouiaId","dataLabel","timestamp","visible","tooltip"],"sources":["/awx_devel/awx/ui/src/screens/ActivityStream/ActivityStreamListItem.js"],"sourcesContent":["import React from 'react';\nimport { shape } from 'prop-types';\n\nimport { Tr, Td } from '@patternfly/react-table';\nimport { t } from '@lingui/macro';\nimport { Link } from 'react-router-dom';\n\nimport { formatDateString } from 'util/dates';\nimport { ActionsTd, ActionItem } from 'components/PaginatedTable';\n\nimport ActivityStreamDetailButton from './ActivityStreamDetailButton';\nimport ActivityStreamDescription from './ActivityStreamDescription';\n\nfunction ActivityStreamListItem({ streamItem }) {\n  ActivityStreamListItem.propTypes = {\n    streamItem: shape({}).isRequired,\n  };\n\n  const buildUser = (item) => {\n    let link;\n    if (item?.summary_fields?.actor?.id) {\n      link = (\n        <Link to={`/users/${item.summary_fields.actor.id}/details`}>\n          {item.summary_fields.actor.username}\n        </Link>\n      );\n    } else if (item?.summary_fields?.actor) {\n      link = t`${item.summary_fields.actor.username} (deleted)`;\n    } else {\n      link = t`system`;\n    }\n    return link;\n  };\n\n  const labelId = `check-action-${streamItem.id}`;\n  const user = buildUser(streamItem);\n  const description = <ActivityStreamDescription activity={streamItem} />;\n\n  return (\n    <Tr id={streamItem.id} ouiaId={streamItem.id} aria-labelledby={labelId}>\n      <Td />\n      <Td dataLabel={t`Time`}>\n        {streamItem.timestamp ? formatDateString(streamItem.timestamp) : ''}\n      </Td>\n      <Td dataLabel={t`Initiated By`}>{user}</Td>\n      <Td id={labelId} dataLabel={t`Event`}>\n        {description}\n      </Td>\n      <ActionsTd dataLabel={t`Actions`}>\n        <ActionItem visible tooltip={t`View event details`}>\n          <ActivityStreamDetailButton\n            streamItem={streamItem}\n            user={user}\n            description={description}\n          />\n        </ActionItem>\n      </ActionsTd>\n    </Tr>\n  );\n}\nexport default ActivityStreamListItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}