{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useContext,useRef,useState}from'react';import styled from'styled-components';import{InfoIcon,LinkIcon,PencilAltIcon,PlusIcon,TrashAltIcon}from'@patternfly/react-icons';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import AlertModal from'components/AlertModal';import ErrorDetail from'components/ErrorDetail';import{WorkflowJobTemplateNodesAPI}from'api';import{constants as wfConstants}from'components/Workflow/WorkflowUtils';import{stringIsUUID}from'util/strings';import{WorkflowActionTooltip,WorkflowActionTooltipItem,WorkflowNodeTypeLetter}from'components/Workflow';import getNodeType from'./shared/WorkflowJobTemplateVisualizerUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NodeG=styled.g(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  pointer-events: \",\";\\n  cursor: \",\";\\n\"])),function(props){return props.noPointerEvents?'none':'initial';},function(props){return props.job?'pointer':'default';});var NodeContents=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-size: 13px;\\n  padding: 0px 10px;\\n  background-color: \",\";\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])),function(props){return props.isInvalidLinkTarget?'#D7D7D7':'#FFFFFF';});var NodeResourceName=styled.p(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  overflow: hidden;\\n  text-align: center;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n\"])));var ConvergenceLabel=styled.p(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: #ffffff;\\n\"])));NodeResourceName.displayName='NodeResourceName';function VisualizerNode(_ref){var _node$originalNodeObj15,_node$originalNodeObj20;var node=_ref.node,onMouseOver=_ref.onMouseOver,readOnly=_ref.readOnly,updateHelpText=_ref.updateHelpText,updateNodeHelp=_ref.updateNodeHelp;var ref=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hovering=_useState2[0],setHovering=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),detailError=_useState4[0],setDetailError=_useState4[1];var dispatch=useContext(WorkflowDispatchContext);var _useContext=useContext(WorkflowStateContext),addingLink=_useContext.addingLink,addLinkSourceNode=_useContext.addLinkSourceNode,nodePositions=_useContext.nodePositions,nodes=_useContext.nodes;var isAddLinkSourceNode=addLinkSourceNode&&addLinkSourceNode.id===node.id;var handleDetailErrorClose=function handleDetailErrorClose(){return setDetailError(null);};var updateNode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _node$originalNodeObj,_node$originalNodeObj2,_node$originalNodeObj3,_node$originalNodeObj4,_node$originalNodeObj5,_node$originalNodeObj6,_node$originalNodeObj7,_node$originalNodeObj8;var updatedNodes,updatedNode,_getNodeType,_getNodeType2,nodeAPI,_yield$nodeAPI$readDe,fullUnifiedJobTemplate,_node$originalNodeObj9,_node$originalNodeObj10,_node$originalNodeObj11,_node$originalNodeObj12,_node$originalNodeObj13,_node$originalNodeObj14,_yield$WorkflowJobTem,results,_yield$WorkflowJobTem2,_results,_yield$WorkflowJobTem3,_results2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:updatedNodes=_toConsumableArray(nodes);updatedNode=updatedNodes.find(function(n){return n.id===node.id;});if(!(!node.fullUnifiedJobTemplate&&node!==null&&node!==void 0&&(_node$originalNodeObj=node.originalNodeObject)!==null&&_node$originalNodeObj!==void 0&&(_node$originalNodeObj2=_node$originalNodeObj.summary_fields)!==null&&_node$originalNodeObj2!==void 0&&_node$originalNodeObj2.unified_job_template)){_context.next=16;break;}_getNodeType=getNodeType(node.originalNodeObject.summary_fields.unified_job_template),_getNodeType2=_slicedToArray(_getNodeType,2),nodeAPI=_getNodeType2[1];_context.prev=4;_context.next=7;return nodeAPI.readDetail(node.originalNodeObject.unified_job_template);case 7:_yield$nodeAPI$readDe=_context.sent;fullUnifiedJobTemplate=_yield$nodeAPI$readDe.data;updatedNode.fullUnifiedJobTemplate=fullUnifiedJobTemplate;_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);setDetailError(_context.t0);return _context.abrupt(\"return\",null);case 16:if(!((node===null||node===void 0?void 0:(_node$originalNodeObj3=node.originalNodeObject)===null||_node$originalNodeObj3===void 0?void 0:(_node$originalNodeObj4=_node$originalNodeObj3.summary_fields)===null||_node$originalNodeObj4===void 0?void 0:(_node$originalNodeObj5=_node$originalNodeObj4.unified_job_template)===null||_node$originalNodeObj5===void 0?void 0:_node$originalNodeObj5.unified_job_type)==='job'||(node===null||node===void 0?void 0:(_node$originalNodeObj6=node.originalNodeObject)===null||_node$originalNodeObj6===void 0?void 0:(_node$originalNodeObj7=_node$originalNodeObj6.summary_fields)===null||_node$originalNodeObj7===void 0?void 0:(_node$originalNodeObj8=_node$originalNodeObj7.unified_job_template)===null||_node$originalNodeObj8===void 0?void 0:_node$originalNodeObj8.unified_job_type)==='workflow_job')){_context.next=44;break;}_context.prev=17;if(!((node===null||node===void 0?void 0:(_node$originalNodeObj9=node.originalNodeObject)===null||_node$originalNodeObj9===void 0?void 0:(_node$originalNodeObj10=_node$originalNodeObj9.summary_fields)===null||_node$originalNodeObj10===void 0?void 0:(_node$originalNodeObj11=_node$originalNodeObj10.unified_job_template)===null||_node$originalNodeObj11===void 0?void 0:_node$originalNodeObj11.unified_job_type)==='job'&&!(node!==null&&node!==void 0&&node.originalNodeCredentials))){_context.next=24;break;}_context.next=21;return WorkflowJobTemplateNodesAPI.readCredentials(node.originalNodeObject.id);case 21:_yield$WorkflowJobTem=_context.sent;results=_yield$WorkflowJobTem.data.results;updatedNode.originalNodeCredentials=results;case 24:if(!((node===null||node===void 0?void 0:(_node$originalNodeObj12=node.originalNodeObject)===null||_node$originalNodeObj12===void 0?void 0:(_node$originalNodeObj13=_node$originalNodeObj12.summary_fields)===null||_node$originalNodeObj13===void 0?void 0:(_node$originalNodeObj14=_node$originalNodeObj13.unified_job_template)===null||_node$originalNodeObj14===void 0?void 0:_node$originalNodeObj14.unified_job_type)==='job'&&!node.originalNodeLabels)){_context.next=31;break;}_context.next=27;return WorkflowJobTemplateNodesAPI.readAllLabels(node.originalNodeObject.id);case 27:_yield$WorkflowJobTem2=_context.sent;_results=_yield$WorkflowJobTem2.data.results;updatedNode.originalNodeLabels=_results;updatedNode.originalNodeObject.labels=_results;case 31:if(node.originalNodeInstanceGroups){_context.next=38;break;}_context.next=34;return WorkflowJobTemplateNodesAPI.readInstanceGroups(node.originalNodeObject.id);case 34:_yield$WorkflowJobTem3=_context.sent;_results2=_yield$WorkflowJobTem3.data.results;updatedNode.originalNodeInstanceGroups=_results2;updatedNode.originalNodeObject.instance_groups=_results2;case 38:_context.next=44;break;case 40:_context.prev=40;_context.t1=_context[\"catch\"](17);setDetailError(_context.t1);return _context.abrupt(\"return\",null);case 44:dispatch({type:'SET_NODES',value:updatedNodes});return _context.abrupt(\"return\",updatedNode);case 46:case\"end\":return _context.stop();}}},_callee,null,[[4,12],[17,40]]);}));return function updateNode(){return _ref2.apply(this,arguments);};}();var handleEditClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var nodeToEdit;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updateHelpText(null);setHovering(false);_context2.next=4;return updateNode();case 4:nodeToEdit=_context2.sent;if(nodeToEdit){dispatch({type:'SET_NODE_TO_EDIT',value:nodeToEdit});}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleEditClick(){return _ref3.apply(this,arguments);};}();var handleViewClick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var nodeToView;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:updateHelpText(null);setHovering(false);_context3.next=4;return updateNode();case 4:nodeToView=_context3.sent;if(nodeToView){dispatch({type:'SET_NODE_TO_VIEW',value:nodeToView});}case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleViewClick(){return _ref4.apply(this,arguments);};}();var handleNodeMouseEnter=function handleNodeMouseEnter(){ref.current.parentNode.appendChild(ref.current);setHovering(true);if(addingLink){updateHelpText(node.isInvalidLinkTarget?/*i18n*/i18n._(\"Invalid link target. Unable to link to children or ancestor nodes. Graph cycles are not supported.\"):/*i18n*/i18n._(\"Click to create a new link to this node.\"));onMouseOver(node);}};var handleNodeMouseLeave=function handleNodeMouseLeave(){setHovering(false);if(addingLink){updateHelpText(null);}};var handleNodeClick=function handleNodeClick(){if(addingLink&&!node.isInvalidLinkTarget&&!isAddLinkSourceNode){dispatch({type:'SET_ADD_LINK_TARGET_NODE',value:node});}};var nodeName;if(node!==null&&node!==void 0&&node.identifier&&node.identifier!==''){nodeName=node.identifier;}else if((node===null||node===void 0?void 0:node.identifier)!==''&&node!==null&&node!==void 0&&(_node$originalNodeObj15=node.originalNodeObject)!==null&&_node$originalNodeObj15!==void 0&&_node$originalNodeObj15.identifier&&!stringIsUUID(node.originalNodeObject.identifier)){var _node$originalNodeObj16;nodeName=node===null||node===void 0?void 0:(_node$originalNodeObj16=node.originalNodeObject)===null||_node$originalNodeObj16===void 0?void 0:_node$originalNodeObj16.identifier;}else{var _node$fullUnifiedJobT,_node$originalNodeObj17,_node$originalNodeObj18,_node$originalNodeObj19;nodeName=(node===null||node===void 0?void 0:(_node$fullUnifiedJobT=node.fullUnifiedJobTemplate)===null||_node$fullUnifiedJobT===void 0?void 0:_node$fullUnifiedJobT.name)||(node===null||node===void 0?void 0:(_node$originalNodeObj17=node.originalNodeObject)===null||_node$originalNodeObj17===void 0?void 0:(_node$originalNodeObj18=_node$originalNodeObj17.summary_fields)===null||_node$originalNodeObj18===void 0?void 0:(_node$originalNodeObj19=_node$originalNodeObj18.unified_job_template)===null||_node$originalNodeObj19===void 0?void 0:_node$originalNodeObj19.name)||/*i18n*/i18n._(\"DELETED\");}var viewDetailsAction=/*#__PURE__*/_jsx(WorkflowActionTooltipItem,{id:\"node-details\",onClick:handleViewClick,onMouseEnter:function onMouseEnter(){return updateHelpText(/*i18n*/i18n._(\"View node details\"));},onMouseLeave:function onMouseLeave(){return updateHelpText(null);},children:/*#__PURE__*/_jsx(InfoIcon,{})},\"details\");var tooltipActions=readOnly?[viewDetailsAction]:[/*#__PURE__*/_jsx(WorkflowActionTooltipItem,{id:\"node-add\",onClick:function onClick(){updateHelpText(null);setHovering(false);dispatch({type:'START_ADD_NODE',sourceNodeId:node.id});},onMouseEnter:function onMouseEnter(){return updateHelpText(/*i18n*/i18n._(\"Add a new node\"));},onMouseLeave:function onMouseLeave(){return updateHelpText(null);},children:/*#__PURE__*/_jsx(PlusIcon,{})},\"add\"),viewDetailsAction,/*#__PURE__*/_jsx(WorkflowActionTooltipItem,{id:\"node-edit\",onClick:handleEditClick,onMouseEnter:function onMouseEnter(){return updateHelpText(/*i18n*/i18n._(\"Edit this node\"));},onMouseLeave:function onMouseLeave(){return updateHelpText(null);},children:/*#__PURE__*/_jsx(PencilAltIcon,{})},\"edit\"),/*#__PURE__*/_jsx(WorkflowActionTooltipItem,{id:\"node-link\",onClick:function onClick(){updateHelpText(null);setHovering(false);dispatch({type:'SELECT_SOURCE_FOR_LINKING',node:node});},onMouseEnter:function onMouseEnter(){return updateHelpText(/*i18n*/i18n._(\"Link to an available node\"));},onMouseLeave:function onMouseLeave(){return updateHelpText(null);},children:/*#__PURE__*/_jsx(LinkIcon,{})},\"link\"),/*#__PURE__*/_jsx(WorkflowActionTooltipItem,{id:\"node-delete\",onClick:function onClick(){updateHelpText(null);setHovering(false);dispatch({type:'SET_NODE_TO_DELETE',value:node});},onMouseEnter:function onMouseEnter(){return updateHelpText(/*i18n*/i18n._(\"Delete this node\"));},onMouseLeave:function onMouseLeave(){return updateHelpText(null);},children:/*#__PURE__*/_jsx(TrashAltIcon,{})},\"delete\")];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NodeG,{id:\"node-\".concat(node.id),job:node.job,noPointerEvents:isAddLinkSourceNode,onMouseEnter:handleNodeMouseEnter,onMouseLeave:handleNodeMouseLeave,ref:ref,transform:\"translate(\".concat(nodePositions[node.id].x,\",\").concat(nodePositions[node.id].y-nodePositions[1].y,\")\"),children:[(Object.prototype.hasOwnProperty.call(node,'all_parents_must_converge')?node.all_parents_must_converge:node===null||node===void 0?void 0:(_node$originalNodeObj20=node.originalNodeObject)===null||_node$originalNodeObj20===void 0?void 0:_node$originalNodeObj20.all_parents_must_converge)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"rect\",{fill:hovering&&addingLink&&!node.isInvalidLinkTarget?'#007ABC':'#93969A',height:wfConstants.nodeH/4,rx:2,ry:2,x:wfConstants.nodeW/2-wfConstants.nodeW/10,y:-wfConstants.nodeH/4+2,stroke:hovering&&addingLink&&!node.isInvalidLinkTarget?'#007ABC':'#93969A',strokeWidth:\"2px\",width:wfConstants.nodeW/5}),/*#__PURE__*/_jsx(\"foreignObject\",{height:wfConstants.nodeH/4,width:wfConstants.nodeW/5,x:wfConstants.nodeW/2-wfConstants.nodeW/10+7,y:-wfConstants.nodeH/4-1,children:/*#__PURE__*/_jsx(ConvergenceLabel,{\"data-cy\":\"convergence-label\",children:/*i18n*/i18n._(\"ALL\")})})]}),/*#__PURE__*/_jsx(\"rect\",{fill:\"#FFFFFF\",height:wfConstants.nodeH,rx:\"2\",ry:\"2\",stroke:hovering&&addingLink&&!node.isInvalidLinkTarget?'#007ABC':'#93969A',strokeWidth:\"2px\",width:wfConstants.nodeW}),/*#__PURE__*/_jsx(\"foreignObject\",_objectSpread(_objectSpread({height:\"58\"},!addingLink&&{onMouseEnter:function onMouseEnter(){return updateNodeHelp(node);},onMouseLeave:function onMouseLeave(){return updateNodeHelp(null);}}),{},{onClick:function onClick(){return handleNodeClick();},width:\"178\",x:\"1\",y:\"1\",children:/*#__PURE__*/_jsx(NodeContents,{isInvalidLinkTarget:node.isInvalidLinkTarget,children:/*#__PURE__*/_jsx(NodeResourceName,{id:\"node-\".concat(node.id,\"-name\"),children:nodeName})})})),/*#__PURE__*/_jsx(WorkflowNodeTypeLetter,{node:node}),hovering&&!addingLink&&/*#__PURE__*/_jsx(WorkflowActionTooltip,{pointX:wfConstants.nodeW,pointY:wfConstants.nodeH/2,actions:tooltipActions})]}),detailError&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:detailError,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:handleDetailErrorClose,children:[/*i18n*/i18n._(\"Failed to retrieve full node resource object.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:detailError})]})]});}VisualizerNode.defaultProps={onMouseOver:function onMouseOver(){}};export default VisualizerNode;","map":{"version":3,"names":["React","useContext","useRef","useState","styled","InfoIcon","LinkIcon","PencilAltIcon","PlusIcon","TrashAltIcon","WorkflowDispatchContext","WorkflowStateContext","AlertModal","ErrorDetail","WorkflowJobTemplateNodesAPI","constants","wfConstants","stringIsUUID","WorkflowActionTooltip","WorkflowActionTooltipItem","WorkflowNodeTypeLetter","getNodeType","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NodeG","g","_templateObject","_taggedTemplateLiteral","props","noPointerEvents","job","NodeContents","div","_templateObject2","isInvalidLinkTarget","NodeResourceName","p","_templateObject3","ConvergenceLabel","_templateObject4","displayName","VisualizerNode","_ref","_node$originalNodeObj15","_node$originalNodeObj20","node","onMouseOver","readOnly","updateHelpText","updateNodeHelp","ref","_useState","_useState2","_slicedToArray","hovering","setHovering","_useState3","_useState4","detailError","setDetailError","dispatch","_useContext","addingLink","addLinkSourceNode","nodePositions","nodes","isAddLinkSourceNode","id","handleDetailErrorClose","updateNode","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_node$originalNodeObj","_node$originalNodeObj2","_node$originalNodeObj3","_node$originalNodeObj4","_node$originalNodeObj5","_node$originalNodeObj6","_node$originalNodeObj7","_node$originalNodeObj8","updatedNodes","updatedNode","_getNodeType","_getNodeType2","nodeAPI","_yield$nodeAPI$readDe","fullUnifiedJobTemplate","_node$originalNodeObj9","_node$originalNodeObj10","_node$originalNodeObj11","_node$originalNodeObj12","_node$originalNodeObj13","_node$originalNodeObj14","_yield$WorkflowJobTem","results","_yield$WorkflowJobTem2","_results","_yield$WorkflowJobTem3","_results2","wrap","_callee$","_context","prev","next","_toConsumableArray","find","n","originalNodeObject","summary_fields","unified_job_template","readDetail","sent","data","t0","abrupt","unified_job_type","originalNodeCredentials","readCredentials","originalNodeLabels","readAllLabels","labels","originalNodeInstanceGroups","readInstanceGroups","instance_groups","t1","type","value","stop","apply","arguments","handleEditClick","_ref3","_callee2","nodeToEdit","_callee2$","_context2","handleViewClick","_ref4","_callee3","nodeToView","_callee3$","_context3","handleNodeMouseEnter","current","parentNode","appendChild","i18n","_","handleNodeMouseLeave","handleNodeClick","nodeName","identifier","_node$originalNodeObj16","_node$fullUnifiedJobT","_node$originalNodeObj17","_node$originalNodeObj18","_node$originalNodeObj19","name","viewDetailsAction","onClick","onMouseEnter","onMouseLeave","children","tooltipActions","sourceNodeId","concat","transform","x","y","Object","prototype","hasOwnProperty","call","all_parents_must_converge","fill","height","nodeH","rx","ry","nodeW","stroke","strokeWidth","width","_objectSpread","pointX","pointY","actions","isOpen","variant","title","onClose","error","defaultProps"],"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/VisualizerNode.js"],"sourcesContent":["import React, { useContext, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { t } from '@lingui/macro';\nimport { bool, func, shape } from 'prop-types';\nimport {\n  InfoIcon,\n  LinkIcon,\n  PencilAltIcon,\n  PlusIcon,\n  TrashAltIcon,\n} from '@patternfly/react-icons';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\nimport AlertModal from 'components/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { WorkflowJobTemplateNodesAPI } from 'api';\nimport { constants as wfConstants } from 'components/Workflow/WorkflowUtils';\nimport { stringIsUUID } from 'util/strings';\nimport {\n  WorkflowActionTooltip,\n  WorkflowActionTooltipItem,\n  WorkflowNodeTypeLetter,\n} from 'components/Workflow';\nimport getNodeType from './shared/WorkflowJobTemplateVisualizerUtils';\n\nconst NodeG = styled.g`\n  pointer-events: ${(props) => (props.noPointerEvents ? 'none' : 'initial')};\n  cursor: ${(props) => (props.job ? 'pointer' : 'default')};\n`;\n\nconst NodeContents = styled.div`\n  font-size: 13px;\n  padding: 0px 10px;\n  background-color: ${(props) =>\n    props.isInvalidLinkTarget ? '#D7D7D7' : '#FFFFFF'};\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst NodeResourceName = styled.p`\n  overflow: hidden;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst ConvergenceLabel = styled.p`\n  font-size: 12px;\n  color: #ffffff;\n`;\n\nNodeResourceName.displayName = 'NodeResourceName';\n\nfunction VisualizerNode({\n  node,\n  onMouseOver,\n  readOnly,\n  updateHelpText,\n  updateNodeHelp,\n}) {\n  const ref = useRef(null);\n  const [hovering, setHovering] = useState(false);\n  const [detailError, setDetailError] = useState(null);\n  const dispatch = useContext(WorkflowDispatchContext);\n  const { addingLink, addLinkSourceNode, nodePositions, nodes } =\n    useContext(WorkflowStateContext);\n  const isAddLinkSourceNode =\n    addLinkSourceNode && addLinkSourceNode.id === node.id;\n\n  const handleDetailErrorClose = () => setDetailError(null);\n\n  const updateNode = async () => {\n    const updatedNodes = [...nodes];\n    const updatedNode = updatedNodes.find((n) => n.id === node.id);\n    if (\n      !node.fullUnifiedJobTemplate &&\n      node?.originalNodeObject?.summary_fields?.unified_job_template\n    ) {\n      const [, nodeAPI] = getNodeType(\n        node.originalNodeObject.summary_fields.unified_job_template\n      );\n      try {\n        const { data: fullUnifiedJobTemplate } = await nodeAPI.readDetail(\n          node.originalNodeObject.unified_job_template\n        );\n        updatedNode.fullUnifiedJobTemplate = fullUnifiedJobTemplate;\n      } catch (err) {\n        setDetailError(err);\n        return null;\n      }\n    }\n\n    if (\n      node?.originalNodeObject?.summary_fields?.unified_job_template\n        ?.unified_job_type === 'job' ||\n      node?.originalNodeObject?.summary_fields?.unified_job_template\n        ?.unified_job_type === 'workflow_job'\n    ) {\n      try {\n        if (\n          node?.originalNodeObject?.summary_fields?.unified_job_template\n            ?.unified_job_type === 'job' &&\n          !node?.originalNodeCredentials\n        ) {\n          const {\n            data: { results },\n          } = await WorkflowJobTemplateNodesAPI.readCredentials(\n            node.originalNodeObject.id\n          );\n          updatedNode.originalNodeCredentials = results;\n        }\n        if (\n          node?.originalNodeObject?.summary_fields?.unified_job_template\n            ?.unified_job_type === 'job' &&\n          !node.originalNodeLabels\n        ) {\n          const {\n            data: { results },\n          } = await WorkflowJobTemplateNodesAPI.readAllLabels(\n            node.originalNodeObject.id\n          );\n          updatedNode.originalNodeLabels = results;\n          updatedNode.originalNodeObject.labels = results;\n        }\n        if (!node.originalNodeInstanceGroups) {\n          const {\n            data: { results },\n          } = await WorkflowJobTemplateNodesAPI.readInstanceGroups(\n            node.originalNodeObject.id\n          );\n          updatedNode.originalNodeInstanceGroups = results;\n          updatedNode.originalNodeObject.instance_groups = results;\n        }\n      } catch (err) {\n        setDetailError(err);\n        return null;\n      }\n    }\n\n    dispatch({\n      type: 'SET_NODES',\n      value: updatedNodes,\n    });\n\n    return updatedNode;\n  };\n\n  const handleEditClick = async () => {\n    updateHelpText(null);\n    setHovering(false);\n    const nodeToEdit = await updateNode();\n\n    if (nodeToEdit) {\n      dispatch({ type: 'SET_NODE_TO_EDIT', value: nodeToEdit });\n    }\n  };\n\n  const handleViewClick = async () => {\n    updateHelpText(null);\n    setHovering(false);\n    const nodeToView = await updateNode();\n\n    if (nodeToView) {\n      dispatch({ type: 'SET_NODE_TO_VIEW', value: nodeToView });\n    }\n  };\n\n  const handleNodeMouseEnter = () => {\n    ref.current.parentNode.appendChild(ref.current);\n    setHovering(true);\n    if (addingLink) {\n      updateHelpText(\n        node.isInvalidLinkTarget\n          ? t`Invalid link target. Unable to link to children or ancestor nodes. Graph cycles are not supported.`\n          : t`Click to create a new link to this node.`\n      );\n      onMouseOver(node);\n    }\n  };\n\n  const handleNodeMouseLeave = () => {\n    setHovering(false);\n    if (addingLink) {\n      updateHelpText(null);\n    }\n  };\n\n  const handleNodeClick = () => {\n    if (addingLink && !node.isInvalidLinkTarget && !isAddLinkSourceNode) {\n      dispatch({ type: 'SET_ADD_LINK_TARGET_NODE', value: node });\n    }\n  };\n\n  let nodeName;\n\n  if (node?.identifier && node.identifier !== '') {\n    nodeName = node.identifier;\n  } else if (\n    node?.identifier !== '' &&\n    node?.originalNodeObject?.identifier &&\n    !stringIsUUID(node.originalNodeObject.identifier)\n  ) {\n    nodeName = node?.originalNodeObject?.identifier;\n  } else {\n    nodeName =\n      node?.fullUnifiedJobTemplate?.name ||\n      node?.originalNodeObject?.summary_fields?.unified_job_template?.name ||\n      t`DELETED`;\n  }\n\n  const viewDetailsAction = (\n    <WorkflowActionTooltipItem\n      id=\"node-details\"\n      key=\"details\"\n      onClick={handleViewClick}\n      onMouseEnter={() => updateHelpText(t`View node details`)}\n      onMouseLeave={() => updateHelpText(null)}\n    >\n      <InfoIcon />\n    </WorkflowActionTooltipItem>\n  );\n\n  const tooltipActions = readOnly\n    ? [viewDetailsAction]\n    : [\n        <WorkflowActionTooltipItem\n          id=\"node-add\"\n          key=\"add\"\n          onClick={() => {\n            updateHelpText(null);\n            setHovering(false);\n            dispatch({ type: 'START_ADD_NODE', sourceNodeId: node.id });\n          }}\n          onMouseEnter={() => updateHelpText(t`Add a new node`)}\n          onMouseLeave={() => updateHelpText(null)}\n        >\n          <PlusIcon />\n        </WorkflowActionTooltipItem>,\n        viewDetailsAction,\n        <WorkflowActionTooltipItem\n          id=\"node-edit\"\n          key=\"edit\"\n          onClick={handleEditClick}\n          onMouseEnter={() => updateHelpText(t`Edit this node`)}\n          onMouseLeave={() => updateHelpText(null)}\n        >\n          <PencilAltIcon />\n        </WorkflowActionTooltipItem>,\n        <WorkflowActionTooltipItem\n          id=\"node-link\"\n          key=\"link\"\n          onClick={() => {\n            updateHelpText(null);\n            setHovering(false);\n            dispatch({ type: 'SELECT_SOURCE_FOR_LINKING', node });\n          }}\n          onMouseEnter={() => updateHelpText(t`Link to an available node`)}\n          onMouseLeave={() => updateHelpText(null)}\n        >\n          <LinkIcon />\n        </WorkflowActionTooltipItem>,\n        <WorkflowActionTooltipItem\n          id=\"node-delete\"\n          key=\"delete\"\n          onClick={() => {\n            updateHelpText(null);\n            setHovering(false);\n            dispatch({ type: 'SET_NODE_TO_DELETE', value: node });\n          }}\n          onMouseEnter={() => updateHelpText(t`Delete this node`)}\n          onMouseLeave={() => updateHelpText(null)}\n        >\n          <TrashAltIcon />\n        </WorkflowActionTooltipItem>,\n      ];\n\n  return (\n    <>\n      <NodeG\n        id={`node-${node.id}`}\n        job={node.job}\n        noPointerEvents={isAddLinkSourceNode}\n        onMouseEnter={handleNodeMouseEnter}\n        onMouseLeave={handleNodeMouseLeave}\n        ref={ref}\n        transform={`translate(${nodePositions[node.id].x},${\n          nodePositions[node.id].y - nodePositions[1].y\n        })`}\n      >\n        {(Object.prototype.hasOwnProperty.call(\n          node,\n          'all_parents_must_converge'\n        )\n          ? node.all_parents_must_converge\n          : node?.originalNodeObject?.all_parents_must_converge) && (\n          <>\n            <rect\n              fill={\n                hovering && addingLink && !node.isInvalidLinkTarget\n                  ? '#007ABC'\n                  : '#93969A'\n              }\n              height={wfConstants.nodeH / 4}\n              rx={2}\n              ry={2}\n              x={wfConstants.nodeW / 2 - wfConstants.nodeW / 10}\n              y={-wfConstants.nodeH / 4 + 2}\n              stroke={\n                hovering && addingLink && !node.isInvalidLinkTarget\n                  ? '#007ABC'\n                  : '#93969A'\n              }\n              strokeWidth=\"2px\"\n              width={wfConstants.nodeW / 5}\n            />\n            <foreignObject\n              height={wfConstants.nodeH / 4}\n              width={wfConstants.nodeW / 5}\n              x={wfConstants.nodeW / 2 - wfConstants.nodeW / 10 + 7}\n              y={-wfConstants.nodeH / 4 - 1}\n            >\n              <ConvergenceLabel data-cy=\"convergence-label\">{t`ALL`}</ConvergenceLabel>\n            </foreignObject>\n          </>\n        )}\n        <rect\n          fill=\"#FFFFFF\"\n          height={wfConstants.nodeH}\n          rx=\"2\"\n          ry=\"2\"\n          stroke={\n            hovering && addingLink && !node.isInvalidLinkTarget\n              ? '#007ABC'\n              : '#93969A'\n          }\n          strokeWidth=\"2px\"\n          width={wfConstants.nodeW}\n        />\n        <foreignObject\n          height=\"58\"\n          {...(!addingLink && {\n            onMouseEnter: () => updateNodeHelp(node),\n            onMouseLeave: () => updateNodeHelp(null),\n          })}\n          onClick={() => handleNodeClick()}\n          width=\"178\"\n          x=\"1\"\n          y=\"1\"\n        >\n          <NodeContents isInvalidLinkTarget={node.isInvalidLinkTarget}>\n            <NodeResourceName id={`node-${node.id}-name`}>\n              {nodeName}\n            </NodeResourceName>\n          </NodeContents>\n        </foreignObject>\n        <WorkflowNodeTypeLetter node={node} />\n        {hovering && !addingLink && (\n          <WorkflowActionTooltip\n            pointX={wfConstants.nodeW}\n            pointY={wfConstants.nodeH / 2}\n            actions={tooltipActions}\n          />\n        )}\n      </NodeG>\n      {detailError && (\n        <AlertModal\n          isOpen={detailError}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={handleDetailErrorClose}\n        >\n          {t`Failed to retrieve full node resource object.`}\n          <ErrorDetail error={detailError} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nVisualizerNode.propTypes = {\n  node: shape().isRequired,\n  onMouseOver: func,\n  readOnly: bool.isRequired,\n  updateHelpText: func.isRequired,\n  updateNodeHelp: func.isRequired,\n};\n\nVisualizerNode.defaultProps = {\n  onMouseOver: () => {},\n};\n\nexport default VisualizerNode;\n"],"mappings":"0uBAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAGtC,OACEC,QAAQ,CACRC,QAAQ,CACRC,aAAa,CACbC,QAAQ,CACRC,YAAY,KACP,yBAAyB,CAChC,OACEC,uBAAuB,CACvBC,oBAAoB,KACf,mBAAmB,CAC1B,MAAO,CAAAC,UAAU,KAAM,uBAAuB,CAC9C,MAAO,CAAAC,WAAW,KAAM,wBAAwB,CAChD,OAASC,2BAA2B,KAAQ,KAAK,CACjD,OAASC,SAAS,GAAI,CAAAC,WAAW,KAAQ,mCAAmC,CAC5E,OAASC,YAAY,KAAQ,cAAc,CAC3C,OACEC,qBAAqB,CACrBC,yBAAyB,CACzBC,sBAAsB,KACjB,qBAAqB,CAC5B,MAAO,CAAAC,WAAW,KAAM,6CAA6C,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtE,GAAM,CAAAC,KAAK,CAAGxB,MAAM,CAACyB,CAAC,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,kDACF,SAACC,KAAK,QAAM,CAAAA,KAAK,CAACC,eAAe,CAAG,MAAM,CAAG,SAAS,EAAC,CAC/D,SAACD,KAAK,QAAM,CAAAA,KAAK,CAACE,GAAG,CAAG,SAAS,CAAG,SAAS,EAAC,CACzD,CAED,GAAM,CAAAC,YAAY,CAAG/B,MAAM,CAACgC,GAAG,CAAAC,gBAAA,GAAAA,gBAAA,CAAAN,sBAAA,qKAGT,SAACC,KAAK,QACxB,CAAAA,KAAK,CAACM,mBAAmB,CAAG,SAAS,CAAG,SAAS,GAKpD,CAED,GAAM,CAAAC,gBAAgB,CAAGnC,MAAM,CAACoC,CAAC,CAAAC,gBAAA,GAAAA,gBAAA,CAAAV,sBAAA,0GAKhC,CAED,GAAM,CAAAW,gBAAgB,CAAGtC,MAAM,CAACoC,CAAC,CAAAG,gBAAA,GAAAA,gBAAA,CAAAZ,sBAAA,iDAGhC,CAEDQ,gBAAgB,CAACK,WAAW,CAAG,kBAAkB,CAEjD,QAAS,CAAAC,cAAcA,CAAAC,IAAA,CAMpB,KAAAC,uBAAA,CAAAC,uBAAA,IALD,CAAAC,IAAI,CAAAH,IAAA,CAAJG,IAAI,CACJC,WAAW,CAAAJ,IAAA,CAAXI,WAAW,CACXC,QAAQ,CAAAL,IAAA,CAARK,QAAQ,CACRC,cAAc,CAAAN,IAAA,CAAdM,cAAc,CACdC,cAAc,CAAAP,IAAA,CAAdO,cAAc,CAEd,GAAM,CAAAC,GAAG,CAAGpD,MAAM,CAAC,IAAI,CAAC,CACxB,IAAAqD,SAAA,CAAgCpD,QAAQ,CAAC,KAAK,CAAC,CAAAqD,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAxCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAsCzD,QAAQ,CAAC,IAAI,CAAC,CAAA0D,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,GAAM,CAAAG,QAAQ,CAAG/D,UAAU,CAACS,uBAAuB,CAAC,CACpD,IAAAuD,WAAA,CACEhE,UAAU,CAACU,oBAAoB,CAAC,CAD1BuD,UAAU,CAAAD,WAAA,CAAVC,UAAU,CAAEC,iBAAiB,CAAAF,WAAA,CAAjBE,iBAAiB,CAAEC,aAAa,CAAAH,WAAA,CAAbG,aAAa,CAAEC,KAAK,CAAAJ,WAAA,CAALI,KAAK,CAE3D,GAAM,CAAAC,mBAAmB,CACvBH,iBAAiB,EAAIA,iBAAiB,CAACI,EAAE,GAAKtB,IAAI,CAACsB,EAAE,CAEvD,GAAM,CAAAC,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAA,QAAS,CAAAT,cAAc,CAAC,IAAI,CAAC,GAEzD,GAAM,CAAAU,UAAU,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,KAAAC,YAAA,CAAAC,WAAA,CAAAC,YAAA,CAAAC,aAAA,CAAAC,OAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,qBAAA,CAAAC,OAAA,CAAAC,sBAAA,CAAAC,QAAA,CAAAC,sBAAA,CAAAC,SAAA,QAAA7B,mBAAA,CAAA8B,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACXvB,YAAY,CAAAwB,kBAAA,CAAO1C,KAAK,EACxBmB,WAAW,CAAGD,YAAY,CAACyB,IAAI,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAAC1C,EAAE,GAAKtB,IAAI,CAACsB,EAAE,GAAC,MAE5D,CAACtB,IAAI,CAAC4C,sBAAsB,EAC5B5C,IAAI,SAAJA,IAAI,YAAA8B,qBAAA,CAAJ9B,IAAI,CAAEiE,kBAAkB,UAAAnC,qBAAA,YAAAC,sBAAA,CAAxBD,qBAAA,CAA0BoC,cAAc,UAAAnC,sBAAA,WAAxCA,sBAAA,CAA0CoC,oBAAoB,GAAAR,QAAA,CAAAE,IAAA,WAAArB,YAAA,CAE1CpE,WAAW,CAC7B4B,IAAI,CAACiE,kBAAkB,CAACC,cAAc,CAACC,oBACzC,CAAC,CAAA1B,aAAA,CAAAjC,cAAA,CAAAgC,YAAA,IAFQE,OAAO,CAAAD,aAAA,IAAAkB,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAIiC,CAAAnB,OAAO,CAAC0B,UAAU,CAC/DpE,IAAI,CAACiE,kBAAkB,CAACE,oBAC1B,CAAC,QAAAxB,qBAAA,CAAAgB,QAAA,CAAAU,IAAA,CAFazB,sBAAsB,CAAAD,qBAAA,CAA5B2B,IAAI,CAGZ/B,WAAW,CAACK,sBAAsB,CAAGA,sBAAsB,CAACe,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,aAE5D7C,cAAc,CAAA6C,QAAA,CAAAY,EAAI,CAAC,CAAC,OAAAZ,QAAA,CAAAa,MAAA,UACb,IAAI,eAKb,CAAAxE,IAAI,SAAJA,IAAI,kBAAAgC,sBAAA,CAAJhC,IAAI,CAAEiE,kBAAkB,UAAAjC,sBAAA,kBAAAC,sBAAA,CAAxBD,sBAAA,CAA0BkC,cAAc,UAAAjC,sBAAA,kBAAAC,sBAAA,CAAxCD,sBAAA,CAA0CkC,oBAAoB,UAAAjC,sBAAA,iBAA9DA,sBAAA,CACIuC,gBAAgB,IAAK,KAAK,EAC9B,CAAAzE,IAAI,SAAJA,IAAI,kBAAAmC,sBAAA,CAAJnC,IAAI,CAAEiE,kBAAkB,UAAA9B,sBAAA,kBAAAC,sBAAA,CAAxBD,sBAAA,CAA0B+B,cAAc,UAAA9B,sBAAA,kBAAAC,sBAAA,CAAxCD,sBAAA,CAA0C+B,oBAAoB,UAAA9B,sBAAA,iBAA9DA,sBAAA,CACIoC,gBAAgB,IAAK,cAAc,GAAAd,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAC,IAAA,SAInC,CAAA5D,IAAI,SAAJA,IAAI,kBAAA6C,sBAAA,CAAJ7C,IAAI,CAAEiE,kBAAkB,UAAApB,sBAAA,kBAAAC,uBAAA,CAAxBD,sBAAA,CAA0BqB,cAAc,UAAApB,uBAAA,kBAAAC,uBAAA,CAAxCD,uBAAA,CAA0CqB,oBAAoB,UAAApB,uBAAA,iBAA9DA,uBAAA,CACI0B,gBAAgB,IAAK,KAAK,EAC9B,EAACzE,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAE0E,uBAAuB,IAAAf,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UAIpB,CAAAhG,2BAA2B,CAAC8G,eAAe,CACnD3E,IAAI,CAACiE,kBAAkB,CAAC3C,EAC1B,CAAC,SAAA6B,qBAAA,CAAAQ,QAAA,CAAAU,IAAA,CAHSjB,OAAO,CAAAD,qBAAA,CAAfmB,IAAI,CAAIlB,OAAO,CAIjBb,WAAW,CAACmC,uBAAuB,CAAGtB,OAAO,CAAC,aAG9C,CAAApD,IAAI,SAAJA,IAAI,kBAAAgD,uBAAA,CAAJhD,IAAI,CAAEiE,kBAAkB,UAAAjB,uBAAA,kBAAAC,uBAAA,CAAxBD,uBAAA,CAA0BkB,cAAc,UAAAjB,uBAAA,kBAAAC,uBAAA,CAAxCD,uBAAA,CAA0CkB,oBAAoB,UAAAjB,uBAAA,iBAA9DA,uBAAA,CACIuB,gBAAgB,IAAK,KAAK,EAC9B,CAACzE,IAAI,CAAC4E,kBAAkB,GAAAjB,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UAId,CAAAhG,2BAA2B,CAACgH,aAAa,CACjD7E,IAAI,CAACiE,kBAAkB,CAAC3C,EAC1B,CAAC,SAAA+B,sBAAA,CAAAM,QAAA,CAAAU,IAAA,CAHSjB,QAAO,CAAAC,sBAAA,CAAfiB,IAAI,CAAIlB,OAAO,CAIjBb,WAAW,CAACqC,kBAAkB,CAAGxB,QAAO,CACxCb,WAAW,CAAC0B,kBAAkB,CAACa,MAAM,CAAG1B,QAAO,CAAC,WAE7CpD,IAAI,CAAC+E,0BAA0B,EAAApB,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UAGxB,CAAAhG,2BAA2B,CAACmH,kBAAkB,CACtDhF,IAAI,CAACiE,kBAAkB,CAAC3C,EAC1B,CAAC,SAAAiC,sBAAA,CAAAI,QAAA,CAAAU,IAAA,CAHSjB,SAAO,CAAAG,sBAAA,CAAfe,IAAI,CAAIlB,OAAO,CAIjBb,WAAW,CAACwC,0BAA0B,CAAG3B,SAAO,CAChDb,WAAW,CAAC0B,kBAAkB,CAACgB,eAAe,CAAG7B,SAAO,CAAC,QAAAO,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAuB,EAAA,CAAAvB,QAAA,cAG3D7C,cAAc,CAAA6C,QAAA,CAAAuB,EAAI,CAAC,CAAC,OAAAvB,QAAA,CAAAa,MAAA,UACb,IAAI,UAIfzD,QAAQ,CAAC,CACPoE,IAAI,CAAE,WAAW,CACjBC,KAAK,CAAE9C,YACT,CAAC,CAAC,CAAC,OAAAqB,QAAA,CAAAa,MAAA,UAEIjC,WAAW,2BAAAoB,QAAA,CAAA0B,IAAA,OAAAxD,OAAA,yBACnB,kBA1EK,CAAAL,UAAUA,CAAA,SAAAC,KAAA,CAAA6D,KAAA,MAAAC,SAAA,OA0Ef,CAED,GAAM,CAAAC,eAAe,6BAAAC,KAAA,CAAA/D,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAA8D,SAAA,MAAAC,UAAA,QAAAhE,mBAAA,CAAA8B,IAAA,UAAAmC,UAAAC,SAAA,kBAAAA,SAAA,CAAAjC,IAAA,CAAAiC,SAAA,CAAAhC,IAAA,SACtB1D,cAAc,CAAC,IAAI,CAAC,CACpBO,WAAW,CAAC,KAAK,CAAC,CAACmF,SAAA,CAAAhC,IAAA,SACM,CAAArC,UAAU,CAAC,CAAC,QAA/BmE,UAAU,CAAAE,SAAA,CAAAxB,IAAA,CAEhB,GAAIsB,UAAU,CAAE,CACd5E,QAAQ,CAAC,CAAEoE,IAAI,CAAE,kBAAkB,CAAEC,KAAK,CAAEO,UAAW,CAAC,CAAC,CAC3D,CAAC,wBAAAE,SAAA,CAAAR,IAAA,OAAAK,QAAA,GACF,kBARK,CAAAF,eAAeA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAQpB,CAED,GAAM,CAAAO,eAAe,6BAAAC,KAAA,CAAArE,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAoE,SAAA,MAAAC,UAAA,QAAAtE,mBAAA,CAAA8B,IAAA,UAAAyC,UAAAC,SAAA,kBAAAA,SAAA,CAAAvC,IAAA,CAAAuC,SAAA,CAAAtC,IAAA,SACtB1D,cAAc,CAAC,IAAI,CAAC,CACpBO,WAAW,CAAC,KAAK,CAAC,CAACyF,SAAA,CAAAtC,IAAA,SACM,CAAArC,UAAU,CAAC,CAAC,QAA/ByE,UAAU,CAAAE,SAAA,CAAA9B,IAAA,CAEhB,GAAI4B,UAAU,CAAE,CACdlF,QAAQ,CAAC,CAAEoE,IAAI,CAAE,kBAAkB,CAAEC,KAAK,CAAEa,UAAW,CAAC,CAAC,CAC3D,CAAC,wBAAAE,SAAA,CAAAd,IAAA,OAAAW,QAAA,GACF,kBARK,CAAAF,eAAeA,CAAA,SAAAC,KAAA,CAAAT,KAAA,MAAAC,SAAA,OAQpB,CAED,GAAM,CAAAa,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAA,CAAS,CACjC/F,GAAG,CAACgG,OAAO,CAACC,UAAU,CAACC,WAAW,CAAClG,GAAG,CAACgG,OAAO,CAAC,CAC/C3F,WAAW,CAAC,IAAI,CAAC,CACjB,GAAIO,UAAU,CAAE,CACdd,cAAc,CACZH,IAAI,CAACX,mBAAmB,SACpBmH,IAAA,CAAAC,CAAA,qGAAoG,CAAC,SACrGD,IAAA,CAAAC,CAAA,2CAA0C,CAChD,CAAC,CACDxG,WAAW,CAACD,IAAI,CAAC,CACnB,CACF,CAAC,CAED,GAAM,CAAA0G,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAA,CAAS,CACjChG,WAAW,CAAC,KAAK,CAAC,CAClB,GAAIO,UAAU,CAAE,CACdd,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,CAED,GAAM,CAAAwG,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC5B,GAAI1F,UAAU,EAAI,CAACjB,IAAI,CAACX,mBAAmB,EAAI,CAACgC,mBAAmB,CAAE,CACnEN,QAAQ,CAAC,CAAEoE,IAAI,CAAE,0BAA0B,CAAEC,KAAK,CAAEpF,IAAK,CAAC,CAAC,CAC7D,CACF,CAAC,CAED,GAAI,CAAA4G,QAAQ,CAEZ,GAAI5G,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAE6G,UAAU,EAAI7G,IAAI,CAAC6G,UAAU,GAAK,EAAE,CAAE,CAC9CD,QAAQ,CAAG5G,IAAI,CAAC6G,UAAU,CAC5B,CAAC,IAAM,IACL,CAAA7G,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE6G,UAAU,IAAK,EAAE,EACvB7G,IAAI,SAAJA,IAAI,YAAAF,uBAAA,CAAJE,IAAI,CAAEiE,kBAAkB,UAAAnE,uBAAA,WAAxBA,uBAAA,CAA0B+G,UAAU,EACpC,CAAC7I,YAAY,CAACgC,IAAI,CAACiE,kBAAkB,CAAC4C,UAAU,CAAC,CACjD,KAAAC,uBAAA,CACAF,QAAQ,CAAG5G,IAAI,SAAJA,IAAI,kBAAA8G,uBAAA,CAAJ9G,IAAI,CAAEiE,kBAAkB,UAAA6C,uBAAA,iBAAxBA,uBAAA,CAA0BD,UAAU,CACjD,CAAC,IAAM,KAAAE,qBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CACLN,QAAQ,CACN,CAAA5G,IAAI,SAAJA,IAAI,kBAAA+G,qBAAA,CAAJ/G,IAAI,CAAE4C,sBAAsB,UAAAmE,qBAAA,iBAA5BA,qBAAA,CAA8BI,IAAI,IAClCnH,IAAI,SAAJA,IAAI,kBAAAgH,uBAAA,CAAJhH,IAAI,CAAEiE,kBAAkB,UAAA+C,uBAAA,kBAAAC,uBAAA,CAAxBD,uBAAA,CAA0B9C,cAAc,UAAA+C,uBAAA,kBAAAC,uBAAA,CAAxCD,uBAAA,CAA0C9C,oBAAoB,UAAA+C,uBAAA,iBAA9DA,uBAAA,CAAgEC,IAAI,WACpEX,IAAA,CAAAC,CAAA,UAAS,CAAC,CACd,CAEA,GAAM,CAAAW,iBAAiB,cACrB9I,IAAA,CAACJ,yBAAyB,EACxBoD,EAAE,CAAC,cAAc,CAEjB+F,OAAO,CAAEvB,eAAgB,CACzBwB,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnH,cAAc,SAACqG,IAAA,CAAAC,CAAA,oBAAmB,CAAC,CAAC,EAAC,CACzDc,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAApH,cAAc,CAAC,IAAI,CAAC,EAAC,CAAAqH,QAAA,cAEzClJ,IAAA,CAAClB,QAAQ,GAAE,CAAC,EALR,SAMqB,CAC5B,CAED,GAAM,CAAAqK,cAAc,CAAGvH,QAAQ,CAC3B,CAACkH,iBAAiB,CAAC,CACnB,cACE9I,IAAA,CAACJ,yBAAyB,EACxBoD,EAAE,CAAC,UAAU,CAEb+F,OAAO,CAAE,SAAAA,QAAA,CAAM,CACblH,cAAc,CAAC,IAAI,CAAC,CACpBO,WAAW,CAAC,KAAK,CAAC,CAClBK,QAAQ,CAAC,CAAEoE,IAAI,CAAE,gBAAgB,CAAEuC,YAAY,CAAE1H,IAAI,CAACsB,EAAG,CAAC,CAAC,CAC7D,CAAE,CACFgG,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnH,cAAc,SAACqG,IAAA,CAAAC,CAAA,iBAAgB,CAAC,CAAC,EAAC,CACtDc,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAApH,cAAc,CAAC,IAAI,CAAC,EAAC,CAAAqH,QAAA,cAEzClJ,IAAA,CAACf,QAAQ,GAAE,CAAC,EATR,KAUqB,CAAC,CAC5B6J,iBAAiB,cACjB9I,IAAA,CAACJ,yBAAyB,EACxBoD,EAAE,CAAC,WAAW,CAEd+F,OAAO,CAAE7B,eAAgB,CACzB8B,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnH,cAAc,SAACqG,IAAA,CAAAC,CAAA,iBAAgB,CAAC,CAAC,EAAC,CACtDc,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAApH,cAAc,CAAC,IAAI,CAAC,EAAC,CAAAqH,QAAA,cAEzClJ,IAAA,CAAChB,aAAa,GAAE,CAAC,EALb,MAMqB,CAAC,cAC5BgB,IAAA,CAACJ,yBAAyB,EACxBoD,EAAE,CAAC,WAAW,CAEd+F,OAAO,CAAE,SAAAA,QAAA,CAAM,CACblH,cAAc,CAAC,IAAI,CAAC,CACpBO,WAAW,CAAC,KAAK,CAAC,CAClBK,QAAQ,CAAC,CAAEoE,IAAI,CAAE,2BAA2B,CAAEnF,IAAI,CAAJA,IAAK,CAAC,CAAC,CACvD,CAAE,CACFsH,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnH,cAAc,SAACqG,IAAA,CAAAC,CAAA,4BAA2B,CAAC,CAAC,EAAC,CACjEc,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAApH,cAAc,CAAC,IAAI,CAAC,EAAC,CAAAqH,QAAA,cAEzClJ,IAAA,CAACjB,QAAQ,GAAE,CAAC,EATR,MAUqB,CAAC,cAC5BiB,IAAA,CAACJ,yBAAyB,EACxBoD,EAAE,CAAC,aAAa,CAEhB+F,OAAO,CAAE,SAAAA,QAAA,CAAM,CACblH,cAAc,CAAC,IAAI,CAAC,CACpBO,WAAW,CAAC,KAAK,CAAC,CAClBK,QAAQ,CAAC,CAAEoE,IAAI,CAAE,oBAAoB,CAAEC,KAAK,CAAEpF,IAAK,CAAC,CAAC,CACvD,CAAE,CACFsH,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnH,cAAc,SAACqG,IAAA,CAAAC,CAAA,mBAAkB,CAAC,CAAC,EAAC,CACxDc,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAApH,cAAc,CAAC,IAAI,CAAC,EAAC,CAAAqH,QAAA,cAEzClJ,IAAA,CAACd,YAAY,GAAE,CAAC,EATZ,QAUqB,CAAC,CAC7B,CAEL,mBACEkB,KAAA,CAAAF,SAAA,EAAAgJ,QAAA,eACE9I,KAAA,CAACC,KAAK,EACJ2C,EAAE,SAAAqG,MAAA,CAAU3H,IAAI,CAACsB,EAAE,CAAG,CACtBrC,GAAG,CAAEe,IAAI,CAACf,GAAI,CACdD,eAAe,CAAEqC,mBAAoB,CACrCiG,YAAY,CAAElB,oBAAqB,CACnCmB,YAAY,CAAEb,oBAAqB,CACnCrG,GAAG,CAAEA,GAAI,CACTuH,SAAS,cAAAD,MAAA,CAAexG,aAAa,CAACnB,IAAI,CAACsB,EAAE,CAAC,CAACuG,CAAC,MAAAF,MAAA,CAC9CxG,aAAa,CAACnB,IAAI,CAACsB,EAAE,CAAC,CAACwG,CAAC,CAAG3G,aAAa,CAAC,CAAC,CAAC,CAAC2G,CAAC,KAC3C,CAAAN,QAAA,EAEH,CAACO,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CACpClI,IAAI,CACJ,2BACF,CAAC,CACGA,IAAI,CAACmI,yBAAyB,CAC9BnI,IAAI,SAAJA,IAAI,kBAAAD,uBAAA,CAAJC,IAAI,CAAEiE,kBAAkB,UAAAlE,uBAAA,iBAAxBA,uBAAA,CAA0BoI,yBAAyB,gBACrDzJ,KAAA,CAAAF,SAAA,EAAAgJ,QAAA,eACElJ,IAAA,SACE8J,IAAI,CACF3H,QAAQ,EAAIQ,UAAU,EAAI,CAACjB,IAAI,CAACX,mBAAmB,CAC/C,SAAS,CACT,SACL,CACDgJ,MAAM,CAAEtK,WAAW,CAACuK,KAAK,CAAG,CAAE,CAC9BC,EAAE,CAAE,CAAE,CACNC,EAAE,CAAE,CAAE,CACNX,CAAC,CAAE9J,WAAW,CAAC0K,KAAK,CAAG,CAAC,CAAG1K,WAAW,CAAC0K,KAAK,CAAG,EAAG,CAClDX,CAAC,CAAE,CAAC/J,WAAW,CAACuK,KAAK,CAAG,CAAC,CAAG,CAAE,CAC9BI,MAAM,CACJjI,QAAQ,EAAIQ,UAAU,EAAI,CAACjB,IAAI,CAACX,mBAAmB,CAC/C,SAAS,CACT,SACL,CACDsJ,WAAW,CAAC,KAAK,CACjBC,KAAK,CAAE7K,WAAW,CAAC0K,KAAK,CAAG,CAAE,CAC9B,CAAC,cACFnK,IAAA,kBACE+J,MAAM,CAAEtK,WAAW,CAACuK,KAAK,CAAG,CAAE,CAC9BM,KAAK,CAAE7K,WAAW,CAAC0K,KAAK,CAAG,CAAE,CAC7BZ,CAAC,CAAE9J,WAAW,CAAC0K,KAAK,CAAG,CAAC,CAAG1K,WAAW,CAAC0K,KAAK,CAAG,EAAE,CAAG,CAAE,CACtDX,CAAC,CAAE,CAAC/J,WAAW,CAACuK,KAAK,CAAG,CAAC,CAAG,CAAE,CAAAd,QAAA,cAE9BlJ,IAAA,CAACmB,gBAAgB,EAAC,UAAQ,mBAAmB,CAAA+H,QAAA,SAAEhB,IAAA,CAAAC,CAAA,MAAK,CAAC,CAAmB,CAAC,CAC5D,CAAC,EAChB,CACH,cACDnI,IAAA,SACE8J,IAAI,CAAC,SAAS,CACdC,MAAM,CAAEtK,WAAW,CAACuK,KAAM,CAC1BC,EAAE,CAAC,GAAG,CACNC,EAAE,CAAC,GAAG,CACNE,MAAM,CACJjI,QAAQ,EAAIQ,UAAU,EAAI,CAACjB,IAAI,CAACX,mBAAmB,CAC/C,SAAS,CACT,SACL,CACDsJ,WAAW,CAAC,KAAK,CACjBC,KAAK,CAAE7K,WAAW,CAAC0K,KAAM,CAC1B,CAAC,cACFnK,IAAA,iBAAAuK,aAAA,CAAAA,aAAA,EACER,MAAM,CAAC,IAAI,EACN,CAACpH,UAAU,EAAI,CAClBqG,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAlH,cAAc,CAACJ,IAAI,CAAC,GACxCuH,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnH,cAAc,CAAC,IAAI,CAAC,EAC1C,CAAC,MACDiH,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAV,eAAe,CAAC,CAAC,EAAC,CACjCiC,KAAK,CAAC,KAAK,CACXf,CAAC,CAAC,GAAG,CACLC,CAAC,CAAC,GAAG,CAAAN,QAAA,cAELlJ,IAAA,CAACY,YAAY,EAACG,mBAAmB,CAAEW,IAAI,CAACX,mBAAoB,CAAAmI,QAAA,cAC1DlJ,IAAA,CAACgB,gBAAgB,EAACgC,EAAE,SAAAqG,MAAA,CAAU3H,IAAI,CAACsB,EAAE,SAAQ,CAAAkG,QAAA,CAC1CZ,QAAQ,CACO,CAAC,CACP,CAAC,EACF,CAAC,cAChBtI,IAAA,CAACH,sBAAsB,EAAC6B,IAAI,CAAEA,IAAK,CAAE,CAAC,CACrCS,QAAQ,EAAI,CAACQ,UAAU,eACtB3C,IAAA,CAACL,qBAAqB,EACpB6K,MAAM,CAAE/K,WAAW,CAAC0K,KAAM,CAC1BM,MAAM,CAAEhL,WAAW,CAACuK,KAAK,CAAG,CAAE,CAC9BU,OAAO,CAAEvB,cAAe,CACzB,CACF,EACI,CAAC,CACP5G,WAAW,eACVnC,KAAA,CAACf,UAAU,EACTsL,MAAM,CAAEpI,WAAY,CACpBqI,OAAO,CAAC,OAAO,CACfC,KAAK,SAAE3C,IAAA,CAAAC,CAAA,SAAQ,CAAE,CACjB2C,OAAO,CAAE7H,sBAAuB,CAAAiG,QAAA,UAE/BhB,IAAA,CAAAC,CAAA,gDAA+C,CAAC,cACjDnI,IAAA,CAACV,WAAW,EAACyL,KAAK,CAAExI,WAAY,CAAE,CAAC,EACzB,CACb,EACD,CAAC,CAEP,CAUAjB,cAAc,CAAC0J,YAAY,CAAG,CAC5BrJ,WAAW,CAAE,SAAAA,YAAA,CAAM,CAAC,CACtB,CAAC,CAED,cAAe,CAAAL,cAAc"},"metadata":{},"sourceType":"module"}