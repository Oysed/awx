{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect,useState}from'react';import{useLocation}from'react-router-dom';import{RolesAPI,TeamsAPI,UsersAPI}from'api';import{getQSConfig,parseQueryString}from'util/qs';import useRequest,{useDeleteItems}from'hooks/useRequest';import{useUserProfile}from'contexts/Config';import AddResourceRole from'../AddRole/AddResourceRole';import AlertModal from'../AlertModal';import DataListToolbar from'../DataListToolbar';import PaginatedTable,{HeaderRow,HeaderCell,ToolbarAddButton,getSearchableKeys}from'../PaginatedTable';import DeleteRoleConfirmationModal from'./DeleteRoleConfirmationModal';import ResourceAccessListItem from'./ResourceAccessListItem';import ErrorDetail from'../ErrorDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var QS_CONFIG=getQSConfig('access',{page:1,page_size:5,order_by:'first_name'});function ResourceAccessList(_ref){var _resource$summary_fie,_resource$summary_fie2;var apiModel=_ref.apiModel,resource=_ref.resource;var _useUserProfile=useUserProfile(),isSuperUser=_useUserProfile.isSuperUser;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),submitError=_useState2[0],setSubmitError=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),deletionRecord=_useState4[0],setDeletionRecord=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),deletionRole=_useState6[0],setDeletionRole=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showAddModal=_useState8[0],setShowAddModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showDeleteModal=_useState10[0],setShowDeleteModal=_useState10[1];var location=useLocation();var canAddAdditionalControls=false;if(isSuperUser){canAddAdditionalControls=true;}if(resource.type==='credential'&&resource!==null&&resource!==void 0&&(_resource$summary_fie=resource.summary_fields)!==null&&_resource$summary_fie!==void 0&&(_resource$summary_fie2=_resource$summary_fie.user_capabilities)!==null&&_resource$summary_fie2!==void 0&&_resource$summary_fie2.edit&&resource!==null&&resource!==void 0&&resource.organization){canAddAdditionalControls=true;}if(resource.type!=='credential'){var _resource$summary_fie3,_resource$summary_fie4;canAddAdditionalControls=resource===null||resource===void 0?void 0:(_resource$summary_fie3=resource.summary_fields)===null||_resource$summary_fie3===void 0?void 0:(_resource$summary_fie4=_resource$summary_fie3.user_capabilities)===null||_resource$summary_fie4===void 0?void 0:_resource$summary_fie4.edit;}var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _actionsResponse$data,_actionsResponse$data2;var params,_yield$Promise$all,_yield$Promise$all2,response,actionsResponse,orgRoles,_yield$Promise$all3,_yield$Promise$all4,systemAdmin,systemAuditor;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=parseQueryString(QS_CONFIG,location.search);_context.next=3;return Promise.all([apiModel.readAccessList(resource.id,params),apiModel.readAccessOptions(resource.id)]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);response=_yield$Promise$all2[0];actionsResponse=_yield$Promise$all2[1];if(!location.pathname.includes('/organizations')){_context.next=15;break;}_context.next=10;return Promise.all([RolesAPI.read({singleton_name:'system_administrator'}),RolesAPI.read({singleton_name:'system_auditor'})]);case 10:_yield$Promise$all3=_context.sent;_yield$Promise$all4=_slicedToArray(_yield$Promise$all3,2);systemAdmin=_yield$Promise$all4[0].data.results;systemAuditor=_yield$Promise$all4[1].data.results;orgRoles=Object.entries(resource.summary_fields.object_roles).map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];if(key==='admin_role'){return[\"\".concat(value.id,\", \").concat(systemAdmin[0].id),value.name];}if(key==='auditor_role'){return[\"\".concat(value.id,\", \").concat(systemAuditor[0].id),value.name];}return[\"\".concat(value.id),value.name];});case 15:return _context.abrupt(\"return\",{accessRecords:response.data.results,itemCount:response.data.count,relatedSearchableKeys:((actionsResponse===null||actionsResponse===void 0?void 0:(_actionsResponse$data=actionsResponse.data)===null||_actionsResponse$data===void 0?void 0:_actionsResponse$data.related_search_fields)||[]).map(function(val){return val.slice(0,-8);}),searchableKeys:getSearchableKeys((_actionsResponse$data2=actionsResponse.data.actions)===null||_actionsResponse$data2===void 0?void 0:_actionsResponse$data2.GET),organizationRoles:orgRoles});case 16:case\"end\":return _context.stop();}}},_callee);})),[apiModel,location,resource]),{accessRecords:[],itemCount:0,relatedSearchableKeys:[],searchableKeys:[]}),_useRequest$result=_useRequest.result,accessRecords=_useRequest$result.accessRecords,itemCount=_useRequest$result.itemCount,relatedSearchableKeys=_useRequest$result.relatedSearchableKeys,searchableKeys=_useRequest$result.searchableKeys,organizationRoles=_useRequest$result.organizationRoles,contentError=_useRequest.error,isLoading=_useRequest.isLoading,fetchAccessRecords=_useRequest.request;useEffect(function(){fetchAccessRecords();},[fetchAccessRecords]);var _useDeleteItems=useDeleteItems(useCallback(function(){if(typeof deletionRole.team_id!=='undefined'){return TeamsAPI.disassociateRole(deletionRole.team_id,deletionRole.id);}return UsersAPI.disassociateRole(deletionRecord.id,deletionRole.id);/* eslint-disable-next-line react-hooks/exhaustive-deps */},[deletionRole]),{qsConfig:QS_CONFIG,fetchItems:fetchAccessRecords}),isDeleteLoading=_useDeleteItems.isLoading,deleteRole=_useDeleteItems.deleteItems,deletionError=_useDeleteItems.deletionError,clearDeletionError=_useDeleteItems.clearDeletionError;var toolbarSearchColumns=[{name:/*i18n*/i18n._(\"Username\"),key:'username__icontains',isDefault:true},{name:/*i18n*/i18n._(\"First Name\"),key:'first_name__icontains'},{name:/*i18n*/i18n._(\"Last Name\"),key:'last_name__icontains'}];if((organizationRoles===null||organizationRoles===void 0?void 0:organizationRoles.length)>0){toolbarSearchColumns.push({name:/*i18n*/i18n._(\"Roles\"),key:\"or__roles__in\",options:organizationRoles});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PaginatedTable,{error:contentError,hasContentLoading:isLoading||isDeleteLoading,items:accessRecords,itemCount:itemCount,pluralizedItemName:/*i18n*/i18n._(\"Roles\"),qsConfig:QS_CONFIG,toolbarSearchColumns:toolbarSearchColumns,toolbarSearchableKeys:searchableKeys,toolbarRelatedSearchableKeys:relatedSearchableKeys,renderToolbar:function renderToolbar(props){return/*#__PURE__*/_jsx(DataListToolbar,_objectSpread(_objectSpread({},props),{},{qsConfig:QS_CONFIG,additionalControls:canAddAdditionalControls?[/*#__PURE__*/_jsx(ToolbarAddButton,{ouiaId:\"access-add-button\",onClick:function onClick(){return setShowAddModal(true);}},\"add\")]:[]}));},headerRow:/*#__PURE__*/_jsxs(HeaderRow,{qsConfig:QS_CONFIG,isSelectable:false,children:[/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"username\",children:/*i18n*/i18n._(\"Username\")}),/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"first_name\",children:/*i18n*/i18n._(\"First name\")}),/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"last_name\",children:/*i18n*/i18n._(\"Last name\")}),/*#__PURE__*/_jsx(HeaderCell,{children:/*i18n*/i18n._(\"Roles\")})]}),renderRow:function renderRow(accessRecord,index){return/*#__PURE__*/_jsx(ResourceAccessListItem,{accessRecord:accessRecord,onRoleDelete:function onRoleDelete(role,record){setDeletionRecord(record);setDeletionRole(role);setShowDeleteModal(true);},rowIndex:index},accessRecord.id);}}),showAddModal&&/*#__PURE__*/_jsx(AddResourceRole,{onClose:function onClose(){return setShowAddModal(false);},onSave:function onSave(){setShowAddModal(false);fetchAccessRecords();},onError:function onError(err){return setSubmitError(err);},roles:resource.summary_fields.object_roles,resource:resource}),showDeleteModal&&/*#__PURE__*/_jsx(DeleteRoleConfirmationModal,{role:deletionRole,username:deletionRecord.username,onCancel:function onCancel(){setDeletionRecord(null);setDeletionRole(null);setShowDeleteModal(false);},onConfirm:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deleteRole();case 2:setShowDeleteModal(false);setDeletionRecord(null);setDeletionRole(null);case 5:case\"end\":return _context2.stop();}}},_callee2);}))}),submitError&&/*#__PURE__*/_jsxs(AlertModal,{variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),isOpen:submitError,onClose:function onClose(){return setSubmitError(null);},children:[/*i18n*/i18n._(\"Failed to assign roles properly\"),/*#__PURE__*/_jsx(ErrorDetail,{error:submitError})]}),deletionError&&/*#__PURE__*/_jsx(AlertModal,{isOpen:deletionError,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:clearDeletionError,children:/*i18n*/i18n._(\"Failed to delete role\")})]});}export default ResourceAccessList;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useLocation","RolesAPI","TeamsAPI","UsersAPI","getQSConfig","parseQueryString","useRequest","useDeleteItems","useUserProfile","AddResourceRole","AlertModal","DataListToolbar","PaginatedTable","HeaderRow","HeaderCell","ToolbarAddButton","getSearchableKeys","DeleteRoleConfirmationModal","ResourceAccessListItem","ErrorDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","QS_CONFIG","page","page_size","order_by","ResourceAccessList","_ref","_resource$summary_fie","_resource$summary_fie2","apiModel","resource","_useUserProfile","isSuperUser","_useState","_useState2","_slicedToArray","submitError","setSubmitError","_useState3","_useState4","deletionRecord","setDeletionRecord","_useState5","_useState6","deletionRole","setDeletionRole","_useState7","_useState8","showAddModal","setShowAddModal","_useState9","_useState10","showDeleteModal","setShowDeleteModal","location","canAddAdditionalControls","type","summary_fields","user_capabilities","edit","organization","_resource$summary_fie3","_resource$summary_fie4","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_actionsResponse$data","_actionsResponse$data2","params","_yield$Promise$all","_yield$Promise$all2","response","actionsResponse","orgRoles","_yield$Promise$all3","_yield$Promise$all4","systemAdmin","systemAuditor","wrap","_callee$","_context","prev","next","search","Promise","all","readAccessList","id","readAccessOptions","sent","pathname","includes","read","singleton_name","data","results","Object","entries","object_roles","map","_ref3","_ref4","key","value","concat","name","abrupt","accessRecords","itemCount","count","relatedSearchableKeys","related_search_fields","val","slice","searchableKeys","actions","GET","organizationRoles","stop","_useRequest$result","result","contentError","error","isLoading","fetchAccessRecords","request","_useDeleteItems","team_id","disassociateRole","qsConfig","fetchItems","isDeleteLoading","deleteRole","deleteItems","deletionError","clearDeletionError","toolbarSearchColumns","i18n","_","isDefault","length","push","options","children","hasContentLoading","items","pluralizedItemName","toolbarSearchableKeys","toolbarRelatedSearchableKeys","renderToolbar","props","_objectSpread","additionalControls","ouiaId","onClick","headerRow","isSelectable","sortKey","renderRow","accessRecord","index","onRoleDelete","role","record","rowIndex","onClose","onSave","onError","err","roles","username","onCancel","onConfirm","_callee2","_callee2$","_context2","variant","title","isOpen"],"sources":["/awx_devel/awx/ui/src/components/ResourceAccessList/ResourceAccessList.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { RolesAPI, TeamsAPI, UsersAPI } from 'api';\nimport { getQSConfig, parseQueryString } from 'util/qs';\nimport useRequest, { useDeleteItems } from 'hooks/useRequest';\nimport { useUserProfile } from 'contexts/Config';\nimport AddResourceRole from '../AddRole/AddResourceRole';\nimport AlertModal from '../AlertModal';\nimport DataListToolbar from '../DataListToolbar';\nimport PaginatedTable, {\n  HeaderRow,\n  HeaderCell,\n  ToolbarAddButton,\n  getSearchableKeys,\n} from '../PaginatedTable';\nimport DeleteRoleConfirmationModal from './DeleteRoleConfirmationModal';\nimport ResourceAccessListItem from './ResourceAccessListItem';\nimport ErrorDetail from '../ErrorDetail';\n\nconst QS_CONFIG = getQSConfig('access', {\n  page: 1,\n  page_size: 5,\n  order_by: 'first_name',\n});\n\nfunction ResourceAccessList({ apiModel, resource }) {\n  const { isSuperUser } = useUserProfile();\n  const [submitError, setSubmitError] = useState(null);\n  const [deletionRecord, setDeletionRecord] = useState(null);\n  const [deletionRole, setDeletionRole] = useState(null);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const location = useLocation();\n\n  let canAddAdditionalControls = false;\n  if (isSuperUser) {\n    canAddAdditionalControls = true;\n  }\n  if (\n    resource.type === 'credential' &&\n    resource?.summary_fields?.user_capabilities?.edit &&\n    resource?.organization\n  ) {\n    canAddAdditionalControls = true;\n  }\n  if (resource.type !== 'credential') {\n    canAddAdditionalControls =\n      resource?.summary_fields?.user_capabilities?.edit;\n  }\n\n  const {\n    result: {\n      accessRecords,\n      itemCount,\n      relatedSearchableKeys,\n      searchableKeys,\n      organizationRoles,\n    },\n    error: contentError,\n    isLoading,\n    request: fetchAccessRecords,\n  } = useRequest(\n    useCallback(async () => {\n      const params = parseQueryString(QS_CONFIG, location.search);\n      const [response, actionsResponse] = await Promise.all([\n        apiModel.readAccessList(resource.id, params),\n        apiModel.readAccessOptions(resource.id),\n      ]);\n\n      // Eventually this could be expanded to other access lists.\n      // We will need to combine the role ids of all the different level\n      // of resource level roles.\n\n      let orgRoles;\n      if (location.pathname.includes('/organizations')) {\n        const [\n          {\n            data: { results: systemAdmin },\n          },\n          {\n            data: { results: systemAuditor },\n          },\n        ] = await Promise.all([\n          RolesAPI.read({ singleton_name: 'system_administrator' }),\n          RolesAPI.read({ singleton_name: 'system_auditor' }),\n        ]);\n\n        orgRoles = Object.entries(resource.summary_fields.object_roles).map(\n          ([key, value]) => {\n            if (key === 'admin_role') {\n              return [`${value.id}, ${systemAdmin[0].id}`, value.name];\n            }\n\n            if (key === 'auditor_role') {\n              return [`${value.id}, ${systemAuditor[0].id}`, value.name];\n            }\n\n            return [`${value.id}`, value.name];\n          }\n        );\n      }\n      return {\n        accessRecords: response.data.results,\n        itemCount: response.data.count,\n        relatedSearchableKeys: (\n          actionsResponse?.data?.related_search_fields || []\n        ).map((val) => val.slice(0, -8)),\n        searchableKeys: getSearchableKeys(actionsResponse.data.actions?.GET),\n        organizationRoles: orgRoles,\n      };\n    }, [apiModel, location, resource]),\n    {\n      accessRecords: [],\n      itemCount: 0,\n      relatedSearchableKeys: [],\n      searchableKeys: [],\n    }\n  );\n\n  useEffect(() => {\n    fetchAccessRecords();\n  }, [fetchAccessRecords]);\n\n  const {\n    isLoading: isDeleteLoading,\n    deleteItems: deleteRole,\n    deletionError,\n    clearDeletionError,\n  } = useDeleteItems(\n    useCallback(() => {\n      if (typeof deletionRole.team_id !== 'undefined') {\n        return TeamsAPI.disassociateRole(deletionRole.team_id, deletionRole.id);\n      }\n      return UsersAPI.disassociateRole(deletionRecord.id, deletionRole.id);\n      /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [deletionRole]),\n    {\n      qsConfig: QS_CONFIG,\n      fetchItems: fetchAccessRecords,\n    }\n  );\n  const toolbarSearchColumns = [\n    {\n      name: t`Username`,\n      key: 'username__icontains',\n      isDefault: true,\n    },\n    {\n      name: t`First Name`,\n      key: 'first_name__icontains',\n    },\n    {\n      name: t`Last Name`,\n      key: 'last_name__icontains',\n    },\n  ];\n\n  if (organizationRoles?.length > 0) {\n    toolbarSearchColumns.push({\n      name: t`Roles`,\n      key: `or__roles__in`,\n      options: organizationRoles,\n    });\n  }\n\n  return (\n    <>\n      <PaginatedTable\n        error={contentError}\n        hasContentLoading={isLoading || isDeleteLoading}\n        items={accessRecords}\n        itemCount={itemCount}\n        pluralizedItemName={t`Roles`}\n        qsConfig={QS_CONFIG}\n        toolbarSearchColumns={toolbarSearchColumns}\n        toolbarSearchableKeys={searchableKeys}\n        toolbarRelatedSearchableKeys={relatedSearchableKeys}\n        renderToolbar={(props) => (\n          <DataListToolbar\n            {...props}\n            qsConfig={QS_CONFIG}\n            additionalControls={\n              canAddAdditionalControls\n                ? [\n                    <ToolbarAddButton\n                      ouiaId=\"access-add-button\"\n                      key=\"add\"\n                      onClick={() => setShowAddModal(true)}\n                    />,\n                  ]\n                : []\n            }\n          />\n        )}\n        headerRow={\n          <HeaderRow qsConfig={QS_CONFIG} isSelectable={false}>\n            <HeaderCell sortKey=\"username\">{t`Username`}</HeaderCell>\n            <HeaderCell sortKey=\"first_name\">{t`First name`}</HeaderCell>\n            <HeaderCell sortKey=\"last_name\">{t`Last name`}</HeaderCell>\n            <HeaderCell>{t`Roles`}</HeaderCell>\n          </HeaderRow>\n        }\n        renderRow={(accessRecord, index) => (\n          <ResourceAccessListItem\n            key={accessRecord.id}\n            accessRecord={accessRecord}\n            onRoleDelete={(role, record) => {\n              setDeletionRecord(record);\n              setDeletionRole(role);\n              setShowDeleteModal(true);\n            }}\n            rowIndex={index}\n          />\n        )}\n      />\n      {showAddModal && (\n        <AddResourceRole\n          onClose={() => setShowAddModal(false)}\n          onSave={() => {\n            setShowAddModal(false);\n            fetchAccessRecords();\n          }}\n          onError={(err) => setSubmitError(err)}\n          roles={resource.summary_fields.object_roles}\n          resource={resource}\n        />\n      )}\n      {showDeleteModal && (\n        <DeleteRoleConfirmationModal\n          role={deletionRole}\n          username={deletionRecord.username}\n          onCancel={() => {\n            setDeletionRecord(null);\n            setDeletionRole(null);\n            setShowDeleteModal(false);\n          }}\n          onConfirm={async () => {\n            await deleteRole();\n            setShowDeleteModal(false);\n            setDeletionRecord(null);\n            setDeletionRole(null);\n          }}\n        />\n      )}\n      {submitError && (\n        <AlertModal\n          variant=\"error\"\n          title={t`Error!`}\n          isOpen={submitError}\n          onClose={() => setSubmitError(null)}\n        >\n          {t`Failed to assign roles properly`}\n          <ErrorDetail error={submitError} />\n        </AlertModal>\n      )}\n      {deletionError && (\n        <AlertModal\n          isOpen={deletionError}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={clearDeletionError}\n        >\n          {t`Failed to delete role`}\n        </AlertModal>\n      )}\n    </>\n  );\n}\nexport default ResourceAccessList;\n"],"mappings":"6bAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC/D,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,OAASC,QAAQ,CAAEC,QAAQ,CAAEC,QAAQ,KAAQ,KAAK,CAClD,OAASC,WAAW,CAAEC,gBAAgB,KAAQ,SAAS,CACvD,MAAO,CAAAC,UAAU,EAAIC,cAAc,KAAQ,kBAAkB,CAC7D,OAASC,cAAc,KAAQ,iBAAiB,CAChD,MAAO,CAAAC,eAAe,KAAM,4BAA4B,CACxD,MAAO,CAAAC,UAAU,KAAM,eAAe,CACtC,MAAO,CAAAC,eAAe,KAAM,oBAAoB,CAChD,MAAO,CAAAC,cAAc,EACnBC,SAAS,CACTC,UAAU,CACVC,gBAAgB,CAChBC,iBAAiB,KACZ,mBAAmB,CAC1B,MAAO,CAAAC,2BAA2B,KAAM,+BAA+B,CACvE,MAAO,CAAAC,sBAAsB,KAAM,0BAA0B,CAC7D,MAAO,CAAAC,WAAW,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzC,GAAM,CAAAC,SAAS,CAAGtB,WAAW,CAAC,QAAQ,CAAE,CACtCuB,IAAI,CAAE,CAAC,CACPC,SAAS,CAAE,CAAC,CACZC,QAAQ,CAAE,YACZ,CAAC,CAAC,CAEF,QAAS,CAAAC,kBAAkBA,CAAAC,IAAA,CAAyB,KAAAC,qBAAA,CAAAC,sBAAA,IAAtB,CAAAC,QAAQ,CAAAH,IAAA,CAARG,QAAQ,CAAEC,QAAQ,CAAAJ,IAAA,CAARI,QAAQ,CAC9C,IAAAC,eAAA,CAAwB5B,cAAc,CAAC,CAAC,CAAhC6B,WAAW,CAAAD,eAAA,CAAXC,WAAW,CACnB,IAAAC,SAAA,CAAsCvC,QAAQ,CAAC,IAAI,CAAC,CAAAwC,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAA4C5C,QAAQ,CAAC,IAAI,CAAC,CAAA6C,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAnDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IACxC,IAAAG,UAAA,CAAwChD,QAAQ,CAAC,IAAI,CAAC,CAAAiD,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA/CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAAwCpD,QAAQ,CAAC,KAAK,CAAC,CAAAqD,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAhDE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAA8CxD,QAAQ,CAAC,KAAK,CAAC,CAAAyD,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAtDE,eAAe,CAAAD,WAAA,IAAEE,kBAAkB,CAAAF,WAAA,IAC1C,GAAM,CAAAG,QAAQ,CAAG3D,WAAW,CAAC,CAAC,CAE9B,GAAI,CAAA4D,wBAAwB,CAAG,KAAK,CACpC,GAAIvB,WAAW,CAAE,CACfuB,wBAAwB,CAAG,IAAI,CACjC,CACA,GACEzB,QAAQ,CAAC0B,IAAI,GAAK,YAAY,EAC9B1B,QAAQ,SAARA,QAAQ,YAAAH,qBAAA,CAARG,QAAQ,CAAE2B,cAAc,UAAA9B,qBAAA,YAAAC,sBAAA,CAAxBD,qBAAA,CAA0B+B,iBAAiB,UAAA9B,sBAAA,WAA3CA,sBAAA,CAA6C+B,IAAI,EACjD7B,QAAQ,SAARA,QAAQ,WAARA,QAAQ,CAAE8B,YAAY,CACtB,CACAL,wBAAwB,CAAG,IAAI,CACjC,CACA,GAAIzB,QAAQ,CAAC0B,IAAI,GAAK,YAAY,CAAE,KAAAK,sBAAA,CAAAC,sBAAA,CAClCP,wBAAwB,CACtBzB,QAAQ,SAARA,QAAQ,kBAAA+B,sBAAA,CAAR/B,QAAQ,CAAE2B,cAAc,UAAAI,sBAAA,kBAAAC,sBAAA,CAAxBD,sBAAA,CAA0BH,iBAAiB,UAAAI,sBAAA,iBAA3CA,sBAAA,CAA6CH,IAAI,CACrD,CAEA,IAAAI,WAAA,CAWI9D,UAAU,CACZT,WAAW,cAAAwE,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,qBAAA,CAAAC,sBAAA,KAAAC,MAAA,CAAAC,kBAAA,CAAAC,mBAAA,CAAAC,QAAA,CAAAC,eAAA,CAAAC,QAAA,CAAAC,mBAAA,CAAAC,mBAAA,CAAAC,WAAA,CAAAC,aAAA,QAAAd,mBAAA,CAAAe,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACJd,MAAM,CAAGtE,gBAAgB,CAACqB,SAAS,CAAEiC,QAAQ,CAAC+B,MAAM,CAAC,CAAAH,QAAA,CAAAE,IAAA,SACjB,CAAAE,OAAO,CAACC,GAAG,CAAC,CACpD1D,QAAQ,CAAC2D,cAAc,CAAC1D,QAAQ,CAAC2D,EAAE,CAAEnB,MAAM,CAAC,CAC5CzC,QAAQ,CAAC6D,iBAAiB,CAAC5D,QAAQ,CAAC2D,EAAE,CAAC,CACxC,CAAC,QAAAlB,kBAAA,CAAAW,QAAA,CAAAS,IAAA,CAAAnB,mBAAA,CAAArC,cAAA,CAAAoC,kBAAA,IAHKE,QAAQ,CAAAD,mBAAA,IAAEE,eAAe,CAAAF,mBAAA,QAU5BlB,QAAQ,CAACsC,QAAQ,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAAX,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UAQpC,CAAAE,OAAO,CAACC,GAAG,CAAC,CACpB3F,QAAQ,CAACkG,IAAI,CAAC,CAAEC,cAAc,CAAE,sBAAuB,CAAC,CAAC,CACzDnG,QAAQ,CAACkG,IAAI,CAAC,CAAEC,cAAc,CAAE,gBAAiB,CAAC,CAAC,CACpD,CAAC,SAAAnB,mBAAA,CAAAM,QAAA,CAAAS,IAAA,CAAAd,mBAAA,CAAA1C,cAAA,CAAAyC,mBAAA,IARmBE,WAAW,CAAAD,mBAAA,IAA5BmB,IAAI,CAAIC,OAAO,CAGElB,aAAa,CAAAF,mBAAA,IAA9BmB,IAAI,CAAIC,OAAO,CAOnBtB,QAAQ,CAAGuB,MAAM,CAACC,OAAO,CAACrE,QAAQ,CAAC2B,cAAc,CAAC2C,YAAY,CAAC,CAACC,GAAG,CACjE,SAAAC,KAAA,CAAkB,KAAAC,KAAA,CAAApE,cAAA,CAAAmE,KAAA,IAAhBE,GAAG,CAAAD,KAAA,IAAEE,KAAK,CAAAF,KAAA,IACV,GAAIC,GAAG,GAAK,YAAY,CAAE,CACxB,MAAO,IAAAE,MAAA,CAAID,KAAK,CAAChB,EAAE,OAAAiB,MAAA,CAAK5B,WAAW,CAAC,CAAC,CAAC,CAACW,EAAE,EAAIgB,KAAK,CAACE,IAAI,CAAC,CAC1D,CAEA,GAAIH,GAAG,GAAK,cAAc,CAAE,CAC1B,MAAO,IAAAE,MAAA,CAAID,KAAK,CAAChB,EAAE,OAAAiB,MAAA,CAAK3B,aAAa,CAAC,CAAC,CAAC,CAACU,EAAE,EAAIgB,KAAK,CAACE,IAAI,CAAC,CAC5D,CAEA,MAAO,IAAAD,MAAA,CAAID,KAAK,CAAChB,EAAE,EAAIgB,KAAK,CAACE,IAAI,CAAC,CACpC,CACF,CAAC,CAAC,eAAAzB,QAAA,CAAA0B,MAAA,UAEG,CACLC,aAAa,CAAEpC,QAAQ,CAACuB,IAAI,CAACC,OAAO,CACpCa,SAAS,CAAErC,QAAQ,CAACuB,IAAI,CAACe,KAAK,CAC9BC,qBAAqB,CAAE,CACrB,CAAAtC,eAAe,SAAfA,eAAe,kBAAAN,qBAAA,CAAfM,eAAe,CAAEsB,IAAI,UAAA5B,qBAAA,iBAArBA,qBAAA,CAAuB6C,qBAAqB,GAAI,EAAE,EAClDZ,GAAG,CAAC,SAACa,GAAG,QAAK,CAAAA,GAAG,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,GAAC,CAChCC,cAAc,CAAEzG,iBAAiB,EAAA0D,sBAAA,CAACK,eAAe,CAACsB,IAAI,CAACqB,OAAO,UAAAhD,sBAAA,iBAA5BA,sBAAA,CAA8BiD,GAAG,CAAC,CACpEC,iBAAiB,CAAE5C,QACrB,CAAC,2BAAAO,QAAA,CAAAsC,IAAA,OAAArD,OAAA,GACF,GAAE,CAACtC,QAAQ,CAAEyB,QAAQ,CAAExB,QAAQ,CAAC,CAAC,CAClC,CACE+E,aAAa,CAAE,EAAE,CACjBC,SAAS,CAAE,CAAC,CACZE,qBAAqB,CAAE,EAAE,CACzBI,cAAc,CAAE,EAClB,CACF,CAAC,CAAAK,kBAAA,CAAA1D,WAAA,CAlEC2D,MAAM,CACJb,aAAa,CAAAY,kBAAA,CAAbZ,aAAa,CACbC,SAAS,CAAAW,kBAAA,CAATX,SAAS,CACTE,qBAAqB,CAAAS,kBAAA,CAArBT,qBAAqB,CACrBI,cAAc,CAAAK,kBAAA,CAAdL,cAAc,CACdG,iBAAiB,CAAAE,kBAAA,CAAjBF,iBAAiB,CAEZI,YAAY,CAAA5D,WAAA,CAAnB6D,KAAK,CACLC,SAAS,CAAA9D,WAAA,CAAT8D,SAAS,CACAC,kBAAkB,CAAA/D,WAAA,CAA3BgE,OAAO,CA2DTtI,SAAS,CAAC,UAAM,CACdqI,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,CAACA,kBAAkB,CAAC,CAAC,CAExB,IAAAE,eAAA,CAKI9H,cAAc,CAChBV,WAAW,CAAC,UAAM,CAChB,GAAI,MAAO,CAAAoD,YAAY,CAACqF,OAAO,GAAK,WAAW,CAAE,CAC/C,MAAO,CAAApI,QAAQ,CAACqI,gBAAgB,CAACtF,YAAY,CAACqF,OAAO,CAAErF,YAAY,CAAC6C,EAAE,CAAC,CACzE,CACA,MAAO,CAAA3F,QAAQ,CAACoI,gBAAgB,CAAC1F,cAAc,CAACiD,EAAE,CAAE7C,YAAY,CAAC6C,EAAE,CAAC,CACpE,0DACF,CAAC,CAAE,CAAC7C,YAAY,CAAC,CAAC,CAClB,CACEuF,QAAQ,CAAE9G,SAAS,CACnB+G,UAAU,CAAEN,kBACd,CACF,CAAC,CAhBYO,eAAe,CAAAL,eAAA,CAA1BH,SAAS,CACIS,UAAU,CAAAN,eAAA,CAAvBO,WAAW,CACXC,aAAa,CAAAR,eAAA,CAAbQ,aAAa,CACbC,kBAAkB,CAAAT,eAAA,CAAlBS,kBAAkB,CAcpB,GAAM,CAAAC,oBAAoB,CAAG,CAC3B,CACE/B,IAAI,SAAEgC,IAAA,CAAAC,CAAA,WAAU,CAAC,CACjBpC,GAAG,CAAE,qBAAqB,CAC1BqC,SAAS,CAAE,IACb,CAAC,CACD,CACElC,IAAI,SAAEgC,IAAA,CAAAC,CAAA,aAAY,CAAC,CACnBpC,GAAG,CAAE,uBACP,CAAC,CACD,CACEG,IAAI,SAAEgC,IAAA,CAAAC,CAAA,YAAW,CAAC,CAClBpC,GAAG,CAAE,sBACP,CAAC,CACF,CAED,GAAI,CAAAe,iBAAiB,SAAjBA,iBAAiB,iBAAjBA,iBAAiB,CAAEuB,MAAM,EAAG,CAAC,CAAE,CACjCJ,oBAAoB,CAACK,IAAI,CAAC,CACxBpC,IAAI,SAAEgC,IAAA,CAAAC,CAAA,QAAO,CAAC,CACdpC,GAAG,gBAAiB,CACpBwC,OAAO,CAAEzB,iBACX,CAAC,CAAC,CACJ,CAEA,mBACErG,KAAA,CAAAE,SAAA,EAAA6H,QAAA,eACEjI,IAAA,CAACT,cAAc,EACbqH,KAAK,CAAED,YAAa,CACpBuB,iBAAiB,CAAErB,SAAS,EAAIQ,eAAgB,CAChDc,KAAK,CAAEtC,aAAc,CACrBC,SAAS,CAAEA,SAAU,CACrBsC,kBAAkB,SAAET,IAAA,CAAAC,CAAA,QAAO,CAAE,CAC7BT,QAAQ,CAAE9G,SAAU,CACpBqH,oBAAoB,CAAEA,oBAAqB,CAC3CW,qBAAqB,CAAEjC,cAAe,CACtCkC,4BAA4B,CAAEtC,qBAAsB,CACpDuC,aAAa,CAAE,SAAAA,cAACC,KAAK,qBACnBxI,IAAA,CAACV,eAAe,CAAAmJ,aAAA,CAAAA,aAAA,IACVD,KAAK,MACTrB,QAAQ,CAAE9G,SAAU,CACpBqI,kBAAkB,CAChBnG,wBAAwB,CACpB,cACEvC,IAAA,CAACN,gBAAgB,EACfiJ,MAAM,CAAC,mBAAmB,CAE1BC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA3G,eAAe,CAAC,IAAI,CAAC,EAAC,EADjC,KAEL,CAAC,CACH,CACD,EACL,EACF,CAAC,EACF,CACF4G,SAAS,cACP3I,KAAA,CAACV,SAAS,EAAC2H,QAAQ,CAAE9G,SAAU,CAACyI,YAAY,CAAE,KAAM,CAAAb,QAAA,eAClDjI,IAAA,CAACP,UAAU,EAACsJ,OAAO,CAAC,UAAU,CAAAd,QAAA,SAAEN,IAAA,CAAAC,CAAA,WAAU,CAAC,CAAa,CAAC,cACzD5H,IAAA,CAACP,UAAU,EAACsJ,OAAO,CAAC,YAAY,CAAAd,QAAA,SAAEN,IAAA,CAAAC,CAAA,aAAY,CAAC,CAAa,CAAC,cAC7D5H,IAAA,CAACP,UAAU,EAACsJ,OAAO,CAAC,WAAW,CAAAd,QAAA,SAAEN,IAAA,CAAAC,CAAA,YAAW,CAAC,CAAa,CAAC,cAC3D5H,IAAA,CAACP,UAAU,EAAAwI,QAAA,SAAEN,IAAA,CAAAC,CAAA,QAAO,CAAC,CAAa,CAAC,EAC1B,CACZ,CACDoB,SAAS,CAAE,SAAAA,UAACC,YAAY,CAAEC,KAAK,qBAC7BlJ,IAAA,CAACH,sBAAsB,EAErBoJ,YAAY,CAAEA,YAAa,CAC3BE,YAAY,CAAE,SAAAA,aAACC,IAAI,CAAEC,MAAM,CAAK,CAC9B5H,iBAAiB,CAAC4H,MAAM,CAAC,CACzBxH,eAAe,CAACuH,IAAI,CAAC,CACrB/G,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAE,CACFiH,QAAQ,CAAEJ,KAAM,EAPXD,YAAY,CAACxE,EAQnB,CAAC,EACF,CACH,CAAC,CACDzC,YAAY,eACXhC,IAAA,CAACZ,eAAe,EACdmK,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAtH,eAAe,CAAC,KAAK,CAAC,EAAC,CACtCuH,MAAM,CAAE,SAAAA,OAAA,CAAM,CACZvH,eAAe,CAAC,KAAK,CAAC,CACtB6E,kBAAkB,CAAC,CAAC,CACtB,CAAE,CACF2C,OAAO,CAAE,SAAAA,QAACC,GAAG,QAAK,CAAArI,cAAc,CAACqI,GAAG,CAAC,EAAC,CACtCC,KAAK,CAAE7I,QAAQ,CAAC2B,cAAc,CAAC2C,YAAa,CAC5CtE,QAAQ,CAAEA,QAAS,CACpB,CACF,CACAsB,eAAe,eACdpC,IAAA,CAACJ,2BAA2B,EAC1BwJ,IAAI,CAAExH,YAAa,CACnBgI,QAAQ,CAAEpI,cAAc,CAACoI,QAAS,CAClCC,QAAQ,CAAE,SAAAA,SAAA,CAAM,CACdpI,iBAAiB,CAAC,IAAI,CAAC,CACvBI,eAAe,CAAC,IAAI,CAAC,CACrBQ,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAE,CACFyH,SAAS,cAAA9G,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAE,SAAA6G,SAAA,SAAA9G,mBAAA,CAAAe,IAAA,UAAAgG,UAAAC,SAAA,kBAAAA,SAAA,CAAA9F,IAAA,CAAA8F,SAAA,CAAA7F,IAAA,SAAA6F,SAAA,CAAA7F,IAAA,SACH,CAAAkD,UAAU,CAAC,CAAC,QAClBjF,kBAAkB,CAAC,KAAK,CAAC,CACzBZ,iBAAiB,CAAC,IAAI,CAAC,CACvBI,eAAe,CAAC,IAAI,CAAC,CAAC,wBAAAoI,SAAA,CAAAzD,IAAA,OAAAuD,QAAA,GACvB,EAAC,CACH,CACF,CACA3I,WAAW,eACVlB,KAAA,CAACb,UAAU,EACT6K,OAAO,CAAC,OAAO,CACfC,KAAK,SAAExC,IAAA,CAAAC,CAAA,SAAQ,CAAE,CACjBwC,MAAM,CAAEhJ,WAAY,CACpBmI,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAlI,cAAc,CAAC,IAAI,CAAC,EAAC,CAAA4G,QAAA,UAEnCN,IAAA,CAAAC,CAAA,kCAAiC,CAAC,cACnC5H,IAAA,CAACF,WAAW,EAAC8G,KAAK,CAAExF,WAAY,CAAE,CAAC,EACzB,CACb,CACAoG,aAAa,eACZxH,IAAA,CAACX,UAAU,EACT+K,MAAM,CAAE5C,aAAc,CACtB0C,OAAO,CAAC,OAAO,CACfC,KAAK,SAAExC,IAAA,CAAAC,CAAA,SAAQ,CAAE,CACjB2B,OAAO,CAAE9B,kBAAmB,CAAAQ,QAAA,SAE3BN,IAAA,CAAAC,CAAA,wBAAuB,CAAC,CACf,CACb,EACD,CAAC,CAEP,CACA,cAAe,CAAAnH,kBAAkB"},"metadata":{},"sourceType":"module"}