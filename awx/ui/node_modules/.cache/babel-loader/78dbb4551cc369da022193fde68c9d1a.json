{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import{DatePicker,isValidDate,yyyyMMddFormat,TimePicker,FormGroup}from'@patternfly/react-core';import styled from'styled-components';import{required,validateTime,combine}from'util/validators';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DateTimeGroup=styled.span(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n\"])));function DateTimePicker(_ref){var dateFieldName=_ref.dateFieldName,timeFieldName=_ref.timeFieldName,label=_ref.label;var _useField=useField({name:dateFieldName,validate:combine([required(null),isValidDate])}),_useField2=_slicedToArray(_useField,3),dateField=_useField2[0],dateMeta=_useField2[1],dateHelpers=_useField2[2];var _useField3=useField({name:timeFieldName,validate:combine([required(null),validateTime()])}),_useField4=_slicedToArray(_useField3,3),timeField=_useField4[0],timeMeta=_useField4[1],timeHelpers=_useField4[2];var onDateChange=function onDateChange(_,dateString,date){dateHelpers.setTouched();if(isValidDate(date)&&dateString===yyyyMMddFormat(date)){dateHelpers.setValue(dateString);}};return/*#__PURE__*/_jsx(FormGroup,{fieldId:\"schedule-\".concat(label),\"data-cy\":\"schedule-\".concat(label),helperTextInvalid:dateMeta.error||timeMeta.error,isRequired:true,validated:(!dateMeta.touched||!dateMeta.error)&&(!timeMeta.touched||!timeMeta.error)?'default':'error',label:label,children:/*#__PURE__*/_jsxs(DateTimeGroup,{children:[/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({\"aria-label\":dateFieldName.startsWith('start')?/*i18n*/i18n._(\"Start date\"):/*i18n*/i18n._(\"End date\")},dateField),{},{value:dateField.value.split('T')[0],onChange:onDateChange})),/*#__PURE__*/_jsx(TimePicker,_objectSpread(_objectSpread({placeholder:\"hh:mm AM/PM\",stepMinutes:15,\"aria-label\":timeFieldName.startsWith('start')?/*i18n*/i18n._(\"Start time\"):/*i18n*/i18n._(\"End time\"),time:timeField.value},timeField),{},{onChange:function onChange(_,time){return timeHelpers.setValue(time);}}))]})});}export default DateTimePicker;","map":{"version":3,"names":["React","useField","DatePicker","isValidDate","yyyyMMddFormat","TimePicker","FormGroup","styled","required","validateTime","combine","jsx","_jsx","jsxs","_jsxs","DateTimeGroup","span","_templateObject","_taggedTemplateLiteral","DateTimePicker","_ref","dateFieldName","timeFieldName","label","_useField","name","validate","_useField2","_slicedToArray","dateField","dateMeta","dateHelpers","_useField3","_useField4","timeField","timeMeta","timeHelpers","onDateChange","_","dateString","date","setTouched","setValue","fieldId","concat","helperTextInvalid","error","isRequired","validated","touched","children","_objectSpread","startsWith","i18n","value","split","onChange","placeholder","stepMinutes","time"],"sources":["/awx_devel/awx/ui/src/components/Schedule/shared/DateTimePicker.js"],"sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport {\n  DatePicker,\n  isValidDate,\n  yyyyMMddFormat,\n  TimePicker,\n  FormGroup,\n} from '@patternfly/react-core';\nimport styled from 'styled-components';\nimport { required, validateTime, combine } from 'util/validators';\n\nconst DateTimeGroup = styled.span`\n  display: flex;\n`;\nfunction DateTimePicker({ dateFieldName, timeFieldName, label }) {\n  const [dateField, dateMeta, dateHelpers] = useField({\n    name: dateFieldName,\n    validate: combine([required(null), isValidDate]),\n  });\n  const [timeField, timeMeta, timeHelpers] = useField({\n    name: timeFieldName,\n    validate: combine([required(null), validateTime()]),\n  });\n\n  const onDateChange = (_, dateString, date) => {\n    dateHelpers.setTouched();\n    if (isValidDate(date) && dateString === yyyyMMddFormat(date)) {\n      dateHelpers.setValue(dateString);\n    }\n  };\n\n  return (\n    <FormGroup\n      fieldId={`schedule-${label}`}\n      data-cy={`schedule-${label}`}\n      helperTextInvalid={dateMeta.error || timeMeta.error}\n      isRequired\n      validated={\n        (!dateMeta.touched || !dateMeta.error) &&\n        (!timeMeta.touched || !timeMeta.error)\n          ? 'default'\n          : 'error'\n      }\n      label={label}\n    >\n      <DateTimeGroup>\n        <DatePicker\n          aria-label={\n            dateFieldName.startsWith('start') ? t`Start date` : t`End date`\n          }\n          {...dateField}\n          value={dateField.value.split('T')[0]}\n          onChange={onDateChange}\n        />\n        <TimePicker\n          placeholder=\"hh:mm AM/PM\"\n          stepMinutes={15}\n          aria-label={\n            timeFieldName.startsWith('start') ? t`Start time` : t`End time`\n          }\n          time={timeField.value}\n          {...timeField}\n          onChange={(_, time) => timeHelpers.setValue(time)}\n        />\n      </DateTimeGroup>\n    </FormGroup>\n  );\n}\n\nexport default DateTimePicker;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}