{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useEffect,useState,useRef,useCallback,useMemo}from'react';import{useHistory,Redirect}from'react-router-dom';import{DateTime}from'luxon';import{RootAPI,MeAPI}from'api';import{isAuthenticated}from'util/auth';import useRequest from'hooks/useRequest';import{SESSION_TIMEOUT_KEY,SESSION_USER_ID}from'../constants';// The maximum supported timeout for setTimeout(), in milliseconds,\n// is the highest number you can represent as a signed 32bit\n// integer (approximately 25 days)\nimport{jsx as _jsx}from\"react/jsx-runtime\";var MAX_TIMEOUT=Math.pow(2,32-1)-1;// The number of seconds the session timeout warning is displayed\n// before the user is logged out. Increasing this number (up to\n// the total session time, which is 1800s by default) will cause\n// the session timeout warning to display sooner.\nvar SESSION_WARNING_DURATION=10;/**\n * The useStorage hook integrates with the browser's localStorage api.\n * It accepts a storage key as its only argument and returns a state\n * variable and setter function for that state variable.\n *\n * This utility behaves much like the standard useState hook with some\n * key differences:\n *   1. You don't pass it an initial value. Instead, the provided key\n *      is used to retrieve the initial value from local storage. If\n *      the key doesn't exist in local storage, null is returned.\n *   2. Behind the scenes, this hook registers an event listener with\n *      the Web Storage api to establish a two-way binding between the\n *      state variable and its corresponding local storage value. This\n *      means that updates to the state variable with the setter\n *      function will produce a corresponding update to the local\n *      storage value and vice-versa.\n *   3. When local storage is shared across browser tabs, the data\n *      binding is also shared across browser tabs. This means that\n *      updates to the state variable using the setter function on\n *      one tab will also update the state variable on any other tab\n *      using this hook with the same key and vice-versa.\n */function useStorage(key){var _useState=useState(window.localStorage.getItem(key)),_useState2=_slicedToArray(_useState,2),storageVal=_useState2[0],setStorageVal=_useState2[1];window.addEventListener('storage',function(){var newVal=window.localStorage.getItem(key);if(newVal!==storageVal){setStorageVal(newVal);}});var setValue=function setValue(val){window.localStorage.setItem(key,JSON.stringify(val));setStorageVal(val);};return[storageVal,setValue];}var SessionContext=/*#__PURE__*/React.createContext({});SessionContext.displayName='SessionContext';function SessionProvider(_ref){var children=_ref.children;var history=useHistory();var isSessionExpired=useRef(false);var sessionTimeoutId=useRef(null);var sessionIntervalId=useRef(null);var _useStorage=useStorage(SESSION_TIMEOUT_KEY),_useStorage2=_slicedToArray(_useStorage,2),sessionTimeout=_useStorage2[0],setSessionTimeout=_useStorage2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),sessionCountdown=_useState4[0],setSessionCountdown=_useState4[1];var _useState5=useState('/'),_useState6=_slicedToArray(_useState5,2),authRedirectTo=_useState6[0],setAuthRedirectTo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isUserBeingLoggedOut=_useState8[0],setIsUserBeingLoggedOut=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isRedirectLinkReceived=_useState10[0],setIsRedirectLinkReceived=_useState10[1];var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$RootAPI$read,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return RootAPI.read();case 2:_yield$RootAPI$read=_context.sent;data=_yield$RootAPI$read.data;return _context.abrupt(\"return\",{loginRedirectOverride:data===null||data===void 0?void 0:data.login_redirect_override});case 5:case\"end\":return _context.stop();}}},_callee);})),[]),{loginRedirectOverride:null,isLoading:true}),fetchLoginRedirectOverride=_useRequest.request,loginRedirectOverride=_useRequest.result.loginRedirectOverride,isLoading=_useRequest.isLoading;useEffect(function(){fetchLoginRedirectOverride();},[fetchLoginRedirectOverride]);var logout=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsUserBeingLoggedOut(true);setIsRedirectLinkReceived(false);if(!isSessionExpired.current){setAuthRedirectTo('/logout');window.localStorage.setItem(SESSION_USER_ID,null);}sessionStorage.clear();_context2.next=6;return RootAPI.logout();case 6:setSessionTimeout(0);setSessionCountdown(0);clearTimeout(sessionTimeoutId.current);clearInterval(sessionIntervalId.current);return _context2.abrupt(\"return\",/*#__PURE__*/_jsx(Redirect,{to:\"/login\"}));case 11:case\"end\":return _context2.stop();}}},_callee2);})),[setSessionTimeout,setSessionCountdown]);useEffect(function(){var isRedirectCondition=function isRedirectCondition(location,histLength){return location.pathname==='/login'&&histLength===2;};var unlisten=history.listen(function(location,action){if(action==='POP'||isRedirectCondition(location,history.length)){setIsRedirectLinkReceived(true);}});return function(){unlisten();// ensure that the listener is removed when the component unmounts\n};},[history]);useEffect(function(){if(!isAuthenticated(document.cookie)){return function(){};}var calcRemaining=function calcRemaining(){if(sessionTimeout){return Math.max(parseInt(sessionTimeout,10)-DateTime.now().toMillis(),0);}return 0;};var handleSessionTimeout=function handleSessionTimeout(){var countDown=SESSION_WARNING_DURATION;setSessionCountdown(countDown);sessionIntervalId.current=setInterval(function(){if(countDown>0){setSessionCountdown(--countDown);}else{isSessionExpired.current=true;logout();}},1000);};setSessionCountdown(0);clearTimeout(sessionTimeoutId.current);clearInterval(sessionIntervalId.current);var calcTimeOut=calcRemaining()-SESSION_WARNING_DURATION*1000;isSessionExpired.current=false;sessionTimeoutId.current=setTimeout(handleSessionTimeout,calcTimeOut<=0?MAX_TIMEOUT:Math.min(calcTimeOut,MAX_TIMEOUT));return function(){clearTimeout(sessionTimeoutId.current);clearInterval(sessionIntervalId.current);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[history,sessionTimeout]);var handleSessionContinue=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return MeAPI.read();case 2:setSessionCountdown(0);clearTimeout(sessionTimeoutId.current);clearInterval(sessionIntervalId.current);case 5:case\"end\":return _context3.stop();}}},_callee3);})),[]);var sessionValue=useMemo(function(){return{authRedirectTo:authRedirectTo,handleSessionContinue:handleSessionContinue,isSessionExpired:isSessionExpired,isUserBeingLoggedOut:isUserBeingLoggedOut,loginRedirectOverride:loginRedirectOverride,logout:logout,sessionCountdown:sessionCountdown,setAuthRedirectTo:setAuthRedirectTo,isRedirectLinkReceived:isRedirectLinkReceived,setIsRedirectLinkReceived:setIsRedirectLinkReceived};},[authRedirectTo,handleSessionContinue,isSessionExpired,isUserBeingLoggedOut,loginRedirectOverride,logout,sessionCountdown,setAuthRedirectTo,isRedirectLinkReceived,setIsRedirectLinkReceived]);if(isLoading){return null;}return/*#__PURE__*/_jsx(SessionContext.Provider,{value:sessionValue,children:children});}function useSession(){var context=useContext(SessionContext);if(context===undefined){throw new Error('useSession must be used within a SessionProvider');}return context;}export{SessionContext,SessionProvider,useSession};","map":{"version":3,"names":["React","useContext","useEffect","useState","useRef","useCallback","useMemo","useHistory","Redirect","DateTime","RootAPI","MeAPI","isAuthenticated","useRequest","SESSION_TIMEOUT_KEY","SESSION_USER_ID","jsx","_jsx","MAX_TIMEOUT","Math","pow","SESSION_WARNING_DURATION","useStorage","key","_useState","window","localStorage","getItem","_useState2","_slicedToArray","storageVal","setStorageVal","addEventListener","newVal","setValue","val","setItem","JSON","stringify","SessionContext","createContext","displayName","SessionProvider","_ref","children","history","isSessionExpired","sessionTimeoutId","sessionIntervalId","_useStorage","_useStorage2","sessionTimeout","setSessionTimeout","_useState3","_useState4","sessionCountdown","setSessionCountdown","_useState5","_useState6","authRedirectTo","setAuthRedirectTo","_useState7","_useState8","isUserBeingLoggedOut","setIsUserBeingLoggedOut","_useState9","_useState10","isRedirectLinkReceived","setIsRedirectLinkReceived","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$RootAPI$read","data","wrap","_callee$","_context","prev","next","read","sent","abrupt","loginRedirectOverride","login_redirect_override","stop","isLoading","fetchLoginRedirectOverride","request","result","logout","_callee2","_callee2$","_context2","current","sessionStorage","clear","clearTimeout","clearInterval","to","isRedirectCondition","location","histLength","pathname","unlisten","listen","action","length","document","cookie","calcRemaining","max","parseInt","now","toMillis","handleSessionTimeout","countDown","setInterval","calcTimeOut","setTimeout","min","handleSessionContinue","_callee3","_callee3$","_context3","sessionValue","Provider","value","useSession","context","undefined","Error"],"sources":["/awx_devel/awx/ui/src/contexts/Session.js"],"sourcesContent":["import React, {\n  useContext,\n  useEffect,\n  useState,\n  useRef,\n  useCallback,\n  useMemo,\n} from 'react';\nimport { useHistory, Redirect } from 'react-router-dom';\nimport { DateTime } from 'luxon';\nimport { RootAPI, MeAPI } from 'api';\nimport { isAuthenticated } from 'util/auth';\nimport useRequest from 'hooks/useRequest';\nimport { SESSION_TIMEOUT_KEY, SESSION_USER_ID } from '../constants';\n\n// The maximum supported timeout for setTimeout(), in milliseconds,\n// is the highest number you can represent as a signed 32bit\n// integer (approximately 25 days)\nconst MAX_TIMEOUT = 2 ** (32 - 1) - 1;\n\n// The number of seconds the session timeout warning is displayed\n// before the user is logged out. Increasing this number (up to\n// the total session time, which is 1800s by default) will cause\n// the session timeout warning to display sooner.\nconst SESSION_WARNING_DURATION = 10;\n\n/**\n * The useStorage hook integrates with the browser's localStorage api.\n * It accepts a storage key as its only argument and returns a state\n * variable and setter function for that state variable.\n *\n * This utility behaves much like the standard useState hook with some\n * key differences:\n *   1. You don't pass it an initial value. Instead, the provided key\n *      is used to retrieve the initial value from local storage. If\n *      the key doesn't exist in local storage, null is returned.\n *   2. Behind the scenes, this hook registers an event listener with\n *      the Web Storage api to establish a two-way binding between the\n *      state variable and its corresponding local storage value. This\n *      means that updates to the state variable with the setter\n *      function will produce a corresponding update to the local\n *      storage value and vice-versa.\n *   3. When local storage is shared across browser tabs, the data\n *      binding is also shared across browser tabs. This means that\n *      updates to the state variable using the setter function on\n *      one tab will also update the state variable on any other tab\n *      using this hook with the same key and vice-versa.\n */\nfunction useStorage(key) {\n  const [storageVal, setStorageVal] = useState(\n    window.localStorage.getItem(key)\n  );\n  window.addEventListener('storage', () => {\n    const newVal = window.localStorage.getItem(key);\n    if (newVal !== storageVal) {\n      setStorageVal(newVal);\n    }\n  });\n  const setValue = (val) => {\n    window.localStorage.setItem(key, JSON.stringify(val));\n    setStorageVal(val);\n  };\n  return [storageVal, setValue];\n}\n\nconst SessionContext = React.createContext({});\nSessionContext.displayName = 'SessionContext';\n\nfunction SessionProvider({ children }) {\n  const history = useHistory();\n  const isSessionExpired = useRef(false);\n  const sessionTimeoutId = useRef(null);\n  const sessionIntervalId = useRef(null);\n  const [sessionTimeout, setSessionTimeout] = useStorage(SESSION_TIMEOUT_KEY);\n  const [sessionCountdown, setSessionCountdown] = useState(0);\n  const [authRedirectTo, setAuthRedirectTo] = useState('/');\n  const [isUserBeingLoggedOut, setIsUserBeingLoggedOut] = useState(false);\n  const [isRedirectLinkReceived, setIsRedirectLinkReceived] = useState(false);\n\n  const {\n    request: fetchLoginRedirectOverride,\n    result: { loginRedirectOverride },\n    isLoading,\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await RootAPI.read();\n      return {\n        loginRedirectOverride: data?.login_redirect_override,\n      };\n    }, []),\n    {\n      loginRedirectOverride: null,\n      isLoading: true,\n    }\n  );\n\n  useEffect(() => {\n    fetchLoginRedirectOverride();\n  }, [fetchLoginRedirectOverride]);\n\n  const logout = useCallback(async () => {\n    setIsUserBeingLoggedOut(true);\n    setIsRedirectLinkReceived(false);\n    if (!isSessionExpired.current) {\n      setAuthRedirectTo('/logout');\n      window.localStorage.setItem(SESSION_USER_ID, null);\n    }\n    sessionStorage.clear();\n    await RootAPI.logout();\n    setSessionTimeout(0);\n    setSessionCountdown(0);\n    clearTimeout(sessionTimeoutId.current);\n    clearInterval(sessionIntervalId.current);\n    return <Redirect to=\"/login\" />;\n  }, [setSessionTimeout, setSessionCountdown]);\n\n  useEffect(() => {\n    const isRedirectCondition = (location, histLength) =>\n      location.pathname === '/login' && histLength === 2;\n\n    const unlisten = history.listen((location, action) => {\n      if (action === 'POP' || isRedirectCondition(location, history.length)) {\n        setIsRedirectLinkReceived(true);\n      }\n    });\n\n    return () => {\n      unlisten(); // ensure that the listener is removed when the component unmounts\n    };\n  }, [history]);\n\n  useEffect(() => {\n    if (!isAuthenticated(document.cookie)) {\n      return () => {};\n    }\n    const calcRemaining = () => {\n      if (sessionTimeout) {\n        return Math.max(\n          parseInt(sessionTimeout, 10) - DateTime.now().toMillis(),\n          0\n        );\n      }\n      return 0;\n    };\n\n    const handleSessionTimeout = () => {\n      let countDown = SESSION_WARNING_DURATION;\n      setSessionCountdown(countDown);\n\n      sessionIntervalId.current = setInterval(() => {\n        if (countDown > 0) {\n          setSessionCountdown(--countDown);\n        } else {\n          isSessionExpired.current = true;\n          logout();\n        }\n      }, 1000);\n    };\n\n    setSessionCountdown(0);\n    clearTimeout(sessionTimeoutId.current);\n    clearInterval(sessionIntervalId.current);\n\n    const calcTimeOut = calcRemaining() - SESSION_WARNING_DURATION * 1000;\n\n    isSessionExpired.current = false;\n    sessionTimeoutId.current = setTimeout(\n      handleSessionTimeout,\n      calcTimeOut <= 0 ? MAX_TIMEOUT : Math.min(calcTimeOut, MAX_TIMEOUT)\n    );\n\n    return () => {\n      clearTimeout(sessionTimeoutId.current);\n      clearInterval(sessionIntervalId.current);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [history, sessionTimeout]);\n\n  const handleSessionContinue = useCallback(async () => {\n    await MeAPI.read();\n    setSessionCountdown(0);\n    clearTimeout(sessionTimeoutId.current);\n    clearInterval(sessionIntervalId.current);\n  }, []);\n\n  const sessionValue = useMemo(\n    () => ({\n      authRedirectTo,\n      handleSessionContinue,\n      isSessionExpired,\n      isUserBeingLoggedOut,\n      loginRedirectOverride,\n      logout,\n      sessionCountdown,\n      setAuthRedirectTo,\n      isRedirectLinkReceived,\n      setIsRedirectLinkReceived,\n    }),\n    [\n      authRedirectTo,\n      handleSessionContinue,\n      isSessionExpired,\n      isUserBeingLoggedOut,\n      loginRedirectOverride,\n      logout,\n      sessionCountdown,\n      setAuthRedirectTo,\n      isRedirectLinkReceived,\n      setIsRedirectLinkReceived,\n    ]\n  );\n\n  if (isLoading) {\n    return null;\n  }\n\n  return (\n    <SessionContext.Provider value={sessionValue}>\n      {children}\n    </SessionContext.Provider>\n  );\n}\n\nfunction useSession() {\n  const context = useContext(SessionContext);\n  if (context === undefined) {\n    throw new Error('useSession must be used within a SessionProvider');\n  }\n  return context;\n}\n\nexport { SessionContext, SessionProvider, useSession };\n"],"mappings":"wTAAA,MAAO,CAAAA,KAAK,EACVC,UAAU,CACVC,SAAS,CACTC,QAAQ,CACRC,MAAM,CACNC,WAAW,CACXC,OAAO,KACF,OAAO,CACd,OAASC,UAAU,CAAEC,QAAQ,KAAQ,kBAAkB,CACvD,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,OAAO,CAAEC,KAAK,KAAQ,KAAK,CACpC,OAASC,eAAe,KAAQ,WAAW,CAC3C,MAAO,CAAAC,UAAU,KAAM,kBAAkB,CACzC,OAASC,mBAAmB,CAAEC,eAAe,KAAQ,cAAc,CAEnE;AACA;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,GAAM,CAAAC,WAAW,CAAGC,IAAA,CAAAC,GAAA,EAAC,CAAK,EAAE,CAAG,CAAC,EAAI,CAAC,CAErC;AACA;AACA;AACA;AACA,GAAM,CAAAC,wBAAwB,CAAG,EAAE,CAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,QAAS,CAAAC,UAAUA,CAACC,GAAG,CAAE,CACvB,IAAAC,SAAA,CAAoCrB,QAAQ,CAC1CsB,MAAM,CAACC,YAAY,CAACC,OAAO,CAACJ,GAAG,CACjC,CAAC,CAAAK,UAAA,CAAAC,cAAA,CAAAL,SAAA,IAFMM,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAGhCH,MAAM,CAACO,gBAAgB,CAAC,SAAS,CAAE,UAAM,CACvC,GAAM,CAAAC,MAAM,CAAGR,MAAM,CAACC,YAAY,CAACC,OAAO,CAACJ,GAAG,CAAC,CAC/C,GAAIU,MAAM,GAAKH,UAAU,CAAE,CACzBC,aAAa,CAACE,MAAM,CAAC,CACvB,CACF,CAAC,CAAC,CACF,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,GAAG,CAAK,CACxBV,MAAM,CAACC,YAAY,CAACU,OAAO,CAACb,GAAG,CAAEc,IAAI,CAACC,SAAS,CAACH,GAAG,CAAC,CAAC,CACrDJ,aAAa,CAACI,GAAG,CAAC,CACpB,CAAC,CACD,MAAO,CAACL,UAAU,CAAEI,QAAQ,CAAC,CAC/B,CAEA,GAAM,CAAAK,cAAc,cAAGvC,KAAK,CAACwC,aAAa,CAAC,CAAC,CAAC,CAAC,CAC9CD,cAAc,CAACE,WAAW,CAAG,gBAAgB,CAE7C,QAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAe,IAAZ,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACjC,GAAM,CAAAC,OAAO,CAAGtC,UAAU,CAAC,CAAC,CAC5B,GAAM,CAAAuC,gBAAgB,CAAG1C,MAAM,CAAC,KAAK,CAAC,CACtC,GAAM,CAAA2C,gBAAgB,CAAG3C,MAAM,CAAC,IAAI,CAAC,CACrC,GAAM,CAAA4C,iBAAiB,CAAG5C,MAAM,CAAC,IAAI,CAAC,CACtC,IAAA6C,WAAA,CAA4C3B,UAAU,CAACR,mBAAmB,CAAC,CAAAoC,YAAA,CAAArB,cAAA,CAAAoB,WAAA,IAApEE,cAAc,CAAAD,YAAA,IAAEE,iBAAiB,CAAAF,YAAA,IACxC,IAAAG,UAAA,CAAgDlD,QAAQ,CAAC,CAAC,CAAC,CAAAmD,UAAA,CAAAzB,cAAA,CAAAwB,UAAA,IAApDE,gBAAgB,CAAAD,UAAA,IAAEE,mBAAmB,CAAAF,UAAA,IAC5C,IAAAG,UAAA,CAA4CtD,QAAQ,CAAC,GAAG,CAAC,CAAAuD,UAAA,CAAA7B,cAAA,CAAA4B,UAAA,IAAlDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IACxC,IAAAG,UAAA,CAAwD1D,QAAQ,CAAC,KAAK,CAAC,CAAA2D,UAAA,CAAAjC,cAAA,CAAAgC,UAAA,IAAhEE,oBAAoB,CAAAD,UAAA,IAAEE,uBAAuB,CAAAF,UAAA,IACpD,IAAAG,UAAA,CAA4D9D,QAAQ,CAAC,KAAK,CAAC,CAAA+D,WAAA,CAAArC,cAAA,CAAAoC,UAAA,IAApEE,sBAAsB,CAAAD,WAAA,IAAEE,yBAAyB,CAAAF,WAAA,IAExD,IAAAG,WAAA,CAIIxD,UAAU,CACZR,WAAW,cAAAiE,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,mBAAA,CAAAC,IAAA,QAAAJ,mBAAA,CAAAK,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACa,CAAAtE,OAAO,CAACuE,IAAI,CAAC,CAAC,QAAAP,mBAAA,CAAAI,QAAA,CAAAI,IAAA,CAA7BP,IAAI,CAAAD,mBAAA,CAAJC,IAAI,QAAAG,QAAA,CAAAK,MAAA,UACL,CACLC,qBAAqB,CAAET,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEU,uBAC/B,CAAC,0BAAAP,QAAA,CAAAQ,IAAA,OAAAb,OAAA,GACF,GAAE,EAAE,CAAC,CACN,CACEW,qBAAqB,CAAE,IAAI,CAC3BG,SAAS,CAAE,IACb,CACF,CAAC,CAdUC,0BAA0B,CAAAnB,WAAA,CAAnCoB,OAAO,CACGL,qBAAqB,CAAAf,WAAA,CAA/BqB,MAAM,CAAIN,qBAAqB,CAC/BG,SAAS,CAAAlB,WAAA,CAATkB,SAAS,CAcXrF,SAAS,CAAC,UAAM,CACdsF,0BAA0B,CAAC,CAAC,CAC9B,CAAC,CAAE,CAACA,0BAA0B,CAAC,CAAC,CAEhC,GAAM,CAAAG,MAAM,CAAGtF,WAAW,cAAAiE,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAC,SAAAoB,SAAA,SAAArB,mBAAA,CAAAK,IAAA,UAAAiB,UAAAC,SAAA,kBAAAA,SAAA,CAAAf,IAAA,CAAAe,SAAA,CAAAd,IAAA,SACzBhB,uBAAuB,CAAC,IAAI,CAAC,CAC7BI,yBAAyB,CAAC,KAAK,CAAC,CAChC,GAAI,CAACtB,gBAAgB,CAACiD,OAAO,CAAE,CAC7BnC,iBAAiB,CAAC,SAAS,CAAC,CAC5BnC,MAAM,CAACC,YAAY,CAACU,OAAO,CAACrB,eAAe,CAAE,IAAI,CAAC,CACpD,CACAiF,cAAc,CAACC,KAAK,CAAC,CAAC,CAACH,SAAA,CAAAd,IAAA,SACjB,CAAAtE,OAAO,CAACiF,MAAM,CAAC,CAAC,QACtBvC,iBAAiB,CAAC,CAAC,CAAC,CACpBI,mBAAmB,CAAC,CAAC,CAAC,CACtB0C,YAAY,CAACnD,gBAAgB,CAACgD,OAAO,CAAC,CACtCI,aAAa,CAACnD,iBAAiB,CAAC+C,OAAO,CAAC,CAAC,OAAAD,SAAA,CAAAX,MAAA,uBAClClE,IAAA,CAACT,QAAQ,EAAC4F,EAAE,CAAC,QAAQ,CAAE,CAAC,2BAAAN,SAAA,CAAAR,IAAA,OAAAM,QAAA,GAChC,GAAE,CAACxC,iBAAiB,CAAEI,mBAAmB,CAAC,CAAC,CAE5CtD,SAAS,CAAC,UAAM,CACd,GAAM,CAAAmG,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIC,QAAQ,CAAEC,UAAU,QAC/C,CAAAD,QAAQ,CAACE,QAAQ,GAAK,QAAQ,EAAID,UAAU,GAAK,CAAC,GAEpD,GAAM,CAAAE,QAAQ,CAAG5D,OAAO,CAAC6D,MAAM,CAAC,SAACJ,QAAQ,CAAEK,MAAM,CAAK,CACpD,GAAIA,MAAM,GAAK,KAAK,EAAIN,mBAAmB,CAACC,QAAQ,CAAEzD,OAAO,CAAC+D,MAAM,CAAC,CAAE,CACrExC,yBAAyB,CAAC,IAAI,CAAC,CACjC,CACF,CAAC,CAAC,CAEF,MAAO,WAAM,CACXqC,QAAQ,CAAC,CAAC,CAAE;AACd,CAAC,CACH,CAAC,CAAE,CAAC5D,OAAO,CAAC,CAAC,CAEb3C,SAAS,CAAC,UAAM,CACd,GAAI,CAACU,eAAe,CAACiG,QAAQ,CAACC,MAAM,CAAC,CAAE,CACrC,MAAO,WAAM,CAAC,CAAC,CACjB,CACA,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAI5D,cAAc,CAAE,CAClB,MAAO,CAAAhC,IAAI,CAAC6F,GAAG,CACbC,QAAQ,CAAC9D,cAAc,CAAE,EAAE,CAAC,CAAG1C,QAAQ,CAACyG,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACxD,CACF,CAAC,CACH,CACA,MAAO,EAAC,CACV,CAAC,CAED,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAA,CAAS,CACjC,GAAI,CAAAC,SAAS,CAAGhG,wBAAwB,CACxCmC,mBAAmB,CAAC6D,SAAS,CAAC,CAE9BrE,iBAAiB,CAAC+C,OAAO,CAAGuB,WAAW,CAAC,UAAM,CAC5C,GAAID,SAAS,CAAG,CAAC,CAAE,CACjB7D,mBAAmB,CAAC,EAAE6D,SAAS,CAAC,CAClC,CAAC,IAAM,CACLvE,gBAAgB,CAACiD,OAAO,CAAG,IAAI,CAC/BJ,MAAM,CAAC,CAAC,CACV,CACF,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAEDnC,mBAAmB,CAAC,CAAC,CAAC,CACtB0C,YAAY,CAACnD,gBAAgB,CAACgD,OAAO,CAAC,CACtCI,aAAa,CAACnD,iBAAiB,CAAC+C,OAAO,CAAC,CAExC,GAAM,CAAAwB,WAAW,CAAGR,aAAa,CAAC,CAAC,CAAG1F,wBAAwB,CAAG,IAAI,CAErEyB,gBAAgB,CAACiD,OAAO,CAAG,KAAK,CAChChD,gBAAgB,CAACgD,OAAO,CAAGyB,UAAU,CACnCJ,oBAAoB,CACpBG,WAAW,EAAI,CAAC,CAAGrG,WAAW,CAAGC,IAAI,CAACsG,GAAG,CAACF,WAAW,CAAErG,WAAW,CACpE,CAAC,CAED,MAAO,WAAM,CACXgF,YAAY,CAACnD,gBAAgB,CAACgD,OAAO,CAAC,CACtCI,aAAa,CAACnD,iBAAiB,CAAC+C,OAAO,CAAC,CAC1C,CAAC,CACD;AACF,CAAC,CAAE,CAAClD,OAAO,CAAEM,cAAc,CAAC,CAAC,CAE7B,GAAM,CAAAuE,qBAAqB,CAAGrH,WAAW,cAAAiE,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAC,SAAAmD,SAAA,SAAApD,mBAAA,CAAAK,IAAA,UAAAgD,UAAAC,SAAA,kBAAAA,SAAA,CAAA9C,IAAA,CAAA8C,SAAA,CAAA7C,IAAA,SAAA6C,SAAA,CAAA7C,IAAA,SAClC,CAAArE,KAAK,CAACsE,IAAI,CAAC,CAAC,QAClBzB,mBAAmB,CAAC,CAAC,CAAC,CACtB0C,YAAY,CAACnD,gBAAgB,CAACgD,OAAO,CAAC,CACtCI,aAAa,CAACnD,iBAAiB,CAAC+C,OAAO,CAAC,CAAC,wBAAA8B,SAAA,CAAAvC,IAAA,OAAAqC,QAAA,GAC1C,GAAE,EAAE,CAAC,CAEN,GAAM,CAAAG,YAAY,CAAGxH,OAAO,CAC1B,iBAAO,CACLqD,cAAc,CAAdA,cAAc,CACd+D,qBAAqB,CAArBA,qBAAqB,CACrB5E,gBAAgB,CAAhBA,gBAAgB,CAChBiB,oBAAoB,CAApBA,oBAAoB,CACpBqB,qBAAqB,CAArBA,qBAAqB,CACrBO,MAAM,CAANA,MAAM,CACNpC,gBAAgB,CAAhBA,gBAAgB,CAChBK,iBAAiB,CAAjBA,iBAAiB,CACjBO,sBAAsB,CAAtBA,sBAAsB,CACtBC,yBAAyB,CAAzBA,yBACF,CAAC,EAAC,CACF,CACET,cAAc,CACd+D,qBAAqB,CACrB5E,gBAAgB,CAChBiB,oBAAoB,CACpBqB,qBAAqB,CACrBO,MAAM,CACNpC,gBAAgB,CAChBK,iBAAiB,CACjBO,sBAAsB,CACtBC,yBAAyB,CAE7B,CAAC,CAED,GAAImB,SAAS,CAAE,CACb,MAAO,KAAI,CACb,CAEA,mBACEtE,IAAA,CAACsB,cAAc,CAACwF,QAAQ,EAACC,KAAK,CAAEF,YAAa,CAAAlF,QAAA,CAC1CA,QAAQ,CACc,CAAC,CAE9B,CAEA,QAAS,CAAAqF,UAAUA,CAAA,CAAG,CACpB,GAAM,CAAAC,OAAO,CAAGjI,UAAU,CAACsC,cAAc,CAAC,CAC1C,GAAI2F,OAAO,GAAKC,SAAS,CAAE,CACzB,KAAM,IAAI,CAAAC,KAAK,CAAC,kDAAkD,CAAC,CACrE,CACA,MAAO,CAAAF,OAAO,CAChB,CAEA,OAAS3F,cAAc,CAAEG,eAAe,CAAEuF,UAAU"},"metadata":{},"sourceType":"module"}