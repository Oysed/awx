{"ast":null,"code":"import _styled from\"styled-components\";import React from'react';import{useLocation,useHistory}from'react-router-dom';import{Thead,Tr,Th as PFTh}from'@patternfly/react-table';import styled from'styled-components';import{parseQueryString,updateQueryString}from'util/qs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Th=styled(PFTh).withConfig({displayName:\"HeaderRow__Th\",componentId:\"zpwcqq-0\"})([\"--pf-c-table--cell--Overflow:initial;--pf-c-table--cell--MaxWidth:none;\"]);var _StyledTh=styled(Th).withConfig({displayName:\"HeaderRow___StyledTh\",componentId:\"zpwcqq-1\"})([\"\",\"\"],function(p){return p._css;});export default function HeaderRow(_ref){var _params$order_by,_qsConfig$defaultPara,_params$order_by2;var qsConfig=_ref.qsConfig,isExpandable=_ref.isExpandable,isSelectable=_ref.isSelectable,children=_ref.children;var location=useLocation();var history=useHistory();var params=parseQueryString(qsConfig,location.search);var onSort=function onSort(key,order){var qs=updateQueryString(qsConfig,location.search,{order_by:order==='asc'?key:\"-\".concat(key),page:null});history.push(qs?\"\".concat(location.pathname,\"?\").concat(qs):location.pathname);};var sortKey=(_params$order_by=params.order_by)===null||_params$order_by===void 0?void 0:_params$order_by.replace('-','');var sortBy={index:sortKey||((_qsConfig$defaultPara=qsConfig.defaultParams)===null||_qsConfig$defaultPara===void 0?void 0:_qsConfig$defaultPara.order_by),direction:(_params$order_by2=params.order_by)!==null&&_params$order_by2!==void 0&&_params$order_by2.startsWith('-')?'desc':'asc'};var idPrefix=\"\".concat(qsConfig.namespace,\"-table-sort\");// empty first Th aligns with checkboxes in table rows\nreturn/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{ouiaId:\"paginated-table-header-row\",children:[isExpandable&&/*#__PURE__*/_jsx(Th,{}),isSelectable&&/*#__PURE__*/_jsx(Th,{}),React.Children.map(children,function(child){return child&&/*#__PURE__*/React.cloneElement(child,{onSort:onSort,sortBy:sortBy,columnIndex:child.props.sortKey,idPrefix:idPrefix});})]})});}HeaderRow.defaultProps={isSelectable:true};export function HeaderCell(_ref2){var sortKey=_ref2.sortKey,_onSort=_ref2.onSort,sortBy=_ref2.sortBy,columnIndex=_ref2.columnIndex,idPrefix=_ref2.idPrefix,className=_ref2.className,children=_ref2.children,tooltip=_ref2.tooltip;var sort=sortKey?{onSort:function onSort(event,key,order){return _onSort(sortKey,order);},sortBy:sortBy,columnIndex:columnIndex}:null;return/*#__PURE__*/_jsx(_StyledTh,{info:tooltip&&{popover:/*#__PURE__*/_jsx(\"div\",{children:tooltip})},id:sortKey?\"\".concat(idPrefix,\"-\").concat(sortKey):null,className:className,sort:sort,_css:children==='Actions'?'text-align: right':null,children:children});}","map":{"version":3,"names":["React","useLocation","useHistory","Thead","Tr","Th","PFTh","styled","parseQueryString","updateQueryString","jsx","_jsx","jsxs","_jsxs","withConfig","displayName","componentId","_StyledTh","p","_css","HeaderRow","_ref","_params$order_by","_qsConfig$defaultPara","_params$order_by2","qsConfig","isExpandable","isSelectable","children","location","history","params","search","onSort","key","order","qs","order_by","concat","page","push","pathname","sortKey","replace","sortBy","index","defaultParams","direction","startsWith","idPrefix","namespace","ouiaId","Children","map","child","cloneElement","columnIndex","props","defaultProps","HeaderCell","_ref2","className","tooltip","sort","event","info","popover","id"],"sources":["/awx_devel/awx/ui/src/components/PaginatedTable/HeaderRow.js"],"sourcesContent":["import 'styled-components/macro';\nimport React from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { Thead, Tr, Th as PFTh } from '@patternfly/react-table';\nimport styled from 'styled-components';\nimport { parseQueryString, updateQueryString } from 'util/qs';\n\nconst Th = styled(PFTh)`\n  --pf-c-table--cell--Overflow: initial;\n  --pf-c-table--cell--MaxWidth: none;\n`;\n\nexport default function HeaderRow({\n  qsConfig,\n  isExpandable,\n  isSelectable,\n  children,\n}) {\n  const location = useLocation();\n  const history = useHistory();\n\n  const params = parseQueryString(qsConfig, location.search);\n\n  const onSort = (key, order) => {\n    const qs = updateQueryString(qsConfig, location.search, {\n      order_by: order === 'asc' ? key : `-${key}`,\n      page: null,\n    });\n    history.push(qs ? `${location.pathname}?${qs}` : location.pathname);\n  };\n\n  const sortKey = params.order_by?.replace('-', '');\n  const sortBy = {\n    index: sortKey || qsConfig.defaultParams?.order_by,\n    direction: params.order_by?.startsWith('-') ? 'desc' : 'asc',\n  };\n  const idPrefix = `${qsConfig.namespace}-table-sort`;\n\n  // empty first Th aligns with checkboxes in table rows\n  return (\n    <Thead>\n      <Tr ouiaId=\"paginated-table-header-row\">\n        {isExpandable && <Th />}\n        {isSelectable && <Th />}\n        {React.Children.map(\n          children,\n          (child) =>\n            child &&\n            React.cloneElement(child, {\n              onSort,\n              sortBy,\n              columnIndex: child.props.sortKey,\n              idPrefix,\n            })\n        )}\n      </Tr>\n    </Thead>\n  );\n}\n\nHeaderRow.defaultProps = {\n  isSelectable: true,\n};\n\nexport function HeaderCell({\n  sortKey,\n  onSort,\n  sortBy,\n  columnIndex,\n  idPrefix,\n  className,\n  children,\n  tooltip,\n}) {\n  const sort = sortKey\n    ? {\n        onSort: (event, key, order) => onSort(sortKey, order),\n        sortBy,\n        columnIndex,\n      }\n    : null;\n  return (\n    <Th\n      info={\n        tooltip && {\n          popover: <div>{tooltip}</div>,\n        }\n      }\n      id={sortKey ? `${idPrefix}-${sortKey}` : null}\n      className={className}\n      sort={sort}\n      css={children === 'Actions' ? 'text-align: right' : null}\n    >\n      {children}\n    </Th>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}