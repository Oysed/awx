{"ast":null,"code":"import _classCallCheck from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";/* eslint-disable default-param-last */import axios from'axios';import{encodeQueryString}from'util/qs';import debounce from'util/debounce';import{SESSION_TIMEOUT_KEY}from'../constants';var updateStorage=debounce(function(key,val){window.localStorage.setItem(key,val);window.dispatchEvent(new Event('storage'));},500);var defaultHttp=axios.create({xsrfCookieName:'csrftoken',xsrfHeaderName:'X-CSRFToken',paramsSerializer:function paramsSerializer(params){return encodeQueryString(params);}});defaultHttp.interceptors.response.use(function(response){var timeout=response===null||response===void 0?void 0:response.headers['session-timeout'];if(timeout){var timeoutDate=new Date().getTime()+timeout*1000;updateStorage(SESSION_TIMEOUT_KEY,String(timeoutDate));}return response;});var Base=/*#__PURE__*/function(){function Base(){var http=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultHttp;var baseURL=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,Base);this.http=http;this.baseUrl=baseURL;}_createClass(Base,[{key:\"create\",value:function create(data){return this.http.post(this.baseUrl,data);}},{key:\"destroy\",value:function destroy(id){return this.http.delete(\"\".concat(this.baseUrl).concat(id,\"/\"));}},{key:\"read\",value:function read(params){return this.http.get(this.baseUrl,{params:params});}},{key:\"readDetail\",value:function readDetail(id){return this.http.get(\"\".concat(this.baseUrl).concat(id,\"/\"));}},{key:\"readOptions\",value:function readOptions(){return this.http.options(this.baseUrl);}},{key:\"replace\",value:function replace(id,data){return this.http.put(\"\".concat(this.baseUrl).concat(id,\"/\"),data);}},{key:\"update\",value:function update(id,data){return this.http.patch(\"\".concat(this.baseUrl).concat(id,\"/\"),data);}},{key:\"copy\",value:function copy(id,data){return this.http.post(\"\".concat(this.baseUrl).concat(id,\"/copy/\"),data);}}]);return Base;}();export default Base;","map":{"version":3,"names":["axios","encodeQueryString","debounce","SESSION_TIMEOUT_KEY","updateStorage","key","val","window","localStorage","setItem","dispatchEvent","Event","defaultHttp","create","xsrfCookieName","xsrfHeaderName","paramsSerializer","params","interceptors","response","use","timeout","headers","timeoutDate","Date","getTime","String","Base","http","arguments","length","undefined","baseURL","_classCallCheck","baseUrl","_createClass","value","data","post","destroy","id","delete","concat","read","get","readDetail","readOptions","options","replace","put","update","patch","copy"],"sources":["/awx_devel/awx/ui/src/api/Base.js"],"sourcesContent":["/* eslint-disable default-param-last */\nimport axios from 'axios';\nimport { encodeQueryString } from 'util/qs';\nimport debounce from 'util/debounce';\nimport { SESSION_TIMEOUT_KEY } from '../constants';\n\nconst updateStorage = debounce((key, val) => {\n  window.localStorage.setItem(key, val);\n  window.dispatchEvent(new Event('storage'));\n}, 500);\n\nconst defaultHttp = axios.create({\n  xsrfCookieName: 'csrftoken',\n  xsrfHeaderName: 'X-CSRFToken',\n  paramsSerializer(params) {\n    return encodeQueryString(params);\n  },\n});\n\ndefaultHttp.interceptors.response.use((response) => {\n  const timeout = response?.headers['session-timeout'];\n  if (timeout) {\n    const timeoutDate = new Date().getTime() + timeout * 1000;\n    updateStorage(SESSION_TIMEOUT_KEY, String(timeoutDate));\n  }\n  return response;\n});\n\nclass Base {\n  constructor(http = defaultHttp, baseURL) {\n    this.http = http;\n    this.baseUrl = baseURL;\n  }\n\n  create(data) {\n    return this.http.post(this.baseUrl, data);\n  }\n\n  destroy(id) {\n    return this.http.delete(`${this.baseUrl}${id}/`);\n  }\n\n  read(params) {\n    return this.http.get(this.baseUrl, {\n      params,\n    });\n  }\n\n  readDetail(id) {\n    return this.http.get(`${this.baseUrl}${id}/`);\n  }\n\n  readOptions() {\n    return this.http.options(this.baseUrl);\n  }\n\n  replace(id, data) {\n    return this.http.put(`${this.baseUrl}${id}/`, data);\n  }\n\n  update(id, data) {\n    return this.http.patch(`${this.baseUrl}${id}/`, data);\n  }\n\n  copy(id, data) {\n    return this.http.post(`${this.baseUrl}${id}/copy/`, data);\n  }\n}\n\nexport default Base;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}