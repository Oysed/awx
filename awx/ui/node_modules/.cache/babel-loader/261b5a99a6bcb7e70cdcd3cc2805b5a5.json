{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React from'react';import{withFormik,useFormikContext}from'formik';import PropTypes from'prop-types';import Wizard from'../Wizard';import useAdHocLaunchSteps from'./useAdHocLaunchSteps';import{jsx as _jsx}from\"react/jsx-runtime\";function AdHocCommandsWizard(_ref){var onLaunch=_ref.onLaunch,moduleOptions=_ref.moduleOptions,onCloseWizard=_ref.onCloseWizard,credentialTypeId=_ref.credentialTypeId,organizationId=_ref.organizationId;var _useFormikContext=useFormikContext(),setFieldTouched=_useFormikContext.setFieldTouched,values=_useFormikContext.values;var _useAdHocLaunchSteps=useAdHocLaunchSteps(moduleOptions,organizationId,credentialTypeId),steps=_useAdHocLaunchSteps.steps,validateStep=_useAdHocLaunchSteps.validateStep,visitStep=_useAdHocLaunchSteps.visitStep,visitAllSteps=_useAdHocLaunchSteps.visitAllSteps;return/*#__PURE__*/_jsx(Wizard,{style:{overflow:'scroll'},isOpen:true,onNext:function onNext(nextStep,prevStep){if(nextStep.id==='preview'){visitAllSteps(setFieldTouched);}else{visitStep(prevStep.prevId,setFieldTouched);validateStep(nextStep.id);}},onClose:function onClose(){return onCloseWizard();},onSave:function onSave(){onLaunch(values);},onGoToStep:function onGoToStep(nextStep,prevStep){if(nextStep.id==='preview'){visitAllSteps(setFieldTouched);}else{visitStep(prevStep.prevId,setFieldTouched);validateStep(nextStep.id);}},steps:steps,title:/*i18n*/i18n._(\"Run command\"),backButtonText:/*i18n*/i18n._(\"Back\"),cancelButtonText:/*i18n*/i18n._(\"Cancel\"),nextButtonText:/*i18n*/i18n._(\"Next\")});}var FormikApp=withFormik({mapPropsToValues:function mapPropsToValues(_ref2){var adHocItems=_ref2.adHocItems;var adHocItemStrings=adHocItems.map(function(item){return item.name;}).join(', ');return{limit:adHocItemStrings||'all',credentials:[],module_args:'',verbosity:0,forks:0,diff_mode:false,become_enabled:'',module_name:'',extra_vars:'---',job_type:'run',credential_passwords:{},execution_environment:''};}})(AdHocCommandsWizard);FormikApp.propTypes={onLaunch:PropTypes.func.isRequired,moduleOptions:PropTypes.arrayOf(PropTypes.array).isRequired,onCloseWizard:PropTypes.func.isRequired,credentialTypeId:PropTypes.number.isRequired};export default FormikApp;","map":{"version":3,"names":["React","withFormik","useFormikContext","PropTypes","Wizard","useAdHocLaunchSteps","jsx","_jsx","AdHocCommandsWizard","_ref","onLaunch","moduleOptions","onCloseWizard","credentialTypeId","organizationId","_useFormikContext","setFieldTouched","values","_useAdHocLaunchSteps","steps","validateStep","visitStep","visitAllSteps","style","overflow","isOpen","onNext","nextStep","prevStep","id","prevId","onClose","onSave","onGoToStep","title","i18n","_","backButtonText","cancelButtonText","nextButtonText","FormikApp","mapPropsToValues","_ref2","adHocItems","adHocItemStrings","map","item","name","join","limit","credentials","module_args","verbosity","forks","diff_mode","become_enabled","module_name","extra_vars","job_type","credential_passwords","execution_environment","propTypes","func","isRequired","arrayOf","array","number"],"sources":["/awx_devel/awx/ui/src/components/AdHocCommands/AdHocCommandsWizard.js"],"sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { withFormik, useFormikContext } from 'formik';\nimport PropTypes from 'prop-types';\nimport Wizard from '../Wizard';\nimport useAdHocLaunchSteps from './useAdHocLaunchSteps';\n\nfunction AdHocCommandsWizard({\n  onLaunch,\n  moduleOptions,\n  onCloseWizard,\n  credentialTypeId,\n  organizationId,\n}) {\n  const { setFieldTouched, values } = useFormikContext();\n\n  const { steps, validateStep, visitStep, visitAllSteps } = useAdHocLaunchSteps(\n    moduleOptions,\n    organizationId,\n    credentialTypeId\n  );\n\n  return (\n    <Wizard\n      style={{ overflow: 'scroll' }}\n      isOpen\n      onNext={(nextStep, prevStep) => {\n        if (nextStep.id === 'preview') {\n          visitAllSteps(setFieldTouched);\n        } else {\n          visitStep(prevStep.prevId, setFieldTouched);\n          validateStep(nextStep.id);\n        }\n      }}\n      onClose={() => onCloseWizard()}\n      onSave={() => {\n        onLaunch(values);\n      }}\n      onGoToStep={(nextStep, prevStep) => {\n        if (nextStep.id === 'preview') {\n          visitAllSteps(setFieldTouched);\n        } else {\n          visitStep(prevStep.prevId, setFieldTouched);\n          validateStep(nextStep.id);\n        }\n      }}\n      steps={steps}\n      title={t`Run command`}\n      backButtonText={t`Back`}\n      cancelButtonText={t`Cancel`}\n      nextButtonText={t`Next`}\n    />\n  );\n}\n\nconst FormikApp = withFormik({\n  mapPropsToValues({ adHocItems }) {\n    const adHocItemStrings = adHocItems.map((item) => item.name).join(', ');\n    return {\n      limit: adHocItemStrings || 'all',\n      credentials: [],\n      module_args: '',\n      verbosity: 0,\n      forks: 0,\n      diff_mode: false,\n      become_enabled: '',\n      module_name: '',\n      extra_vars: '---',\n      job_type: 'run',\n      credential_passwords: {},\n      execution_environment: '',\n    };\n  },\n})(AdHocCommandsWizard);\n\nFormikApp.propTypes = {\n  onLaunch: PropTypes.func.isRequired,\n  moduleOptions: PropTypes.arrayOf(PropTypes.array).isRequired,\n  onCloseWizard: PropTypes.func.isRequired,\n  credentialTypeId: PropTypes.number.isRequired,\n};\nexport default FormikApp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}