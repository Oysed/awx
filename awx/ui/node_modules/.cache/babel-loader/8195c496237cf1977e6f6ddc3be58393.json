{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import{i18n}from\"@lingui/core\";import React,{useContext,useRef,useState}from'react';import styled from'styled-components';import{PlusIcon}from'@patternfly/react-icons';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import WorkflowActionTooltip from'./WorkflowActionTooltip';import WorkflowActionTooltipItem from'./WorkflowActionTooltipItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StartG=styled.g(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  pointer-events: \",\";\\n\"])),function(props){return props.ignorePointerEvents?'none':'auto';});var StartForeignObject=styled.foreignObject(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  overflow: visible;\\n\"])));var StartDiv=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background-color: #0279bc;\\n  color: white;\\n  width: max-content;\\n  min-width: 80px;\\n  height: 40px;\\n  border-radius: 0.35em;\\n  text-align: center;\\n  line-height: 40px;\\n  padding: 0px 10px;\\n\"])));function WorkflowStartNode(_ref){var onUpdateHelpText=_ref.onUpdateHelpText,showActionTooltip=_ref.showActionTooltip;var ref=useRef(null);var startNodeRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hovering=_useState2[0],setHovering=_useState2[1];var dispatch=useContext(WorkflowDispatchContext);var _useContext=useContext(WorkflowStateContext),addingLink=_useContext.addingLink,nodePositions=_useContext.nodePositions;var handleNodeMouseEnter=function handleNodeMouseEnter(){ref.current.parentNode.appendChild(ref.current);setHovering(true);};return/*#__PURE__*/_jsxs(StartG,{id:\"node-1\",ignorePointerEvents:addingLink,onMouseEnter:handleNodeMouseEnter,onMouseLeave:function onMouseLeave(){return setHovering(false);},ref:ref,transform:\"translate(\".concat(nodePositions[1].x,\",0)\"),children:[/*#__PURE__*/_jsx(StartForeignObject,{height:\"1\",width:\"1\",y:\"10\",style:{overflow:'visible'},children:/*#__PURE__*/_jsx(StartDiv,{ref:startNodeRef,children:/*i18n*/i18n._(\"START\")})}),showActionTooltip&&hovering&&/*#__PURE__*/_jsx(WorkflowActionTooltip,{actions:[/*#__PURE__*/_jsx(WorkflowActionTooltipItem,{id:\"node-add\",onMouseEnter:function onMouseEnter(){return onUpdateHelpText(/*i18n*/i18n._(\"Add a new node\"));},onMouseLeave:function onMouseLeave(){return onUpdateHelpText(null);},onClick:function onClick(){onUpdateHelpText(null);setHovering(false);dispatch({type:'START_ADD_NODE',sourceNodeId:1});},children:/*#__PURE__*/_jsx(PlusIcon,{})},\"add\")],pointX:startNodeRef.current.offsetWidth,pointY:startNodeRef.current.offsetHeight/2+10})]});}WorkflowStartNode.defaultProps={onUpdateHelpText:function onUpdateHelpText(){}};export default WorkflowStartNode;","map":{"version":3,"names":["React","useContext","useRef","useState","styled","PlusIcon","WorkflowDispatchContext","WorkflowStateContext","WorkflowActionTooltip","WorkflowActionTooltipItem","jsx","_jsx","jsxs","_jsxs","StartG","g","_templateObject","_taggedTemplateLiteral","props","ignorePointerEvents","StartForeignObject","foreignObject","_templateObject2","StartDiv","div","_templateObject3","WorkflowStartNode","_ref","onUpdateHelpText","showActionTooltip","ref","startNodeRef","_useState","_useState2","_slicedToArray","hovering","setHovering","dispatch","_useContext","addingLink","nodePositions","handleNodeMouseEnter","current","parentNode","appendChild","id","onMouseEnter","onMouseLeave","transform","concat","x","children","height","width","y","style","overflow","i18n","_","actions","onClick","type","sourceNodeId","pointX","offsetWidth","pointY","offsetHeight","defaultProps"],"sources":["/awx_devel/awx/ui/src/components/Workflow/WorkflowStartNode.js"],"sourcesContent":["import React, { useContext, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { t } from '@lingui/macro';\nimport { bool, func } from 'prop-types';\nimport { PlusIcon } from '@patternfly/react-icons';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\nimport WorkflowActionTooltip from './WorkflowActionTooltip';\nimport WorkflowActionTooltipItem from './WorkflowActionTooltipItem';\n\nconst StartG = styled.g`\n  pointer-events: ${(props) => (props.ignorePointerEvents ? 'none' : 'auto')};\n`;\n\nconst StartForeignObject = styled.foreignObject`\n  overflow: visible;\n`;\n\nconst StartDiv = styled.div`\n  background-color: #0279bc;\n  color: white;\n  width: max-content;\n  min-width: 80px;\n  height: 40px;\n  border-radius: 0.35em;\n  text-align: center;\n  line-height: 40px;\n  padding: 0px 10px;\n`;\n\nfunction WorkflowStartNode({ onUpdateHelpText, showActionTooltip }) {\n  const ref = useRef(null);\n  const startNodeRef = useRef(null);\n  const [hovering, setHovering] = useState(false);\n  const dispatch = useContext(WorkflowDispatchContext);\n  const { addingLink, nodePositions } = useContext(WorkflowStateContext);\n\n  const handleNodeMouseEnter = () => {\n    ref.current.parentNode.appendChild(ref.current);\n    setHovering(true);\n  };\n\n  return (\n    <StartG\n      id=\"node-1\"\n      ignorePointerEvents={addingLink}\n      onMouseEnter={handleNodeMouseEnter}\n      onMouseLeave={() => setHovering(false)}\n      ref={ref}\n      transform={`translate(${nodePositions[1].x},0)`}\n    >\n      <StartForeignObject\n        height=\"1\"\n        width=\"1\"\n        y=\"10\"\n        style={{ overflow: 'visible' }}\n      >\n        <StartDiv ref={startNodeRef}>{t`START`}</StartDiv>\n      </StartForeignObject>\n      {showActionTooltip && hovering && (\n        <WorkflowActionTooltip\n          actions={[\n            <WorkflowActionTooltipItem\n              id=\"node-add\"\n              key=\"add\"\n              onMouseEnter={() => onUpdateHelpText(t`Add a new node`)}\n              onMouseLeave={() => onUpdateHelpText(null)}\n              onClick={() => {\n                onUpdateHelpText(null);\n                setHovering(false);\n                dispatch({ type: 'START_ADD_NODE', sourceNodeId: 1 });\n              }}\n            >\n              <PlusIcon />\n            </WorkflowActionTooltipItem>,\n          ]}\n          pointX={startNodeRef.current.offsetWidth}\n          pointY={startNodeRef.current.offsetHeight / 2 + 10}\n        />\n      )}\n    </StartG>\n  );\n}\n\nWorkflowStartNode.propTypes = {\n  showActionTooltip: bool.isRequired,\n  onUpdateHelpText: func,\n};\n\nWorkflowStartNode.defaultProps = {\n  onUpdateHelpText: () => {},\n};\n\nexport default WorkflowStartNode;\n"],"mappings":"mTAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAGtC,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,OACEC,uBAAuB,CACvBC,oBAAoB,KACf,mBAAmB,CAC1B,MAAO,CAAAC,qBAAqB,KAAM,yBAAyB,CAC3D,MAAO,CAAAC,yBAAyB,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpE,GAAM,CAAAC,MAAM,CAAGV,MAAM,CAACW,CAAC,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,kCACH,SAACC,KAAK,QAAM,CAAAA,KAAK,CAACC,mBAAmB,CAAG,MAAM,CAAG,MAAM,EAAC,CAC3E,CAED,GAAM,CAAAC,kBAAkB,CAAGhB,MAAM,CAACiB,aAAa,CAAAC,gBAAA,GAAAA,gBAAA,CAAAL,sBAAA,gCAE9C,CAED,GAAM,CAAAM,QAAQ,CAAGnB,MAAM,CAACoB,GAAG,CAAAC,gBAAA,GAAAA,gBAAA,CAAAR,sBAAA,kNAU1B,CAED,QAAS,CAAAS,iBAAiBA,CAAAC,IAAA,CAA0C,IAAvC,CAAAC,gBAAgB,CAAAD,IAAA,CAAhBC,gBAAgB,CAAEC,iBAAiB,CAAAF,IAAA,CAAjBE,iBAAiB,CAC9D,GAAM,CAAAC,GAAG,CAAG5B,MAAM,CAAC,IAAI,CAAC,CACxB,GAAM,CAAA6B,YAAY,CAAG7B,MAAM,CAAC,IAAI,CAAC,CACjC,IAAA8B,SAAA,CAAgC7B,QAAQ,CAAC,KAAK,CAAC,CAAA8B,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAxCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,GAAM,CAAAI,QAAQ,CAAGpC,UAAU,CAACK,uBAAuB,CAAC,CACpD,IAAAgC,WAAA,CAAsCrC,UAAU,CAACM,oBAAoB,CAAC,CAA9DgC,UAAU,CAAAD,WAAA,CAAVC,UAAU,CAAEC,aAAa,CAAAF,WAAA,CAAbE,aAAa,CAEjC,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAA,CAAS,CACjCX,GAAG,CAACY,OAAO,CAACC,UAAU,CAACC,WAAW,CAACd,GAAG,CAACY,OAAO,CAAC,CAC/CN,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED,mBACEvB,KAAA,CAACC,MAAM,EACL+B,EAAE,CAAC,QAAQ,CACX1B,mBAAmB,CAAEoB,UAAW,CAChCO,YAAY,CAAEL,oBAAqB,CACnCM,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAX,WAAW,CAAC,KAAK,CAAC,EAAC,CACvCN,GAAG,CAAEA,GAAI,CACTkB,SAAS,cAAAC,MAAA,CAAeT,aAAa,CAAC,CAAC,CAAC,CAACU,CAAC,OAAM,CAAAC,QAAA,eAEhDxC,IAAA,CAACS,kBAAkB,EACjBgC,MAAM,CAAC,GAAG,CACVC,KAAK,CAAC,GAAG,CACTC,CAAC,CAAC,IAAI,CACNC,KAAK,CAAE,CAAEC,QAAQ,CAAE,SAAU,CAAE,CAAAL,QAAA,cAE/BxC,IAAA,CAACY,QAAQ,EAACO,GAAG,CAAEC,YAAa,CAAAoB,QAAA,SAAEM,IAAA,CAAAC,CAAA,QAAO,CAAC,CAAW,CAAC,CAChC,CAAC,CACpB7B,iBAAiB,EAAIM,QAAQ,eAC5BxB,IAAA,CAACH,qBAAqB,EACpBmD,OAAO,CAAE,cACPhD,IAAA,CAACF,yBAAyB,EACxBoC,EAAE,CAAC,UAAU,CAEbC,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAlB,gBAAgB,SAAC6B,IAAA,CAAAC,CAAA,iBAAgB,CAAC,CAAC,EAAC,CACxDX,YAAY,CAAE,SAAAA,aAAA,QAAM,CAAAnB,gBAAgB,CAAC,IAAI,CAAC,EAAC,CAC3CgC,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbhC,gBAAgB,CAAC,IAAI,CAAC,CACtBQ,WAAW,CAAC,KAAK,CAAC,CAClBC,QAAQ,CAAC,CAAEwB,IAAI,CAAE,gBAAgB,CAAEC,YAAY,CAAE,CAAE,CAAC,CAAC,CACvD,CAAE,CAAAX,QAAA,cAEFxC,IAAA,CAACN,QAAQ,GAAE,CAAC,EATR,KAUqB,CAAC,CAC5B,CACF0D,MAAM,CAAEhC,YAAY,CAACW,OAAO,CAACsB,WAAY,CACzCC,MAAM,CAAElC,YAAY,CAACW,OAAO,CAACwB,YAAY,CAAG,CAAC,CAAG,EAAG,CACpD,CACF,EACK,CAAC,CAEb,CAOAxC,iBAAiB,CAACyC,YAAY,CAAG,CAC/BvC,gBAAgB,CAAE,SAAAA,iBAAA,CAAM,CAAC,CAC3B,CAAC,CAED,cAAe,CAAAF,iBAAiB"},"metadata":{},"sourceType":"module"}