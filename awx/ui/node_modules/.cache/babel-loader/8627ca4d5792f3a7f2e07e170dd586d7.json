{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{Button,DropdownItem,Tooltip}from'@patternfly/react-core';import{KebabifiedContext}from'contexts/Kebabified';import{WorkflowApproval}from'types';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function cannotApprove(item){return!item.can_approve_or_deny;}function WorkflowApprovalListApproveButton(_ref){var onApprove=_ref.onApprove,selectedItems=_ref.selectedItems;var _useContext=useContext(KebabifiedContext),isKebabified=_useContext.isKebabified;var renderTooltip=function renderTooltip(){if(selectedItems.length===0){return(/*i18n*/i18n._(\"Select a row to approve\"));}var itemsUnableToApprove=selectedItems.filter(cannotApprove).map(function(item){return item.name;}).join(', ');if(selectedItems.some(cannotApprove)){return(/*i18n*/i18n._(\"You are unable to act on the following workflow approvals: {itemsUnableToApprove}\",{itemsUnableToApprove:itemsUnableToApprove}));}return(/*i18n*/i18n._(\"Approve\"));};var isDisabled=selectedItems.length===0||selectedItems.some(cannotApprove);return/*#__PURE__*/ (/* eslint-disable-next-line react/jsx-no-useless-fragment */_jsx(_Fragment,{children:isKebabified?/*#__PURE__*/_jsx(DropdownItem,{isDisabled:isDisabled,component:\"button\",onClick:onApprove,children:/*i18n*/i18n._(\"Approve\")},\"approve\"):/*#__PURE__*/_jsx(Tooltip,{content:renderTooltip(),position:\"top\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{ouiaId:\"workflow-approval-approve-button\",isDisabled:isDisabled,\"aria-label\":/*i18n*/i18n._(\"Approve\"),variant:\"primary\",onClick:onApprove,children:/*i18n*/i18n._(\"Approve\")})})})}));}WorkflowApprovalListApproveButton.defaultProps={selectedItems:[]};export default WorkflowApprovalListApproveButton;","map":{"version":3,"names":["React","useContext","Button","DropdownItem","Tooltip","KebabifiedContext","WorkflowApproval","jsx","_jsx","Fragment","_Fragment","cannotApprove","item","can_approve_or_deny","WorkflowApprovalListApproveButton","_ref","onApprove","selectedItems","_useContext","isKebabified","renderTooltip","length","i18n","_","itemsUnableToApprove","filter","map","name","join","some","isDisabled","children","component","onClick","content","position","ouiaId","variant","defaultProps"],"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApprovalList/WorkflowApprovalListApproveButton.js"],"sourcesContent":["import React, { useContext } from 'react';\n\nimport { t } from '@lingui/macro';\nimport PropTypes from 'prop-types';\nimport { Button, DropdownItem, Tooltip } from '@patternfly/react-core';\nimport { KebabifiedContext } from 'contexts/Kebabified';\nimport { WorkflowApproval } from 'types';\n\nfunction cannotApprove(item) {\n  return !item.can_approve_or_deny;\n}\n\nfunction WorkflowApprovalListApproveButton({ onApprove, selectedItems }) {\n  const { isKebabified } = useContext(KebabifiedContext);\n\n  const renderTooltip = () => {\n    if (selectedItems.length === 0) {\n      return t`Select a row to approve`;\n    }\n\n    const itemsUnableToApprove = selectedItems\n      .filter(cannotApprove)\n      .map((item) => item.name)\n      .join(', ');\n\n    if (selectedItems.some(cannotApprove)) {\n      return t`You are unable to act on the following workflow approvals: ${itemsUnableToApprove}`;\n    }\n\n    return t`Approve`;\n  };\n\n  const isDisabled =\n    selectedItems.length === 0 || selectedItems.some(cannotApprove);\n\n  return (\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    <>\n      {isKebabified ? (\n        <DropdownItem\n          key=\"approve\"\n          isDisabled={isDisabled}\n          component=\"button\"\n          onClick={onApprove}\n        >\n          {t`Approve`}\n        </DropdownItem>\n      ) : (\n        <Tooltip content={renderTooltip()} position=\"top\">\n          <div>\n            <Button\n              ouiaId=\"workflow-approval-approve-button\"\n              isDisabled={isDisabled}\n              aria-label={t`Approve`}\n              variant=\"primary\"\n              onClick={onApprove}\n            >\n              {t`Approve`}\n            </Button>\n          </div>\n        </Tooltip>\n      )}\n    </>\n  );\n}\n\nWorkflowApprovalListApproveButton.propTypes = {\n  onApprove: PropTypes.func.isRequired,\n  selectedItems: PropTypes.arrayOf(WorkflowApproval),\n};\n\nWorkflowApprovalListApproveButton.defaultProps = {\n  selectedItems: [],\n};\n\nexport default WorkflowApprovalListApproveButton;\n"],"mappings":"+BAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CAIzC,OAASC,MAAM,CAAEC,YAAY,CAAEC,OAAO,KAAQ,wBAAwB,CACtE,OAASC,iBAAiB,KAAQ,qBAAqB,CACvD,OAASC,gBAAgB,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzC,QAAS,CAAAC,aAAaA,CAACC,IAAI,CAAE,CAC3B,MAAO,CAACA,IAAI,CAACC,mBAAmB,CAClC,CAEA,QAAS,CAAAC,iCAAiCA,CAAAC,IAAA,CAA+B,IAA5B,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CAAEC,aAAa,CAAAF,IAAA,CAAbE,aAAa,CACnE,IAAAC,WAAA,CAAyBjB,UAAU,CAACI,iBAAiB,CAAC,CAA9Cc,YAAY,CAAAD,WAAA,CAAZC,YAAY,CAEpB,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAIH,aAAa,CAACI,MAAM,GAAK,CAAC,CAAE,CAC9B,eAAOC,IAAA,CAAAC,CAAA,0BAAyB,CAAC,EACnC,CAEA,GAAM,CAAAC,oBAAoB,CAAGP,aAAa,CACvCQ,MAAM,CAACd,aAAa,CAAC,CACrBe,GAAG,CAAC,SAACd,IAAI,QAAK,CAAAA,IAAI,CAACe,IAAI,GAAC,CACxBC,IAAI,CAAC,IAAI,CAAC,CAEb,GAAIX,aAAa,CAACY,IAAI,CAAClB,aAAa,CAAC,CAAE,CACrC,eAAOW,IAAA,CAAAC,CAAA,sFAAAC,oBAAA,CAA+DA,oBAAoB,CAAC,CAAC,EAC9F,CAEA,eAAOF,IAAA,CAAAC,CAAA,UAAS,CAAC,EACnB,CAAC,CAED,GAAM,CAAAO,UAAU,CACdb,aAAa,CAACI,MAAM,GAAK,CAAC,EAAIJ,aAAa,CAACY,IAAI,CAAClB,aAAa,CAAC,CAEjE,oBACE,6DACAH,IAAA,CAAAE,SAAA,EAAAqB,QAAA,CACGZ,YAAY,cACXX,IAAA,CAACL,YAAY,EAEX2B,UAAU,CAAEA,UAAW,CACvBE,SAAS,CAAC,QAAQ,CAClBC,OAAO,CAAEjB,SAAU,CAAAe,QAAA,SAElBT,IAAA,CAAAC,CAAA,UAAS,CAAC,EALP,SAMQ,CAAC,cAEff,IAAA,CAACJ,OAAO,EAAC8B,OAAO,CAAEd,aAAa,CAAC,CAAE,CAACe,QAAQ,CAAC,KAAK,CAAAJ,QAAA,cAC/CvB,IAAA,QAAAuB,QAAA,cACEvB,IAAA,CAACN,MAAM,EACLkC,MAAM,CAAC,kCAAkC,CACzCN,UAAU,CAAEA,UAAW,CACvB,qBAAYR,IAAA,CAAAC,CAAA,UAAS,CAAE,CACvBc,OAAO,CAAC,SAAS,CACjBJ,OAAO,CAAEjB,SAAU,CAAAe,QAAA,SAElBT,IAAA,CAAAC,CAAA,UAAS,CAAC,CACL,CAAC,CACN,CAAC,CACC,CACV,CACD,CAAC,EAEP,CAOAT,iCAAiC,CAACwB,YAAY,CAAG,CAC/CrB,aAAa,CAAE,EACjB,CAAC,CAED,cAAe,CAAAH,iCAAiC"},"metadata":{},"sourceType":"module"}