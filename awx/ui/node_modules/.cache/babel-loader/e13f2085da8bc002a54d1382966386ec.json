{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import DaysToKeepStep from'./DaysToKeepStep';import StepName from'../../../../../components/LaunchPrompt/steps/StepName';import{jsx as _jsx}from\"react/jsx-runtime\";var STEP_ID='daysToKeep';export default function useDaysToKeepStep(){var _useField=useField('nodeResource'),_useField2=_slicedToArray(_useField,2),nodeResourceMeta=_useField2[1];var _useField3=useField('daysToKeep'),_useField4=_slicedToArray(_useField3,2),daysToKeepMeta=_useField4[1];return{step:getStep(nodeResourceMeta,daysToKeepMeta),initialValues:{daysToKeep:30},isReady:true,contentError:null,hasError:!!daysToKeepMeta.error,setTouched:function setTouched(setFieldTouched){setFieldTouched('daysToKeep',true,false);},validate:function validate(){}};}function getStep(nodeResourceMeta,daysToKeepMeta){var _nodeResourceMeta$val;if(['cleanup_activitystream','cleanup_jobs'].includes(nodeResourceMeta===null||nodeResourceMeta===void 0?void 0:(_nodeResourceMeta$val=nodeResourceMeta.value)===null||_nodeResourceMeta$val===void 0?void 0:_nodeResourceMeta$val.job_type)){return{id:STEP_ID,name:/*#__PURE__*/_jsx(StepName,{hasErrors:!!daysToKeepMeta.error,id:\"days-to-keep-step\",children:/*i18n*/i18n._(\"Days to keep\")}),component:/*#__PURE__*/_jsx(DaysToKeepStep,{}),enableNext:!daysToKeepMeta.error};}return null;}","map":{"version":3,"names":["React","useField","DaysToKeepStep","StepName","jsx","_jsx","STEP_ID","useDaysToKeepStep","_useField","_useField2","_slicedToArray","nodeResourceMeta","_useField3","_useField4","daysToKeepMeta","step","getStep","initialValues","daysToKeep","isReady","contentError","hasError","error","setTouched","setFieldTouched","validate","_nodeResourceMeta$val","includes","value","job_type","id","name","hasErrors","children","i18n","_","component","enableNext"],"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/Modals/NodeModals/useDaysToKeepStep.js"],"sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport DaysToKeepStep from './DaysToKeepStep';\nimport StepName from '../../../../../components/LaunchPrompt/steps/StepName';\n\nconst STEP_ID = 'daysToKeep';\n\nexport default function useDaysToKeepStep() {\n  const [, nodeResourceMeta] = useField('nodeResource');\n  const [, daysToKeepMeta] = useField('daysToKeep');\n\n  return {\n    step: getStep(nodeResourceMeta, daysToKeepMeta),\n    initialValues: { daysToKeep: 30 },\n    isReady: true,\n    contentError: null,\n    hasError: !!daysToKeepMeta.error,\n    setTouched: (setFieldTouched) => {\n      setFieldTouched('daysToKeep', true, false);\n    },\n    validate: () => {},\n  };\n}\nfunction getStep(nodeResourceMeta, daysToKeepMeta) {\n  if (\n    ['cleanup_activitystream', 'cleanup_jobs'].includes(\n      nodeResourceMeta?.value?.job_type\n    )\n  ) {\n    return {\n      id: STEP_ID,\n      name: (\n        <StepName hasErrors={!!daysToKeepMeta.error} id=\"days-to-keep-step\">\n          {t`Days to keep`}\n        </StepName>\n      ),\n      component: <DaysToKeepStep />,\n      enableNext: !daysToKeepMeta.error,\n    };\n  }\n  return null;\n}\n"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,QAAQ,KAAQ,QAAQ,CACjC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,QAAQ,KAAM,uDAAuD,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE7E,GAAM,CAAAC,OAAO,CAAG,YAAY,CAE5B,cAAe,SAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC1C,IAAAC,SAAA,CAA6BP,QAAQ,CAAC,cAAc,CAAC,CAAAQ,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,gBAAgB,CAAAF,UAAA,IACzB,IAAAG,UAAA,CAA2BX,QAAQ,CAAC,YAAY,CAAC,CAAAY,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAAxCE,cAAc,CAAAD,UAAA,IAEvB,MAAO,CACLE,IAAI,CAAEC,OAAO,CAACL,gBAAgB,CAAEG,cAAc,CAAC,CAC/CG,aAAa,CAAE,CAAEC,UAAU,CAAE,EAAG,CAAC,CACjCC,OAAO,CAAE,IAAI,CACbC,YAAY,CAAE,IAAI,CAClBC,QAAQ,CAAE,CAAC,CAACP,cAAc,CAACQ,KAAK,CAChCC,UAAU,CAAE,SAAAA,WAACC,eAAe,CAAK,CAC/BA,eAAe,CAAC,YAAY,CAAE,IAAI,CAAE,KAAK,CAAC,CAC5C,CAAC,CACDC,QAAQ,CAAE,SAAAA,SAAA,CAAM,CAAC,CACnB,CAAC,CACH,CACA,QAAS,CAAAT,OAAOA,CAACL,gBAAgB,CAAEG,cAAc,CAAE,KAAAY,qBAAA,CACjD,GACE,CAAC,wBAAwB,CAAE,cAAc,CAAC,CAACC,QAAQ,CACjDhB,gBAAgB,SAAhBA,gBAAgB,kBAAAe,qBAAA,CAAhBf,gBAAgB,CAAEiB,KAAK,UAAAF,qBAAA,iBAAvBA,qBAAA,CAAyBG,QAC3B,CAAC,CACD,CACA,MAAO,CACLC,EAAE,CAAExB,OAAO,CACXyB,IAAI,cACF1B,IAAA,CAACF,QAAQ,EAAC6B,SAAS,CAAE,CAAC,CAAClB,cAAc,CAACQ,KAAM,CAACQ,EAAE,CAAC,mBAAmB,CAAAG,QAAA,SAChEC,IAAA,CAAAC,CAAA,eAAc,CAAC,CACR,CACX,CACDC,SAAS,cAAE/B,IAAA,CAACH,cAAc,GAAE,CAAC,CAC7BmC,UAAU,CAAE,CAACvB,cAAc,CAACQ,KAC9B,CAAC,CACH,CACA,MAAO,KAAI,CACb"},"metadata":{},"sourceType":"module"}