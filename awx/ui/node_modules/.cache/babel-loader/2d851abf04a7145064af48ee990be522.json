{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useState,useCallback}from'react';import{string,bool,func}from'prop-types';import{Link}from'react-router-dom';import{Button}from'@patternfly/react-core';import{Tr,Td}from'@patternfly/react-table';import{PencilAltIcon}from'@patternfly/react-icons';import{ActionsTd,ActionItem,TdBreakWord}from'components/PaginatedTable';import CopyButton from'components/CopyButton';import{ExecutionEnvironment}from'types';import{ExecutionEnvironmentsAPI}from'api';import{timeOfDay}from'util/dates';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ExecutionEnvironmentListItem(_ref){var _executionEnvironment,_executionEnvironment2,_executionEnvironment3,_executionEnvironment4;var executionEnvironment=_ref.executionEnvironment,detailUrl=_ref.detailUrl,isSelected=_ref.isSelected,onSelect=_ref.onSelect,onCopy=_ref.onCopy,rowIndex=_ref.rowIndex,fetchExecutionEnvironments=_ref.fetchExecutionEnvironments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDisabled=_useState2[0],setIsDisabled=_useState2[1];var copyExecutionEnvironment=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ExecutionEnvironmentsAPI.copy(executionEnvironment.id,{name:\"\".concat(executionEnvironment.name,\" @ \").concat(timeOfDay())});case 2:response=_context.sent;if(response.status===201){onCopy(response.data.id);}_context.next=6;return fetchExecutionEnvironments();case 6:case\"end\":return _context.stop();}}},_callee);})),[executionEnvironment.id,executionEnvironment.name,fetchExecutionEnvironments,onCopy]);var handleCopyStart=useCallback(function(){setIsDisabled(true);},[]);var handleCopyFinish=useCallback(function(){setIsDisabled(false);},[]);return/*#__PURE__*/_jsxs(Tr,{id:\"ee-row-\".concat(executionEnvironment.id),ouiaId:\"ee-row-\".concat(executionEnvironment.id),children:[/*#__PURE__*/_jsx(Td,{select:{rowIndex:rowIndex,isSelected:isSelected,onSelect:onSelect,disable:false},dataLabel:/*i18n*/i18n._(\"Selected\")}),/*#__PURE__*/_jsx(TdBreakWord,{id:\"ee-name-\".concat(executionEnvironment.id),dataLabel:/*i18n*/i18n._(\"Name\"),children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(detailUrl),children:/*#__PURE__*/_jsx(\"b\",{children:executionEnvironment.name})})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Image\"),children:executionEnvironment.image}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Organization\"),children:executionEnvironment.organization?/*#__PURE__*/_jsx(Link,{to:\"/organizations/\".concat(executionEnvironment===null||executionEnvironment===void 0?void 0:(_executionEnvironment=executionEnvironment.summary_fields)===null||_executionEnvironment===void 0?void 0:(_executionEnvironment2=_executionEnvironment.organization)===null||_executionEnvironment2===void 0?void 0:_executionEnvironment2.id,\"/details\"),children:/*#__PURE__*/_jsx(\"b\",{children:executionEnvironment===null||executionEnvironment===void 0?void 0:(_executionEnvironment3=executionEnvironment.summary_fields)===null||_executionEnvironment3===void 0?void 0:(_executionEnvironment4=_executionEnvironment3.organization)===null||_executionEnvironment4===void 0?void 0:_executionEnvironment4.name})}):/*i18n*/i18n._(\"Globally Available\")}),/*#__PURE__*/_jsxs(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),gridColumns:\"auto 40px\",children:[/*#__PURE__*/_jsx(ActionItem,{visible:executionEnvironment.summary_fields.user_capabilities.edit,tooltip:/*i18n*/i18n._(\"Edit Execution Environment\"),children:/*#__PURE__*/_jsx(Button,{ouiaId:\"\".concat(executionEnvironment.id,\"-edit-button\"),\"aria-label\":/*i18n*/i18n._(\"Edit Execution Environment\"),variant:\"plain\",component:Link,to:\"/execution_environments/\".concat(executionEnvironment.id,\"/edit\"),children:/*#__PURE__*/_jsx(PencilAltIcon,{})})}),/*#__PURE__*/_jsx(ActionItem,{visible:executionEnvironment.summary_fields.user_capabilities.copy,tooltip:/*i18n*/i18n._(\"Copy Execution Environment\"),children:/*#__PURE__*/_jsx(CopyButton,{ouiaId:\"copy-ee-\".concat(executionEnvironment.id),isDisabled:isDisabled,onCopyStart:handleCopyStart,onCopyFinish:handleCopyFinish,copyItem:copyExecutionEnvironment,errorMessage:/*i18n*/i18n._(\"Failed to copy execution environment\")})})]})]});}ExecutionEnvironmentListItem.prototype={executionEnvironment:ExecutionEnvironment.isRequired,detailUrl:string.isRequired,isSelected:bool.isRequired,onSelect:func.isRequired,onCopy:func.isRequired};export default ExecutionEnvironmentListItem;","map":{"version":3,"names":["React","useState","useCallback","string","bool","func","Link","Button","Tr","Td","PencilAltIcon","ActionsTd","ActionItem","TdBreakWord","CopyButton","ExecutionEnvironment","ExecutionEnvironmentsAPI","timeOfDay","jsx","_jsx","jsxs","_jsxs","ExecutionEnvironmentListItem","_ref","_executionEnvironment","_executionEnvironment2","_executionEnvironment3","_executionEnvironment4","executionEnvironment","detailUrl","isSelected","onSelect","onCopy","rowIndex","fetchExecutionEnvironments","_useState","_useState2","_slicedToArray","isDisabled","setIsDisabled","copyExecutionEnvironment","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","copy","id","name","concat","sent","status","data","stop","handleCopyStart","handleCopyFinish","ouiaId","children","select","disable","dataLabel","i18n","_","to","image","organization","summary_fields","gridColumns","visible","user_capabilities","edit","tooltip","variant","component","onCopyStart","onCopyFinish","copyItem","errorMessage","prototype","isRequired"],"sources":["/awx_devel/awx/ui/src/screens/ExecutionEnvironment/ExecutionEnvironmentList/ExecutionEnvironmentListItem.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { string, bool, func } from 'prop-types';\n\nimport { t } from '@lingui/macro';\nimport { Link } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\nimport { Tr, Td } from '@patternfly/react-table';\nimport { PencilAltIcon } from '@patternfly/react-icons';\n\nimport { ActionsTd, ActionItem, TdBreakWord } from 'components/PaginatedTable';\nimport CopyButton from 'components/CopyButton';\nimport { ExecutionEnvironment } from 'types';\nimport { ExecutionEnvironmentsAPI } from 'api';\nimport { timeOfDay } from 'util/dates';\n\nfunction ExecutionEnvironmentListItem({\n  executionEnvironment,\n  detailUrl,\n  isSelected,\n  onSelect,\n  onCopy,\n  rowIndex,\n  fetchExecutionEnvironments,\n}) {\n  const [isDisabled, setIsDisabled] = useState(false);\n\n  const copyExecutionEnvironment = useCallback(async () => {\n    const response = await ExecutionEnvironmentsAPI.copy(\n      executionEnvironment.id,\n      {\n        name: `${executionEnvironment.name} @ ${timeOfDay()}`,\n      }\n    );\n    if (response.status === 201) {\n      onCopy(response.data.id);\n    }\n    await fetchExecutionEnvironments();\n  }, [\n    executionEnvironment.id,\n    executionEnvironment.name,\n    fetchExecutionEnvironments,\n    onCopy,\n  ]);\n\n  const handleCopyStart = useCallback(() => {\n    setIsDisabled(true);\n  }, []);\n\n  const handleCopyFinish = useCallback(() => {\n    setIsDisabled(false);\n  }, []);\n\n  return (\n    <Tr\n      id={`ee-row-${executionEnvironment.id}`}\n      ouiaId={`ee-row-${executionEnvironment.id}`}\n    >\n      <Td\n        select={{\n          rowIndex,\n          isSelected,\n          onSelect,\n          disable: false,\n        }}\n        dataLabel={t`Selected`}\n      />\n      <TdBreakWord\n        id={`ee-name-${executionEnvironment.id}`}\n        dataLabel={t`Name`}\n      >\n        <Link to={`${detailUrl}`}>\n          <b>{executionEnvironment.name}</b>\n        </Link>\n      </TdBreakWord>\n      <Td dataLabel={t`Image`}>{executionEnvironment.image}</Td>\n      <Td dataLabel={t`Organization`}>\n        {executionEnvironment.organization ? (\n          <Link\n            to={`/organizations/${executionEnvironment?.summary_fields?.organization?.id}/details`}\n          >\n            <b>{executionEnvironment?.summary_fields?.organization?.name}</b>\n          </Link>\n        ) : (\n          t`Globally Available`\n        )}\n      </Td>\n      <ActionsTd dataLabel={t`Actions`} gridColumns=\"auto 40px\">\n        <ActionItem\n          visible={executionEnvironment.summary_fields.user_capabilities.edit}\n          tooltip={t`Edit Execution Environment`}\n        >\n          <Button\n            ouiaId={`${executionEnvironment.id}-edit-button`}\n            aria-label={t`Edit Execution Environment`}\n            variant=\"plain\"\n            component={Link}\n            to={`/execution_environments/${executionEnvironment.id}/edit`}\n          >\n            <PencilAltIcon />\n          </Button>\n        </ActionItem>\n        <ActionItem\n          visible={executionEnvironment.summary_fields.user_capabilities.copy}\n          tooltip={t`Copy Execution Environment`}\n        >\n          <CopyButton\n            ouiaId={`copy-ee-${executionEnvironment.id}`}\n            isDisabled={isDisabled}\n            onCopyStart={handleCopyStart}\n            onCopyFinish={handleCopyFinish}\n            copyItem={copyExecutionEnvironment}\n            errorMessage={t`Failed to copy execution environment`}\n          />\n        </ActionItem>\n      </ActionsTd>\n    </Tr>\n  );\n}\n\nExecutionEnvironmentListItem.prototype = {\n  executionEnvironment: ExecutionEnvironment.isRequired,\n  detailUrl: string.isRequired,\n  isSelected: bool.isRequired,\n  onSelect: func.isRequired,\n  onCopy: func.isRequired,\n};\n\nexport default ExecutionEnvironmentListItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}