{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button}from'@patternfly/react-core';import useRequest,{useDismissableError}from'hooks/useRequest';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import{Detail,DetailList,UserDateDetail}from'components/DetailList';import{ApplicationsAPI}from'api';import DeleteButton from'components/DeleteButton';import ErrorDetail from'components/ErrorDetail';import getApplicationHelpTextStrings from'../shared/Application.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ApplicationDetails(_ref){var application=_ref.application,authorizationOptions=_ref.authorizationOptions,clientTypeOptions=_ref.clientTypeOptions;var applicationHelpTextStrings=getApplicationHelpTextStrings();var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ApplicationsAPI.destroy(application.id);case 2:history.push('/applications');case 3:case\"end\":return _context.stop();}}},_callee);})),[application.id,history])),deleteLoading=_useRequest.isLoading,deletionError=_useRequest.error,deleteApplications=_useRequest.request;var _useDismissableError=useDismissableError(deletionError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var getAuthorizationGrantType=function getAuthorizationGrantType(type){var value;authorizationOptions.filter(function(option){if(option.value===type){value=option.label;}return null;});return value;};var getClientType=function getClientType(type){var value;clientTypeOptions.filter(function(option){if(option.value===type){value=option.label;}return null;});return value;};return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:application.name,dataCy:\"app-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Description\"),value:application.description,dataCy:\"app-detail-description\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Organization\"),value:/*#__PURE__*/_jsx(Link,{to:\"/organizations/\".concat(application.summary_fields.organization.id,\"/details\"),children:application.summary_fields.organization.name}),dataCy:\"app-detail-organization\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Authorization grant type\"),value:getAuthorizationGrantType(application.authorization_grant_type),dataCy:\"app-detail-authorization-grant-type\",helpText:applicationHelpTextStrings.authorizationGrantType}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Client ID\"),value:application.client_id,dataCy:\"app-detail-client-id\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Redirect URIs\"),value:application.redirect_uris,dataCy:\"app-detail-redirect-uris\",helpText:applicationHelpTextStrings.redirectURIS}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Client type\"),value:getClientType(application.client_type),dataCy:\"app-detail-client-type\",helpText:applicationHelpTextStrings.clientType}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:application.created}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:application.modified})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[application.summary_fields.user_capabilities&&application.summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"application-details-edit-button\",component:Link,to:\"/applications/\".concat(application.id,\"/edit\"),\"aria-label\":/*i18n*/i18n._(\"Edit\"),children:/*i18n*/i18n._(\"Edit\")}),application.summary_fields.user_capabilities&&application.summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{name:application.name,modalTitle:/*i18n*/i18n._(\"Delete application\"),onConfirm:deleteApplications,isDisabled:deleteLoading,children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissError,children:[/*i18n*/i18n._(\"Failed to delete application.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:error})]})]});}export default ApplicationDetails;","map":{"version":3,"names":["React","useCallback","Link","useHistory","Button","useRequest","useDismissableError","AlertModal","CardBody","CardActionsRow","Detail","DetailList","UserDateDetail","ApplicationsAPI","DeleteButton","ErrorDetail","getApplicationHelpTextStrings","jsx","_jsx","jsxs","_jsxs","ApplicationDetails","_ref","application","authorizationOptions","clientTypeOptions","applicationHelpTextStrings","history","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","destroy","id","push","stop","deleteLoading","isLoading","deletionError","error","deleteApplications","request","_useDismissableError","dismissError","getAuthorizationGrantType","type","value","filter","option","label","getClientType","children","i18n","_","name","dataCy","description","to","concat","summary_fields","organization","authorization_grant_type","helpText","authorizationGrantType","client_id","redirect_uris","redirectURIS","client_type","clientType","date","created","modified","user_capabilities","edit","ouiaId","component","delete","modalTitle","onConfirm","isDisabled","isOpen","variant","title","onClose"],"sources":["/awx_devel/awx/ui/src/screens/Application/ApplicationDetails/ApplicationDetails.js"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\n\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport { Detail, DetailList, UserDateDetail } from 'components/DetailList';\nimport { ApplicationsAPI } from 'api';\nimport DeleteButton from 'components/DeleteButton';\nimport ErrorDetail from 'components/ErrorDetail';\nimport getApplicationHelpTextStrings from '../shared/Application.helptext';\n\nfunction ApplicationDetails({\n  application,\n  authorizationOptions,\n  clientTypeOptions,\n}) {\n  const applicationHelpTextStrings = getApplicationHelpTextStrings();\n  const history = useHistory();\n  const {\n    isLoading: deleteLoading,\n    error: deletionError,\n    request: deleteApplications,\n  } = useRequest(\n    useCallback(async () => {\n      await ApplicationsAPI.destroy(application.id);\n      history.push('/applications');\n    }, [application.id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deletionError);\n\n  const getAuthorizationGrantType = (type) => {\n    let value;\n    authorizationOptions.filter((option) => {\n      if (option.value === type) {\n        value = option.label;\n      }\n      return null;\n    });\n    return value;\n  };\n  const getClientType = (type) => {\n    let value;\n    clientTypeOptions.filter((option) => {\n      if (option.value === type) {\n        value = option.label;\n      }\n      return null;\n    });\n    return value;\n  };\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={application.name}\n          dataCy=\"app-detail-name\"\n        />\n        <Detail\n          label={t`Description`}\n          value={application.description}\n          dataCy=\"app-detail-description\"\n        />\n        <Detail\n          label={t`Organization`}\n          value={\n            <Link\n              to={`/organizations/${application.summary_fields.organization.id}/details`}\n            >\n              {application.summary_fields.organization.name}\n            </Link>\n          }\n          dataCy=\"app-detail-organization\"\n        />\n        <Detail\n          label={t`Authorization grant type`}\n          value={getAuthorizationGrantType(\n            application.authorization_grant_type\n          )}\n          dataCy=\"app-detail-authorization-grant-type\"\n          helpText={applicationHelpTextStrings.authorizationGrantType}\n        />\n        <Detail\n          label={t`Client ID`}\n          value={application.client_id}\n          dataCy=\"app-detail-client-id\"\n        />\n        <Detail\n          label={t`Redirect URIs`}\n          value={application.redirect_uris}\n          dataCy=\"app-detail-redirect-uris\"\n          helpText={applicationHelpTextStrings.redirectURIS}\n        />\n        <Detail\n          label={t`Client type`}\n          value={getClientType(application.client_type)}\n          dataCy=\"app-detail-client-type\"\n          helpText={applicationHelpTextStrings.clientType}\n        />\n        <UserDateDetail label={t`Created`} date={application.created} />\n        <UserDateDetail label={t`Last Modified`} date={application.modified} />\n      </DetailList>\n      <CardActionsRow>\n        {application.summary_fields.user_capabilities &&\n          application.summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"application-details-edit-button\"\n              component={Link}\n              to={`/applications/${application.id}/edit`}\n              aria-label={t`Edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {application.summary_fields.user_capabilities &&\n          application.summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              name={application.name}\n              modalTitle={t`Delete application`}\n              onConfirm={deleteApplications}\n              isDisabled={deleteLoading}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissError}\n        >\n          {t`Failed to delete application.`}\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\nexport default ApplicationDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}