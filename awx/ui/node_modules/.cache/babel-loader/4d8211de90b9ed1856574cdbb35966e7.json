{"ast":null,"code":"import React,{useEffect}from'react';import{JobEventLine,JobEventLineToggle,JobEventLineNumber,JobEventLineText,JobEventEllipsis}from'./shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JobEvent(_ref){var style=_ref.style,lineTextHtml=_ref.lineTextHtml,isClickable=_ref.isClickable,onJobEventClick=_ref.onJobEventClick,event=_ref.event,measure=_ref.measure,isCollapsed=_ref.isCollapsed,onToggleCollapsed=_ref.onToggleCollapsed,hasChildren=_ref.hasChildren,jobStatus=_ref.jobStatus;var numOutputLines=(lineTextHtml===null||lineTextHtml===void 0?void 0:lineTextHtml.length)||0;useEffect(function(){var timeout=setTimeout(measure,0);return function(){clearTimeout(timeout);};},[numOutputLines,isCollapsed,measure,jobStatus]);var toggleLineIndex=-1;if(hasChildren){lineTextHtml.forEach(function(_ref2,index){var html=_ref2.html;if(html){toggleLineIndex=index;}});}return!event.stdout?null:/*#__PURE__*/_jsx(\"div\",{style:style,type:event.type,children:lineTextHtml.map(function(_ref3,index){var lineNumber=_ref3.lineNumber,html=_ref3.html;if(lineNumber<0){return null;}var canToggle=index===toggleLineIndex&&!event.isTracebackOnly;return/*#__PURE__*/_jsxs(JobEventLine,{onClick:isClickable?onJobEventClick:undefined,isFirst:lineNumber===0,isClickable:isClickable,children:[/*#__PURE__*/_jsx(JobEventLineToggle,{canToggle:canToggle,isCollapsed:isCollapsed,onToggle:onToggleCollapsed}),/*#__PURE__*/_jsxs(JobEventLineNumber,{children:[!event.isTracebackOnly?lineNumber:'',/*#__PURE__*/_jsx(JobEventEllipsis,{isCollapsed:isCollapsed&&canToggle})]}),/*#__PURE__*/_jsx(JobEventLineText,{type:\"job_event_line_text\",dangerouslySetInnerHTML:{__html:html}})]},\"\".concat(event.counter,\"-\").concat(lineNumber));})});}export default JobEvent;","map":{"version":3,"names":["React","useEffect","JobEventLine","JobEventLineToggle","JobEventLineNumber","JobEventLineText","JobEventEllipsis","jsx","_jsx","jsxs","_jsxs","JobEvent","_ref","style","lineTextHtml","isClickable","onJobEventClick","event","measure","isCollapsed","onToggleCollapsed","hasChildren","jobStatus","numOutputLines","length","timeout","setTimeout","clearTimeout","toggleLineIndex","forEach","_ref2","index","html","stdout","type","children","map","_ref3","lineNumber","canToggle","isTracebackOnly","onClick","undefined","isFirst","onToggle","dangerouslySetInnerHTML","__html","concat","counter"],"sources":["/awx_devel/awx/ui/src/screens/Job/JobOutput/JobEvent.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  JobEventLine,\n  JobEventLineToggle,\n  JobEventLineNumber,\n  JobEventLineText,\n  JobEventEllipsis,\n} from './shared';\n\nfunction JobEvent({\n  style,\n  lineTextHtml,\n  isClickable,\n  onJobEventClick,\n  event,\n  measure,\n  isCollapsed,\n  onToggleCollapsed,\n  hasChildren,\n  jobStatus,\n}) {\n  const numOutputLines = lineTextHtml?.length || 0;\n  useEffect(() => {\n    const timeout = setTimeout(measure, 0);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [numOutputLines, isCollapsed, measure, jobStatus]);\n\n  let toggleLineIndex = -1;\n  if (hasChildren) {\n    lineTextHtml.forEach(({ html }, index) => {\n      if (html) {\n        toggleLineIndex = index;\n      }\n    });\n  }\n  return !event.stdout ? null : (\n    <div style={style} type={event.type}>\n      {lineTextHtml.map(({ lineNumber, html }, index) => {\n        if (lineNumber < 0) {\n          return null;\n        }\n        const canToggle = index === toggleLineIndex && !event.isTracebackOnly;\n        return (\n          <JobEventLine\n            onClick={isClickable ? onJobEventClick : undefined}\n            key={`${event.counter}-${lineNumber}`}\n            isFirst={lineNumber === 0}\n            isClickable={isClickable}\n          >\n            <JobEventLineToggle\n              canToggle={canToggle}\n              isCollapsed={isCollapsed}\n              onToggle={onToggleCollapsed}\n            />\n            <JobEventLineNumber>\n              {!event.isTracebackOnly ? lineNumber : ''}\n              <JobEventEllipsis isCollapsed={isCollapsed && canToggle} />\n            </JobEventLineNumber>\n            <JobEventLineText\n              type=\"job_event_line_text\"\n              dangerouslySetInnerHTML={{\n                __html: html,\n              }}\n            />\n          </JobEventLine>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default JobEvent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}