{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"team\",\"handleCancel\",\"handleSubmit\",\"submitError\"];import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Formik,useField,useFormikContext}from'formik';import{Form}from'@patternfly/react-core';import FormActionGroup from'components/FormActionGroup/FormActionGroup';import FormField,{FormSubmitError}from'components/FormField';import OrganizationLookup from'components/Lookup/OrganizationLookup';import{required}from'util/validators';import{FormColumnLayout}from'components/FormLayout';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TeamFormFields(_ref){var team=_ref.team;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched;var _useField=useField('organization'),_useField2=_slicedToArray(_useField,3),orgField=_useField2[0],orgMeta=_useField2[1],orgHelpers=_useField2[2];var handleOrganizationUpdate=useCallback(function(value){setFieldValue('organization',value);setFieldTouched('organization',true,false);},[setFieldValue,setFieldTouched]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormField,{id:\"team-name\",label:/*i18n*/i18n._(\"Name\"),name:\"name\",type:\"text\",validate:required(null),isRequired:true}),/*#__PURE__*/_jsx(FormField,{id:\"team-description\",label:/*i18n*/i18n._(\"Description\"),name:\"description\",type:\"text\"}),/*#__PURE__*/_jsx(OrganizationLookup,{helperTextInvalid:orgMeta.error,isValid:!orgMeta.touched||!orgMeta.error,onBlur:function onBlur(){return orgHelpers.setTouched('organization');},onChange:handleOrganizationUpdate,value:orgField.value,required:true,autoPopulate:!(team!==null&&team!==void 0&&team.id),validate:required(/*i18n*/i18n._(\"Select a value for this field\"))})]});}function TeamForm(props){var _team$summary_fields;var team=props.team,handleCancel=props.handleCancel,handleSubmit=props.handleSubmit,submitError=props.submitError,rest=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(Formik,{initialValues:{description:team.description||'',name:team.name||'',organization:((_team$summary_fields=team.summary_fields)===null||_team$summary_fields===void 0?void 0:_team$summary_fields.organization)||null},onSubmit:handleSubmit,children:function children(formik){return/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsxs(FormColumnLayout,{children:[/*#__PURE__*/_jsx(TeamFormFields,_objectSpread({team:team},rest)),/*#__PURE__*/_jsx(FormSubmitError,{error:submitError}),/*#__PURE__*/_jsx(FormActionGroup,{onCancel:handleCancel,onSubmit:formik.handleSubmit})]})});}});}TeamForm.defaultProps={team:{},submitError:null};export default TeamForm;","map":{"version":3,"names":["React","useCallback","Formik","useField","useFormikContext","Form","FormActionGroup","FormField","FormSubmitError","OrganizationLookup","required","FormColumnLayout","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TeamFormFields","_ref","team","_useFormikContext","setFieldValue","setFieldTouched","_useField","_useField2","_slicedToArray","orgField","orgMeta","orgHelpers","handleOrganizationUpdate","value","children","id","label","i18n","_","name","type","validate","isRequired","helperTextInvalid","error","isValid","touched","onBlur","setTouched","onChange","autoPopulate","TeamForm","props","_team$summary_fields","handleCancel","handleSubmit","submitError","rest","_objectWithoutProperties","_excluded","initialValues","description","organization","summary_fields","onSubmit","formik","autoComplete","_objectSpread","onCancel","defaultProps"],"sources":["/awx_devel/awx/ui/src/screens/Team/shared/TeamForm.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { t } from '@lingui/macro';\nimport { Formik, useField, useFormikContext } from 'formik';\nimport { Form } from '@patternfly/react-core';\nimport FormActionGroup from 'components/FormActionGroup/FormActionGroup';\nimport FormField, { FormSubmitError } from 'components/FormField';\nimport OrganizationLookup from 'components/Lookup/OrganizationLookup';\nimport { required } from 'util/validators';\nimport { FormColumnLayout } from 'components/FormLayout';\n\nfunction TeamFormFields({ team }) {\n  const { setFieldValue, setFieldTouched } = useFormikContext();\n  const [orgField, orgMeta, orgHelpers] = useField('organization');\n\n  const handleOrganizationUpdate = useCallback(\n    (value) => {\n      setFieldValue('organization', value);\n      setFieldTouched('organization', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  return (\n    <>\n      <FormField\n        id=\"team-name\"\n        label={t`Name`}\n        name=\"name\"\n        type=\"text\"\n        validate={required(null)}\n        isRequired\n      />\n      <FormField\n        id=\"team-description\"\n        label={t`Description`}\n        name=\"description\"\n        type=\"text\"\n      />\n      <OrganizationLookup\n        helperTextInvalid={orgMeta.error}\n        isValid={!orgMeta.touched || !orgMeta.error}\n        onBlur={() => orgHelpers.setTouched('organization')}\n        onChange={handleOrganizationUpdate}\n        value={orgField.value}\n        required\n        autoPopulate={!team?.id}\n        validate={required(t`Select a value for this field`)}\n      />\n    </>\n  );\n}\n\nfunction TeamForm(props) {\n  const { team, handleCancel, handleSubmit, submitError, ...rest } = props;\n\n  return (\n    <Formik\n      initialValues={{\n        description: team.description || '',\n        name: team.name || '',\n        organization: team.summary_fields?.organization || null,\n      }}\n      onSubmit={handleSubmit}\n    >\n      {(formik) => (\n        <Form autoComplete=\"off\" onSubmit={formik.handleSubmit}>\n          <FormColumnLayout>\n            <TeamFormFields team={team} {...rest} />\n            <FormSubmitError error={submitError} />\n            <FormActionGroup\n              onCancel={handleCancel}\n              onSubmit={formik.handleSubmit}\n            />\n          </FormColumnLayout>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n\nTeamForm.propTypes = {\n  handleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  team: PropTypes.shape({}),\n  submitError: PropTypes.shape(),\n};\n\nTeamForm.defaultProps = {\n  team: {},\n  submitError: null,\n};\n\nexport default TeamForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}