{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import StepName from'../LaunchPrompt/steps/StepName';import AdHocCredentialStep from'./AdHocCredentialStep';import{jsx as _jsx}from\"react/jsx-runtime\";var STEP_ID='credentials';export default function useAdHocExecutionEnvironmentStep(visited,credentialTypeId){var _useField=useField('credentials'),_useField2=_slicedToArray(_useField,3),field=_useField2[0],meta=_useField2[1],helpers=_useField2[2];var hasError=Object.keys(visited).includes('credentials')&&!field.value.length&&meta.touched;return{step:{id:STEP_ID,key:3,name:/*#__PURE__*/_jsx(StepName,{hasErrors:hasError,id:\"credential-step\",children:/*i18n*/i18n._(\"Credential\")}),component:/*#__PURE__*/_jsx(AdHocCredentialStep,{credentialTypeId:credentialTypeId}),enableNext:true,nextButtonText:/*i18n*/i18n._(\"Next\")},hasError:hasError,validate:function validate(){if(!meta.value.length){helpers.setError('A credential must be selected');}},setTouched:function setTouched(setFieldTouched){setFieldTouched('credentials',true,false);}};}","map":{"version":3,"names":["React","useField","StepName","AdHocCredentialStep","jsx","_jsx","STEP_ID","useAdHocExecutionEnvironmentStep","visited","credentialTypeId","_useField","_useField2","_slicedToArray","field","meta","helpers","hasError","Object","keys","includes","value","length","touched","step","id","key","name","hasErrors","children","i18n","_","component","enableNext","nextButtonText","validate","setError","setTouched","setFieldTouched"],"sources":["/awx_devel/awx/ui/src/components/AdHocCommands/useAdHocCredentialStep.js"],"sourcesContent":["import React from 'react';\nimport { useField } from 'formik';\nimport { t } from '@lingui/macro';\nimport StepName from '../LaunchPrompt/steps/StepName';\nimport AdHocCredentialStep from './AdHocCredentialStep';\n\nconst STEP_ID = 'credentials';\nexport default function useAdHocExecutionEnvironmentStep(\n  visited,\n  credentialTypeId\n) {\n  const [field, meta, helpers] = useField('credentials');\n  const hasError =\n    Object.keys(visited).includes('credentials') &&\n    !field.value.length &&\n    meta.touched;\n\n  return {\n    step: {\n      id: STEP_ID,\n      key: 3,\n      name: (\n        <StepName hasErrors={hasError} id=\"credential-step\">\n          {t`Credential`}\n        </StepName>\n      ),\n      component: <AdHocCredentialStep credentialTypeId={credentialTypeId} />,\n      enableNext: true,\n      nextButtonText: t`Next`,\n    },\n    hasError,\n    validate: () => {\n      if (!meta.value.length) {\n        helpers.setError('A credential must be selected');\n      }\n    },\n    setTouched: (setFieldTouched) => {\n      setFieldTouched('credentials', true, false);\n    },\n  };\n}\n"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,QAAQ,CAEjC,MAAO,CAAAC,QAAQ,KAAM,gCAAgC,CACrD,MAAO,CAAAC,mBAAmB,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExD,GAAM,CAAAC,OAAO,CAAG,aAAa,CAC7B,cAAe,SAAS,CAAAC,gCAAgCA,CACtDC,OAAO,CACPC,gBAAgB,CAChB,CACA,IAAAC,SAAA,CAA+BT,QAAQ,CAAC,aAAa,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/CG,KAAK,CAAAF,UAAA,IAAEG,IAAI,CAAAH,UAAA,IAAEI,OAAO,CAAAJ,UAAA,IAC3B,GAAM,CAAAK,QAAQ,CACZC,MAAM,CAACC,IAAI,CAACV,OAAO,CAAC,CAACW,QAAQ,CAAC,aAAa,CAAC,EAC5C,CAACN,KAAK,CAACO,KAAK,CAACC,MAAM,EACnBP,IAAI,CAACQ,OAAO,CAEd,MAAO,CACLC,IAAI,CAAE,CACJC,EAAE,CAAElB,OAAO,CACXmB,GAAG,CAAE,CAAC,CACNC,IAAI,cACFrB,IAAA,CAACH,QAAQ,EAACyB,SAAS,CAAEX,QAAS,CAACQ,EAAE,CAAC,iBAAiB,CAAAI,QAAA,SAChDC,IAAA,CAAAC,CAAA,aAAY,CAAC,CACN,CACX,CACDC,SAAS,cAAE1B,IAAA,CAACF,mBAAmB,EAACM,gBAAgB,CAAEA,gBAAiB,CAAE,CAAC,CACtEuB,UAAU,CAAE,IAAI,CAChBC,cAAc,SAAEJ,IAAA,CAAAC,CAAA,OAAM,CACxB,CAAC,CACDd,QAAQ,CAARA,QAAQ,CACRkB,QAAQ,CAAE,SAAAA,SAAA,CAAM,CACd,GAAI,CAACpB,IAAI,CAACM,KAAK,CAACC,MAAM,CAAE,CACtBN,OAAO,CAACoB,QAAQ,CAAC,+BAA+B,CAAC,CACnD,CACF,CAAC,CACDC,UAAU,CAAE,SAAAA,WAACC,eAAe,CAAK,CAC/BA,eAAe,CAAC,aAAa,CAAE,IAAI,CAAE,KAAK,CAAC,CAC7C,CACF,CAAC,CACH"},"metadata":{},"sourceType":"module"}