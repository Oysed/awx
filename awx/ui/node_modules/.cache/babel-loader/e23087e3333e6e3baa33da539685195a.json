{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Switch,Route,Redirect,Link,useRouteMatch,useLocation}from'react-router-dom';import{Card}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import useRequest from'hooks/useRequest';import{InventoriesAPI}from'api';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import RoutedTabs from'components/RoutedTabs';import JobList from'components/JobList';import InventoryHostDetail from'../InventoryHostDetail';import InventoryHostEdit from'../InventoryHostEdit';import InventoryHostFacts from'../InventoryHostFacts';import InventoryHostGroups from'../InventoryHostGroups';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InventoryHost(_ref){var setBreadcrumb=_ref.setBreadcrumb,inventory=_ref.inventory;var location=useLocation();var match=useRouteMatch('/inventories/inventory/:id/hosts/:hostId');var hostListUrl=\"/inventories/inventory/\".concat(inventory.id,\"/hosts\");var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InventoriesAPI.readHostDetail(inventory.id,match.params.hostId);case 2:response=_context.sent;return _context.abrupt(\"return\",{host:response});case 4:case\"end\":return _context.stop();}}},_callee);})),[inventory.id,match.params.hostId]),{host:null}),host=_useRequest.result.host,contentError=_useRequest.error,isLoading=_useRequest.isLoading,fetchHost=_useRequest.request;useEffect(function(){fetchHost();},[fetchHost,location.pathname]);useEffect(function(){if(inventory&&host){setBreadcrumb(inventory,host);}},[inventory,host,setBreadcrumb]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Hosts\")]}),link:\"\".concat(hostListUrl),id:0},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:1},{name:/*i18n*/i18n._(\"Facts\"),link:\"\".concat(match.url,\"/facts\"),id:2},{name:/*i18n*/i18n._(\"Groups\"),link:\"\".concat(match.url,\"/groups\"),id:3},{name:/*i18n*/i18n._(\"Jobs\"),link:\"\".concat(match.url,\"/jobs\"),id:4}];if(contentError){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:contentError,children:contentError.response&&contentError.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Host not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:hostListUrl,children:/*i18n*/i18n._(\"View all Inventory Hosts.\")})]})})});}var showCardHeader=true;if(['edit'].some(function(name){return location.pathname.includes(name);})){showCardHeader=false;}return/*#__PURE__*/_jsxs(_Fragment,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&host&&/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/inventories/inventory/:id/hosts/:hostId\",to:\"/inventories/inventory/:id/hosts/:hostId/details\",exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/inventories/inventory/:id/hosts/:hostId/details\",children:/*#__PURE__*/_jsx(InventoryHostDetail,{host:host})},\"details\"),/*#__PURE__*/_jsx(Route,{path:\"/inventories/inventory/:id/hosts/:hostId/edit\",children:/*#__PURE__*/_jsx(InventoryHostEdit,{host:host,inventory:inventory})},\"edit\"),/*#__PURE__*/_jsx(Route,{path:\"/inventories/inventory/:id/hosts/:hostId/facts\",children:/*#__PURE__*/_jsx(InventoryHostFacts,{host:host})},\"facts\"),/*#__PURE__*/_jsx(Route,{path:\"/inventories/inventory/:id/hosts/:hostId/groups\",children:/*#__PURE__*/_jsx(InventoryHostGroups,{})},\"groups\"),/*#__PURE__*/_jsx(Route,{path:\"/inventories/inventory/:id/hosts/:hostId/jobs\",children:/*#__PURE__*/_jsx(JobList,{defaultParams:{job__hosts:host.id}})},\"jobs\"),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(match.url,\"/details\"),children:/*i18n*/i18n._(\"View Inventory Host Details\")})})},\"not-found\")]})]});}export default InventoryHost;","map":{"version":3,"names":["React","useEffect","useCallback","Switch","Route","Redirect","Link","useRouteMatch","useLocation","Card","CaretLeftIcon","useRequest","InventoriesAPI","ContentError","ContentLoading","RoutedTabs","JobList","InventoryHostDetail","InventoryHostEdit","InventoryHostFacts","InventoryHostGroups","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","InventoryHost","_ref","setBreadcrumb","inventory","location","match","hostListUrl","concat","id","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","readHostDetail","params","hostId","sent","abrupt","host","stop","result","contentError","error","isLoading","fetchHost","request","pathname","tabsArray","name","children","i18n","_","link","url","status","to","showCardHeader","some","includes","from","exact","path","defaultParams","job__hosts","isNotFound"],"sources":["/awx_devel/awx/ui/src/screens/Inventory/InventoryHost/InventoryHost.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Switch,\n  Route,\n  Redirect,\n  Link,\n  useRouteMatch,\n  useLocation,\n} from 'react-router-dom';\nimport { Card } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport useRequest from 'hooks/useRequest';\n\nimport { InventoriesAPI } from 'api';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport RoutedTabs from 'components/RoutedTabs';\nimport JobList from 'components/JobList';\nimport InventoryHostDetail from '../InventoryHostDetail';\nimport InventoryHostEdit from '../InventoryHostEdit';\nimport InventoryHostFacts from '../InventoryHostFacts';\nimport InventoryHostGroups from '../InventoryHostGroups';\n\nfunction InventoryHost({ setBreadcrumb, inventory }) {\n  const location = useLocation();\n  const match = useRouteMatch('/inventories/inventory/:id/hosts/:hostId');\n  const hostListUrl = `/inventories/inventory/${inventory.id}/hosts`;\n\n  const {\n    result: { host },\n    error: contentError,\n    isLoading,\n    request: fetchHost,\n  } = useRequest(\n    useCallback(async () => {\n      const response = await InventoriesAPI.readHostDetail(\n        inventory.id,\n        match.params.hostId\n      );\n      return {\n        host: response,\n      };\n    }, [inventory.id, match.params.hostId]),\n    {\n      host: null,\n    }\n  );\n\n  useEffect(() => {\n    fetchHost();\n  }, [fetchHost, location.pathname]);\n\n  useEffect(() => {\n    if (inventory && host) {\n      setBreadcrumb(inventory, host);\n    }\n  }, [inventory, host, setBreadcrumb]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Hosts`}\n        </>\n      ),\n      link: `${hostListUrl}`,\n      id: 0,\n    },\n    {\n      name: t`Details`,\n      link: `${match.url}/details`,\n      id: 1,\n    },\n    {\n      name: t`Facts`,\n      link: `${match.url}/facts`,\n      id: 2,\n    },\n    {\n      name: t`Groups`,\n      link: `${match.url}/groups`,\n      id: 3,\n    },\n    {\n      name: t`Jobs`,\n      link: `${match.url}/jobs`,\n      id: 4,\n    },\n  ];\n\n  if (contentError) {\n    return (\n      <Card>\n        <ContentError error={contentError}>\n          {contentError.response && contentError.response.status === 404 && (\n            <span>\n              {t`Host not found.`}{' '}\n              <Link to={hostListUrl}>{t`View all Inventory Hosts.`}</Link>\n            </span>\n          )}\n        </ContentError>\n      </Card>\n    );\n  }\n\n  let showCardHeader = true;\n  if (['edit'].some((name) => location.pathname.includes(name))) {\n    showCardHeader = false;\n  }\n\n  return (\n    <>\n      {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n\n      {isLoading && <ContentLoading />}\n\n      {!isLoading && host && (\n        <Switch>\n          <Redirect\n            from=\"/inventories/inventory/:id/hosts/:hostId\"\n            to=\"/inventories/inventory/:id/hosts/:hostId/details\"\n            exact\n          />\n          <Route\n            key=\"details\"\n            path=\"/inventories/inventory/:id/hosts/:hostId/details\"\n          >\n            <InventoryHostDetail host={host} />\n          </Route>\n          <Route\n            key=\"edit\"\n            path=\"/inventories/inventory/:id/hosts/:hostId/edit\"\n          >\n            <InventoryHostEdit host={host} inventory={inventory} />\n          </Route>\n          <Route\n            key=\"facts\"\n            path=\"/inventories/inventory/:id/hosts/:hostId/facts\"\n          >\n            <InventoryHostFacts host={host} />\n          </Route>\n          <Route\n            key=\"groups\"\n            path=\"/inventories/inventory/:id/hosts/:hostId/groups\"\n          >\n            <InventoryHostGroups />\n          </Route>\n          <Route\n            key=\"jobs\"\n            path=\"/inventories/inventory/:id/hosts/:hostId/jobs\"\n          >\n            <JobList defaultParams={{ job__hosts: host.id }} />\n          </Route>\n          <Route key=\"not-found\" path=\"*\">\n            <ContentError isNotFound>\n              <Link to={`${match.url}/details`}>\n                {t`View Inventory Host Details`}\n              </Link>\n            </ContentError>\n          </Route>\n        </Switch>\n      )}\n    </>\n  );\n}\n\nexport default InventoryHost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}