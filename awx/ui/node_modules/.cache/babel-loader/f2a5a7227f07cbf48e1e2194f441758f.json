{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{useField,useFormikContext}from'formik';import CredentialLookup from'components/Lookup/CredentialLookup';import{required}from'util/validators';import{ScmTypeOptions}from'./SharedFields';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InsightsSubForm=function InsightsSubForm(_ref){var credential=_ref.credential,onCredentialSelection=_ref.onCredentialSelection,scmUpdateOnLaunch=_ref.scmUpdateOnLaunch,autoPopulateCredential=_ref.autoPopulateCredential;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched;var _useField=useField('credential'),_useField2=_slicedToArray(_useField,3),credMeta=_useField2[1],credHelpers=_useField2[2];var onCredentialChange=useCallback(function(value){onCredentialSelection('insights',value);setFieldValue('credential',value);setFieldTouched('credential',true,false);},[onCredentialSelection,setFieldValue,setFieldTouched]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CredentialLookup,{credentialTypeId:credential.typeId,label:/*i18n*/i18n._(\"Insights Credential\"),helperTextInvalid:credMeta.error,isValid:!credMeta.touched||!credMeta.error,onBlur:function onBlur(){return credHelpers.setTouched();},onChange:onCredentialChange,value:credential.value,required:true,autoPopulate:autoPopulateCredential,validate:required(/*i18n*/i18n._(\"Select a value for this field\"))}),/*#__PURE__*/_jsx(ScmTypeOptions,{hideAllowOverride:true,scmUpdateOnLaunch:scmUpdateOnLaunch})]});};export default InsightsSubForm;","map":{"version":3,"names":["React","useCallback","useField","useFormikContext","CredentialLookup","required","ScmTypeOptions","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","InsightsSubForm","_ref","credential","onCredentialSelection","scmUpdateOnLaunch","autoPopulateCredential","_useFormikContext","setFieldValue","setFieldTouched","_useField","_useField2","_slicedToArray","credMeta","credHelpers","onCredentialChange","value","children","credentialTypeId","typeId","label","i18n","_","helperTextInvalid","error","isValid","touched","onBlur","setTouched","onChange","autoPopulate","validate","hideAllowOverride"],"sources":["/awx_devel/awx/ui/src/screens/Project/shared/ProjectSubForms/InsightsSubForm.js"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { useField, useFormikContext } from 'formik';\nimport CredentialLookup from 'components/Lookup/CredentialLookup';\nimport { required } from 'util/validators';\nimport { ScmTypeOptions } from './SharedFields';\n\nconst InsightsSubForm = ({\n  credential,\n  onCredentialSelection,\n  scmUpdateOnLaunch,\n  autoPopulateCredential,\n}) => {\n  const { setFieldValue, setFieldTouched } = useFormikContext();\n  const [, credMeta, credHelpers] = useField('credential');\n\n  const onCredentialChange = useCallback(\n    (value) => {\n      onCredentialSelection('insights', value);\n      setFieldValue('credential', value);\n      setFieldTouched('credential', true, false);\n    },\n    [onCredentialSelection, setFieldValue, setFieldTouched]\n  );\n\n  return (\n    <>\n      <CredentialLookup\n        credentialTypeId={credential.typeId}\n        label={t`Insights Credential`}\n        helperTextInvalid={credMeta.error}\n        isValid={!credMeta.touched || !credMeta.error}\n        onBlur={() => credHelpers.setTouched()}\n        onChange={onCredentialChange}\n        value={credential.value}\n        required\n        autoPopulate={autoPopulateCredential}\n        validate={required(t`Select a value for this field`)}\n      />\n      <ScmTypeOptions hideAllowOverride scmUpdateOnLaunch={scmUpdateOnLaunch} />\n    </>\n  );\n};\n\nexport default InsightsSubForm;\n"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,KAAQ,OAAO,CAG1C,OAASC,QAAQ,CAAEC,gBAAgB,KAAQ,QAAQ,CACnD,MAAO,CAAAC,gBAAgB,KAAM,oCAAoC,CACjE,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,cAAc,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAAC,IAAA,CAKf,IAJJ,CAAAC,UAAU,CAAAD,IAAA,CAAVC,UAAU,CACVC,qBAAqB,CAAAF,IAAA,CAArBE,qBAAqB,CACrBC,iBAAiB,CAAAH,IAAA,CAAjBG,iBAAiB,CACjBC,sBAAsB,CAAAJ,IAAA,CAAtBI,sBAAsB,CAEtB,IAAAC,iBAAA,CAA2ChB,gBAAgB,CAAC,CAAC,CAArDiB,aAAa,CAAAD,iBAAA,CAAbC,aAAa,CAAEC,eAAe,CAAAF,iBAAA,CAAfE,eAAe,CACtC,IAAAC,SAAA,CAAkCpB,QAAQ,CAAC,YAAY,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/CG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAE9B,GAAM,CAAAI,kBAAkB,CAAG1B,WAAW,CACpC,SAAC2B,KAAK,CAAK,CACTZ,qBAAqB,CAAC,UAAU,CAAEY,KAAK,CAAC,CACxCR,aAAa,CAAC,YAAY,CAAEQ,KAAK,CAAC,CAClCP,eAAe,CAAC,YAAY,CAAE,IAAI,CAAE,KAAK,CAAC,CAC5C,CAAC,CACD,CAACL,qBAAqB,CAAEI,aAAa,CAAEC,eAAe,CACxD,CAAC,CAED,mBACET,KAAA,CAAAF,SAAA,EAAAmB,QAAA,eACErB,IAAA,CAACJ,gBAAgB,EACf0B,gBAAgB,CAAEf,UAAU,CAACgB,MAAO,CACpCC,KAAK,SAAEC,IAAA,CAAAC,CAAA,sBAAqB,CAAE,CAC9BC,iBAAiB,CAAEV,QAAQ,CAACW,KAAM,CAClCC,OAAO,CAAE,CAACZ,QAAQ,CAACa,OAAO,EAAI,CAACb,QAAQ,CAACW,KAAM,CAC9CG,MAAM,CAAE,SAAAA,OAAA,QAAM,CAAAb,WAAW,CAACc,UAAU,CAAC,CAAC,EAAC,CACvCC,QAAQ,CAAEd,kBAAmB,CAC7BC,KAAK,CAAEb,UAAU,CAACa,KAAM,CACxBvB,QAAQ,MACRqC,YAAY,CAAExB,sBAAuB,CACrCyB,QAAQ,CAAEtC,QAAQ,SAAC4B,IAAA,CAAAC,CAAA,gCAA+B,CAAC,CAAE,CACtD,CAAC,cACF1B,IAAA,CAACF,cAAc,EAACsC,iBAAiB,MAAC3B,iBAAiB,CAAEA,iBAAkB,CAAE,CAAC,EAC1E,CAAC,CAEP,CAAC,CAED,cAAe,CAAAJ,eAAe"},"metadata":{},"sourceType":"module"}