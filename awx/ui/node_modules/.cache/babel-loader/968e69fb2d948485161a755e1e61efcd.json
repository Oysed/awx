{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Card,PageSection}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{Link,Switch,Route,Redirect,useParams,useRouteMatch,useLocation}from'react-router-dom';import useRequest from'hooks/useRequest';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import{NotificationTemplatesAPI}from'api';import ContentLoading from'components/ContentLoading';import NotificationTemplateDetail from'./NotificationTemplateDetail';import NotificationTemplateEdit from'./NotificationTemplateEdit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function NotificationTemplate(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useParams=useParams(),templateId=_useParams.id;var match=useRouteMatch();var location=useLocation();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _options$data$actions,_options$data$actions2;var _yield$Promise$all,_yield$Promise$all2,detail,options;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([NotificationTemplatesAPI.readDetail(templateId),NotificationTemplatesAPI.readOptions()]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);detail=_yield$Promise$all2[0];options=_yield$Promise$all2[1];setBreadcrumb(detail.data);return _context.abrupt(\"return\",{template:detail.data,defaultMessages:(_options$data$actions=options.data.actions)===null||_options$data$actions===void 0?void 0:(_options$data$actions2=_options$data$actions.POST)===null||_options$data$actions2===void 0?void 0:_options$data$actions2.messages});case 8:case\"end\":return _context.stop();}}},_callee);})),[templateId,setBreadcrumb]),{template:null,defaultMessages:null}),_useRequest$result=_useRequest.result,template=_useRequest$result.template,defaultMessages=_useRequest$result.defaultMessages,isLoading=_useRequest.isLoading,error=_useRequest.error,fetchTemplate=_useRequest.request;useEffect(function(){fetchTemplate();},[fetchTemplate,location.pathname]);if(!isLoading&&error){var _error$response;return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:error,children:((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Notification Template not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/notification_templates\",children:/*i18n*/i18n._(\"View all Notification Templates.\")})]})})})});}var showCardHeader=!location.pathname.endsWith('edit');var tabs=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Notifications\")]}),link:\"/notification_templates\",id:99,persistentFilterKey:'notificationTemplates'},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:0}];return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabs}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/notification_templates/:id\",to:\"/notification_templates/:id/details\",exact:true}),isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),template&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/notification_templates/:id/edit\",children:/*#__PURE__*/_jsx(NotificationTemplateEdit,{template:template,defaultMessages:defaultMessages})}),/*#__PURE__*/_jsx(Route,{path:\"/notification_templates/:id/details\",children:/*#__PURE__*/_jsx(NotificationTemplateDetail,{template:template,defaultMessages:defaultMessages})})]})]})]})});}export default NotificationTemplate;","map":{"version":3,"names":["React","useEffect","useCallback","Card","PageSection","CaretLeftIcon","Link","Switch","Route","Redirect","useParams","useRouteMatch","useLocation","useRequest","RoutedTabs","ContentError","NotificationTemplatesAPI","ContentLoading","NotificationTemplateDetail","NotificationTemplateEdit","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NotificationTemplate","_ref","setBreadcrumb","_useParams","templateId","id","match","location","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_options$data$actions","_options$data$actions2","_yield$Promise$all","_yield$Promise$all2","detail","options","wrap","_callee$","_context","prev","next","Promise","all","readDetail","readOptions","sent","_slicedToArray","data","abrupt","template","defaultMessages","actions","POST","messages","stop","_useRequest$result","result","isLoading","error","fetchTemplate","request","pathname","_error$response","children","response","status","i18n","_","to","showCardHeader","endsWith","tabs","name","link","persistentFilterKey","concat","url","tabsArray","from","exact","path"],"sources":["/awx_devel/awx/ui/src/screens/NotificationTemplate/NotificationTemplate.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { t } from '@lingui/macro';\n\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport {\n  Link,\n  Switch,\n  Route,\n  Redirect,\n  useParams,\n  useRouteMatch,\n  useLocation,\n} from 'react-router-dom';\nimport useRequest from 'hooks/useRequest';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport { NotificationTemplatesAPI } from 'api';\nimport ContentLoading from 'components/ContentLoading';\nimport NotificationTemplateDetail from './NotificationTemplateDetail';\nimport NotificationTemplateEdit from './NotificationTemplateEdit';\n\nfunction NotificationTemplate({ setBreadcrumb }) {\n  const { id: templateId } = useParams();\n  const match = useRouteMatch();\n  const location = useLocation();\n  const {\n    result: { template, defaultMessages },\n    isLoading,\n    error,\n    request: fetchTemplate,\n  } = useRequest(\n    useCallback(async () => {\n      const [detail, options] = await Promise.all([\n        NotificationTemplatesAPI.readDetail(templateId),\n        NotificationTemplatesAPI.readOptions(),\n      ]);\n      setBreadcrumb(detail.data);\n      return {\n        template: detail.data,\n        defaultMessages: options.data.actions?.POST?.messages,\n      };\n    }, [templateId, setBreadcrumb]),\n    { template: null, defaultMessages: null }\n  );\n\n  useEffect(() => {\n    fetchTemplate();\n  }, [fetchTemplate, location.pathname]);\n\n  if (!isLoading && error) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={error}>\n            {error.response?.status === 404 && (\n              <span>\n                {t`Notification Template not found.`}{' '}\n                <Link to=\"/notification_templates\">\n                  {t`View all Notification Templates.`}\n                </Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  const showCardHeader = !location.pathname.endsWith('edit');\n  const tabs = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Notifications`}\n        </>\n      ),\n      link: `/notification_templates`,\n      id: 99,\n      persistentFilterKey: 'notificationTemplates',\n    },\n    {\n      name: t`Details`,\n      link: `${match.url}/details`,\n      id: 0,\n    },\n  ];\n  return (\n    <PageSection>\n      <Card>\n        {showCardHeader && <RoutedTabs tabsArray={tabs} />}\n        <Switch>\n          <Redirect\n            from=\"/notification_templates/:id\"\n            to=\"/notification_templates/:id/details\"\n            exact\n          />\n          {isLoading && <ContentLoading />}\n          {template && (\n            <>\n              <Route path=\"/notification_templates/:id/edit\">\n                <NotificationTemplateEdit\n                  template={template}\n                  defaultMessages={defaultMessages}\n                />\n              </Route>\n              <Route path=\"/notification_templates/:id/details\">\n                <NotificationTemplateDetail\n                  template={template}\n                  defaultMessages={defaultMessages}\n                />\n              </Route>\n            </>\n          )}\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default NotificationTemplate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}