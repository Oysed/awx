{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"approvalName\",\"approvalDescription\",\"credentials\",\"linkType\",\"nodeResource\",\"nodeType\",\"timeoutMinutes\",\"timeoutSeconds\",\"convergence\",\"identifier\"];import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{WorkflowDispatchContext}from'contexts/Workflow';import NodeModal from'./NodeModal';import{jsx as _jsx}from\"react/jsx-runtime\";function NodeEditModal(){var dispatch=useContext(WorkflowDispatchContext);var updateNode=function updateNode(values,config){var approvalName=values.approvalName,approvalDescription=values.approvalDescription,credentials=values.credentials,linkType=values.linkType,nodeResource=values.nodeResource,nodeType=values.nodeType,timeoutMinutes=values.timeoutMinutes,timeoutSeconds=values.timeoutSeconds,convergence=values.convergence,identifier=values.identifier,rest=_objectWithoutProperties(values,_excluded);var node;if(values.nodeType==='workflow_approval_template'){node={all_parents_must_converge:convergence==='all',nodeResource:{description:approvalDescription,name:approvalName,timeout:Number(timeoutMinutes)*60+Number(timeoutSeconds),type:'workflow_approval_template'},identifier:identifier};}else{node={nodeResource:nodeResource,all_parents_must_converge:convergence==='all',identifier:identifier};if(nodeType==='job_template'||nodeType==='workflow_job_template'){node.promptValues=_objectSpread(_objectSpread({},rest),{},{credentials:credentials});node.launchConfig=config;}if(nodeType==='system_job_template'){node.promptValues={extra_data:values===null||values===void 0?void 0:values.extra_data};}}dispatch({type:'UPDATE_NODE',node:node});};return/*#__PURE__*/_jsx(NodeModal,{askLinkType:false,onSave:updateNode,title:/*i18n*/i18n._(\"Edit Node\")});}export default NodeEditModal;","map":{"version":3,"names":["React","useContext","WorkflowDispatchContext","NodeModal","jsx","_jsx","NodeEditModal","dispatch","updateNode","values","config","approvalName","approvalDescription","credentials","linkType","nodeResource","nodeType","timeoutMinutes","timeoutSeconds","convergence","identifier","rest","_objectWithoutProperties","_excluded","node","all_parents_must_converge","description","name","timeout","Number","type","promptValues","_objectSpread","launchConfig","extra_data","askLinkType","onSave","title","i18n","_"],"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/Modals/NodeModals/NodeEditModal.js"],"sourcesContent":["import React, { useContext } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { WorkflowDispatchContext } from 'contexts/Workflow';\nimport NodeModal from './NodeModal';\n\nfunction NodeEditModal() {\n  const dispatch = useContext(WorkflowDispatchContext);\n\n  const updateNode = (values, config) => {\n    const {\n      approvalName,\n      approvalDescription,\n      credentials,\n      linkType,\n      nodeResource,\n      nodeType,\n      timeoutMinutes,\n      timeoutSeconds,\n      convergence,\n      identifier,\n      ...rest\n    } = values;\n    let node;\n    if (values.nodeType === 'workflow_approval_template') {\n      node = {\n        all_parents_must_converge: convergence === 'all',\n        nodeResource: {\n          description: approvalDescription,\n          name: approvalName,\n          timeout: Number(timeoutMinutes) * 60 + Number(timeoutSeconds),\n          type: 'workflow_approval_template',\n        },\n        identifier,\n      };\n    } else {\n      node = {\n        nodeResource,\n        all_parents_must_converge: convergence === 'all',\n        identifier,\n      };\n      if (nodeType === 'job_template' || nodeType === 'workflow_job_template') {\n        node.promptValues = {\n          ...rest,\n          credentials,\n        };\n\n        node.launchConfig = config;\n      }\n      if (nodeType === 'system_job_template') {\n        node.promptValues = {\n          extra_data: values?.extra_data,\n        };\n      }\n    }\n\n    dispatch({\n      type: 'UPDATE_NODE',\n      node,\n    });\n  };\n\n  return (\n    <NodeModal askLinkType={false} onSave={updateNode} title={t`Edit Node`} />\n  );\n}\n\nexport default NodeEditModal;\n"],"mappings":"qaAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CAGzC,OAASC,uBAAuB,KAAQ,mBAAmB,CAC3D,MAAO,CAAAC,SAAS,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,QAAS,CAAAC,aAAaA,CAAA,CAAG,CACvB,GAAM,CAAAC,QAAQ,CAAGN,UAAU,CAACC,uBAAuB,CAAC,CAEpD,GAAM,CAAAM,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,MAAM,CAAEC,MAAM,CAAK,CACrC,GACE,CAAAC,YAAY,CAWVF,MAAM,CAXRE,YAAY,CACZC,mBAAmB,CAUjBH,MAAM,CAVRG,mBAAmB,CACnBC,WAAW,CASTJ,MAAM,CATRI,WAAW,CACXC,QAAQ,CAQNL,MAAM,CARRK,QAAQ,CACRC,YAAY,CAOVN,MAAM,CAPRM,YAAY,CACZC,QAAQ,CAMNP,MAAM,CANRO,QAAQ,CACRC,cAAc,CAKZR,MAAM,CALRQ,cAAc,CACdC,cAAc,CAIZT,MAAM,CAJRS,cAAc,CACdC,WAAW,CAGTV,MAAM,CAHRU,WAAW,CACXC,UAAU,CAERX,MAAM,CAFRW,UAAU,CACPC,IAAI,CAAAC,wBAAA,CACLb,MAAM,CAAAc,SAAA,EACV,GAAI,CAAAC,IAAI,CACR,GAAIf,MAAM,CAACO,QAAQ,GAAK,4BAA4B,CAAE,CACpDQ,IAAI,CAAG,CACLC,yBAAyB,CAAEN,WAAW,GAAK,KAAK,CAChDJ,YAAY,CAAE,CACZW,WAAW,CAAEd,mBAAmB,CAChCe,IAAI,CAAEhB,YAAY,CAClBiB,OAAO,CAAEC,MAAM,CAACZ,cAAc,CAAC,CAAG,EAAE,CAAGY,MAAM,CAACX,cAAc,CAAC,CAC7DY,IAAI,CAAE,4BACR,CAAC,CACDV,UAAU,CAAVA,UACF,CAAC,CACH,CAAC,IAAM,CACLI,IAAI,CAAG,CACLT,YAAY,CAAZA,YAAY,CACZU,yBAAyB,CAAEN,WAAW,GAAK,KAAK,CAChDC,UAAU,CAAVA,UACF,CAAC,CACD,GAAIJ,QAAQ,GAAK,cAAc,EAAIA,QAAQ,GAAK,uBAAuB,CAAE,CACvEQ,IAAI,CAACO,YAAY,CAAAC,aAAA,CAAAA,aAAA,IACZX,IAAI,MACPR,WAAW,CAAXA,WAAW,EACZ,CAEDW,IAAI,CAACS,YAAY,CAAGvB,MAAM,CAC5B,CACA,GAAIM,QAAQ,GAAK,qBAAqB,CAAE,CACtCQ,IAAI,CAACO,YAAY,CAAG,CAClBG,UAAU,CAAEzB,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEyB,UACtB,CAAC,CACH,CACF,CAEA3B,QAAQ,CAAC,CACPuB,IAAI,CAAE,aAAa,CACnBN,IAAI,CAAJA,IACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACEnB,IAAA,CAACF,SAAS,EAACgC,WAAW,CAAE,KAAM,CAACC,MAAM,CAAE5B,UAAW,CAAC6B,KAAK,SAAEC,IAAA,CAAAC,CAAA,YAAW,CAAE,CAAE,CAAC,CAE9E,CAEA,cAAe,CAAAjC,aAAa"},"metadata":{},"sourceType":"module"}