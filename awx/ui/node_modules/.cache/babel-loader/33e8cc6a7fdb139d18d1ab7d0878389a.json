{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";/* eslint-disable react/jsx-no-useless-fragment */import React,{useState,useEffect}from'react';import{Link,Redirect,Route,Switch,useLocation,useParams}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import{Config}from'contexts/Config';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import{TeamsAPI}from'api';import{ResourceAccessList}from'components/ResourceAccessList';import TeamDetail from'./TeamDetail';import TeamEdit from'./TeamEdit';import TeamRolesList from'./TeamRoles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Team(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),team=_useState2[0],setTeam=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contentError=_useState4[0],setContentError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),hasContentLoading=_useState6[0],setHasContentLoading=_useState6[1];var location=useLocation();var _useParams=useParams(),id=_useParams.id;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$TeamsAPI$readD,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return TeamsAPI.readDetail(id);case 3:_yield$TeamsAPI$readD=_context.sent;data=_yield$TeamsAPI$readD.data;setBreadcrumb(data);setTeam(data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setContentError(_context.t0);case 12:_context.prev=12;setHasContentLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,9,12,15]]);}))();},[id,setBreadcrumb,location]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Teams\")]}),link:\"/teams\",id:99,persistentFilterKey:'teams'},{name:/*i18n*/i18n._(\"Details\"),link:\"/teams/\".concat(id,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Access\"),link:\"/teams/\".concat(id,\"/access\"),id:1},{name:/*i18n*/i18n._(\"Roles\"),link:\"/teams/\".concat(id,\"/roles\"),id:2}];var showCardHeader=true;if(location.pathname.endsWith('edit')){showCardHeader=false;}if(!hasContentLoading&&contentError){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:contentError,children:contentError.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Team not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/teams\",children:/*i18n*/i18n._(\"View all Teams.\")})]})})})});}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/teams/:id\",to:\"/teams/:id/details\",exact:true}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/details\",children:/*#__PURE__*/_jsx(TeamDetail,{team:team})}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/edit\",children:/*#__PURE__*/_jsx(TeamEdit,{team:team})}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/access\",children:/*#__PURE__*/_jsx(ResourceAccessList,{resource:team,apiModel:TeamsAPI})}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/roles\",children:/*#__PURE__*/_jsx(Config,{children:function children(_ref3){var me=_ref3.me;return/*#__PURE__*/_jsx(_Fragment,{children:me&&/*#__PURE__*/_jsx(TeamRolesList,{me:me,team:team})});}})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:!hasContentLoading&&/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:id&&/*#__PURE__*/_jsx(Link,{to:\"/teams/\".concat(id,\"/details\"),children:/*i18n*/i18n._(\"View Team Details\")})})},\"not-found\")]})]})});}export default Team;export{Team as _Team};","map":{"version":3,"names":["React","useState","useEffect","Link","Redirect","Route","Switch","useLocation","useParams","CaretLeftIcon","Card","PageSection","Config","RoutedTabs","ContentError","TeamsAPI","ResourceAccessList","TeamDetail","TeamEdit","TeamRolesList","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Team","_ref","setBreadcrumb","_useState","_useState2","_slicedToArray","team","setTeam","_useState3","_useState4","contentError","setContentError","_useState5","_useState6","hasContentLoading","setHasContentLoading","location","_useParams","id","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$TeamsAPI$readD","data","wrap","_callee$","_context","prev","next","readDetail","sent","t0","finish","stop","tabsArray","name","children","i18n","_","link","persistentFilterKey","concat","showCardHeader","pathname","endsWith","error","response","status","to","from","exact","path","resource","apiModel","_ref3","me","isNotFound","_Team"],"sources":["/awx_devel/awx/ui/src/screens/Team/Team.js"],"sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport React, { useState, useEffect } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  useLocation,\n  useParams,\n} from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { Config } from 'contexts/Config';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport { TeamsAPI } from 'api';\nimport { ResourceAccessList } from 'components/ResourceAccessList';\nimport TeamDetail from './TeamDetail';\nimport TeamEdit from './TeamEdit';\nimport TeamRolesList from './TeamRoles';\n\nfunction Team({ setBreadcrumb }) {\n  const [team, setTeam] = useState(null);\n  const [contentError, setContentError] = useState(null);\n  const [hasContentLoading, setHasContentLoading] = useState(true);\n  const location = useLocation();\n  const { id } = useParams();\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await TeamsAPI.readDetail(id);\n        setBreadcrumb(data);\n        setTeam(data);\n      } catch (error) {\n        setContentError(error);\n      } finally {\n        setHasContentLoading(false);\n      }\n    })();\n  }, [id, setBreadcrumb, location]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Teams`}\n        </>\n      ),\n      link: `/teams`,\n      id: 99,\n      persistentFilterKey: 'teams',\n    },\n    { name: t`Details`, link: `/teams/${id}/details`, id: 0 },\n    { name: t`Access`, link: `/teams/${id}/access`, id: 1 },\n    { name: t`Roles`, link: `/teams/${id}/roles`, id: 2 },\n  ];\n\n  let showCardHeader = true;\n\n  if (location.pathname.endsWith('edit')) {\n    showCardHeader = false;\n  }\n\n  if (!hasContentLoading && contentError) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={contentError}>\n            {contentError.response.status === 404 && (\n              <span>\n                {t`Team not found.`}{' '}\n                <Link to=\"/teams\">{t`View all Teams.`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n        <Switch>\n          <Redirect from=\"/teams/:id\" to=\"/teams/:id/details\" exact />\n          {team && (\n            <Route path=\"/teams/:id/details\">\n              <TeamDetail team={team} />\n            </Route>\n          )}\n          {team && (\n            <Route path=\"/teams/:id/edit\">\n              <TeamEdit team={team} />\n            </Route>\n          )}\n          {team && (\n            <Route path=\"/teams/:id/access\">\n              <ResourceAccessList resource={team} apiModel={TeamsAPI} />\n            </Route>\n          )}\n          {team && (\n            <Route path=\"/teams/:id/roles\">\n              <Config>\n                {({ me }) => <>{me && <TeamRolesList me={me} team={team} />}</>}\n              </Config>\n            </Route>\n          )}\n          <Route key=\"not-found\" path=\"*\">\n            {!hasContentLoading && (\n              <ContentError isNotFound>\n                {id && (\n                  <Link to={`/teams/${id}/details`}>\n                    {t`View Team Details`}\n                  </Link>\n                )}\n              </ContentError>\n            )}\n          </Route>\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default Team;\nexport { Team as _Team };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}