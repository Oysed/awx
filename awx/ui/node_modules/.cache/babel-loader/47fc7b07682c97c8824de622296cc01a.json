{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Button,Tooltip}from'@patternfly/react-core';import useRequest,{useDismissableError}from'hooks/useRequest';import AlertModal from'components/AlertModal/AlertModal';import ErrorDetail from'components/ErrorDetail/ErrorDetail';import{InventoriesAPI}from'api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ConstructedInventorySyncButton(_ref){var inventoryId=_ref.inventoryId;var testId=\"constructed-inventory-\".concat(inventoryId,\"-sync\");var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",InventoriesAPI.syncAllSources(inventoryId));case 1:case\"end\":return _context.stop();}}},_callee);})),[inventoryId]),{}),startSyncLoading=_useRequest.isLoading,startSyncError=_useRequest.error,startSyncProcess=_useRequest.request;var _useDismissableError=useDismissableError(startSyncError),startError=_useDismissableError.error,dismissStartError=_useDismissableError.dismissError;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Start sync process\"),position:\"top\",children:/*#__PURE__*/_jsx(Button,{ouiaId:testId,isDisabled:startSyncLoading,\"aria-label\":/*i18n*/i18n._(\"Start inventory source sync\"),variant:\"secondary\",onClick:startSyncProcess,children:/*i18n*/i18n._(\"Sync\")})}),startError&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:startError,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissStartError,children:[/*i18n*/i18n._(\"Failed to sync constructed inventory source\"),/*#__PURE__*/_jsx(ErrorDetail,{error:startError})]})]});}export default ConstructedInventorySyncButton;","map":{"version":3,"names":["React","useCallback","Button","Tooltip","useRequest","useDismissableError","AlertModal","ErrorDetail","InventoriesAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ConstructedInventorySyncButton","_ref","inventoryId","testId","concat","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","syncAllSources","stop","startSyncLoading","isLoading","startSyncError","error","startSyncProcess","request","_useDismissableError","startError","dismissStartError","dismissError","children","content","i18n","_","position","ouiaId","isDisabled","variant","onClick","isOpen","title","onClose"],"sources":["/awx_devel/awx/ui/src/screens/Inventory/ConstructedInventoryDetail/ConstructedInventorySyncButton.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { t } from '@lingui/macro';\nimport PropTypes from 'prop-types';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport AlertModal from 'components/AlertModal/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail/ErrorDetail';\nimport { InventoriesAPI } from 'api';\n\nfunction ConstructedInventorySyncButton({ inventoryId }) {\n  const testId = `constructed-inventory-${inventoryId}-sync`;\n  const {\n    isLoading: startSyncLoading,\n    error: startSyncError,\n    request: startSyncProcess,\n  } = useRequest(\n    useCallback(\n      async () => InventoriesAPI.syncAllSources(inventoryId),\n      [inventoryId]\n    ),\n    {}\n  );\n\n  const { error: startError, dismissError: dismissStartError } =\n    useDismissableError(startSyncError);\n\n  return (\n    <>\n      <Tooltip content={t`Start sync process`} position=\"top\">\n        <Button\n          ouiaId={testId}\n          isDisabled={startSyncLoading}\n          aria-label={t`Start inventory source sync`}\n          variant=\"secondary\"\n          onClick={startSyncProcess}\n        >\n          {t`Sync`}\n        </Button>\n      </Tooltip>\n      {startError && (\n        <AlertModal\n          isOpen={startError}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissStartError}\n        >\n          {t`Failed to sync constructed inventory source`}\n          <ErrorDetail error={startError} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nConstructedInventorySyncButton.propTypes = {\n  inventoryId: PropTypes.number.isRequired,\n};\n\nexport default ConstructedInventorySyncButton;\n"],"mappings":"gPAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,KAAQ,OAAO,CAG1C,OAASC,MAAM,CAAEC,OAAO,KAAQ,wBAAwB,CACxD,MAAO,CAAAC,UAAU,EAAIC,mBAAmB,KAAQ,kBAAkB,CAClE,MAAO,CAAAC,UAAU,KAAM,kCAAkC,CACzD,MAAO,CAAAC,WAAW,KAAM,oCAAoC,CAC5D,OAASC,cAAc,KAAQ,KAAK,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAErC,QAAS,CAAAC,8BAA8BA,CAAAC,IAAA,CAAkB,IAAf,CAAAC,WAAW,CAAAD,IAAA,CAAXC,WAAW,CACnD,GAAM,CAAAC,MAAM,0BAAAC,MAAA,CAA4BF,WAAW,SAAO,CAC1D,IAAAG,WAAA,CAIIhB,UAAU,CACZH,WAAW,cAAAoB,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CACT,SAAAC,QAAA,SAAAF,mBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,gBAAAF,QAAA,CAAAG,MAAA,UAAYtB,cAAc,CAACuB,cAAc,CAACd,WAAW,CAAC,0BAAAU,QAAA,CAAAK,IAAA,OAAAR,OAAA,MACtD,CAACP,WAAW,CACd,CAAC,CACD,CAAC,CACH,CAAC,CATYgB,gBAAgB,CAAAb,WAAA,CAA3Bc,SAAS,CACFC,cAAc,CAAAf,WAAA,CAArBgB,KAAK,CACIC,gBAAgB,CAAAjB,WAAA,CAAzBkB,OAAO,CAST,IAAAC,oBAAA,CACElC,mBAAmB,CAAC8B,cAAc,CAAC,CADtBK,UAAU,CAAAD,oBAAA,CAAjBH,KAAK,CAA4BK,iBAAiB,CAAAF,oBAAA,CAA/BG,YAAY,CAGvC,mBACE9B,KAAA,CAAAE,SAAA,EAAA6B,QAAA,eACEjC,IAAA,CAACP,OAAO,EAACyC,OAAO,SAAEC,IAAA,CAAAC,CAAA,qBAAoB,CAAE,CAACC,QAAQ,CAAC,KAAK,CAAAJ,QAAA,cACrDjC,IAAA,CAACR,MAAM,EACL8C,MAAM,CAAE9B,MAAO,CACf+B,UAAU,CAAEhB,gBAAiB,CAC7B,qBAAYY,IAAA,CAAAC,CAAA,8BAA6B,CAAE,CAC3CI,OAAO,CAAC,WAAW,CACnBC,OAAO,CAAEd,gBAAiB,CAAAM,QAAA,SAEzBE,IAAA,CAAAC,CAAA,OAAM,CAAC,CACF,CAAC,CACF,CAAC,CACTN,UAAU,eACT5B,KAAA,CAACN,UAAU,EACT8C,MAAM,CAAEZ,UAAW,CACnBU,OAAO,CAAC,OAAO,CACfG,KAAK,SAAER,IAAA,CAAAC,CAAA,SAAQ,CAAE,CACjBQ,OAAO,CAAEb,iBAAkB,CAAAE,QAAA,UAE1BE,IAAA,CAAAC,CAAA,8CAA6C,CAAC,cAC/CpC,IAAA,CAACH,WAAW,EAAC6B,KAAK,CAAEI,UAAW,CAAE,CAAC,EACxB,CACb,EACD,CAAC,CAEP,CAMA,cAAe,CAAAzB,8BAA8B"},"metadata":{},"sourceType":"module"}