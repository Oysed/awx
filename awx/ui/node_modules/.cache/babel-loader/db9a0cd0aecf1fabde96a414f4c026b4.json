{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{TeamsAPI,UsersAPI}from'api';import useSelected from'hooks/useSelected';import SelectableCard from'../SelectableCard';import Wizard from'../Wizard';import SelectResourceStep from'./SelectResourceStep';import SelectRoleStep from'./SelectRoleStep';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var readUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(queryParams){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",UsersAPI.read(Object.assign(queryParams,{is_superuser:false})));case 1:case\"end\":return _context.stop();}}},_callee);}));return function readUsers(_x){return _ref.apply(this,arguments);};}();var readUsersOptions=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",UsersAPI.readOptions());case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function readUsersOptions(){return _ref2.apply(this,arguments);};}();var readTeams=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(queryParams){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",TeamsAPI.read(queryParams));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function readTeams(_x2){return _ref3.apply(this,arguments);};}();var readTeamsOptions=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",TeamsAPI.readOptions());case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function readTeamsOptions(){return _ref4.apply(this,arguments);};}();var userSearchColumns=[{name:/*i18n*/i18n._(\"Username\"),key:'username__icontains',isDefault:true},{name:/*i18n*/i18n._(\"First Name\"),key:'first_name__icontains'},{name:/*i18n*/i18n._(\"Last Name\"),key:'last_name__icontains'}];var userSortColumns=[{name:/*i18n*/i18n._(\"Username\"),key:'username'},{name:/*i18n*/i18n._(\"First Name\"),key:'first_name'},{name:/*i18n*/i18n._(\"Last Name\"),key:'last_name'}];var teamSearchColumns=[{name:/*i18n*/i18n._(\"Name\"),key:'name__icontains',isDefault:true},{name:/*i18n*/i18n._(\"Created By (Username)\"),key:'created_by__username'},{name:/*i18n*/i18n._(\"Modified By (Username)\"),key:'modified_by__username'}];var teamSortColumns=[{name:/*i18n*/i18n._(\"Name\"),key:'name'}];function AddResourceRole(_ref5){var onSave=_ref5.onSave,onClose=_ref5.onClose,roles=_ref5.roles,resource=_ref5.resource,onError=_ref5.onError;var history=useHistory();var _useSelected=useSelected([]),resourcesSelected=_useSelected.selected,handleResourceSelect=_useSelected.handleSelect,clearResources=_useSelected.clearSelected;var _useSelected2=useSelected([]),rolesSelected=_useSelected2.selected,handleRoleSelect=_useSelected2.handleSelect,clearRoles=_useSelected2.clearSelected;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),resourceType=_useState2[0],setResourceType=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentStepId=_useState4[0],setCurrentStepId=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),maxEnabledStep=_useState6[0],setMaxEnabledStep=_useState6[1];useEffect(function(){if(currentStepId===1&&maxEnabledStep>1){history.push(history.location.pathname);}},[currentStepId,history,maxEnabledStep]);var handleResourceTypeSelect=function handleResourceTypeSelect(type){setResourceType(type);clearResources();clearRoles();};var handleWizardNext=function handleWizardNext(step){setCurrentStepId(step.id);setMaxEnabledStep(step.id);};var handleWizardGoToStep=function handleWizardGoToStep(step){setCurrentStepId(step.id);};var handleWizardSave=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var roleRequests,i,j;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;roleRequests=[];for(i=0;i<resourcesSelected.length;i++){for(j=0;j<rolesSelected.length;j++){if(resourceType==='users'){roleRequests.push(UsersAPI.associateRole(resourcesSelected[i].id,rolesSelected[j].id));}else if(resourceType==='teams'){roleRequests.push(TeamsAPI.associateRole(resourcesSelected[i].id,rolesSelected[j].id));}}}_context5.next=5;return Promise.all(roleRequests);case 5:onSave();_context5.next=12;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);onError(_context5.t0);onClose();case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function handleWizardSave(){return _ref6.apply(this,arguments);};}();// Object roles can be user only, so we remove them when\n// showing role choices for team access\nvar selectableRoles=_objectSpread({},roles);if(resourceType==='teams'){Object.keys(roles).forEach(function(key){if(selectableRoles[key].user_only){delete selectableRoles[key];}});}var wizardTitle='';switch(resourceType){case'users':wizardTitle=/*i18n*/i18n._(\"Add User Roles\");break;case'teams':wizardTitle=/*i18n*/i18n._(\"Add Team Roles\");break;default:wizardTitle=/*i18n*/i18n._(\"Add Roles\");}var steps=[{id:1,name:/*i18n*/i18n._(\"Select a Resource Type\"),component:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',marginBottom:'10px'},children:/*i18n*/i18n._(\"Choose the type of resource that will be receiving new roles.  For example, if you'd like to add new roles to a set of users please choose Users and click Next.  You'll be able to select the specific resources in the next step.\")}),/*#__PURE__*/_jsx(SelectableCard,{isSelected:resourceType==='users',label:/*i18n*/i18n._(\"Users\"),ariaLabel:/*i18n*/i18n._(\"Users\"),dataCy:\"add-role-users\",onClick:function onClick(){return handleResourceTypeSelect('users');}}),(resource===null||resource===void 0?void 0:resource.type)==='team'||(resource===null||resource===void 0?void 0:resource.type)==='credential'&&!(resource!==null&&resource!==void 0&&resource.organization)?null:/*#__PURE__*/_jsx(SelectableCard,{isSelected:resourceType==='teams',label:/*i18n*/i18n._(\"Teams\"),ariaLabel:/*i18n*/i18n._(\"Teams\"),dataCy:\"add-role-teams\",onClick:function onClick(){return handleResourceTypeSelect('teams');}})]}),nextButtonText:/*i18n*/i18n._(\"Next\"),enableNext:resourceType!==null},{id:2,name:/*i18n*/i18n._(\"Select Items from List\"),component:/*#__PURE__*/_jsxs(_Fragment,{children:[resourceType==='users'&&/*#__PURE__*/_jsx(SelectResourceStep,{searchColumns:userSearchColumns,sortColumns:userSortColumns,displayKey:\"username\",onRowClick:handleResourceSelect,fetchItems:readUsers,fetchOptions:readUsersOptions,selectedLabel:/*i18n*/i18n._(\"Selected\"),selectedResourceRows:resourcesSelected,sortedColumnKey:\"username\"}),resourceType==='teams'&&/*#__PURE__*/_jsx(SelectResourceStep,{searchColumns:teamSearchColumns,sortColumns:teamSortColumns,onRowClick:handleResourceSelect,fetchItems:readTeams,fetchOptions:readTeamsOptions,selectedLabel:/*i18n*/i18n._(\"Selected\"),selectedResourceRows:resourcesSelected})]}),enableNext:resourcesSelected.length>0,nextButtonText:/*i18n*/i18n._(\"Next\"),canJumpTo:maxEnabledStep>=2},{id:3,name:/*i18n*/i18n._(\"Select Roles to Apply\"),component:/*#__PURE__*/_jsx(SelectRoleStep,{onRolesClick:handleRoleSelect,roles:selectableRoles,selectedListKey:resourceType==='users'?'username':'name',selectedListLabel:/*i18n*/i18n._(\"Selected\"),selectedResourceRows:resourcesSelected,selectedRoleRows:rolesSelected}),nextButtonText:/*i18n*/i18n._(\"Save\"),enableNext:rolesSelected.length>0,canJumpTo:maxEnabledStep>=3}];var currentStep=steps.find(function(step){return step.id===currentStepId;});return/*#__PURE__*/_jsx(Wizard,{style:{overflow:'scroll'},isOpen:true,onNext:handleWizardNext,onBack:function onBack(step){return setCurrentStepId(step.id);},onClose:onClose,onSave:handleWizardSave,onGoToStep:function onGoToStep(step){return handleWizardGoToStep(step);},steps:steps,title:wizardTitle,nextButtonText:currentStep.nextButtonText||undefined,backButtonText:/*i18n*/i18n._(\"Back\"),cancelButtonText:/*i18n*/i18n._(\"Cancel\")});}AddResourceRole.defaultProps={roles:{},resource:{}};export{AddResourceRole as _AddResourceRole};export default AddResourceRole;","map":{"version":3,"names":["React","useState","useEffect","useHistory","TeamsAPI","UsersAPI","useSelected","SelectableCard","Wizard","SelectResourceStep","SelectRoleStep","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","readUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","queryParams","wrap","_callee$","_context","prev","next","abrupt","read","Object","assign","is_superuser","stop","_x","apply","arguments","readUsersOptions","_ref2","_callee2","_callee2$","_context2","readOptions","readTeams","_ref3","_callee3","_callee3$","_context3","_x2","readTeamsOptions","_ref4","_callee4","_callee4$","_context4","userSearchColumns","name","i18n","_","key","isDefault","userSortColumns","teamSearchColumns","teamSortColumns","AddResourceRole","_ref5","onSave","onClose","roles","resource","onError","history","_useSelected","resourcesSelected","selected","handleResourceSelect","handleSelect","clearResources","clearSelected","_useSelected2","rolesSelected","handleRoleSelect","clearRoles","_useState","_useState2","_slicedToArray","resourceType","setResourceType","_useState3","_useState4","currentStepId","setCurrentStepId","_useState5","_useState6","maxEnabledStep","setMaxEnabledStep","push","location","pathname","handleResourceTypeSelect","type","handleWizardNext","step","id","handleWizardGoToStep","handleWizardSave","_ref6","_callee5","roleRequests","i","j","_callee5$","_context5","length","associateRole","Promise","all","t0","selectableRoles","_objectSpread","keys","forEach","user_only","wizardTitle","steps","component","style","display","flexWrap","children","width","marginBottom","isSelected","label","ariaLabel","dataCy","onClick","organization","nextButtonText","enableNext","searchColumns","sortColumns","displayKey","onRowClick","fetchItems","fetchOptions","selectedLabel","selectedResourceRows","sortedColumnKey","canJumpTo","onRolesClick","selectedListKey","selectedListLabel","selectedRoleRows","currentStep","find","overflow","isOpen","onNext","onBack","onGoToStep","title","undefined","backButtonText","cancelButtonText","defaultProps","_AddResourceRole"],"sources":["/awx_devel/awx/ui/src/components/AddRole/AddResourceRole.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { TeamsAPI, UsersAPI } from 'api';\nimport useSelected from 'hooks/useSelected';\nimport SelectableCard from '../SelectableCard';\nimport Wizard from '../Wizard';\nimport SelectResourceStep from './SelectResourceStep';\nimport SelectRoleStep from './SelectRoleStep';\n\nconst readUsers = async (queryParams) =>\n  UsersAPI.read(Object.assign(queryParams, { is_superuser: false }));\n\nconst readUsersOptions = async () => UsersAPI.readOptions();\n\nconst readTeams = async (queryParams) => TeamsAPI.read(queryParams);\n\nconst readTeamsOptions = async () => TeamsAPI.readOptions();\n\nconst userSearchColumns = [\n  {\n    name: t`Username`,\n    key: 'username__icontains',\n    isDefault: true,\n  },\n  {\n    name: t`First Name`,\n    key: 'first_name__icontains',\n  },\n  {\n    name: t`Last Name`,\n    key: 'last_name__icontains',\n  },\n];\nconst userSortColumns = [\n  {\n    name: t`Username`,\n    key: 'username',\n  },\n  {\n    name: t`First Name`,\n    key: 'first_name',\n  },\n  {\n    name: t`Last Name`,\n    key: 'last_name',\n  },\n];\nconst teamSearchColumns = [\n  {\n    name: t`Name`,\n    key: 'name__icontains',\n    isDefault: true,\n  },\n  {\n    name: t`Created By (Username)`,\n    key: 'created_by__username',\n  },\n  {\n    name: t`Modified By (Username)`,\n    key: 'modified_by__username',\n  },\n];\n\nconst teamSortColumns = [\n  {\n    name: t`Name`,\n    key: 'name',\n  },\n];\nfunction AddResourceRole({ onSave, onClose, roles, resource, onError }) {\n  const history = useHistory();\n\n  const {\n    selected: resourcesSelected,\n    handleSelect: handleResourceSelect,\n    clearSelected: clearResources,\n  } = useSelected([]);\n  const {\n    selected: rolesSelected,\n    handleSelect: handleRoleSelect,\n    clearSelected: clearRoles,\n  } = useSelected([]);\n\n  const [resourceType, setResourceType] = useState(null);\n  const [currentStepId, setCurrentStepId] = useState(1);\n  const [maxEnabledStep, setMaxEnabledStep] = useState(1);\n\n  useEffect(() => {\n    if (currentStepId === 1 && maxEnabledStep > 1) {\n      history.push(history.location.pathname);\n    }\n  }, [currentStepId, history, maxEnabledStep]);\n\n  const handleResourceTypeSelect = (type) => {\n    setResourceType(type);\n    clearResources();\n    clearRoles();\n  };\n\n  const handleWizardNext = (step) => {\n    setCurrentStepId(step.id);\n    setMaxEnabledStep(step.id);\n  };\n\n  const handleWizardGoToStep = (step) => {\n    setCurrentStepId(step.id);\n  };\n\n  const handleWizardSave = async () => {\n    try {\n      const roleRequests = [];\n\n      for (let i = 0; i < resourcesSelected.length; i++) {\n        for (let j = 0; j < rolesSelected.length; j++) {\n          if (resourceType === 'users') {\n            roleRequests.push(\n              UsersAPI.associateRole(\n                resourcesSelected[i].id,\n                rolesSelected[j].id\n              )\n            );\n          } else if (resourceType === 'teams') {\n            roleRequests.push(\n              TeamsAPI.associateRole(\n                resourcesSelected[i].id,\n                rolesSelected[j].id\n              )\n            );\n          }\n        }\n      }\n\n      await Promise.all(roleRequests);\n      onSave();\n    } catch (err) {\n      onError(err);\n      onClose();\n    }\n  };\n\n  // Object roles can be user only, so we remove them when\n  // showing role choices for team access\n  const selectableRoles = { ...roles };\n  if (resourceType === 'teams') {\n    Object.keys(roles).forEach((key) => {\n      if (selectableRoles[key].user_only) {\n        delete selectableRoles[key];\n      }\n    });\n  }\n\n  let wizardTitle = '';\n\n  switch (resourceType) {\n    case 'users':\n      wizardTitle = t`Add User Roles`;\n      break;\n    case 'teams':\n      wizardTitle = t`Add Team Roles`;\n      break;\n    default:\n      wizardTitle = t`Add Roles`;\n  }\n\n  const steps = [\n    {\n      id: 1,\n      name: t`Select a Resource Type`,\n      component: (\n        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n          <div style={{ width: '100%', marginBottom: '10px' }}>\n            {t`Choose the type of resource that will be receiving new roles.  For example, if you'd like to add new roles to a set of users please choose Users and click Next.  You'll be able to select the specific resources in the next step.`}\n          </div>\n          <SelectableCard\n            isSelected={resourceType === 'users'}\n            label={t`Users`}\n            ariaLabel={t`Users`}\n            dataCy=\"add-role-users\"\n            onClick={() => handleResourceTypeSelect('users')}\n          />\n          {resource?.type === 'team' ||\n          (resource?.type === 'credential' &&\n            !resource?.organization) ? null : (\n            <SelectableCard\n              isSelected={resourceType === 'teams'}\n              label={t`Teams`}\n              ariaLabel={t`Teams`}\n              dataCy=\"add-role-teams\"\n              onClick={() => handleResourceTypeSelect('teams')}\n            />\n          )}\n        </div>\n      ),\n      nextButtonText: t`Next`,\n      enableNext: resourceType !== null,\n    },\n    {\n      id: 2,\n      name: t`Select Items from List`,\n      component: (\n        <>\n          {resourceType === 'users' && (\n            <SelectResourceStep\n              searchColumns={userSearchColumns}\n              sortColumns={userSortColumns}\n              displayKey=\"username\"\n              onRowClick={handleResourceSelect}\n              fetchItems={readUsers}\n              fetchOptions={readUsersOptions}\n              selectedLabel={t`Selected`}\n              selectedResourceRows={resourcesSelected}\n              sortedColumnKey=\"username\"\n            />\n          )}\n          {resourceType === 'teams' && (\n            <SelectResourceStep\n              searchColumns={teamSearchColumns}\n              sortColumns={teamSortColumns}\n              onRowClick={handleResourceSelect}\n              fetchItems={readTeams}\n              fetchOptions={readTeamsOptions}\n              selectedLabel={t`Selected`}\n              selectedResourceRows={resourcesSelected}\n            />\n          )}\n        </>\n      ),\n      enableNext: resourcesSelected.length > 0,\n      nextButtonText: t`Next`,\n      canJumpTo: maxEnabledStep >= 2,\n    },\n    {\n      id: 3,\n      name: t`Select Roles to Apply`,\n      component: (\n        <SelectRoleStep\n          onRolesClick={handleRoleSelect}\n          roles={selectableRoles}\n          selectedListKey={resourceType === 'users' ? 'username' : 'name'}\n          selectedListLabel={t`Selected`}\n          selectedResourceRows={resourcesSelected}\n          selectedRoleRows={rolesSelected}\n        />\n      ),\n      nextButtonText: t`Save`,\n      enableNext: rolesSelected.length > 0,\n      canJumpTo: maxEnabledStep >= 3,\n    },\n  ];\n\n  const currentStep = steps.find((step) => step.id === currentStepId);\n\n  return (\n    <Wizard\n      style={{ overflow: 'scroll' }}\n      isOpen\n      onNext={handleWizardNext}\n      onBack={(step) => setCurrentStepId(step.id)}\n      onClose={onClose}\n      onSave={handleWizardSave}\n      onGoToStep={(step) => handleWizardGoToStep(step)}\n      steps={steps}\n      title={wizardTitle}\n      nextButtonText={currentStep.nextButtonText || undefined}\n      backButtonText={t`Back`}\n      cancelButtonText={t`Cancel`}\n    />\n  );\n}\n\nAddResourceRole.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  roles: PropTypes.shape(),\n  resource: PropTypes.shape(),\n};\n\nAddResourceRole.defaultProps = {\n  roles: {},\n  resource: {},\n};\n\nexport { AddResourceRole as _AddResourceRole };\nexport default AddResourceRole;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}