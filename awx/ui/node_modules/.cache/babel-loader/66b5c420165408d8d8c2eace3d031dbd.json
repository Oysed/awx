{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Label}from'@patternfly/react-core';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import DeleteButton from'components/DeleteButton';import{DetailList,Detail}from'components/DetailList';import ErrorDetail from'components/ErrorDetail';import{formatDateString}from'util/dates';import{UsersAPI}from'api';import useRequest,{useDismissableError}from'hooks/useRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserDetail(_ref){var user=_ref.user;var id=user.id,username=user.username,email=user.email,first_name=user.first_name,last_name=user.last_name,last_login=user.last_login,created=user.created,modified=user.modified,is_superuser=user.is_superuser,is_system_auditor=user.is_system_auditor,summary_fields=user.summary_fields;var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UsersAPI.destroy(id);case 2:history.push(\"/users\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteUser=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var user_type;if(is_superuser){user_type=/*i18n*/i18n._(\"System Administrator\");}else if(is_system_auditor){user_type=/*i18n*/i18n._(\"System Auditor\");}else{user_type=/*i18n*/i18n._(\"Normal User\");}var userAuthType;if(user.ldap_dn){userAuthType=/*i18n*/i18n._(\"LDAP\");}else if(user.auth.length>0){userAuthType=/*i18n*/i18n._(\"SOCIAL\");}return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"First Name\"),value:\"\".concat(first_name)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Name\"),value:\"\".concat(last_name)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Email\"),value:email}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Username\"),value:username,dataCy:\"user-detail-username\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"User Type\"),value:\"\".concat(user_type)}),userAuthType&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Type\"),value:/*#__PURE__*/_jsx(Label,{\"aria-label\":/*i18n*/i18n._(\"login type\"),children:userAuthType})}),last_login&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Login\"),value:formatDateString(last_login)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Created\"),value:formatDateString(created)}),modified&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Modified\"),value:formatDateString(modified)})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[summary_fields.user_capabilities&&summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"user-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/users/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),summary_fields.user_capabilities&&summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{name:username,modalTitle:/*i18n*/i18n._(\"Delete User\"),onConfirm:deleteUser,isDisabled:isLoading,children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissError,children:[/*i18n*/i18n._(\"Failed to delete user.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:error})]})]});}export default UserDetail;","map":{"version":3,"names":["React","useCallback","Link","useHistory","Button","Label","AlertModal","CardBody","CardActionsRow","DeleteButton","DetailList","Detail","ErrorDetail","formatDateString","UsersAPI","useRequest","useDismissableError","jsx","_jsx","jsxs","_jsxs","UserDetail","_ref","user","id","username","email","first_name","last_name","last_login","created","modified","is_superuser","is_system_auditor","summary_fields","history","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","destroy","push","stop","deleteUser","request","isLoading","deleteError","error","_useDismissableError","dismissError","user_type","i18n","_","userAuthType","ldap_dn","auth","length","children","label","value","concat","dataCy","user_capabilities","edit","ouiaId","component","to","delete","name","modalTitle","onConfirm","isDisabled","isOpen","variant","title","onClose"],"sources":["/awx_devel/awx/ui/src/screens/User/UserDetail/UserDetail.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\n\nimport { Button, Label } from '@patternfly/react-core';\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport DeleteButton from 'components/DeleteButton';\nimport { DetailList, Detail } from 'components/DetailList';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { formatDateString } from 'util/dates';\nimport { UsersAPI } from 'api';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\n\nfunction UserDetail({ user }) {\n  const {\n    id,\n    username,\n    email,\n    first_name,\n    last_name,\n    last_login,\n    created,\n    modified,\n    is_superuser,\n    is_system_auditor,\n    summary_fields,\n  } = user;\n  const history = useHistory();\n\n  const {\n    request: deleteUser,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await UsersAPI.destroy(id);\n      history.push(`/users`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n\n  let user_type;\n  if (is_superuser) {\n    user_type = t`System Administrator`;\n  } else if (is_system_auditor) {\n    user_type = t`System Auditor`;\n  } else {\n    user_type = t`Normal User`;\n  }\n\n  let userAuthType;\n  if (user.ldap_dn) {\n    userAuthType = t`LDAP`;\n  } else if (user.auth.length > 0) {\n    userAuthType = t`SOCIAL`;\n  }\n\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail label={t`First Name`} value={`${first_name}`} />\n        <Detail label={t`Last Name`} value={`${last_name}`} />\n        <Detail label={t`Email`} value={email} />\n        <Detail\n          label={t`Username`}\n          value={username}\n          dataCy=\"user-detail-username\"\n        />\n        <Detail label={t`User Type`} value={`${user_type}`} />\n        {userAuthType && (\n          <Detail\n            label={t`Type`}\n            value={<Label aria-label={t`login type`}>{userAuthType}</Label>}\n          />\n        )}\n        {last_login && (\n          <Detail label={t`Last Login`} value={formatDateString(last_login)} />\n        )}\n        <Detail label={t`Created`} value={formatDateString(created)} />\n        {modified && (\n          <Detail label={t`Last Modified`} value={formatDateString(modified)} />\n        )}\n      </DetailList>\n      <CardActionsRow>\n        {summary_fields.user_capabilities &&\n          summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"user-detail-edit-button\"\n              aria-label={t`edit`}\n              component={Link}\n              to={`/users/${id}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {summary_fields.user_capabilities &&\n          summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              name={username}\n              modalTitle={t`Delete User`}\n              onConfirm={deleteUser}\n              isDisabled={isLoading}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissError}\n        >\n          {t`Failed to delete user.`}\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\n\nexport default UserDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}