{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React,{useEffect}from'react';import{Button}from'@patternfly/react-core';import{CopyIcon}from'@patternfly/react-icons';import useRequest,{useDismissableError}from'hooks/useRequest';import AlertModal from'../AlertModal';import ErrorDetail from'../ErrorDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function CopyButton(_ref){var id=_ref.id,copyItem=_ref.copyItem,isDisabled=_ref.isDisabled,onCopyStart=_ref.onCopyStart,onCopyFinish=_ref.onCopyFinish,errorMessage=_ref.errorMessage,ouiaId=_ref.ouiaId;var _useRequest=useRequest(copyItem),isLoading=_useRequest.isLoading,copyError=_useRequest.error,copyItemToAPI=_useRequest.request;useEffect(function(){if(isLoading){return onCopyStart();}return onCopyFinish();},[isLoading,onCopyStart,onCopyFinish]);var _useDismissableError=useDismissableError(copyError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{id:id,ouiaId:ouiaId,isDisabled:isLoading||isDisabled,\"aria-label\":/*i18n*/i18n._(\"Copy\"),variant:\"plain\",onClick:copyItemToAPI,children:/*#__PURE__*/_jsx(CopyIcon,{})}),error&&/*#__PURE__*/_jsxs(AlertModal,{\"aria-label\":/*i18n*/i18n._(\"Copy Error\"),isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissError,children:[errorMessage,/*#__PURE__*/_jsx(ErrorDetail,{error:error})]})]});}CopyButton.defaultProps={isDisabled:false,ouiaId:null};export default CopyButton;","map":{"version":3,"names":["React","useEffect","Button","CopyIcon","useRequest","useDismissableError","AlertModal","ErrorDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CopyButton","_ref","id","copyItem","isDisabled","onCopyStart","onCopyFinish","errorMessage","ouiaId","_useRequest","isLoading","copyError","error","copyItemToAPI","request","_useDismissableError","dismissError","children","i18n","_","variant","onClick","isOpen","title","onClose","defaultProps"],"sources":["/awx_devel/awx/ui/src/components/CopyButton/CopyButton.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { t } from '@lingui/macro';\nimport PropTypes from 'prop-types';\nimport { Button } from '@patternfly/react-core';\nimport { CopyIcon } from '@patternfly/react-icons';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport AlertModal from '../AlertModal';\nimport ErrorDetail from '../ErrorDetail';\n\nfunction CopyButton({\n  id,\n  copyItem,\n  isDisabled,\n  onCopyStart,\n  onCopyFinish,\n  errorMessage,\n  ouiaId,\n}) {\n  const {\n    isLoading,\n    error: copyError,\n    request: copyItemToAPI,\n  } = useRequest(copyItem);\n\n  useEffect(() => {\n    if (isLoading) {\n      return onCopyStart();\n    }\n    return onCopyFinish();\n  }, [isLoading, onCopyStart, onCopyFinish]);\n\n  const { error, dismissError } = useDismissableError(copyError);\n\n  return (\n    <>\n      <Button\n        id={id}\n        ouiaId={ouiaId}\n        isDisabled={isLoading || isDisabled}\n        aria-label={t`Copy`}\n        variant=\"plain\"\n        onClick={copyItemToAPI}\n      >\n        <CopyIcon />\n      </Button>\n      {error && (\n        <AlertModal\n          aria-label={t`Copy Error`}\n          isOpen={error}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissError}\n        >\n          {errorMessage}\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nCopyButton.propTypes = {\n  copyItem: PropTypes.func.isRequired,\n  onCopyStart: PropTypes.func.isRequired,\n  onCopyFinish: PropTypes.func.isRequired,\n  errorMessage: PropTypes.string.isRequired,\n  isDisabled: PropTypes.bool,\n  ouiaId: PropTypes.string,\n};\n\nCopyButton.defaultProps = {\n  isDisabled: false,\n  ouiaId: null,\n};\n\nexport default CopyButton;\n"],"mappings":"+BAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CAGxC,OAASC,MAAM,KAAQ,wBAAwB,CAC/C,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,MAAO,CAAAC,UAAU,EAAIC,mBAAmB,KAAQ,kBAAkB,CAClE,MAAO,CAAAC,UAAU,KAAM,eAAe,CACtC,MAAO,CAAAC,WAAW,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzC,QAAS,CAAAC,UAAUA,CAAAC,IAAA,CAQhB,IAPD,CAAAC,EAAE,CAAAD,IAAA,CAAFC,EAAE,CACFC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CACRC,UAAU,CAAAH,IAAA,CAAVG,UAAU,CACVC,WAAW,CAAAJ,IAAA,CAAXI,WAAW,CACXC,YAAY,CAAAL,IAAA,CAAZK,YAAY,CACZC,YAAY,CAAAN,IAAA,CAAZM,YAAY,CACZC,MAAM,CAAAP,IAAA,CAANO,MAAM,CAEN,IAAAC,WAAA,CAIInB,UAAU,CAACa,QAAQ,CAAC,CAHtBO,SAAS,CAAAD,WAAA,CAATC,SAAS,CACFC,SAAS,CAAAF,WAAA,CAAhBG,KAAK,CACIC,aAAa,CAAAJ,WAAA,CAAtBK,OAAO,CAGT3B,SAAS,CAAC,UAAM,CACd,GAAIuB,SAAS,CAAE,CACb,MAAO,CAAAL,WAAW,CAAC,CAAC,CACtB,CACA,MAAO,CAAAC,YAAY,CAAC,CAAC,CACvB,CAAC,CAAE,CAACI,SAAS,CAAEL,WAAW,CAAEC,YAAY,CAAC,CAAC,CAE1C,IAAAS,oBAAA,CAAgCxB,mBAAmB,CAACoB,SAAS,CAAC,CAAtDC,KAAK,CAAAG,oBAAA,CAALH,KAAK,CAAEI,YAAY,CAAAD,oBAAA,CAAZC,YAAY,CAE3B,mBACEnB,KAAA,CAAAE,SAAA,EAAAkB,QAAA,eACEtB,IAAA,CAACP,MAAM,EACLc,EAAE,CAAEA,EAAG,CACPM,MAAM,CAAEA,MAAO,CACfJ,UAAU,CAAEM,SAAS,EAAIN,UAAW,CACpC,qBAAYc,IAAA,CAAAC,CAAA,OAAM,CAAE,CACpBC,OAAO,CAAC,OAAO,CACfC,OAAO,CAAER,aAAc,CAAAI,QAAA,cAEvBtB,IAAA,CAACN,QAAQ,GAAE,CAAC,CACN,CAAC,CACRuB,KAAK,eACJf,KAAA,CAACL,UAAU,EACT,qBAAY0B,IAAA,CAAAC,CAAA,aAAY,CAAE,CAC1BG,MAAM,CAAEV,KAAM,CACdQ,OAAO,CAAC,OAAO,CACfG,KAAK,SAAEL,IAAA,CAAAC,CAAA,SAAQ,CAAE,CACjBK,OAAO,CAAER,YAAa,CAAAC,QAAA,EAErBV,YAAY,cACbZ,IAAA,CAACF,WAAW,EAACmB,KAAK,CAAEA,KAAM,CAAE,CAAC,EACnB,CACb,EACD,CAAC,CAEP,CAWAZ,UAAU,CAACyB,YAAY,CAAG,CACxBrB,UAAU,CAAE,KAAK,CACjBI,MAAM,CAAE,IACV,CAAC,CAED,cAAe,CAAAR,UAAU"},"metadata":{},"sourceType":"module"}