{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import{Select,SelectOption,SelectVariant}from'@patternfly/react-core';import{arrayToString,stringToArray}from'util/strings';import{jsx as _jsx}from\"react/jsx-runtime\";function TagMultiSelect(_ref){var onChange=_ref.onChange,value=_ref.value;var selections=stringToArray(value);var _useState=useState(selections),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isExpanded=_useState4[0],setIsExpanded=_useState4[1];var onSelect=function onSelect(event,item){var newValue;if(selections.includes(item)){newValue=selections.filter(function(i){return i!==item;});}else{newValue=selections.concat(item);}onChange(arrayToString(newValue));};var toggleExpanded=function toggleExpanded(toggleValue){setIsExpanded(toggleValue);};var renderOptions=function renderOptions(opts){return opts.map(function(option){return/*#__PURE__*/_jsx(SelectOption,{value:option,children:option},option);});};var onFilter=function onFilter(event){if(event){var str=event.target.value.toLowerCase();var matches=options.filter(function(o){return o.toLowerCase().includes(str);});return renderOptions(matches);}return null;};return/*#__PURE__*/_jsx(Select,{variant:SelectVariant.typeaheadMulti,onToggle:toggleExpanded,onSelect:onSelect,onClear:function onClear(){return onChange('');},onFilter:onFilter,isCreatable:true,onCreateOption:function onCreateOption(name){name=name.trim();if(!options.includes(name)){setOptions(options.concat(name));}return name;},selections:selections,isOpen:isExpanded,typeAheadAriaLabel:/*i18n*/i18n._(\"Select tags\"),noResultsFoundText:/*i18n*/i18n._(\"No results found\"),ouiaId:\"tag-multiselect\",createText:/*i18n*/i18n._(\"Create\"),children:renderOptions(options)});}export default TagMultiSelect;","map":{"version":3,"names":["React","useState","Select","SelectOption","SelectVariant","arrayToString","stringToArray","jsx","_jsx","TagMultiSelect","_ref","onChange","value","selections","_useState","_useState2","_slicedToArray","options","setOptions","_useState3","_useState4","isExpanded","setIsExpanded","onSelect","event","item","newValue","includes","filter","i","concat","toggleExpanded","toggleValue","renderOptions","opts","map","option","children","onFilter","str","target","toLowerCase","matches","o","variant","typeaheadMulti","onToggle","onClear","isCreatable","onCreateOption","name","trim","isOpen","typeAheadAriaLabel","i18n","_","noResultsFoundText","ouiaId","createText"],"sources":["/awx_devel/awx/ui/src/components/MultiSelect/TagMultiSelect.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { func, string } from 'prop-types';\nimport { t } from '@lingui/macro';\nimport { Select, SelectOption, SelectVariant } from '@patternfly/react-core';\nimport { arrayToString, stringToArray } from 'util/strings';\n\nfunction TagMultiSelect({ onChange, value }) {\n  const selections = stringToArray(value);\n  const [options, setOptions] = useState(selections);\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const onSelect = (event, item) => {\n    let newValue;\n    if (selections.includes(item)) {\n      newValue = selections.filter((i) => i !== item);\n    } else {\n      newValue = selections.concat(item);\n    }\n    onChange(arrayToString(newValue));\n  };\n\n  const toggleExpanded = (toggleValue) => {\n    setIsExpanded(toggleValue);\n  };\n\n  const renderOptions = (opts) =>\n    opts.map((option) => (\n      <SelectOption key={option} value={option}>\n        {option}\n      </SelectOption>\n    ));\n\n  const onFilter = (event) => {\n    if (event) {\n      const str = event.target.value.toLowerCase();\n      const matches = options.filter((o) => o.toLowerCase().includes(str));\n      return renderOptions(matches);\n    }\n    return null;\n  };\n\n  return (\n    <Select\n      variant={SelectVariant.typeaheadMulti}\n      onToggle={toggleExpanded}\n      onSelect={onSelect}\n      onClear={() => onChange('')}\n      onFilter={onFilter}\n      isCreatable\n      onCreateOption={(name) => {\n        name = name.trim();\n        if (!options.includes(name)) {\n          setOptions(options.concat(name));\n        }\n        return name;\n      }}\n      selections={selections}\n      isOpen={isExpanded}\n      typeAheadAriaLabel={t`Select tags`}\n      noResultsFoundText={t`No results found`}\n      ouiaId=\"tag-multiselect\"\n      createText={t`Create`}\n    >\n      {renderOptions(options)}\n    </Select>\n  );\n}\n\nTagMultiSelect.propTypes = {\n  onChange: func.isRequired,\n  value: string.isRequired,\n};\n\nexport default TagMultiSelect;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}