{"ast":null,"code":"import _defineProperty from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState,useCallback,useRef}from'react';import{Route,withRouter,Switch}from'react-router-dom';import{PageSection}from'@patternfly/react-core';import ScreenHeader from'components/ScreenHeader/ScreenHeader';import TemplateList from'components/TemplateList';import PersistentFilters from'components/PersistentFilters';import Template from'./Template';import WorkflowJobTemplate from'./WorkflowJobTemplate';import JobTemplateAdd from'./JobTemplateAdd';import WorkflowJobTemplateAdd from'./WorkflowJobTemplateAdd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Templates(){var initScreenHeader=useRef({'/templates':/*i18n*/i18n._(\"Templates\"),'/templates/job_template/add':/*i18n*/i18n._(\"Create New Job Template\"),'/templates/workflow_job_template/add':/*i18n*/i18n._(\"Create New Workflow Template\")});var _useState=useState(initScreenHeader.current),_useState2=_slicedToArray(_useState,2),breadcrumbConfig=_useState2[0],setScreenHeader=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),schedule=_useState4[0],setSchedule=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),template=_useState6[0],setTemplate=_useState6[1];var setBreadcrumbConfig=useCallback(function(passedTemplate,passedSchedule){var _objectSpread2;if(passedTemplate&&passedTemplate.name!==(template===null||template===void 0?void 0:template.name)){setTemplate(passedTemplate);}if(passedSchedule&&passedSchedule.name!==(schedule===null||schedule===void 0?void 0:schedule.name)){setSchedule(passedSchedule);}if(!template)return;var templatePath=\"/templates/\".concat(template.type,\"/\").concat(template.id);var schedulesPath=\"\".concat(templatePath,\"/schedules\");var surveyPath=\"\".concat(templatePath,\"/survey\");setScreenHeader(_objectSpread(_objectSpread({},initScreenHeader.current),{},(_objectSpread2={},_defineProperty(_objectSpread2,templatePath,\"\".concat(template.name)),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/details\"),/*i18n*/i18n._(\"Details\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/edit\"),/*i18n*/i18n._(\"Edit Details\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/access\"),/*i18n*/i18n._(\"Access\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/notifications\"),/*i18n*/i18n._(\"Notifications\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/jobs\"),/*i18n*/i18n._(\"Jobs\")),_defineProperty(_objectSpread2,surveyPath,/*i18n*/i18n._(\"Survey\")),_defineProperty(_objectSpread2,\"\".concat(surveyPath,\"/add\"),/*i18n*/i18n._(\"Add Question\")),_defineProperty(_objectSpread2,\"\".concat(surveyPath,\"/edit\"),/*i18n*/i18n._(\"Edit Question\")),_defineProperty(_objectSpread2,schedulesPath,/*i18n*/i18n._(\"Schedules\")),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/add\"),/*i18n*/i18n._(\"Create New Schedule\")),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/\").concat(schedule===null||schedule===void 0?void 0:schedule.id),\"\".concat(schedule===null||schedule===void 0?void 0:schedule.name)),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/\").concat(schedule===null||schedule===void 0?void 0:schedule.id,\"/details\"),/*i18n*/i18n._(\"Schedule Details\")),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/\").concat(schedule===null||schedule===void 0?void 0:schedule.id,\"/edit\"),/*i18n*/i18n._(\"Edit Schedule\")),_objectSpread2)));},[template,schedule]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ScreenHeader,{streamType:\"job_template,workflow_job_template,workflow_job_template_node\",breadcrumbConfig:breadcrumbConfig}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/templates/job_template/add\",children:/*#__PURE__*/_jsx(JobTemplateAdd,{})}),/*#__PURE__*/_jsx(Route,{path:\"/templates/workflow_job_template/add\",children:/*#__PURE__*/_jsx(WorkflowJobTemplateAdd,{})}),/*#__PURE__*/_jsx(Route,{path:\"/templates/job_template/:id\",children:/*#__PURE__*/_jsx(Template,{setBreadcrumb:setBreadcrumbConfig})}),/*#__PURE__*/_jsx(Route,{path:\"/templates/workflow_job_template/:id\",children:/*#__PURE__*/_jsx(WorkflowJobTemplate,{setBreadcrumb:setBreadcrumbConfig})}),/*#__PURE__*/_jsx(Route,{path:\"/templates\",children:/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(PersistentFilters,{pageKey:\"templates\",children:/*#__PURE__*/_jsx(TemplateList,{})})})})]})]});}export{Templates as _Templates};export default withRouter(Templates);","map":{"version":3,"names":["React","useState","useCallback","useRef","Route","withRouter","Switch","PageSection","ScreenHeader","TemplateList","PersistentFilters","Template","WorkflowJobTemplate","JobTemplateAdd","WorkflowJobTemplateAdd","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Templates","initScreenHeader","i18n","_","_useState","current","_useState2","_slicedToArray","breadcrumbConfig","setScreenHeader","_useState3","_useState4","schedule","setSchedule","_useState5","_useState6","template","setTemplate","setBreadcrumbConfig","passedTemplate","passedSchedule","_objectSpread2","name","templatePath","concat","type","id","schedulesPath","surveyPath","_objectSpread","_defineProperty","children","streamType","path","setBreadcrumb","pageKey","_Templates"],"sources":["/awx_devel/awx/ui/src/screens/Template/Templates.js"],"sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Route, withRouter, Switch } from 'react-router-dom';\nimport { PageSection } from '@patternfly/react-core';\n\nimport ScreenHeader from 'components/ScreenHeader/ScreenHeader';\nimport TemplateList from 'components/TemplateList';\nimport PersistentFilters from 'components/PersistentFilters';\nimport Template from './Template';\nimport WorkflowJobTemplate from './WorkflowJobTemplate';\nimport JobTemplateAdd from './JobTemplateAdd';\nimport WorkflowJobTemplateAdd from './WorkflowJobTemplateAdd';\n\nfunction Templates() {\n  const initScreenHeader = useRef({\n    '/templates': t`Templates`,\n    '/templates/job_template/add': t`Create New Job Template`,\n    '/templates/workflow_job_template/add': t`Create New Workflow Template`,\n  });\n  const [breadcrumbConfig, setScreenHeader] = useState(\n    initScreenHeader.current\n  );\n\n  const [schedule, setSchedule] = useState();\n  const [template, setTemplate] = useState();\n\n  const setBreadcrumbConfig = useCallback(\n    (passedTemplate, passedSchedule) => {\n      if (passedTemplate && passedTemplate.name !== template?.name) {\n        setTemplate(passedTemplate);\n      }\n      if (passedSchedule && passedSchedule.name !== schedule?.name) {\n        setSchedule(passedSchedule);\n      }\n      if (!template) return;\n      const templatePath = `/templates/${template.type}/${template.id}`;\n      const schedulesPath = `${templatePath}/schedules`;\n      const surveyPath = `${templatePath}/survey`;\n      setScreenHeader({\n        ...initScreenHeader.current,\n        [templatePath]: `${template.name}`,\n        [`${templatePath}/details`]: t`Details`,\n        [`${templatePath}/edit`]: t`Edit Details`,\n        [`${templatePath}/access`]: t`Access`,\n        [`${templatePath}/notifications`]: t`Notifications`,\n        [`${templatePath}/jobs`]: t`Jobs`,\n        [surveyPath]: t`Survey`,\n        [`${surveyPath}/add`]: t`Add Question`,\n        [`${surveyPath}/edit`]: t`Edit Question`,\n        [schedulesPath]: t`Schedules`,\n        [`${schedulesPath}/add`]: t`Create New Schedule`,\n        [`${schedulesPath}/${schedule?.id}`]: `${schedule?.name}`,\n        [`${schedulesPath}/${schedule?.id}/details`]: t`Schedule Details`,\n        [`${schedulesPath}/${schedule?.id}/edit`]: t`Edit Schedule`,\n      });\n    },\n    [template, schedule]\n  );\n\n  return (\n    <>\n      <ScreenHeader\n        streamType=\"job_template,workflow_job_template,workflow_job_template_node\"\n        breadcrumbConfig={breadcrumbConfig}\n      />\n      <Switch>\n        <Route path=\"/templates/job_template/add\">\n          <JobTemplateAdd />\n        </Route>\n        <Route path=\"/templates/workflow_job_template/add\">\n          <WorkflowJobTemplateAdd />\n        </Route>\n        <Route path=\"/templates/job_template/:id\">\n          <Template setBreadcrumb={setBreadcrumbConfig} />\n        </Route>\n        <Route path=\"/templates/workflow_job_template/:id\">\n          <WorkflowJobTemplate setBreadcrumb={setBreadcrumbConfig} />\n        </Route>\n        <Route path=\"/templates\">\n          <PageSection>\n            <PersistentFilters pageKey=\"templates\">\n              <TemplateList />\n            </PersistentFilters>\n          </PageSection>\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport { Templates as _Templates };\nexport default withRouter(Templates);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}