{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _styled from\"styled-components\";import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import{FormGroup,Alert}from'@patternfly/react-core';import{required}from'util/validators';import AnsibleSelect from'components/AnsibleSelect';import FormField from'components/FormField';import Popover from'components/Popover';import useBrandName from'hooks/useBrandName';import getProjectHelpStrings from'../Project.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _StyledAlert=_styled(Alert).withConfig({displayName:\"ManualSubForm___StyledAlert\",componentId:\"sc-1c5mnvn-0\"})([\"grid-column:1/-1\"]);var ManualSubForm=function ManualSubForm(_ref){var localPath=_ref.localPath,project_base_dir=_ref.project_base_dir,project_local_paths=_ref.project_local_paths;var projectHelpStrings=getProjectHelpStrings();var brandName=useBrandName();var localPaths=_toConsumableArray(new Set([].concat(_toConsumableArray(project_local_paths),[localPath])));var options=[{value:'',key:'',label:/*i18n*/i18n._(\"Choose a Playbook Directory\")}].concat(_toConsumableArray(localPaths.filter(function(path){return path;}).map(function(path){return{value:path,key:path,label:path};})));var _useField=useField({name:'local_path',validate:required(/*i18n*/i18n._(\"Select a value for this field\"))}),_useField2=_slicedToArray(_useField,3),pathField=_useField2[0],pathMeta=_useField2[1],pathHelpers=_useField2[2];return/*#__PURE__*/_jsxs(_Fragment,{children:[options.length===1&&/*#__PURE__*/_jsx(_StyledAlert,{title:/*i18n*/i18n._(\"WARNING:\"),variant:\"warning\",isInline:true,ouiaId:\"project-manual-subform-alert\",children:/*i18n*/i18n._(\"There are no available playbook directories in {project_base_dir}.\\nEither that directory is empty, or all of the contents are already\\nassigned to other projects. Create a new directory there and make\\nsure the playbook files can be read by the \\\"awx\\\" system user,\\nor have {brandName} directly retrieve your playbooks from\\nsource control using the Source Control Type option above.\",{project_base_dir:project_base_dir,brandName:brandName})}),/*#__PURE__*/_jsx(FormField,{id:\"project-base-dir\",label:/*i18n*/i18n._(\"Project Base Path\"),name:\"base_dir\",type:\"text\",isReadOnly:true,tooltip:projectHelpStrings.projectBasePath(brandName)}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"project-local-path\",helperTextInvalid:pathMeta.error,isRequired:true,validated:!pathMeta.touched||!pathMeta.error?'default':'error',label:/*i18n*/i18n._(\"Playbook Directory\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:projectHelpStrings.projectLocalPath}),children:/*#__PURE__*/_jsx(AnsibleSelect,_objectSpread(_objectSpread({},pathField),{},{id:\"local_path\",data:options,onChange:function onChange(event,value){pathHelpers.setValue(value);}}))})]});};export default ManualSubForm;","map":{"version":3,"names":["React","useField","FormGroup","Alert","required","AnsibleSelect","FormField","Popover","useBrandName","getProjectHelpStrings","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","_StyledAlert","_styled","withConfig","displayName","componentId","ManualSubForm","_ref","localPath","project_base_dir","project_local_paths","projectHelpStrings","brandName","localPaths","_toConsumableArray","Set","concat","options","value","key","label","i18n","_","filter","path","map","_useField","name","validate","_useField2","_slicedToArray","pathField","pathMeta","pathHelpers","children","length","title","variant","isInline","ouiaId","id","type","isReadOnly","tooltip","projectBasePath","fieldId","helperTextInvalid","error","isRequired","validated","touched","labelIcon","content","projectLocalPath","_objectSpread","data","onChange","event","setValue"],"sources":["/awx_devel/awx/ui/src/screens/Project/shared/ProjectSubForms/ManualSubForm.js"],"sourcesContent":["import 'styled-components/macro';\nimport React from 'react';\nimport { t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport { FormGroup, Alert } from '@patternfly/react-core';\nimport { required } from 'util/validators';\nimport AnsibleSelect from 'components/AnsibleSelect';\nimport FormField from 'components/FormField';\nimport Popover from 'components/Popover';\nimport useBrandName from 'hooks/useBrandName';\nimport getProjectHelpStrings from '../Project.helptext';\n\nconst ManualSubForm = ({\n  localPath,\n  project_base_dir,\n  project_local_paths,\n}) => {\n  const projectHelpStrings = getProjectHelpStrings();\n  const brandName = useBrandName();\n  const localPaths = [...new Set([...project_local_paths, localPath])];\n  const options = [\n    {\n      value: '',\n      key: '',\n      label: t`Choose a Playbook Directory`,\n    },\n    ...localPaths\n      .filter((path) => path)\n      .map((path) => ({\n        value: path,\n        key: path,\n        label: path,\n      })),\n  ];\n  const [pathField, pathMeta, pathHelpers] = useField({\n    name: 'local_path',\n    validate: required(t`Select a value for this field`),\n  });\n\n  return (\n    <>\n      {options.length === 1 && (\n        <Alert\n          title={t`WARNING: `}\n          css=\"grid-column: 1/-1\"\n          variant=\"warning\"\n          isInline\n          ouiaId=\"project-manual-subform-alert\"\n        >\n          {t`\n            There are no available playbook directories in ${project_base_dir}.\n            Either that directory is empty, or all of the contents are already\n            assigned to other projects. Create a new directory there and make\n            sure the playbook files can be read by the \"awx\" system user,\n            or have ${brandName} directly retrieve your playbooks from\n            source control using the Source Control Type option above.`}\n        </Alert>\n      )}\n      <FormField\n        id=\"project-base-dir\"\n        label={t`Project Base Path`}\n        name=\"base_dir\"\n        type=\"text\"\n        isReadOnly\n        tooltip={projectHelpStrings.projectBasePath(brandName)}\n      />\n      <FormGroup\n        fieldId=\"project-local-path\"\n        helperTextInvalid={pathMeta.error}\n        isRequired\n        validated={!pathMeta.touched || !pathMeta.error ? 'default' : 'error'}\n        label={t`Playbook Directory`}\n        labelIcon={<Popover content={projectHelpStrings.projectLocalPath} />}\n      >\n        <AnsibleSelect\n          {...pathField}\n          id=\"local_path\"\n          data={options}\n          onChange={(event, value) => {\n            pathHelpers.setValue(value);\n          }}\n        />\n      </FormGroup>\n    </>\n  );\n};\n\nexport default ManualSubForm;\n"],"mappings":"kYACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,QAAQ,KAAQ,QAAQ,CACjC,OAASC,SAAS,CAAEC,KAAK,KAAQ,wBAAwB,CACzD,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,MAAO,CAAAC,aAAa,KAAM,0BAA0B,CACpD,MAAO,CAAAC,SAAS,KAAM,sBAAsB,CAC5C,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,MAAO,CAAAC,YAAY,KAAM,oBAAoB,CAC7C,MAAO,CAAAC,qBAAqB,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,6BAAAC,YAAA,CAAAC,OAAA,CAAAd,KAAA,EAAAe,UAAA,EAAAC,WAAA,+BAAAC,WAAA,wCAExD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAAC,IAAA,CAIb,IAHJ,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CACTC,gBAAgB,CAAAF,IAAA,CAAhBE,gBAAgB,CAChBC,mBAAmB,CAAAH,IAAA,CAAnBG,mBAAmB,CAEnB,GAAM,CAAAC,kBAAkB,CAAGjB,qBAAqB,CAAC,CAAC,CAClD,GAAM,CAAAkB,SAAS,CAAGnB,YAAY,CAAC,CAAC,CAChC,GAAM,CAAAoB,UAAU,CAAAC,kBAAA,CAAO,GAAI,CAAAC,GAAG,IAAAC,MAAA,CAAAF,kBAAA,CAAKJ,mBAAmB,GAAEF,SAAS,EAAC,CAAC,CAAC,CACpE,GAAM,CAAAS,OAAO,EACX,CACEC,KAAK,CAAE,EAAE,CACTC,GAAG,CAAE,EAAE,CACPC,KAAK,SAAEC,IAAA,CAAAC,CAAA,8BAA6B,CACtC,CAAC,EAAAN,MAAA,CAAAF,kBAAA,CACED,UAAU,CACVU,MAAM,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,GAAC,CACtBC,GAAG,CAAC,SAACD,IAAI,QAAM,CACdN,KAAK,CAAEM,IAAI,CACXL,GAAG,CAAEK,IAAI,CACTJ,KAAK,CAAEI,IACT,CAAC,EAAC,CAAC,EACN,CACD,IAAAE,SAAA,CAA2CxC,QAAQ,CAAC,CAClDyC,IAAI,CAAE,YAAY,CAClBC,QAAQ,CAAEvC,QAAQ,SAACgC,IAAA,CAAAC,CAAA,gCAA+B,CAAC,CACrD,CAAC,CAAC,CAAAO,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAHKK,SAAS,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IAAEI,WAAW,CAAAJ,UAAA,IAKvC,mBACE7B,KAAA,CAAAF,SAAA,EAAAoC,QAAA,EACGjB,OAAO,CAACkB,MAAM,GAAK,CAAC,eACnBvC,IAAA,CAAAK,YAAA,EACEmC,KAAK,SAAEf,IAAA,CAAAC,CAAA,WAAW,CAAE,CAEpBe,OAAO,CAAC,SAAS,CACjBC,QAAQ,MACRC,MAAM,CAAC,8BAA8B,CAAAL,QAAA,SAEpCb,IAAA,CAAAC,CAAA,sYAAAb,gBAAA,CACkDA,gBAAgB,CAAAG,SAAA,CAIvDA,SAAS,CACuC,CAAC,CACxD,CACR,cACDhB,IAAA,CAACL,SAAS,EACRiD,EAAE,CAAC,kBAAkB,CACrBpB,KAAK,SAAEC,IAAA,CAAAC,CAAA,oBAAmB,CAAE,CAC5BK,IAAI,CAAC,UAAU,CACfc,IAAI,CAAC,MAAM,CACXC,UAAU,MACVC,OAAO,CAAEhC,kBAAkB,CAACiC,eAAe,CAAChC,SAAS,CAAE,CACxD,CAAC,cACFhB,IAAA,CAACT,SAAS,EACR0D,OAAO,CAAC,oBAAoB,CAC5BC,iBAAiB,CAAEd,QAAQ,CAACe,KAAM,CAClCC,UAAU,MACVC,SAAS,CAAE,CAACjB,QAAQ,CAACkB,OAAO,EAAI,CAAClB,QAAQ,CAACe,KAAK,CAAG,SAAS,CAAG,OAAQ,CACtE3B,KAAK,SAAEC,IAAA,CAAAC,CAAA,qBAAoB,CAAE,CAC7B6B,SAAS,cAAEvD,IAAA,CAACJ,OAAO,EAAC4D,OAAO,CAAEzC,kBAAkB,CAAC0C,gBAAiB,CAAE,CAAE,CAAAnB,QAAA,cAErEtC,IAAA,CAACN,aAAa,CAAAgE,aAAA,CAAAA,aAAA,IACRvB,SAAS,MACbS,EAAE,CAAC,YAAY,CACfe,IAAI,CAAEtC,OAAQ,CACduC,QAAQ,CAAE,SAAAA,SAACC,KAAK,CAAEvC,KAAK,CAAK,CAC1Be,WAAW,CAACyB,QAAQ,CAACxC,KAAK,CAAC,CAC7B,CAAE,EACH,CAAC,CACO,CAAC,EACZ,CAAC,CAEP,CAAC,CAED,cAAe,CAAAZ,aAAa"},"metadata":{},"sourceType":"module"}