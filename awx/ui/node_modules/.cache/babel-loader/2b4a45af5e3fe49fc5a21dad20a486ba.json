{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React from'react';import{Chip}from'@patternfly/react-core';import{Tr,Td}from'@patternfly/react-table';import{Link}from'react-router-dom';import{AccessRecord}from'types';import ChipGroup from'../ChipGroup';import{DetailList,Detail}from'../DetailList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ResourceAccessListItem(_ref){var accessRecord=_ref.accessRecord,onRoleDelete=_ref.onRoleDelete;var getRoleLists=function getRoleLists(){var teamRoles=[];var userRoles=[];function sort(item){var role=item.role;if(role.team_id){teamRoles.push(role);}else{userRoles.push(role);}}accessRecord.summary_fields.direct_access.map(sort);accessRecord.summary_fields.indirect_access.map(sort);return[teamRoles,userRoles];};var renderChip=function renderChip(role){return/*#__PURE__*/_jsx(Chip,{onClick:function onClick(){onRoleDelete(role,accessRecord);},isReadOnly:!role.user_capabilities.unattach,ouiaId:\"\".concat(role.name,\"-\").concat(role.id),closeBtnAriaLabel:/*i18n*/i18n._(\"Remove {0} chip\",{0:role.name}),children:role.name},role.id);};var _getRoleLists=getRoleLists(),_getRoleLists2=_slicedToArray(_getRoleLists,2),teamRoles=_getRoleLists2[0],userRoles=_getRoleLists2[1];return/*#__PURE__*/_jsxs(Tr,{id:\"access-item-row-\".concat(accessRecord.id),ouiaId:\"access-item-row-\".concat(accessRecord.id),children:[/*#__PURE__*/_jsx(Td,{id:\"access-record-\".concat(accessRecord.id),dataLabel:/*i18n*/i18n._(\"Name\"),children:accessRecord.id?/*#__PURE__*/_jsx(Link,{to:{pathname:\"/users/\".concat(accessRecord.id,\"/details\")},children:/*#__PURE__*/_jsx(\"b\",{children:accessRecord.username})}):/*#__PURE__*/_jsx(\"b\",{children:accessRecord.username})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"First name\"),children:accessRecord.first_name}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Last name\"),children:accessRecord.last_name}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Roles\"),children:/*#__PURE__*/_jsxs(DetailList,{stacked:true,children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"User Roles\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:userRoles.length,ouiaId:\"user-role-chips\",children:userRoles.map(renderChip)}),isEmpty:userRoles.length===0}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Team Roles\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:teamRoles.length,ouiaId:\"team-role-chips\",children:teamRoles.map(renderChip)}),isEmpty:teamRoles.length===0})]})})]});}export default ResourceAccessListItem;","map":{"version":3,"names":["React","Chip","Tr","Td","Link","AccessRecord","ChipGroup","DetailList","Detail","jsx","_jsx","jsxs","_jsxs","ResourceAccessListItem","_ref","accessRecord","onRoleDelete","getRoleLists","teamRoles","userRoles","sort","item","role","team_id","push","summary_fields","direct_access","map","indirect_access","renderChip","onClick","isReadOnly","user_capabilities","unattach","ouiaId","concat","name","id","closeBtnAriaLabel","i18n","_","0","children","_getRoleLists","_getRoleLists2","_slicedToArray","dataLabel","to","pathname","username","first_name","last_name","stacked","label","value","numChips","totalChips","length","isEmpty"],"sources":["/awx_devel/awx/ui/src/components/ResourceAccessList/ResourceAccessListItem.js"],"sourcesContent":["import 'styled-components/macro';\nimport React from 'react';\nimport { func } from 'prop-types';\nimport { t } from '@lingui/macro';\nimport { Chip } from '@patternfly/react-core';\nimport { Tr, Td } from '@patternfly/react-table';\nimport { Link } from 'react-router-dom';\n\nimport { AccessRecord } from 'types';\nimport ChipGroup from '../ChipGroup';\nimport { DetailList, Detail } from '../DetailList';\n\nfunction ResourceAccessListItem({ accessRecord, onRoleDelete }) {\n  ResourceAccessListItem.propTypes = {\n    accessRecord: AccessRecord.isRequired,\n    onRoleDelete: func.isRequired,\n  };\n\n  const getRoleLists = () => {\n    const teamRoles = [];\n    const userRoles = [];\n\n    function sort(item) {\n      const { role } = item;\n      if (role.team_id) {\n        teamRoles.push(role);\n      } else {\n        userRoles.push(role);\n      }\n    }\n\n    accessRecord.summary_fields.direct_access.map(sort);\n    accessRecord.summary_fields.indirect_access.map(sort);\n    return [teamRoles, userRoles];\n  };\n\n  const renderChip = (role) => (\n    <Chip\n      key={role.id}\n      onClick={() => {\n        onRoleDelete(role, accessRecord);\n      }}\n      isReadOnly={!role.user_capabilities.unattach}\n      ouiaId={`${role.name}-${role.id}`}\n      closeBtnAriaLabel={t`Remove ${role.name} chip`}\n    >\n      {role.name}\n    </Chip>\n  );\n\n  const [teamRoles, userRoles] = getRoleLists();\n\n  return (\n    <Tr\n      id={`access-item-row-${accessRecord.id}`}\n      ouiaId={`access-item-row-${accessRecord.id}`}\n    >\n      <Td id={`access-record-${accessRecord.id}`} dataLabel={t`Name`}>\n        {accessRecord.id ? (\n          <Link to={{ pathname: `/users/${accessRecord.id}/details` }}>\n            <b>{accessRecord.username}</b>\n          </Link>\n        ) : (\n          <b>{accessRecord.username}</b>\n        )}\n      </Td>\n      <Td dataLabel={t`First name`}>{accessRecord.first_name}</Td>\n      <Td dataLabel={t`Last name`}>{accessRecord.last_name}</Td>\n      <Td dataLabel={t`Roles`}>\n        <DetailList stacked>\n          <Detail\n            label={t`User Roles`}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={userRoles.length}\n                ouiaId=\"user-role-chips\"\n              >\n                {userRoles.map(renderChip)}\n              </ChipGroup>\n            }\n            isEmpty={userRoles.length === 0}\n          />\n          <Detail\n            label={t`Team Roles`}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={teamRoles.length}\n                ouiaId=\"team-role-chips\"\n              >\n                {teamRoles.map(renderChip)}\n              </ChipGroup>\n            }\n            isEmpty={teamRoles.length === 0}\n          />\n        </DetailList>\n      </Td>\n    </Tr>\n  );\n}\n\nexport default ResourceAccessListItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}