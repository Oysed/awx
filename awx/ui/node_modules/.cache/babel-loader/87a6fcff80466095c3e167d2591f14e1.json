{"ast":null,"code":"import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"organization\"];import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{Card,PageSection}from'@patternfly/react-core';import{CardBody}from'components/Card';import{OrganizationsAPI}from'api';import UserForm from'../shared/UserForm';import{jsx as _jsx}from\"react/jsx-runtime\";function UserAdd(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),formSubmitError=_useState2[0],setFormSubmitError=_useState2[1];var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var organization,userValues,_yield$OrganizationsA,id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setFormSubmitError(null);organization=values.organization,userValues=_objectWithoutProperties(values,_excluded);_context.prev=2;_context.next=5;return OrganizationsAPI.createUser(organization.id,userValues);case 5:_yield$OrganizationsA=_context.sent;id=_yield$OrganizationsA.data.id;history.push(\"/users/\".concat(id,\"/details\"));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);setFormSubmitError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){history.push(\"/users\");};return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(UserForm,{handleCancel:handleCancel,handleSubmit:handleSubmit,submitError:formSubmitError})})})});}export default UserAdd;","map":{"version":3,"names":["React","useState","useHistory","Card","PageSection","CardBody","OrganizationsAPI","UserForm","jsx","_jsx","UserAdd","_useState","_useState2","_slicedToArray","formSubmitError","setFormSubmitError","history","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","organization","userValues","_yield$OrganizationsA","id","wrap","_callee$","_context","prev","next","_objectWithoutProperties","_excluded","createUser","sent","data","push","concat","t0","stop","_x","apply","arguments","handleCancel","children","submitError"],"sources":["/awx_devel/awx/ui/src/screens/User/UserAdd/UserAdd.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { CardBody } from 'components/Card';\nimport { OrganizationsAPI } from 'api';\nimport UserForm from '../shared/UserForm';\n\nfunction UserAdd() {\n  const [formSubmitError, setFormSubmitError] = useState(null);\n  const history = useHistory();\n\n  const handleSubmit = async (values) => {\n    setFormSubmitError(null);\n    const { organization, ...userValues } = values;\n    try {\n      const {\n        data: { id },\n      } = await OrganizationsAPI.createUser(organization.id, userValues);\n      history.push(`/users/${id}/details`);\n    } catch (error) {\n      setFormSubmitError(error);\n    }\n  };\n\n  const handleCancel = () => {\n    history.push(`/users`);\n  };\n\n  return (\n    <PageSection>\n      <Card>\n        <CardBody>\n          <UserForm\n            handleCancel={handleCancel}\n            handleSubmit={handleSubmit}\n            submitError={formSubmitError}\n          />\n        </CardBody>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default UserAdd;\n"],"mappings":"kdAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,IAAI,CAAEC,WAAW,KAAQ,wBAAwB,CAC1D,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,gBAAgB,KAAQ,KAAK,CACtC,MAAO,CAAAC,QAAQ,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,IAAAC,SAAA,CAA8CV,QAAQ,CAAC,IAAI,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArDG,eAAe,CAAAF,UAAA,IAAEG,kBAAkB,CAAAH,UAAA,IAC1C,GAAM,CAAAI,OAAO,CAAGd,UAAU,CAAC,CAAC,CAE5B,GAAM,CAAAe,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,YAAA,CAAAC,UAAA,CAAAC,qBAAA,CAAAC,EAAA,QAAAP,mBAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAChCjB,kBAAkB,CAAC,IAAI,CAAC,CAChBS,YAAY,CAAoBD,MAAM,CAAtCC,YAAY,CAAKC,UAAU,CAAAQ,wBAAA,CAAKV,MAAM,CAAAW,SAAA,EAAAJ,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAIlC,CAAA1B,gBAAgB,CAAC6B,UAAU,CAACX,YAAY,CAACG,EAAE,CAAEF,UAAU,CAAC,QAAAC,qBAAA,CAAAI,QAAA,CAAAM,IAAA,CADxDT,EAAE,CAAAD,qBAAA,CAAVW,IAAI,CAAIV,EAAE,CAEZX,OAAO,CAACsB,IAAI,WAAAC,MAAA,CAAWZ,EAAE,YAAU,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAErCf,kBAAkB,CAAAe,QAAA,CAAAU,EAAM,CAAC,CAAC,yBAAAV,QAAA,CAAAW,IAAA,OAAAnB,OAAA,iBAE7B,kBAXK,CAAAL,YAAYA,CAAAyB,EAAA,SAAAxB,IAAA,CAAAyB,KAAA,MAAAC,SAAA,OAWjB,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB7B,OAAO,CAACsB,IAAI,SAAS,CAAC,CACxB,CAAC,CAED,mBACE7B,IAAA,CAACL,WAAW,EAAA0C,QAAA,cACVrC,IAAA,CAACN,IAAI,EAAA2C,QAAA,cACHrC,IAAA,CAACJ,QAAQ,EAAAyC,QAAA,cACPrC,IAAA,CAACF,QAAQ,EACPsC,YAAY,CAAEA,YAAa,CAC3B5B,YAAY,CAAEA,YAAa,CAC3B8B,WAAW,CAAEjC,eAAgB,CAC9B,CAAC,CACM,CAAC,CACP,CAAC,CACI,CAAC,CAElB,CAEA,cAAe,CAAAJ,OAAO"},"metadata":{},"sourceType":"module"}