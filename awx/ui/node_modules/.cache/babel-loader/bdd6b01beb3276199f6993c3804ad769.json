{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,useHistory,useLocation}from'react-router-dom';import{Button}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{CardBody,CardActionsRow}from'components/Card';import ContentLoading from'components/ContentLoading';import ContentError from'components/ContentError';import RoutedTabs from'components/RoutedTabs';import{SettingsAPI}from'api';import useRequest from'hooks/useRequest';import{DetailList}from'components/DetailList';import{useConfig}from'contexts/Config';import{useSettings}from'contexts/Settings';import{pluck}from'../../shared/settingUtils';import{SettingDetail}from'../../shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UIDetail(){var _useConfig=useConfig(),me=_useConfig.me;var _useSettings=useSettings(),options=_useSettings.GET;var history=useHistory();var _useLocation=useLocation(),hardReload=_useLocation.hardReload;if(hardReload){history.go();}var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$SettingsAPI$re,data,uiData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return SettingsAPI.readCategory('ui');case 2:_yield$SettingsAPI$re=_context.sent;data=_yield$SettingsAPI$re.data;uiData=pluck(data,'PENDO_TRACKING_STATE','CUSTOM_LOGO','CUSTOM_LOGIN_INFO');return _context.abrupt(\"return\",uiData);case 6:case\"end\":return _context.stop();}}},_callee);})),[]),null),isLoading=_useRequest.isLoading,error=_useRequest.error,request=_useRequest.request,ui=_useRequest.result;useEffect(function(){request();},[request]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Settings\")]}),link:\"/settings\",id:99},{name:/*i18n*/i18n._(\"Details\"),link:\"/settings/ui/details\",id:0}];// Change CUSTOM_LOGO type from string to image\n// to help SettingDetail render it as an <img>\nif(options!==null&&options!==void 0&&options.CUSTOM_LOGO){options.CUSTOM_LOGO.type='image';}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(CardBody,{children:[isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&error&&/*#__PURE__*/_jsx(ContentError,{error:error}),!isLoading&&ui&&/*#__PURE__*/_jsx(DetailList,{children:Object.keys(ui).map(function(key){var record=options===null||options===void 0?void 0:options[key];return/*#__PURE__*/_jsx(SettingDetail,{id:key,helpText:record===null||record===void 0?void 0:record.help_text,label:record===null||record===void 0?void 0:record.label,type:record===null||record===void 0?void 0:record.type,unit:record===null||record===void 0?void 0:record.unit,value:ui===null||ui===void 0?void 0:ui[key]},key);})}),(me===null||me===void 0?void 0:me.is_superuser)&&/*#__PURE__*/_jsx(CardActionsRow,{children:/*#__PURE__*/_jsx(Button,{\"aria-label\":/*i18n*/i18n._(\"Edit\"),component:Link,to:\"/settings/ui/edit\",ouiaId:\"ui-detail-edit-button\",children:/*i18n*/i18n._(\"Edit\")})})]})]});}export default UIDetail;","map":{"version":3,"names":["React","useEffect","useCallback","Link","useHistory","useLocation","Button","CaretLeftIcon","CardBody","CardActionsRow","ContentLoading","ContentError","RoutedTabs","SettingsAPI","useRequest","DetailList","useConfig","useSettings","pluck","SettingDetail","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UIDetail","_useConfig","me","_useSettings","options","GET","history","_useLocation","hardReload","go","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$SettingsAPI$re","data","uiData","wrap","_callee$","_context","prev","next","readCategory","sent","abrupt","stop","isLoading","error","request","ui","result","tabsArray","name","children","i18n","_","link","id","CUSTOM_LOGO","type","Object","keys","map","key","record","helpText","help_text","label","unit","value","is_superuser","component","to","ouiaId"],"sources":["/awx_devel/awx/ui/src/screens/Setting/UI/UIDetail/UIDetail.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Button } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport ContentLoading from 'components/ContentLoading';\nimport ContentError from 'components/ContentError';\nimport RoutedTabs from 'components/RoutedTabs';\nimport { SettingsAPI } from 'api';\nimport useRequest from 'hooks/useRequest';\nimport { DetailList } from 'components/DetailList';\nimport { useConfig } from 'contexts/Config';\nimport { useSettings } from 'contexts/Settings';\nimport { pluck } from '../../shared/settingUtils';\nimport { SettingDetail } from '../../shared';\n\nfunction UIDetail() {\n  const { me } = useConfig();\n  const { GET: options } = useSettings();\n  const history = useHistory();\n  const { hardReload } = useLocation();\n\n  if (hardReload) {\n    history.go();\n  }\n\n  const {\n    isLoading,\n    error,\n    request,\n    result: ui,\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await SettingsAPI.readCategory('ui');\n\n      const uiData = pluck(\n        data,\n        'PENDO_TRACKING_STATE',\n        'CUSTOM_LOGO',\n        'CUSTOM_LOGIN_INFO'\n      );\n\n      return uiData;\n    }, []),\n    null\n  );\n\n  useEffect(() => {\n    request();\n  }, [request]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Settings`}\n        </>\n      ),\n      link: `/settings`,\n      id: 99,\n    },\n    {\n      name: t`Details`,\n      link: `/settings/ui/details`,\n      id: 0,\n    },\n  ];\n\n  // Change CUSTOM_LOGO type from string to image\n  // to help SettingDetail render it as an <img>\n  if (options?.CUSTOM_LOGO) {\n    options.CUSTOM_LOGO.type = 'image';\n  }\n\n  return (\n    <>\n      <RoutedTabs tabsArray={tabsArray} />\n      <CardBody>\n        {isLoading && <ContentLoading />}\n        {!isLoading && error && <ContentError error={error} />}\n        {!isLoading && ui && (\n          <DetailList>\n            {Object.keys(ui).map((key) => {\n              const record = options?.[key];\n              return (\n                <SettingDetail\n                  key={key}\n                  id={key}\n                  helpText={record?.help_text}\n                  label={record?.label}\n                  type={record?.type}\n                  unit={record?.unit}\n                  value={ui?.[key]}\n                />\n              );\n            })}\n          </DetailList>\n        )}\n        {me?.is_superuser && (\n          <CardActionsRow>\n            <Button\n              aria-label={t`Edit`}\n              component={Link}\n              to=\"/settings/ui/edit\"\n              ouiaId=\"ui-detail-edit-button\"\n            >\n              {t`Edit`}\n            </Button>\n          </CardActionsRow>\n        )}\n      </CardBody>\n    </>\n  );\n}\n\nexport default UIDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}