{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Label}from'@patternfly/react-core';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import DeleteButton from'components/DeleteButton';import{Detail,DetailList,UserDateDetail}from'components/DetailList';import useRequest,{useDismissableError}from'hooks/useRequest';import{toTitleCase}from'util/strings';import{ExecutionEnvironmentsAPI}from'api';import{relatedResourceDeleteRequests}from'util/getRelatedResourceDeleteDetails';import getHelpText from'../shared/ExecutionEnvironment.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ExecutionEnvironmentDetails(_ref){var _summary_fields$user_,_summary_fields$user_2;var executionEnvironment=_ref.executionEnvironment;var helpText=getHelpText();var history=useHistory();var id=executionEnvironment.id,name=executionEnvironment.name,image=executionEnvironment.image,description=executionEnvironment.description,pull=executionEnvironment.pull,organization=executionEnvironment.organization,summary_fields=executionEnvironment.summary_fields,managedByTower=executionEnvironment.managed;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ExecutionEnvironmentsAPI.destroy(id);case 2:history.push(\"/execution_environments\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteExecutionEnvironment=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var deleteDetailsRequests=relatedResourceDeleteRequests.executionEnvironment(executionEnvironment);return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:name,dataCy:\"execution-environment-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Image\"),value:image,dataCy:\"execution-environment-detail-image\",helpText:helpText.image}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Description\"),value:description,dataCy:\"execution-environment-detail-description\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Managed\"),value:managedByTower?/*i18n*/i18n._(\"True\"):/*i18n*/i18n._(\"False\"),dataCy:\"execution-environment-managed-by-tower\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Organization\"),value:organization?/*#__PURE__*/_jsx(Link,{to:\"/organizations/\".concat(summary_fields.organization.id,\"/details\"),children:summary_fields.organization.name}):/*i18n*/i18n._(\"Globally Available\"),dataCy:\"execution-environment-detail-organization\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Pull\"),value:pull===''?/*i18n*/i18n._(\"Missing\"):toTitleCase(pull),dataCy:\"execution-environment-pull\"}),executionEnvironment.summary_fields.credential&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Registry credential\"),value:/*#__PURE__*/_jsx(Label,{variant:\"outline\",color:\"blue\",children:executionEnvironment.summary_fields.credential.name}),dataCy:\"execution-environment-credential\",helpText:helpText.registryCredential}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:executionEnvironment.created,user:executionEnvironment.summary_fields.created_by}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:executionEnvironment.modified,user:executionEnvironment.summary_fields.modified_by})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[((_summary_fields$user_=summary_fields.user_capabilities)===null||_summary_fields$user_===void 0?void 0:_summary_fields$user_.edit)&&/*#__PURE__*/_jsx(Button,{ouiaId:\"execution-environment-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/execution_environments/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),((_summary_fields$user_2=summary_fields.user_capabilities)===null||_summary_fields$user_2===void 0?void 0:_summary_fields$user_2.delete)&&/*#__PURE__*/_jsx(DeleteButton,{name:image,modalTitle:/*i18n*/i18n._(\"Delete Execution Environment\"),onConfirm:deleteExecutionEnvironment,isDisabled:isLoading,ouiaId:\"delete-button\",deleteDetailsRequests:deleteDetailsRequests,deleteMessage:/*i18n*/i18n._(\"This execution environment is currently being used by other resources. Are you sure you want to delete it?\"),children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsx(AlertModal,{isOpen:error,onClose:dismissError,title:/*i18n*/i18n._(\"Error\"),variant:\"error\"})]});}export default ExecutionEnvironmentDetails;","map":{"version":3,"names":["React","useCallback","Link","useHistory","Button","Label","AlertModal","CardBody","CardActionsRow","DeleteButton","Detail","DetailList","UserDateDetail","useRequest","useDismissableError","toTitleCase","ExecutionEnvironmentsAPI","relatedResourceDeleteRequests","getHelpText","jsx","_jsx","jsxs","_jsxs","ExecutionEnvironmentDetails","_ref","_summary_fields$user_","_summary_fields$user_2","executionEnvironment","helpText","history","id","name","image","description","pull","organization","summary_fields","managedByTower","managed","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","destroy","push","stop","deleteExecutionEnvironment","request","isLoading","deleteError","error","_useDismissableError","dismissError","deleteDetailsRequests","children","label","i18n","_","value","dataCy","to","concat","credential","variant","color","registryCredential","date","created","user","created_by","modified","modified_by","user_capabilities","edit","ouiaId","component","delete","modalTitle","onConfirm","isDisabled","deleteMessage","isOpen","onClose","title"],"sources":["/awx_devel/awx/ui/src/screens/ExecutionEnvironment/ExecutionEnvironmentDetails/ExecutionEnvironmentDetails.js"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button, Label } from '@patternfly/react-core';\n\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport DeleteButton from 'components/DeleteButton';\nimport { Detail, DetailList, UserDateDetail } from 'components/DetailList';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport { toTitleCase } from 'util/strings';\nimport { ExecutionEnvironmentsAPI } from 'api';\nimport { relatedResourceDeleteRequests } from 'util/getRelatedResourceDeleteDetails';\nimport getHelpText from '../shared/ExecutionEnvironment.helptext';\n\nfunction ExecutionEnvironmentDetails({ executionEnvironment }) {\n  const helpText = getHelpText();\n  const history = useHistory();\n  const {\n    id,\n    name,\n    image,\n    description,\n    pull,\n    organization,\n    summary_fields,\n    managed: managedByTower,\n  } = executionEnvironment;\n\n  const {\n    request: deleteExecutionEnvironment,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await ExecutionEnvironmentsAPI.destroy(id);\n      history.push(`/execution_environments`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n  const deleteDetailsRequests =\n    relatedResourceDeleteRequests.executionEnvironment(executionEnvironment);\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={name}\n          dataCy=\"execution-environment-detail-name\"\n        />\n        <Detail\n          label={t`Image`}\n          value={image}\n          dataCy=\"execution-environment-detail-image\"\n          helpText={helpText.image}\n        />\n        <Detail\n          label={t`Description`}\n          value={description}\n          dataCy=\"execution-environment-detail-description\"\n        />\n        <Detail\n          label={t`Managed`}\n          value={managedByTower ? t`True` : t`False`}\n          dataCy=\"execution-environment-managed-by-tower\"\n        />\n        <Detail\n          label={t`Organization`}\n          value={\n            organization ? (\n              <Link\n                to={`/organizations/${summary_fields.organization.id}/details`}\n              >\n                {summary_fields.organization.name}\n              </Link>\n            ) : (\n              t`Globally Available`\n            )\n          }\n          dataCy=\"execution-environment-detail-organization\"\n        />\n\n        <Detail\n          label={t`Pull`}\n          value={pull === '' ? t`Missing` : toTitleCase(pull)}\n          dataCy=\"execution-environment-pull\"\n        />\n        {executionEnvironment.summary_fields.credential && (\n          <Detail\n            label={t`Registry credential`}\n            value={\n              <Label variant=\"outline\" color=\"blue\">\n                {executionEnvironment.summary_fields.credential.name}\n              </Label>\n            }\n            dataCy=\"execution-environment-credential\"\n            helpText={helpText.registryCredential}\n          />\n        )}\n        <UserDateDetail\n          label={t`Created`}\n          date={executionEnvironment.created}\n          user={executionEnvironment.summary_fields.created_by}\n        />\n        <UserDateDetail\n          label={t`Last Modified`}\n          date={executionEnvironment.modified}\n          user={executionEnvironment.summary_fields.modified_by}\n        />\n      </DetailList>\n      <CardActionsRow>\n        {summary_fields.user_capabilities?.edit && (\n          <Button\n            ouiaId=\"execution-environment-detail-edit-button\"\n            aria-label={t`edit`}\n            component={Link}\n            to={`/execution_environments/${id}/edit`}\n          >\n            {t`Edit`}\n          </Button>\n        )}\n        {summary_fields.user_capabilities?.delete && (\n          <DeleteButton\n            name={image}\n            modalTitle={t`Delete Execution Environment`}\n            onConfirm={deleteExecutionEnvironment}\n            isDisabled={isLoading}\n            ouiaId=\"delete-button\"\n            deleteDetailsRequests={deleteDetailsRequests}\n            deleteMessage={t`This execution environment is currently being used by other resources. Are you sure you want to delete it?`}\n          >\n            {t`Delete`}\n          </DeleteButton>\n        )}\n      </CardActionsRow>\n\n      {error && (\n        <AlertModal\n          isOpen={error}\n          onClose={dismissError}\n          title={t`Error`}\n          variant=\"error\"\n        />\n      )}\n    </CardBody>\n  );\n}\n\nexport default ExecutionEnvironmentDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}