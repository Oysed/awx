{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,Redirect,Route,Switch,useLocation,useParams}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import useRequest from'hooks/useRequest';import{InstanceGroupsAPI}from'api';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import JobList from'components/JobList';import InstanceGroupDetails from'./InstanceGroupDetails';import InstanceGroupEdit from'./InstanceGroupEdit';import Instances from'./Instances/Instances';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InstanceGroup(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useParams=useParams(),id=_useParams.id;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$InstanceGroups,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InstanceGroupsAPI.readDetail(id);case 2:_yield$InstanceGroups=_context.sent;data=_yield$InstanceGroups.data;return _context.abrupt(\"return\",{instanceGroup:data});case 5:case\"end\":return _context.stop();}}},_callee);})),[id]),{instanceGroup:null}),isLoading=_useRequest.isLoading,contentError=_useRequest.error,fetchInstanceGroups=_useRequest.request,instanceGroup=_useRequest.result.instanceGroup;useEffect(function(){fetchInstanceGroups();},[fetchInstanceGroups,pathname]);useEffect(function(){if(instanceGroup){setBreadcrumb(instanceGroup);}},[instanceGroup,setBreadcrumb]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Instance Groups\")]}),link:'/instance_groups',id:99,persistentFilterKey:'instanceGroups'},{name:/*i18n*/i18n._(\"Details\"),link:\"/instance_groups/\".concat(id,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Instances\"),link:\"/instance_groups/\".concat(id,\"/instances\"),id:1},{name:/*i18n*/i18n._(\"Jobs\"),link:\"/instance_groups/\".concat(id,\"/jobs\"),id:2}];if(!isLoading&&contentError){var _contentError$respons;return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:contentError,children:((_contentError$respons=contentError.response)===null||_contentError$respons===void 0?void 0:_contentError$respons.status)===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Instance group not found.\"),/*#__PURE__*/_jsx(Link,{to:\"/instance_groups\",children:/*i18n*/i18n._(\"View all instance groups\")})]})})})});}var cardHeader=/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray});if(['edit','instances/'].some(function(name){return pathname.includes(name);})){cardHeader=null;}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[cardHeader,isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&instanceGroup&&/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/instance_groups/:id\",to:\"/instance_groups/:id/details\",exact:true}),instanceGroup&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/instance_groups/:id/edit\",children:/*#__PURE__*/_jsx(InstanceGroupEdit,{instanceGroup:instanceGroup})}),/*#__PURE__*/_jsx(Route,{path:\"/instance_groups/:id/details\",children:/*#__PURE__*/_jsx(InstanceGroupDetails,{instanceGroup:instanceGroup})}),/*#__PURE__*/_jsx(Route,{path:\"/instance_groups/:id/instances\",children:/*#__PURE__*/_jsx(Instances,{instanceGroup:instanceGroup,setBreadcrumb:setBreadcrumb})}),/*#__PURE__*/_jsx(Route,{path:\"/instance_groups/:id/jobs\",children:/*#__PURE__*/_jsx(JobList,{showTypeColumn:true,defaultParams:{instance_group:instanceGroup.id}})})]})]})]})});}export default InstanceGroup;","map":{"version":3,"names":["React","useEffect","useCallback","Link","Redirect","Route","Switch","useLocation","useParams","CaretLeftIcon","Card","PageSection","useRequest","InstanceGroupsAPI","RoutedTabs","ContentError","ContentLoading","JobList","InstanceGroupDetails","InstanceGroupEdit","Instances","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","InstanceGroup","_ref","setBreadcrumb","_useParams","id","_useLocation","pathname","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$InstanceGroups","data","wrap","_callee$","_context","prev","next","readDetail","sent","abrupt","instanceGroup","stop","isLoading","contentError","error","fetchInstanceGroups","request","result","tabsArray","name","children","i18n","_","link","persistentFilterKey","concat","_contentError$respons","response","status","to","cardHeader","some","includes","from","exact","path","showTypeColumn","defaultParams","instance_group"],"sources":["/awx_devel/awx/ui/src/screens/InstanceGroup/InstanceGroup.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport {\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  useLocation,\n  useParams,\n} from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\n\nimport useRequest from 'hooks/useRequest';\nimport { InstanceGroupsAPI } from 'api';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport JobList from 'components/JobList';\n\nimport InstanceGroupDetails from './InstanceGroupDetails';\nimport InstanceGroupEdit from './InstanceGroupEdit';\nimport Instances from './Instances/Instances';\n\nfunction InstanceGroup({ setBreadcrumb }) {\n  const { id } = useParams();\n  const { pathname } = useLocation();\n\n  const {\n    isLoading,\n    error: contentError,\n    request: fetchInstanceGroups,\n    result: { instanceGroup },\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await InstanceGroupsAPI.readDetail(id);\n\n      return {\n        instanceGroup: data,\n      };\n    }, [id]),\n    { instanceGroup: null }\n  );\n\n  useEffect(() => {\n    fetchInstanceGroups();\n  }, [fetchInstanceGroups, pathname]);\n\n  useEffect(() => {\n    if (instanceGroup) {\n      setBreadcrumb(instanceGroup);\n    }\n  }, [instanceGroup, setBreadcrumb]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Instance Groups`}\n        </>\n      ),\n      link: '/instance_groups',\n      id: 99,\n      persistentFilterKey: 'instanceGroups',\n    },\n    {\n      name: t`Details`,\n      link: `/instance_groups/${id}/details`,\n      id: 0,\n    },\n    {\n      name: t`Instances`,\n      link: `/instance_groups/${id}/instances`,\n      id: 1,\n    },\n    {\n      name: t`Jobs`,\n      link: `/instance_groups/${id}/jobs`,\n      id: 2,\n    },\n  ];\n\n  if (!isLoading && contentError) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={contentError}>\n            {contentError.response?.status === 404 && (\n              <span>\n                {t`Instance group not found.`}\n\n                <Link to=\"/instance_groups\">{t`View all instance groups`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  let cardHeader = <RoutedTabs tabsArray={tabsArray} />;\n\n  if (['edit', 'instances/'].some((name) => pathname.includes(name))) {\n    cardHeader = null;\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {cardHeader}\n        {isLoading && <ContentLoading />}\n        {!isLoading && instanceGroup && (\n          <Switch>\n            <Redirect\n              from=\"/instance_groups/:id\"\n              to=\"/instance_groups/:id/details\"\n              exact\n            />\n            {instanceGroup && (\n              <>\n                <Route path=\"/instance_groups/:id/edit\">\n                  <InstanceGroupEdit instanceGroup={instanceGroup} />\n                </Route>\n                <Route path=\"/instance_groups/:id/details\">\n                  <InstanceGroupDetails instanceGroup={instanceGroup} />\n                </Route>\n                <Route path=\"/instance_groups/:id/instances\">\n                  <Instances\n                    instanceGroup={instanceGroup}\n                    setBreadcrumb={setBreadcrumb}\n                  />\n                </Route>\n                <Route path=\"/instance_groups/:id/jobs\">\n                  <JobList\n                    showTypeColumn\n                    defaultParams={{ instance_group: instanceGroup.id }}\n                  />\n                </Route>\n              </>\n            )}\n          </Switch>\n        )}\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default InstanceGroup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}