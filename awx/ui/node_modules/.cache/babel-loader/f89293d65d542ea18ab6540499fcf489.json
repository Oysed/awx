{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";var LabelsMixin=function LabelsMixin(parent){return/*#__PURE__*/function(_parent){_inherits(_class,_parent);var _super=_createSuper(_class);function _class(){_classCallCheck(this,_class);return _super.apply(this,arguments);}_createClass(_class,[{key:\"readLabels\",value:function readLabels(id,params){return this.http.get(\"\".concat(this.baseUrl).concat(id,\"/labels/\"),{params:params});}},{key:\"readAllLabels\",value:function readAllLabels(id){var _this=this;var fetchLabels=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var pageNo,labels,_yield$_this$http$get,data,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:pageNo=_args.length>0&&_args[0]!==undefined?_args[0]:1;labels=_args.length>1&&_args[1]!==undefined?_args[1]:[];_context.prev=2;_context.next=5;return _this.http.get(\"\".concat(_this.baseUrl).concat(id,\"/labels/\"),{params:{page:pageNo,page_size:200}});case 5:_yield$_this$http$get=_context.sent;data=_yield$_this$http$get.data;if(!(data!==null&&data!==void 0&&data.next)){_context.next=9;break;}return _context.abrupt(\"return\",fetchLabels(pageNo+1,labels.concat(data.results)));case 9:return _context.abrupt(\"return\",Promise.resolve({data:{results:labels.concat(data.results)}}));case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);return _context.abrupt(\"return\",Promise.reject(_context.t0));case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function fetchLabels(){return _ref.apply(this,arguments);};}();return fetchLabels();}},{key:\"associateLabel\",value:function associateLabel(id,label,orgId){return this.http.post(\"\".concat(this.baseUrl).concat(id,\"/labels/\"),{name:label.name,organization:orgId});}},{key:\"disassociateLabel\",value:function disassociateLabel(id,label){return this.http.post(\"\".concat(this.baseUrl).concat(id,\"/labels/\"),{id:label.id,disassociate:true});}}]);return _class;}(parent);};export default LabelsMixin;","map":{"version":3,"names":["LabelsMixin","parent","_parent","_inherits","_class","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","readLabels","id","params","http","get","concat","baseUrl","readAllLabels","_this","fetchLabels","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","pageNo","labels","_yield$_this$http$get","data","_args","wrap","_callee$","_context","prev","next","length","undefined","page","page_size","sent","abrupt","results","Promise","resolve","t0","reject","stop","associateLabel","label","orgId","post","name","organization","disassociateLabel","disassociate"],"sources":["/awx_devel/awx/ui/src/api/mixins/Labels.mixin.js"],"sourcesContent":["const LabelsMixin = (parent) =>\n  class extends parent {\n    readLabels(id, params) {\n      return this.http.get(`${this.baseUrl}${id}/labels/`, {\n        params,\n      });\n    }\n\n    readAllLabels(id) {\n      const fetchLabels = async (pageNo = 1, labels = []) => {\n        try {\n          const { data } = await this.http.get(`${this.baseUrl}${id}/labels/`, {\n            params: {\n              page: pageNo,\n              page_size: 200,\n            },\n          });\n          if (data?.next) {\n            return fetchLabels(pageNo + 1, labels.concat(data.results));\n          }\n          return Promise.resolve({\n            data: {\n              results: labels.concat(data.results),\n            },\n          });\n        } catch (error) {\n          return Promise.reject(error);\n        }\n      };\n\n      return fetchLabels();\n    }\n\n    associateLabel(id, label, orgId) {\n      return this.http.post(`${this.baseUrl}${id}/labels/`, {\n        name: label.name,\n        organization: orgId,\n      });\n    }\n\n    disassociateLabel(id, label) {\n      return this.http.post(`${this.baseUrl}${id}/labels/`, {\n        id: label.id,\n        disassociate: true,\n      });\n    }\n  };\n\nexport default LabelsMixin;\n"],"mappings":"6lBAAA,GAAM,CAAAA,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,MAAM,8BAAAC,OAAA,EAAAC,SAAA,CAAAC,MAAA,CAAAF,OAAA,MAAAG,MAAA,CAAAC,YAAA,CAAAF,MAAA,WAAAA,OAAA,EAAAG,eAAA,MAAAH,MAAA,SAAAC,MAAA,CAAAG,KAAA,MAAAC,SAAA,GAAAC,YAAA,CAAAN,MAAA,GAAAO,GAAA,cAAAC,KAAA,CAEvB,SAAAC,WAAWC,EAAE,CAAEC,MAAM,CAAE,CACrB,MAAO,KAAI,CAACC,IAAI,CAACC,GAAG,IAAAC,MAAA,CAAI,IAAI,CAACC,OAAO,EAAAD,MAAA,CAAGJ,EAAE,aAAY,CACnDC,MAAM,CAANA,MACF,CAAC,CAAC,CACJ,CAAC,GAAAJ,GAAA,iBAAAC,KAAA,CAED,SAAAQ,cAAcN,EAAE,CAAE,KAAAO,KAAA,MAChB,GAAM,CAAAC,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,MAAA,CAAAC,MAAA,CAAAC,qBAAA,CAAAC,IAAA,CAAAC,KAAA,CAAAvB,SAAA,QAAAgB,mBAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAOT,MAAM,CAAAI,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,CAAC,CAAEH,MAAM,CAAAG,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,EAAE,CAAAG,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEvB,CAAAhB,KAAI,CAACL,IAAI,CAACC,GAAG,IAAAC,MAAA,CAAIG,KAAI,CAACF,OAAO,EAAAD,MAAA,CAAGJ,EAAE,aAAY,CACnEC,MAAM,CAAE,CACNyB,IAAI,CAAEZ,MAAM,CACZa,SAAS,CAAE,GACb,CACF,CAAC,CAAC,QAAAX,qBAAA,CAAAK,QAAA,CAAAO,IAAA,CALMX,IAAI,CAAAD,qBAAA,CAAJC,IAAI,MAMRA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEM,IAAI,GAAAF,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAQ,MAAA,UACLrB,WAAW,CAACM,MAAM,CAAG,CAAC,CAAEC,MAAM,CAACX,MAAM,CAACa,IAAI,CAACa,OAAO,CAAC,CAAC,gBAAAT,QAAA,CAAAQ,MAAA,UAEtDE,OAAO,CAACC,OAAO,CAAC,CACrBf,IAAI,CAAE,CACJa,OAAO,CAAEf,MAAM,CAACX,MAAM,CAACa,IAAI,CAACa,OAAO,CACrC,CACF,CAAC,CAAC,UAAAT,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,oBAAAA,QAAA,CAAAQ,MAAA,UAEKE,OAAO,CAACG,MAAM,CAAAb,QAAA,CAAAY,EAAM,CAAC,2BAAAZ,QAAA,CAAAc,IAAA,OAAAtB,OAAA,iBAE/B,kBAnBK,CAAAL,WAAWA,CAAA,SAAAC,IAAA,CAAAf,KAAA,MAAAC,SAAA,OAmBhB,CAED,MAAO,CAAAa,WAAW,CAAC,CAAC,CACtB,CAAC,GAAAX,GAAA,kBAAAC,KAAA,CAED,SAAAsC,eAAepC,EAAE,CAAEqC,KAAK,CAAEC,KAAK,CAAE,CAC/B,MAAO,KAAI,CAACpC,IAAI,CAACqC,IAAI,IAAAnC,MAAA,CAAI,IAAI,CAACC,OAAO,EAAAD,MAAA,CAAGJ,EAAE,aAAY,CACpDwC,IAAI,CAAEH,KAAK,CAACG,IAAI,CAChBC,YAAY,CAAEH,KAChB,CAAC,CAAC,CACJ,CAAC,GAAAzC,GAAA,qBAAAC,KAAA,CAED,SAAA4C,kBAAkB1C,EAAE,CAAEqC,KAAK,CAAE,CAC3B,MAAO,KAAI,CAACnC,IAAI,CAACqC,IAAI,IAAAnC,MAAA,CAAI,IAAI,CAACC,OAAO,EAAAD,MAAA,CAAGJ,EAAE,aAAY,CACpDA,EAAE,CAAEqC,KAAK,CAACrC,EAAE,CACZ2C,YAAY,CAAE,IAChB,CAAC,CAAC,CACJ,CAAC,WAAArD,MAAA,GA5CWH,MAAM,GA6CnB,CAEH,cAAe,CAAAD,WAAW"},"metadata":{},"sourceType":"module"}