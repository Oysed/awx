{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{i18n}from\"@lingui/core\";import React from'react';import{Tr,Td}from'@patternfly/react-table';import{Link}from'react-router-dom';import{WorkflowApproval}from'types';import{formatDateString}from'util/dates';import StatusLabel from'components/StatusLabel';import JobCancelButton from'components/JobCancelButton';import{ActionItem,ActionsTd}from'components/PaginatedTable';import{getPendingLabel,getStatus,getTooltip}from'../shared/WorkflowApprovalUtils';import WorkflowApprovalButton from'../shared/WorkflowApprovalButton';import WorkflowDenyButton from'../shared/WorkflowDenyButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WorkflowApprovalListItem(_ref){var _workflowApproval$sum;var workflowApproval=_ref.workflowApproval,isSelected=_ref.isSelected,onSelect=_ref.onSelect,detailUrl=_ref.detailUrl,rowIndex=_ref.rowIndex;var hasBeenActedOn=workflowApproval.status==='successful'||workflowApproval.status==='failed'||workflowApproval.status==='canceled';var labelId=\"check-action-\".concat(workflowApproval.id);var workflowJob=workflowApproval===null||workflowApproval===void 0?void 0:(_workflowApproval$sum=workflowApproval.summary_fields)===null||_workflowApproval$sum===void 0?void 0:_workflowApproval$sum.source_workflow_job;var status=getStatus(workflowApproval);return/*#__PURE__*/_jsxs(Tr,{id:\"workflow-approval-row-\".concat(workflowApproval.id),children:[/*#__PURE__*/_jsx(Td,{select:{rowIndex:rowIndex,isSelected:isSelected,onSelect:onSelect},dataLabel:/*i18n*/i18n._(\"Selected\")}),/*#__PURE__*/_jsx(Td,{id:labelId,dataLabel:/*i18n*/i18n._(\"Name\"),children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(detailUrl),children:workflowJob&&workflowJob!==null&&workflowJob!==void 0&&workflowJob.id?/*#__PURE__*/_jsx(\"b\",{children:\"\".concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.id,\" - \").concat(workflowApproval===null||workflowApproval===void 0?void 0:workflowApproval.name)}):/*#__PURE__*/_jsxs(\"b\",{children:[/*i18n*/i18n._(\"Deleted\"),\" \",\"- \".concat(workflowApproval===null||workflowApproval===void 0?void 0:workflowApproval.name)]})})}),/*#__PURE__*/_jsx(Td,{children:workflowJob&&workflowJob!==null&&workflowJob!==void 0&&workflowJob.id?/*#__PURE__*/_jsx(Link,{to:\"/jobs/workflow/\".concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.id),children:\"\".concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.id,\" - \").concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.name)}):/*i18n*/i18n._(\"Deleted\")}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Started\"),children:formatDateString(workflowApproval.started)}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Status\"),children:workflowApproval.status==='pending'?/*#__PURE__*/_jsx(StatusLabel,{status:workflowApproval.status,children:getPendingLabel(workflowApproval)}):/*#__PURE__*/_jsx(StatusLabel,{tooltipContent:getTooltip(workflowApproval),status:status})}),/*#__PURE__*/_jsxs(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),children:[/*#__PURE__*/_jsx(ActionItem,{visible:true,tooltip:hasBeenActedOn?/*i18n*/i18n._(\"This has already been acted on\"):/*i18n*/i18n._(\"Approve\"),children:/*#__PURE__*/_jsx(WorkflowApprovalButton,{workflowApproval:workflowApproval})}),/*#__PURE__*/_jsx(ActionItem,{visible:true,tooltip:hasBeenActedOn?/*i18n*/i18n._(\"This has already been acted on\"):/*i18n*/i18n._(\"Deny\"),children:/*#__PURE__*/_jsx(WorkflowDenyButton,{workflowApproval:workflowApproval})}),/*#__PURE__*/_jsx(ActionItem,{visible:true,children:/*#__PURE__*/_jsx(JobCancelButton,{title:/*i18n*/i18n._(\"Cancel Workflow\"),showIconButton:true,job:_objectSpread(_objectSpread({},workflowApproval.summary_fields.source_workflow_job),{},{type:'workflow_job'}),buttonText:/*i18n*/i18n._(\"Cancel Workflow\"),isDisabled:hasBeenActedOn,tooltip:hasBeenActedOn?/*i18n*/i18n._(\"This has already been acted on\"):/*i18n*/i18n._(\"Cancel\"),cancelationMessage:/*i18n*/i18n._(\"This will cancel all subsequent nodes in this workflow\")})})]})]});}export default WorkflowApprovalListItem;","map":{"version":3,"names":["React","Tr","Td","Link","WorkflowApproval","formatDateString","StatusLabel","JobCancelButton","ActionItem","ActionsTd","getPendingLabel","getStatus","getTooltip","WorkflowApprovalButton","WorkflowDenyButton","jsx","_jsx","jsxs","_jsxs","WorkflowApprovalListItem","_ref","_workflowApproval$sum","workflowApproval","isSelected","onSelect","detailUrl","rowIndex","hasBeenActedOn","status","labelId","concat","id","workflowJob","summary_fields","source_workflow_job","children","select","dataLabel","i18n","_","to","name","started","tooltipContent","visible","tooltip","title","showIconButton","job","_objectSpread","type","buttonText","isDisabled","cancelationMessage"],"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApprovalList/WorkflowApprovalListItem.js"],"sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { string, bool, func } from 'prop-types';\nimport { Tr, Td } from '@patternfly/react-table';\nimport { Link } from 'react-router-dom';\nimport { WorkflowApproval } from 'types';\nimport { formatDateString } from 'util/dates';\nimport StatusLabel from 'components/StatusLabel';\nimport JobCancelButton from 'components/JobCancelButton';\nimport { ActionItem, ActionsTd } from 'components/PaginatedTable';\nimport {\n  getPendingLabel,\n  getStatus,\n  getTooltip,\n} from '../shared/WorkflowApprovalUtils';\nimport WorkflowApprovalButton from '../shared/WorkflowApprovalButton';\nimport WorkflowDenyButton from '../shared/WorkflowDenyButton';\n\nfunction WorkflowApprovalListItem({\n  workflowApproval,\n  isSelected,\n  onSelect,\n  detailUrl,\n  rowIndex,\n}) {\n  const hasBeenActedOn =\n    workflowApproval.status === 'successful' ||\n    workflowApproval.status === 'failed' ||\n    workflowApproval.status === 'canceled';\n  const labelId = `check-action-${workflowApproval.id}`;\n  const workflowJob = workflowApproval?.summary_fields?.source_workflow_job;\n  const status = getStatus(workflowApproval);\n  return (\n    <Tr id={`workflow-approval-row-${workflowApproval.id}`}>\n      <Td\n        select={{\n          rowIndex,\n          isSelected,\n          onSelect,\n        }}\n        dataLabel={t`Selected`}\n      />\n      <Td id={labelId} dataLabel={t`Name`}>\n        <Link to={`${detailUrl}`}>\n          {workflowJob && workflowJob?.id ? (\n            <b>{`${workflowJob?.id} - ${workflowApproval?.name}`}</b>\n          ) : (\n            <b>\n              {t`Deleted`} {`- ${workflowApproval?.name}`}\n            </b>\n          )}\n        </Link>\n      </Td>\n      <Td>\n        {workflowJob && workflowJob?.id ? (\n          <Link to={`/jobs/workflow/${workflowJob?.id}`}>\n            {`${workflowJob?.id} - ${workflowJob?.name}`}\n          </Link>\n        ) : (\n          t`Deleted`\n        )}\n      </Td>\n      <Td dataLabel={t`Started`}>\n        {formatDateString(workflowApproval.started)}\n      </Td>\n      <Td dataLabel={t`Status`}>\n        {workflowApproval.status === 'pending' ? (\n          <StatusLabel status={workflowApproval.status}>\n            {getPendingLabel(workflowApproval)}\n          </StatusLabel>\n        ) : (\n          <StatusLabel\n            tooltipContent={getTooltip(workflowApproval)}\n            status={status}\n          />\n        )}\n      </Td>\n      <ActionsTd dataLabel={t`Actions`}>\n        <ActionItem\n          visible\n          tooltip={\n            hasBeenActedOn ? t`This has already been acted on` : t`Approve`\n          }\n        >\n          <WorkflowApprovalButton workflowApproval={workflowApproval} />\n        </ActionItem>\n        <ActionItem\n          visible\n          tooltip={hasBeenActedOn ? t`This has already been acted on` : t`Deny`}\n        >\n          <WorkflowDenyButton workflowApproval={workflowApproval} />\n        </ActionItem>\n        <ActionItem visible>\n          <JobCancelButton\n            title={t`Cancel Workflow`}\n            showIconButton\n            job={{\n              ...workflowApproval.summary_fields.source_workflow_job,\n              type: 'workflow_job',\n            }}\n            buttonText={t`Cancel Workflow`}\n            isDisabled={hasBeenActedOn}\n            tooltip={\n              hasBeenActedOn ? t`This has already been acted on` : t`Cancel`\n            }\n            cancelationMessage={t`This will cancel all subsequent nodes in this workflow\n            `}\n          />\n        </ActionItem>\n      </ActionsTd>\n    </Tr>\n  );\n}\n\nWorkflowApprovalListItem.propTypes = {\n  workflowApproval: WorkflowApproval.isRequired,\n  detailUrl: string.isRequired,\n  isSelected: bool.isRequired,\n  onSelect: func.isRequired,\n};\n\nexport default WorkflowApprovalListItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}