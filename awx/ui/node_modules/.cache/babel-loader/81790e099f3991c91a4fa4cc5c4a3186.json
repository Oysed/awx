{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React,{useEffect}from'react';import{useField}from'formik';import{Button,Flex,FormGroup}from'@patternfly/react-core';import getDocsBaseUrl from'util/getDocsBaseUrl';import{required}from'util/validators';import FormField,{CheckboxField,PasswordField}from'components/FormField';import{useConfig}from'contexts/Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ANALYTICSLINK='https://www.ansible.com/products/automation-analytics';function AnalyticsStep(){var config=useConfig();var _useField=useField('manifest_file'),_useField2=_slicedToArray(_useField,1),manifest=_useField2[0];var _useField3=useField('insights'),_useField4=_slicedToArray(_useField3,1),insights=_useField4[0];var _useField5=useField('username'),_useField6=_slicedToArray(_useField5,3),usernameHelpers=_useField6[2];var _useField7=useField('password'),_useField8=_slicedToArray(_useField7,3),passwordHelpers=_useField8[2];var requireCredentialFields=manifest.value&&insights.value;useEffect(function(){if(!requireCredentialFields){usernameHelpers.setValue('');passwordHelpers.setValue('');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[requireCredentialFields]);return/*#__PURE__*/_jsxs(Flex,{spaceItems:{default:'spaceItemsMd'},direction:{default:'column'},children:[/*#__PURE__*/_jsx(Trans,{id:\"User and Automation Analytics\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Trans,{id:\"By default, we collect and transmit analytics data on the service usage to Red Hat. There are two categories of data collected by the service. For more information, see <0>this Tower documentation page</0>. Uncheck the following boxes to disable this feature.\",components:{0:/*#__PURE__*/_jsx(Button,{component:\"a\",href:\"\".concat(getDocsBaseUrl(config),\"/html/administration/usability_data_collection.html#automation-analytics\"),variant:\"link\",isInline:true,ouiaId:\"tower-documentation-link\",target:\"_blank\",rel:\"noopener noreferrer\"})}})}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"pendo\",children:/*#__PURE__*/_jsx(CheckboxField,{name:\"pendo\",isDisabled:!config.me.is_superuser,\"aria-label\":/*i18n*/i18n._(\"User analytics\"),label:/*i18n*/i18n._(\"User analytics\"),id:\"pendo-field\",description:/*i18n*/i18n._(\"This data is used to enhance\\nfuture releases of the Tower Software and help\\nstreamline customer experience and success.\")})}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"insights\",children:/*#__PURE__*/_jsx(CheckboxField,{name:\"insights\",isDisabled:!config.me.is_superuser,\"aria-label\":/*i18n*/i18n._(\"Automation Analytics\"),label:/*i18n*/i18n._(\"Automation Analytics\"),id:\"insights-field\",description:/*i18n*/i18n._(\"This data is used to enhance\\nfuture releases of the Software and to provide\\nAutomation Analytics.\")})}),requireCredentialFields&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Trans,{id:\"Provide your Red Hat or Red Hat Satellite credentials to enable Automation Analytics.\"})}),/*#__PURE__*/_jsx(FormField,{id:\"username-field\",isDisabled:!config.me.is_superuser,isRequired:requireCredentialFields,label:/*i18n*/i18n._(\"Username\"),name:\"username\",type:\"text\",validate:required(null)}),/*#__PURE__*/_jsx(PasswordField,{id:\"password-field\",isDisabled:!config.me.is_superuser,isRequired:requireCredentialFields,label:/*i18n*/i18n._(\"Password\"),name:\"password\",validate:required(null)})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:{default:'alignItemsCenter'},children:[/*#__PURE__*/_jsx(\"img\",{width:\"300\",src:\"static/media/insights-analytics-dashboard.jpeg\",alt:/*i18n*/i18n._(\"Automation Analytics dashboard\")}),/*#__PURE__*/_jsx(Button,{component:\"a\",href:ANALYTICSLINK,target:\"_blank\",variant:\"secondary\",ouiaId:\"analytics-link\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(Trans,{id:\"Learn more about Automation Analytics\"})})]})]});}export default AnalyticsStep;","map":{"version":3,"names":["React","useEffect","useField","Button","Flex","FormGroup","getDocsBaseUrl","required","FormField","CheckboxField","PasswordField","useConfig","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ANALYTICSLINK","AnalyticsStep","config","_useField","_useField2","_slicedToArray","manifest","_useField3","_useField4","insights","_useField5","_useField6","usernameHelpers","_useField7","_useField8","passwordHelpers","requireCredentialFields","value","setValue","spaceItems","default","direction","children","Trans","id","components","0","component","href","concat","variant","isInline","ouiaId","target","rel","fieldId","name","isDisabled","me","is_superuser","i18n","_","label","description","isRequired","type","validate","alignItems","width","src","alt"],"sources":["/awx_devel/awx/ui/src/screens/Setting/Subscription/SubscriptionEdit/AnalyticsStep.js"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { Trans, t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport { Button, Flex, FormGroup } from '@patternfly/react-core';\nimport getDocsBaseUrl from 'util/getDocsBaseUrl';\nimport { required } from 'util/validators';\nimport FormField, { CheckboxField, PasswordField } from 'components/FormField';\nimport { useConfig } from 'contexts/Config';\n\nconst ANALYTICSLINK = 'https://www.ansible.com/products/automation-analytics';\n\nfunction AnalyticsStep() {\n  const config = useConfig();\n  const [manifest] = useField('manifest_file');\n  const [insights] = useField('insights');\n  const [, , usernameHelpers] = useField('username');\n  const [, , passwordHelpers] = useField('password');\n  const requireCredentialFields = manifest.value && insights.value;\n\n  useEffect(() => {\n    if (!requireCredentialFields) {\n      usernameHelpers.setValue('');\n      passwordHelpers.setValue('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [requireCredentialFields]);\n\n  return (\n    <Flex\n      spaceItems={{ default: 'spaceItemsMd' }}\n      direction={{ default: 'column' }}\n    >\n      <Trans>User and Automation Analytics</Trans>\n      <p>\n        <Trans>\n          By default, we collect and transmit analytics data on the service\n          usage to Red Hat. There are two categories of data collected by the\n          service. For more information, see{' '}\n          <Button\n            component=\"a\"\n            href={`${getDocsBaseUrl(\n              config\n            )}/html/administration/usability_data_collection.html#automation-analytics`}\n            variant=\"link\"\n            isInline\n            ouiaId=\"tower-documentation-link\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            this Tower documentation page\n          </Button>\n          . Uncheck the following boxes to disable this feature.\n        </Trans>\n      </p>\n      <FormGroup fieldId=\"pendo\">\n        <CheckboxField\n          name=\"pendo\"\n          isDisabled={!config.me.is_superuser}\n          aria-label={t`User analytics`}\n          label={t`User analytics`}\n          id=\"pendo-field\"\n          description={t`This data is used to enhance\n                   future releases of the Tower Software and help\n                   streamline customer experience and success.`}\n        />\n      </FormGroup>\n      <FormGroup fieldId=\"insights\">\n        <CheckboxField\n          name=\"insights\"\n          isDisabled={!config.me.is_superuser}\n          aria-label={t`Automation Analytics`}\n          label={t`Automation Analytics`}\n          id=\"insights-field\"\n          description={t`This data is used to enhance\n                   future releases of the Software and to provide\n                   Automation Analytics.`}\n        />\n      </FormGroup>\n      {requireCredentialFields && (\n        <>\n          <br />\n          <p>\n            <Trans>\n              Provide your Red Hat or Red Hat Satellite credentials to enable\n              Automation Analytics.\n            </Trans>\n          </p>\n          <FormField\n            id=\"username-field\"\n            isDisabled={!config.me.is_superuser}\n            isRequired={requireCredentialFields}\n            label={t`Username`}\n            name=\"username\"\n            type=\"text\"\n            validate={required(null)}\n          />\n          <PasswordField\n            id=\"password-field\"\n            isDisabled={!config.me.is_superuser}\n            isRequired={requireCredentialFields}\n            label={t`Password`}\n            name=\"password\"\n            validate={required(null)}\n          />\n        </>\n      )}\n      <Flex alignItems={{ default: 'alignItemsCenter' }}>\n        <img\n          width=\"300\"\n          src=\"static/media/insights-analytics-dashboard.jpeg\"\n          alt={t`Automation Analytics dashboard`}\n        />\n        <Button\n          component=\"a\"\n          href={ANALYTICSLINK}\n          target=\"_blank\"\n          variant=\"secondary\"\n          ouiaId=\"analytics-link\"\n          rel=\"noopener noreferrer\"\n        >\n          <Trans>Learn more about Automation Analytics</Trans>\n        </Button>\n      </Flex>\n    </Flex>\n  );\n}\nexport default AnalyticsStep;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}