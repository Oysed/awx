{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import*as d3 from'd3';import{PageContextConsumer}from'@patternfly/react-core';import UsageChartTooltip from'./UsageChartTooltip';import{jsx as _jsx}from\"react/jsx-runtime\";function UsageChart(_ref){var id=_ref.id,data=_ref.data,height=_ref.height,pageContext=_ref.pageContext;var isNavOpen=pageContext.isNavOpen;// Methods\nvar draw=useCallback(function(){var margin={top:15,right:25,bottom:105,left:70};var getWidth=function getWidth(){var width;// This is in an a try/catch due to an error from jest.\n// Even though the d3.select returns a valid selector with\n// style function, it says it is null in the test\ntry{width=parseInt(d3.select(\"#\".concat(id)).style('width'),10)-margin.left-margin.right||700;}catch(error){width=700;}return width;};// Clear our chart container element first\nd3.selectAll(\"#\".concat(id,\" > *\")).remove();var width=getWidth();function transition(path){path.transition().duration(1000).attrTween('stroke-dasharray',tweenDash);}function tweenDash(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++){params[_key]=arguments[_key];}var l=params[2][params[1]].getTotalLength();var i=d3.interpolateString(\"0,\".concat(l),\"\".concat(l,\",\").concat(l));return function(val){return i(val);};}var x=d3.scaleTime().rangeRound([0,width]);var y=d3.scaleLinear().range([height,0]);// [consumed, capacity]\nvar colors=d3.scaleOrdinal(['#06C','#C9190B']);var svg=d3.select(\"#\".concat(id)).append('svg').attr('width',width+margin.left+margin.right).attr('height',height+margin.top+margin.bottom).attr('z',100).append('g').attr('id','chart-container').attr('transform',\"translate(\".concat(margin.left,\", \").concat(margin.top,\")\"));// Tooltip\nvar tooltip=new UsageChartTooltip({svg:\"#\".concat(id),colors:colors,label:/*i18n*/i18n._(\"Hosts\")});var parseTime=d3.timeParse('%Y-%m-%d');var formattedData=data===null||data===void 0?void 0:data.reduce(function(formatted,_ref2){var date=_ref2.date,license_consumed=_ref2.license_consumed,license_capacity=_ref2.license_capacity;var MONTH=parseTime(date);var CONSUMED=+license_consumed;var CAPACITY=+license_capacity;return formatted.concat({MONTH:MONTH,CONSUMED:CONSUMED,CAPACITY:CAPACITY});},[]);// Scale the range of the data\nvar largestY=formattedData===null||formattedData===void 0?void 0:formattedData.reduce(function(a_max,b){var b_max=Math.max(b.CONSUMED>b.CAPACITY?b.CONSUMED:b.CAPACITY);return a_max>b_max?a_max:b_max;},0);x.domain(d3.extent(formattedData,function(d){return d.MONTH;}));y.domain([0,largestY>4?largestY+Math.max(largestY/10,1):5]).nice();var capacityLine=d3.line().curve(d3.curveMonotoneX).x(function(d){return x(d.MONTH);}).y(function(d){return y(d.CAPACITY);});var consumedLine=d3.line().curve(d3.curveMonotoneX).x(function(d){return x(d.MONTH);}).y(function(d){return y(d.CONSUMED);});// Add the Y Axis\nsvg.append('g').attr('class','y-axis').call(d3.axisLeft(y).ticks(largestY>3?Math.min(largestY+Math.max(largestY/10,1),10):5).tickSize(-width).tickFormat(d3.format('d'))).selectAll('line').attr('stroke','#d7d7d7');svg.selectAll('.y-axis .tick text').attr('x',-5).attr('font-size','14');// text label for the y axis\nsvg.append('text').attr('transform','rotate(-90)').attr('y',0-margin.left).attr('x',0-height/2).attr('dy','1em').style('text-anchor','middle').text(/*i18n*/i18n._(\"Unique Hosts\"));// Add the X Axis\nvar ticks;var maxTicks=Math.round(formattedData.length/(formattedData.length/2));ticks=formattedData.map(function(d){return d.MONTH;});if(formattedData.length===13){ticks=formattedData.map(function(d,i){return i%maxTicks===0?d.MONTH:undefined;}).filter(function(item){return item;});}svg.select('.domain').attr('stroke','#d7d7d7');svg.append('g').attr('class','x-axis').attr('transform',\"translate(0, \".concat(height,\")\")).call(d3.axisBottom(x).tickValues(ticks).tickSize(-height).tickFormat(d3.timeFormat('%m/%y'))).selectAll('line').attr('stroke','#d7d7d7');svg.selectAll('.x-axis .tick text').attr('x',-25).attr('font-size','14').attr('transform','rotate(-65)');// text label for the x axis\nsvg.append('text').attr('transform',\"translate(\".concat(width/2,\" , \").concat(height+margin.top+50,\")\")).style('text-anchor','middle').text(/*i18n*/i18n._(\"Month\"));var vertical=svg.append('path').attr('class','mouse-line').style('stroke','black').style('stroke-width','3px').style('stroke-dasharray','3, 3').style('opacity','0');var handleMouseOver=function handleMouseOver(event,d){tooltip.handleMouseOver(event,d);// show vertical line\nvertical.transition().style('opacity','1');};var handleMouseMove=function mouseMove(event){var _d3$pointer=d3.pointer(event),_d3$pointer2=_slicedToArray(_d3$pointer,1),pointerX=_d3$pointer2[0];vertical.attr('d',function(){return\"M\".concat(pointerX,\",\").concat(height,\" \").concat(pointerX,\",\",0);});};var handleMouseOut=function handleMouseOut(){// hide tooltip\ntooltip.handleMouseOut();// hide vertical line\nvertical.transition().style('opacity',0);};var dateFormat=d3.timeFormat('%m/%y');// Add the consumed line path\nsvg.append('path').data([formattedData]).attr('class','line').style('fill','none').style('stroke',function(){return colors(1);}).attr('stroke-width',2).attr('d',consumedLine).call(transition);// create our consumed line circles\nsvg.selectAll('dot').data(formattedData).enter().append('circle').attr('r',3).style('stroke',function(){return colors(1);}).style('fill',function(){return colors(1);}).attr('cx',function(d){return x(d.MONTH);}).attr('cy',function(d){return y(d.CONSUMED);}).attr('id',function(d){return\"consumed-dot-\".concat(dateFormat(d.MONTH));}).on('mouseover',function(event,d){return handleMouseOver(event,d);}).on('mousemove',handleMouseMove).on('mouseout',handleMouseOut);// Add the capacity line path\nsvg.append('path').data([formattedData]).attr('class','line').style('fill','none').style('stroke',function(){return colors(0);}).attr('stroke-width',2).attr('d',capacityLine).call(transition);// create our capacity line circles\nsvg.selectAll('dot').data(formattedData).enter().append('circle').attr('r',3).style('stroke',function(){return colors(0);}).style('fill',function(){return colors(0);}).attr('cx',function(d){return x(d.MONTH);}).attr('cy',function(d){return y(d.CAPACITY);}).attr('id',function(d){return\"capacity-dot-\".concat(dateFormat(d.MONTH));}).on('mouseover',handleMouseOver).on('mousemove',handleMouseMove).on('mouseout',handleMouseOut);// Create legend\nvar legend_keys=[/*i18n*/i18n._(\"Subscriptions consumed\"),/*i18n*/i18n._(\"Subscription capacity\")];var totalWidth=width/2-175;var lineLegend=svg.selectAll('.lineLegend').data(legend_keys).enter().append('g').attr('class','lineLegend').each(function formatLegend(){var current=d3.select(this);current.attr('transform',\"translate(\".concat(totalWidth,\", \").concat(height+90,\")\"));totalWidth+=200;});lineLegend.append('text').text(function(d){return d;}).attr('font-size','14').attr('transform','translate(15,9)');// align texts with boxes\nlineLegend.append('rect').attr('fill',function(d){return colors(d);}).attr('width',10).attr('height',10);},[data,height,id]);useEffect(function(){draw();},[draw,isNavOpen]);useEffect(function(){function handleResize(){draw();}window.addEventListener('resize',handleResize);handleResize();return function(){return window.removeEventListener('resize',handleResize);};},[draw]);return/*#__PURE__*/_jsx(\"div\",{id:id});}var withPageContext=function withPageContext(Component){return function contextComponent(props){return/*#__PURE__*/_jsx(PageContextConsumer,{children:function children(pageContext){return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{pageContext:pageContext}));}});};};export default withPageContext(UsageChart);","map":{"version":3,"names":["React","useEffect","useCallback","d3","PageContextConsumer","UsageChartTooltip","jsx","_jsx","UsageChart","_ref","id","data","height","pageContext","isNavOpen","draw","margin","top","right","bottom","left","getWidth","width","parseInt","select","concat","style","error","selectAll","remove","transition","path","duration","attrTween","tweenDash","_len","arguments","length","params","Array","_key","l","getTotalLength","i","interpolateString","val","x","scaleTime","rangeRound","y","scaleLinear","range","colors","scaleOrdinal","svg","append","attr","tooltip","label","i18n","_","parseTime","timeParse","formattedData","reduce","formatted","_ref2","date","license_consumed","license_capacity","MONTH","CONSUMED","CAPACITY","largestY","a_max","b","b_max","Math","max","domain","extent","d","nice","capacityLine","line","curve","curveMonotoneX","consumedLine","call","axisLeft","ticks","min","tickSize","tickFormat","format","text","maxTicks","round","map","undefined","filter","item","axisBottom","tickValues","timeFormat","vertical","handleMouseOver","event","handleMouseMove","mouseMove","_d3$pointer","pointer","_d3$pointer2","_slicedToArray","pointerX","handleMouseOut","dateFormat","enter","on","legend_keys","totalWidth","lineLegend","each","formatLegend","current","handleResize","window","addEventListener","removeEventListener","withPageContext","Component","contextComponent","props","children","_objectSpread"],"sources":["/awx_devel/awx/ui/src/screens/SubscriptionUsage/ChartComponents/UsageChart.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { string, number, shape, arrayOf } from 'prop-types';\nimport * as d3 from 'd3';\nimport { t } from '@lingui/macro';\nimport { PageContextConsumer } from '@patternfly/react-core';\nimport UsageChartTooltip from './UsageChartTooltip';\n\nfunction UsageChart({ id, data, height, pageContext }) {\n  const { isNavOpen } = pageContext;\n\n  // Methods\n  const draw = useCallback(() => {\n    const margin = { top: 15, right: 25, bottom: 105, left: 70 };\n\n    const getWidth = () => {\n      let width;\n      // This is in an a try/catch due to an error from jest.\n      // Even though the d3.select returns a valid selector with\n      // style function, it says it is null in the test\n      try {\n        width =\n          parseInt(d3.select(`#${id}`).style('width'), 10) -\n            margin.left -\n            margin.right || 700;\n      } catch (error) {\n        width = 700;\n      }\n      return width;\n    };\n\n    // Clear our chart container element first\n    d3.selectAll(`#${id} > *`).remove();\n    const width = getWidth();\n\n    function transition(path) {\n      path.transition().duration(1000).attrTween('stroke-dasharray', tweenDash);\n    }\n\n    function tweenDash(...params) {\n      const l = params[2][params[1]].getTotalLength();\n      const i = d3.interpolateString(`0,${l}`, `${l},${l}`);\n      return (val) => i(val);\n    }\n\n    const x = d3.scaleTime().rangeRound([0, width]);\n    const y = d3.scaleLinear().range([height, 0]);\n\n    // [consumed, capacity]\n    const colors = d3.scaleOrdinal(['#06C', '#C9190B']);\n    const svg = d3\n      .select(`#${id}`)\n      .append('svg')\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n      .attr('z', 100)\n      .append('g')\n      .attr('id', 'chart-container')\n      .attr('transform', `translate(${margin.left}, ${margin.top})`);\n    // Tooltip\n    const tooltip = new UsageChartTooltip({\n      svg: `#${id}`,\n      colors,\n      label: t`Hosts`,\n    });\n\n    const parseTime = d3.timeParse('%Y-%m-%d');\n\n    const formattedData = data?.reduce(\n      (formatted, { date, license_consumed, license_capacity }) => {\n        const MONTH = parseTime(date);\n        const CONSUMED = +license_consumed;\n        const CAPACITY = +license_capacity;\n        return formatted.concat({ MONTH, CONSUMED, CAPACITY });\n      },\n      []\n    );\n\n    // Scale the range of the data\n    const largestY = formattedData?.reduce((a_max, b) => {\n      const b_max = Math.max(b.CONSUMED > b.CAPACITY ? b.CONSUMED : b.CAPACITY);\n      return a_max > b_max ? a_max : b_max;\n    }, 0);\n    x.domain(d3.extent(formattedData, (d) => d.MONTH));\n    y.domain([\n      0,\n      largestY > 4 ? largestY + Math.max(largestY / 10, 1) : 5,\n    ]).nice();\n\n    const capacityLine = d3\n      .line()\n      .curve(d3.curveMonotoneX)\n      .x((d) => x(d.MONTH))\n      .y((d) => y(d.CAPACITY));\n\n    const consumedLine = d3\n      .line()\n      .curve(d3.curveMonotoneX)\n      .x((d) => x(d.MONTH))\n      .y((d) => y(d.CONSUMED));\n\n    // Add the Y Axis\n    svg\n      .append('g')\n      .attr('class', 'y-axis')\n      .call(\n        d3\n          .axisLeft(y)\n          .ticks(\n            largestY > 3\n              ? Math.min(largestY + Math.max(largestY / 10, 1), 10)\n              : 5\n          )\n          .tickSize(-width)\n          .tickFormat(d3.format('d'))\n      )\n      .selectAll('line')\n      .attr('stroke', '#d7d7d7');\n    svg.selectAll('.y-axis .tick text').attr('x', -5).attr('font-size', '14');\n\n    // text label for the y axis\n    svg\n      .append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0 - margin.left)\n      .attr('x', 0 - height / 2)\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text(t`Unique Hosts`);\n\n    // Add the X Axis\n    let ticks;\n    const maxTicks = Math.round(\n      formattedData.length / (formattedData.length / 2)\n    );\n    ticks = formattedData.map((d) => d.MONTH);\n    if (formattedData.length === 13) {\n      ticks = formattedData\n        .map((d, i) => (i % maxTicks === 0 ? d.MONTH : undefined))\n        .filter((item) => item);\n    }\n\n    svg.select('.domain').attr('stroke', '#d7d7d7');\n\n    svg\n      .append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(0, ${height})`)\n      .call(\n        d3\n          .axisBottom(x)\n          .tickValues(ticks)\n          .tickSize(-height)\n          .tickFormat(d3.timeFormat('%m/%y'))\n      )\n      .selectAll('line')\n      .attr('stroke', '#d7d7d7');\n\n    svg\n      .selectAll('.x-axis .tick text')\n      .attr('x', -25)\n      .attr('font-size', '14')\n      .attr('transform', 'rotate(-65)');\n\n    // text label for the x axis\n    svg\n      .append('text')\n      .attr(\n        'transform',\n        `translate(${width / 2} , ${height + margin.top + 50})`\n      )\n      .style('text-anchor', 'middle')\n      .text(t`Month`);\n    const vertical = svg\n      .append('path')\n      .attr('class', 'mouse-line')\n      .style('stroke', 'black')\n      .style('stroke-width', '3px')\n      .style('stroke-dasharray', '3, 3')\n      .style('opacity', '0');\n\n    const handleMouseOver = (event, d) => {\n      tooltip.handleMouseOver(event, d);\n      // show vertical line\n      vertical.transition().style('opacity', '1');\n    };\n    const handleMouseMove = function mouseMove(event) {\n      const [pointerX] = d3.pointer(event);\n      vertical.attr('d', () => `M${pointerX},${height} ${pointerX},${0}`);\n    };\n\n    const handleMouseOut = () => {\n      // hide tooltip\n      tooltip.handleMouseOut();\n      // hide vertical line\n      vertical.transition().style('opacity', 0);\n    };\n\n    const dateFormat = d3.timeFormat('%m/%y');\n\n    // Add the consumed line path\n    svg\n      .append('path')\n      .data([formattedData])\n      .attr('class', 'line')\n      .style('fill', 'none')\n      .style('stroke', () => colors(1))\n      .attr('stroke-width', 2)\n      .attr('d', consumedLine)\n      .call(transition);\n\n    // create our consumed line circles\n\n    svg\n      .selectAll('dot')\n      .data(formattedData)\n      .enter()\n      .append('circle')\n      .attr('r', 3)\n      .style('stroke', () => colors(1))\n      .style('fill', () => colors(1))\n      .attr('cx', (d) => x(d.MONTH))\n      .attr('cy', (d) => y(d.CONSUMED))\n      .attr('id', (d) => `consumed-dot-${dateFormat(d.MONTH)}`)\n      .on('mouseover', (event, d) => handleMouseOver(event, d))\n      .on('mousemove', handleMouseMove)\n      .on('mouseout', handleMouseOut);\n\n    // Add the capacity line path\n    svg\n      .append('path')\n      .data([formattedData])\n      .attr('class', 'line')\n      .style('fill', 'none')\n      .style('stroke', () => colors(0))\n      .attr('stroke-width', 2)\n      .attr('d', capacityLine)\n      .call(transition);\n\n    // create our capacity line circles\n\n    svg\n      .selectAll('dot')\n      .data(formattedData)\n      .enter()\n      .append('circle')\n      .attr('r', 3)\n      .style('stroke', () => colors(0))\n      .style('fill', () => colors(0))\n      .attr('cx', (d) => x(d.MONTH))\n      .attr('cy', (d) => y(d.CAPACITY))\n      .attr('id', (d) => `capacity-dot-${dateFormat(d.MONTH)}`)\n      .on('mouseover', handleMouseOver)\n      .on('mousemove', handleMouseMove)\n      .on('mouseout', handleMouseOut);\n\n    // Create legend\n    const legend_keys = [t`Subscriptions consumed`, t`Subscription capacity`];\n    let totalWidth = width / 2 - 175;\n\n    const lineLegend = svg\n      .selectAll('.lineLegend')\n      .data(legend_keys)\n      .enter()\n      .append('g')\n      .attr('class', 'lineLegend')\n      .each(function formatLegend() {\n        const current = d3.select(this);\n        current.attr('transform', `translate(${totalWidth}, ${height + 90})`);\n        totalWidth += 200;\n      });\n\n    lineLegend\n      .append('text')\n      .text((d) => d)\n      .attr('font-size', '14')\n      .attr('transform', 'translate(15,9)'); // align texts with boxes\n\n    lineLegend\n      .append('rect')\n      .attr('fill', (d) => colors(d))\n      .attr('width', 10)\n      .attr('height', 10);\n  }, [data, height, id]);\n\n  useEffect(() => {\n    draw();\n  }, [draw, isNavOpen]);\n\n  useEffect(() => {\n    function handleResize() {\n      draw();\n    }\n\n    window.addEventListener('resize', handleResize);\n\n    handleResize();\n\n    return () => window.removeEventListener('resize', handleResize);\n  }, [draw]);\n\n  return <div id={id} />;\n}\n\nUsageChart.propTypes = {\n  id: string.isRequired,\n  data: arrayOf(shape({})).isRequired,\n  height: number.isRequired,\n};\n\nconst withPageContext = (Component) =>\n  function contextComponent(props) {\n    return (\n      <PageContextConsumer>\n        {(pageContext) => <Component {...props} pageContext={pageContext} />}\n      </PageContextConsumer>\n    );\n  };\n\nexport default withPageContext(UsageChart);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}