{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Formik,useField,useFormikContext}from'formik';import{Form,FormGroup}from'@patternfly/react-core';import AnsibleSelect from'components/AnsibleSelect';import FormActionGroup from'components/FormActionGroup/FormActionGroup';import FormField,{FormSubmitError}from'components/FormField';import ApplicationLookup from'components/Lookup/ApplicationLookup';import Popover from'components/Popover';import{required}from'util/validators';import{FormColumnLayout}from'components/FormLayout';import helptext from'./User.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UserTokenFormFields(){var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched;var _useField=useField('application'),_useField2=_slicedToArray(_useField,2),applicationField=_useField2[0],applicationMeta=_useField2[1];var _useField3=useField({name:'scope',validate:required(/*i18n*/i18n._(\"Please enter a value.\"))}),_useField4=_slicedToArray(_useField3,3),scopeField=_useField4[0],scopeMeta=_useField4[1],scopeHelpers=_useField4[2];var handleApplicationUpdate=useCallback(function(value){setFieldValue('application',value);setFieldTouched('application',true,false);},[setFieldValue,setFieldTouched]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormGroup,{fieldId:\"application-lookup\",name:\"application\",validated:!applicationMeta.touched||!applicationMeta.error?'default':'error',helperTextInvalid:applicationMeta.error,children:/*#__PURE__*/_jsx(ApplicationLookup,{value:applicationField.value,onChange:handleApplicationUpdate,label:/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Application\"),/*#__PURE__*/_jsx(Popover,{content:helptext.application})]}),touched:applicationMeta.touched})}),/*#__PURE__*/_jsx(FormField,{id:\"token-description\",name:\"description\",type:\"text\",label:/*i18n*/i18n._(\"Description\")}),/*#__PURE__*/_jsx(FormGroup,{name:\"scope\",fieldId:\"token-scope\",helperTextInvalid:scopeMeta.error,isRequired:true,validated:!scopeMeta.touched||!scopeMeta.error?'default':'error',label:/*i18n*/i18n._(\"Scope\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:helptext.scope}),children:/*#__PURE__*/_jsx(AnsibleSelect,_objectSpread(_objectSpread({},scopeField),{},{id:\"token-scope\",data:[{key:'default',label:'',value:''},{key:'read',value:'read',label:/*i18n*/i18n._(\"Read\")},{key:'write',value:'write',label:/*i18n*/i18n._(\"Write\")}],onChange:function onChange(event,value){scopeHelpers.setValue(value);}}))})]});}function UserTokenForm(_ref){var handleCancel=_ref.handleCancel,handleSubmit=_ref.handleSubmit,submitError=_ref.submitError,_ref$token=_ref.token,token=_ref$token===void 0?{}:_ref$token;return/*#__PURE__*/_jsx(Formik,{initialValues:{description:token.description||'',application:token.application||null,scope:token.scope||''},onSubmit:handleSubmit,children:function children(formik){return/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsxs(FormColumnLayout,{children:[/*#__PURE__*/_jsx(UserTokenFormFields,{}),submitError&&/*#__PURE__*/_jsx(FormSubmitError,{error:submitError}),/*#__PURE__*/_jsx(FormActionGroup,{onCancel:handleCancel,onSubmit:function onSubmit(){formik.handleSubmit();}})]})});}});}export default UserTokenForm;","map":{"version":3,"names":["React","useCallback","Formik","useField","useFormikContext","Form","FormGroup","AnsibleSelect","FormActionGroup","FormField","FormSubmitError","ApplicationLookup","Popover","required","FormColumnLayout","helptext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserTokenFormFields","_useFormikContext","setFieldValue","setFieldTouched","_useField","_useField2","_slicedToArray","applicationField","applicationMeta","_useField3","name","validate","i18n","_","_useField4","scopeField","scopeMeta","scopeHelpers","handleApplicationUpdate","value","children","fieldId","validated","touched","error","helperTextInvalid","onChange","label","content","application","id","type","isRequired","labelIcon","scope","_objectSpread","data","key","event","setValue","UserTokenForm","_ref","handleCancel","handleSubmit","submitError","_ref$token","token","initialValues","description","onSubmit","formik","autoComplete","onCancel"],"sources":["/awx_devel/awx/ui/src/screens/User/shared/UserTokenForm.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { t } from '@lingui/macro';\nimport { Formik, useField, useFormikContext } from 'formik';\nimport { Form, FormGroup } from '@patternfly/react-core';\nimport AnsibleSelect from 'components/AnsibleSelect';\nimport FormActionGroup from 'components/FormActionGroup/FormActionGroup';\nimport FormField, { FormSubmitError } from 'components/FormField';\nimport ApplicationLookup from 'components/Lookup/ApplicationLookup';\nimport Popover from 'components/Popover';\nimport { required } from 'util/validators';\nimport { FormColumnLayout } from 'components/FormLayout';\nimport helptext from './User.helptext';\n\nfunction UserTokenFormFields() {\n  const { setFieldValue, setFieldTouched } = useFormikContext();\n  const [applicationField, applicationMeta] = useField('application');\n\n  const [scopeField, scopeMeta, scopeHelpers] = useField({\n    name: 'scope',\n    validate: required(t`Please enter a value.`),\n  });\n\n  const handleApplicationUpdate = useCallback(\n    (value) => {\n      setFieldValue('application', value);\n      setFieldTouched('application', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  return (\n    <>\n      <FormGroup\n        fieldId=\"application-lookup\"\n        name=\"application\"\n        validated={\n          !applicationMeta.touched || !applicationMeta.error\n            ? 'default'\n            : 'error'\n        }\n        helperTextInvalid={applicationMeta.error}\n      >\n        <ApplicationLookup\n          value={applicationField.value}\n          onChange={handleApplicationUpdate}\n          label={\n            <span>\n              {t`Application`}\n              <Popover content={helptext.application} />\n            </span>\n          }\n          touched={applicationMeta.touched}\n        />\n      </FormGroup>\n      <FormField\n        id=\"token-description\"\n        name=\"description\"\n        type=\"text\"\n        label={t`Description`}\n      />\n\n      <FormGroup\n        name=\"scope\"\n        fieldId=\"token-scope\"\n        helperTextInvalid={scopeMeta.error}\n        isRequired\n        validated={!scopeMeta.touched || !scopeMeta.error ? 'default' : 'error'}\n        label={t`Scope`}\n        labelIcon={<Popover content={helptext.scope} />}\n      >\n        <AnsibleSelect\n          {...scopeField}\n          id=\"token-scope\"\n          data={[\n            { key: 'default', label: '', value: '' },\n            { key: 'read', value: 'read', label: t`Read` },\n            { key: 'write', value: 'write', label: t`Write` },\n          ]}\n          onChange={(event, value) => {\n            scopeHelpers.setValue(value);\n          }}\n        />\n      </FormGroup>\n    </>\n  );\n}\n\nfunction UserTokenForm({\n  handleCancel,\n  handleSubmit,\n  submitError,\n  token = {},\n}) {\n  return (\n    <Formik\n      initialValues={{\n        description: token.description || '',\n        application: token.application || null,\n        scope: token.scope || '',\n      }}\n      onSubmit={handleSubmit}\n    >\n      {(formik) => (\n        <Form autoComplete=\"off\" onSubmit={formik.handleSubmit}>\n          <FormColumnLayout>\n            <UserTokenFormFields />\n            {submitError && <FormSubmitError error={submitError} />}\n            <FormActionGroup\n              onCancel={handleCancel}\n              onSubmit={() => {\n                formik.handleSubmit();\n              }}\n            />\n          </FormColumnLayout>\n        </Form>\n      )}\n    </Formik>\n  );\n}\nexport default UserTokenForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}