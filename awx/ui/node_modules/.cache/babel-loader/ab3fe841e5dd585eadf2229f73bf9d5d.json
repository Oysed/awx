{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect,useState}from'react';import{useHistory,useParams,Link}from'react-router-dom';import{Button,Progress,ProgressMeasureLocation,ProgressSize,CodeBlock,CodeBlockCode,Tooltip,Slider}from'@patternfly/react-core';import{DownloadIcon,OutlinedClockIcon}from'@patternfly/react-icons';import styled from'styled-components';import{useConfig}from'contexts/Config';import{InstancesAPI}from'api';import useDebounce from'hooks/useDebounce';import AlertModal from'components/AlertModal';import ErrorDetail from'components/ErrorDetail';import InstanceToggle from'components/InstanceToggle';import{CardBody,CardActionsRow}from'components/Card';import getDocsBaseUrl from'util/getDocsBaseUrl';import{formatDateString}from'util/dates';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import{Detail,DetailList}from'components/DetailList';import StatusLabel from'components/StatusLabel';import useRequest,{useDeleteItems,useDismissableError}from'hooks/useRequest';import HealthCheckAlert from'components/HealthCheckAlert';import InstanceGroupLabels from'components/InstanceGroupLabels';import RemoveInstanceButton from'../Shared/RemoveInstanceButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Unavailable=styled.span(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  color: var(--pf-global--danger-color--200);\\n\"])));var SliderHolder=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n\"])));var SliderForks=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n  margin-right: 8px;\\n  margin-left: 8px;\\n  text-align: center;\\n\"])));function computeForks(memCapacity,cpuCapacity,selectedCapacityAdjustment){var minCapacity=Math.min(memCapacity,cpuCapacity);var maxCapacity=Math.max(memCapacity,cpuCapacity);return Math.floor(minCapacity+(maxCapacity-minCapacity)*selectedCapacityAdjustment);}function InstanceDetail(_ref){var _instance$related,_instance$related2,_config$me,_config$me2,_config$me3;var setBreadcrumb=_ref.setBreadcrumb,isK8s=_ref.isK8s;var config=useConfig();var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),forks=_useState2[0],setForks=_useState2[1];var history=useHistory();var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),healthCheck=_useState4[0],setHealthCheck=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showHealthCheckAlert=_useState6[0],setShowHealthCheckAlert=_useState6[1];var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,details,results,_yield$InstancesAPI$r,healthCheckData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([InstancesAPI.readDetail(id),InstancesAPI.readInstanceGroup(id)]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);details=_yield$Promise$all2[0].data;results=_yield$Promise$all2[1].data.results;if(!(details.node_type==='execution')){_context.next=12;break;}_context.next=9;return InstancesAPI.readHealthCheckDetail(id);case 9:_yield$InstancesAPI$r=_context.sent;healthCheckData=_yield$InstancesAPI$r.data;setHealthCheck(healthCheckData);case 12:setForks(computeForks(details.mem_capacity,details.cpu_capacity,details.capacity_adjustment));return _context.abrupt(\"return\",{instance:details,instanceGroups:results});case 14:case\"end\":return _context.stop();}}},_callee);})),[id]),{instance:{},instanceGroups:[]}),isLoading=_useRequest.isLoading,contentError=_useRequest.error,fetchDetails=_useRequest.request,_useRequest$result=_useRequest.result,instance=_useRequest$result.instance,instanceGroups=_useRequest$result.instanceGroups;useEffect(function(){fetchDetails();},[fetchDetails]);useEffect(function(){if(instance){setBreadcrumb(instance);}},[instance,setBreadcrumb]);var _useRequest2=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$InstancesAPI$h,status;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return InstancesAPI.healthCheck(id);case 2:_yield$InstancesAPI$h=_context2.sent;status=_yield$InstancesAPI$h.status;if(status===200){setShowHealthCheckAlert(true);}case 5:case\"end\":return _context2.stop();}}},_callee2);})),[id])),healthCheckError=_useRequest2.error,fetchHealthCheck=_useRequest2.request;var _useRequest3=useRequest(useCallback(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return InstancesAPI.update(id,values);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref4.apply(this,arguments);};}(),[id])),updateInstanceError=_useRequest3.error,updateInstance=_useRequest3.request;var debounceUpdateInstance=useDebounce(updateInstance,200);var handleChangeValue=function handleChangeValue(value){var roundedValue=Math.round(value*100)/100;setForks(computeForks(instance.mem_capacity,instance.cpu_capacity,roundedValue));debounceUpdateInstance({capacity_adjustment:roundedValue});};var formatHealthCheckTimeStamp=function formatHealthCheckTimeStamp(last){return/*#__PURE__*/_jsxs(_Fragment,{children:[formatDateString(last),instance.health_check_pending?/*#__PURE__*/_jsxs(_Fragment,{children:[' ',/*#__PURE__*/_jsx(OutlinedClockIcon,{})]}):null]});};var _useDismissableError=useDismissableError(updateInstanceError||healthCheckError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var _useDeleteItems=useDeleteItems(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return InstancesAPI.deprovisionInstance(instance.id);case 2:history.push('/instances');case 3:case\"end\":return _context4.stop();}}},_callee4);})),{fetchItems:fetchDetails}),isRemoveLoading=_useDeleteItems.isLoading,removeInstances=_useDeleteItems.deleteItems,removeError=_useDeleteItems.deletionError,clearDeletionError=_useDeleteItems.clearDeletionError;if(contentError){return/*#__PURE__*/_jsx(ContentError,{error:contentError});}if(isLoading||isRemoveLoading){return/*#__PURE__*/_jsx(ContentLoading,{});}var isHopNode=instance.node_type==='hop';var isExecutionNode=instance.node_type==='execution';var isManaged=instance.managed;return/*#__PURE__*/_jsxs(_Fragment,{children:[showHealthCheckAlert?/*#__PURE__*/_jsx(HealthCheckAlert,{onSetHealthCheckAlert:setShowHealthCheckAlert}):null,/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{gutter:\"sm\",children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Host Name\"),value:instance.hostname,dataCy:\"instance-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Status\"),dataCy:\"status\",value:instance.node_state?/*#__PURE__*/_jsx(StatusLabel,{status:instance.node_state}):null}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Node Type\"),value:instance.node_type}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Host\"),value:instance.ip_address}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Listener Port\"),value:instance.listener_port}),!isManaged&&((_instance$related=instance.related)===null||_instance$related===void 0?void 0:_instance$related.install_bundle)&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Install Bundle\"),value:/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Click to download bundle\"),children:/*#__PURE__*/_jsx(Button,{component:\"a\",isSmall:true,href:\"\".concat((_instance$related2=instance.related)===null||_instance$related2===void 0?void 0:_instance$related2.install_bundle),target:\"_blank\",variant:\"secondary\",dataCy:\"install-bundle-download-button\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(DownloadIcon,{})})})}),(isExecutionNode||isHopNode)&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Peers from control nodes\"),value:instance.peers_from_control_nodes?/*i18n*/i18n._(\"On\"):/*i18n*/i18n._(\"Off\")}),!isHopNode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Policy Type\"),value:instance.managed_by_policy?/*i18n*/i18n._(\"Auto\"):/*i18n*/i18n._(\"Manual\")}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Running Jobs\"),value:instance.jobs_running}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Total Jobs\"),value:instance.jobs_total}),instanceGroups&&/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Instance Groups\"),dataCy:\"instance-groups\",helpText:/*i18n*/i18n._(\"The Instance Groups to which this instance belongs.\"),value:/*#__PURE__*/_jsx(InstanceGroupLabels,{labels:instanceGroups,isLinkable:true}),isEmpty:instanceGroups.length===0}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Health Check\"),dataCy:\"last-health-check\",helpText:/*#__PURE__*/_jsxs(_Fragment,{children:[/*i18n*/i18n._(\"Health checks are asynchronous tasks. See the\"),' ',/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(getDocsBaseUrl(config),\"/html/administration/instances.html#health-check\"),target:\"_blank\",rel:\"noopener noreferrer\",children:/*i18n*/i18n._(\"documentation\")}),' ',/*i18n*/i18n._(\"for more info.\")]}),value:formatHealthCheckTimeStamp(instance.last_health_check)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Capacity Adjustment\"),dataCy:\"capacity-adjustment\",value:/*#__PURE__*/_jsxs(SliderHolder,{\"data-cy\":\"slider-holder\",children:[/*#__PURE__*/_jsx(\"div\",{\"data-cy\":\"cpu-capacity\",children:/*i18n*/i18n._(\"CPU {0}\",{0:instance.cpu_capacity})}),/*#__PURE__*/_jsxs(SliderForks,{\"data-cy\":\"slider-forks\",children:[/*#__PURE__*/_jsx(\"div\",{\"data-cy\":\"number-forks\",children:/*#__PURE__*/_jsx(Trans,{id:\"{forks, plural, one {# fork} other {# forks}}\",values:{forks:forks}})}),/*#__PURE__*/_jsx(Slider,{areCustomStepsContinuous:true,max:1,min:0,step:0.1,value:instance.capacity_adjustment,onChange:handleChangeValue,isDisabled:!(config!==null&&config!==void 0&&(_config$me=config.me)!==null&&_config$me!==void 0&&_config$me.is_superuser)||!instance.enabled||!isManaged,\"data-cy\":\"slider\"})]}),/*#__PURE__*/_jsx(\"div\",{\"data-cy\":\"mem-capacity\",children:/*i18n*/i18n._(\"RAM {0}\",{0:instance.mem_capacity})})]})}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Used Capacity\"),dataCy:\"used-capacity\",value:instance.enabled?/*#__PURE__*/_jsx(Progress,{title:/*i18n*/i18n._(\"Used capacity\"),value:Math.round(100-instance.percent_capacity_remaining),measureLocation:ProgressMeasureLocation.top,size:ProgressSize.sm,\"aria-label\":/*i18n*/i18n._(\"Used capacity\")}):/*#__PURE__*/_jsx(Unavailable,{children:/*i18n*/i18n._(\"Unavailable\")})})]}),(healthCheck===null||healthCheck===void 0?void 0:healthCheck.errors)&&/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Errors\"),dataCy:\"errors\",value:/*#__PURE__*/_jsx(CodeBlock,{children:/*#__PURE__*/_jsx(CodeBlockCode,{children:healthCheck===null||healthCheck===void 0?void 0:healthCheck.errors})})})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[(config===null||config===void 0?void 0:(_config$me2=config.me)===null||_config$me2===void 0?void 0:_config$me2.is_superuser)&&isK8s&&!isManaged&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{ouiaId:\"instance-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/instances/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),/*#__PURE__*/_jsx(RemoveInstanceButton,{dataCy:\"remove-instance-button\",itemsToRemove:[instance],isK8s:isK8s,onRemove:removeInstances})]}),isExecutionNode&&/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Run a health check on the instance\"),children:/*#__PURE__*/_jsx(Button,{isDisabled:!(config!==null&&config!==void 0&&(_config$me3=config.me)!==null&&_config$me3!==void 0&&_config$me3.is_superuser)||instance.health_check_pending||instance.managed,variant:\"primary\",ouiaId:\"health-check-button\",onClick:fetchHealthCheck,isLoading:instance.health_check_pending,spinnerAriaLabel:/*i18n*/i18n._(\"Running health check\"),children:instance.health_check_pending?/*i18n*/i18n._(\"Running health check\"):/*i18n*/i18n._(\"Run health check\")})}),!isHopNode&&/*#__PURE__*/_jsx(InstanceToggle,{css:\"display: inline-flex;\",fetchInstances:fetchDetails,instance:instance,dataCy:\"enable-instance\"})]}),error&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:error,onClose:dismissError,title:/*i18n*/i18n._(\"Error!\"),variant:\"error\",children:[updateInstanceError?/*i18n*/i18n._(\"Failed to update capacity adjustment.\"):/*i18n*/i18n._(\"Failed to disassociate one or more instances.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:error})]}),removeError&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:removeError,variant:\"error\",\"aria-label\":/*i18n*/i18n._(\"Removal Error\"),title:/*i18n*/i18n._(\"Error!\"),onClose:clearDeletionError,children:[/*i18n*/i18n._(\"Failed to remove one or more instances.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:removeError})]})]})]});}export default InstanceDetail;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useHistory","useParams","Link","Button","Progress","ProgressMeasureLocation","ProgressSize","CodeBlock","CodeBlockCode","Tooltip","Slider","DownloadIcon","OutlinedClockIcon","styled","useConfig","InstancesAPI","useDebounce","AlertModal","ErrorDetail","InstanceToggle","CardBody","CardActionsRow","getDocsBaseUrl","formatDateString","ContentError","ContentLoading","Detail","DetailList","StatusLabel","useRequest","useDeleteItems","useDismissableError","HealthCheckAlert","InstanceGroupLabels","RemoveInstanceButton","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Unavailable","span","_templateObject","_taggedTemplateLiteral","SliderHolder","div","_templateObject2","SliderForks","_templateObject3","computeForks","memCapacity","cpuCapacity","selectedCapacityAdjustment","minCapacity","Math","min","maxCapacity","max","floor","InstanceDetail","_ref","_instance$related","_instance$related2","_config$me","_config$me2","_config$me3","setBreadcrumb","isK8s","config","_useParams","id","_useState","_useState2","_slicedToArray","forks","setForks","history","_useState3","_useState4","healthCheck","setHealthCheck","_useState5","_useState6","showHealthCheckAlert","setShowHealthCheckAlert","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$Promise$all","_yield$Promise$all2","details","results","_yield$InstancesAPI$r","healthCheckData","wrap","_callee$","_context","prev","next","Promise","all","readDetail","readInstanceGroup","sent","data","node_type","readHealthCheckDetail","mem_capacity","cpu_capacity","capacity_adjustment","abrupt","instance","instanceGroups","stop","isLoading","contentError","error","fetchDetails","request","_useRequest$result","result","_useRequest2","_callee2","_yield$InstancesAPI$h","status","_callee2$","_context2","healthCheckError","fetchHealthCheck","_useRequest3","_ref4","_callee3","values","_callee3$","_context3","update","_x","apply","arguments","updateInstanceError","updateInstance","debounceUpdateInstance","handleChangeValue","value","roundedValue","round","formatHealthCheckTimeStamp","last","children","health_check_pending","_useDismissableError","dismissError","_useDeleteItems","_callee4","_callee4$","_context4","deprovisionInstance","push","fetchItems","isRemoveLoading","removeInstances","deleteItems","removeError","deletionError","clearDeletionError","isHopNode","isExecutionNode","isManaged","managed","onSetHealthCheckAlert","gutter","label","i18n","_","hostname","dataCy","node_state","ip_address","listener_port","related","install_bundle","content","component","isSmall","href","concat","target","variant","rel","peers_from_control_nodes","managed_by_policy","jobs_running","jobs_total","fullWidth","helpText","labels","isLinkable","isEmpty","length","last_health_check","0","Trans","areCustomStepsContinuous","step","onChange","isDisabled","me","is_superuser","enabled","title","percent_capacity_remaining","measureLocation","top","size","sm","errors","ouiaId","to","itemsToRemove","onRemove","onClick","spinnerAriaLabel","css","fetchInstances","isOpen","onClose"],"sources":["/awx_devel/awx/ui/src/screens/Instances/InstanceDetail/InstanceDetail.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\n\nimport { useHistory, useParams, Link } from 'react-router-dom';\nimport { t, Plural } from '@lingui/macro';\nimport {\n  Button,\n  Progress,\n  ProgressMeasureLocation,\n  ProgressSize,\n  CodeBlock,\n  CodeBlockCode,\n  Tooltip,\n  Slider,\n} from '@patternfly/react-core';\nimport { DownloadIcon, OutlinedClockIcon } from '@patternfly/react-icons';\nimport styled from 'styled-components';\n\nimport { useConfig } from 'contexts/Config';\nimport { InstancesAPI } from 'api';\nimport useDebounce from 'hooks/useDebounce';\nimport AlertModal from 'components/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail';\nimport InstanceToggle from 'components/InstanceToggle';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport getDocsBaseUrl from 'util/getDocsBaseUrl';\nimport { formatDateString } from 'util/dates';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport { Detail, DetailList } from 'components/DetailList';\nimport StatusLabel from 'components/StatusLabel';\nimport useRequest, {\n  useDeleteItems,\n  useDismissableError,\n} from 'hooks/useRequest';\nimport HealthCheckAlert from 'components/HealthCheckAlert';\nimport InstanceGroupLabels from 'components/InstanceGroupLabels';\nimport RemoveInstanceButton from '../Shared/RemoveInstanceButton';\n\nconst Unavailable = styled.span`\n  color: var(--pf-global--danger-color--200);\n`;\n\nconst SliderHolder = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst SliderForks = styled.div`\n  flex-grow: 1;\n  margin-right: 8px;\n  margin-left: 8px;\n  text-align: center;\n`;\n\nfunction computeForks(memCapacity, cpuCapacity, selectedCapacityAdjustment) {\n  const minCapacity = Math.min(memCapacity, cpuCapacity);\n  const maxCapacity = Math.max(memCapacity, cpuCapacity);\n\n  return Math.floor(\n    minCapacity + (maxCapacity - minCapacity) * selectedCapacityAdjustment\n  );\n}\n\nfunction InstanceDetail({ setBreadcrumb, isK8s }) {\n  const config = useConfig();\n\n  const { id } = useParams();\n  const [forks, setForks] = useState();\n  const history = useHistory();\n  const [healthCheck, setHealthCheck] = useState({});\n  const [showHealthCheckAlert, setShowHealthCheckAlert] = useState(false);\n\n  const {\n    isLoading,\n    error: contentError,\n    request: fetchDetails,\n    result: { instance, instanceGroups },\n  } = useRequest(\n    useCallback(async () => {\n      const [\n        { data: details },\n        {\n          data: { results },\n        },\n      ] = await Promise.all([\n        InstancesAPI.readDetail(id),\n        InstancesAPI.readInstanceGroup(id),\n      ]);\n      if (details.node_type === 'execution') {\n        const { data: healthCheckData } =\n          await InstancesAPI.readHealthCheckDetail(id);\n        setHealthCheck(healthCheckData);\n      }\n\n      setForks(\n        computeForks(\n          details.mem_capacity,\n          details.cpu_capacity,\n          details.capacity_adjustment\n        )\n      );\n      return {\n        instance: details,\n        instanceGroups: results,\n      };\n    }, [id]),\n    { instance: {}, instanceGroups: [] }\n  );\n  useEffect(() => {\n    fetchDetails();\n  }, [fetchDetails]);\n\n  useEffect(() => {\n    if (instance) {\n      setBreadcrumb(instance);\n    }\n  }, [instance, setBreadcrumb]);\n\n  const { error: healthCheckError, request: fetchHealthCheck } = useRequest(\n    useCallback(async () => {\n      const { status } = await InstancesAPI.healthCheck(id);\n      if (status === 200) {\n        setShowHealthCheckAlert(true);\n      }\n    }, [id])\n  );\n\n  const { error: updateInstanceError, request: updateInstance } = useRequest(\n    useCallback(\n      async (values) => {\n        await InstancesAPI.update(id, values);\n      },\n      [id]\n    )\n  );\n\n  const debounceUpdateInstance = useDebounce(updateInstance, 200);\n\n  const handleChangeValue = (value) => {\n    const roundedValue = Math.round(value * 100) / 100;\n    setForks(\n      computeForks(instance.mem_capacity, instance.cpu_capacity, roundedValue)\n    );\n    debounceUpdateInstance({ capacity_adjustment: roundedValue });\n  };\n\n  const formatHealthCheckTimeStamp = (last) => (\n    <>\n      {formatDateString(last)}\n      {instance.health_check_pending ? (\n        <>\n          {' '}\n          <OutlinedClockIcon />\n        </>\n      ) : null}\n    </>\n  );\n\n  const { error, dismissError } = useDismissableError(\n    updateInstanceError || healthCheckError\n  );\n  const {\n    isLoading: isRemoveLoading,\n    deleteItems: removeInstances,\n    deletionError: removeError,\n    clearDeletionError,\n  } = useDeleteItems(\n    async () => {\n      await InstancesAPI.deprovisionInstance(instance.id);\n      history.push('/instances');\n    },\n    {\n      fetchItems: fetchDetails,\n    }\n  );\n\n  if (contentError) {\n    return <ContentError error={contentError} />;\n  }\n  if (isLoading || isRemoveLoading) {\n    return <ContentLoading />;\n  }\n  const isHopNode = instance.node_type === 'hop';\n  const isExecutionNode = instance.node_type === 'execution';\n  const isManaged = instance.managed;\n\n  return (\n    <>\n      {showHealthCheckAlert ? (\n        <HealthCheckAlert onSetHealthCheckAlert={setShowHealthCheckAlert} />\n      ) : null}\n      <CardBody>\n        <DetailList gutter=\"sm\">\n          <Detail\n            label={t`Host Name`}\n            value={instance.hostname}\n            dataCy=\"instance-detail-name\"\n          />\n          <Detail\n            label={t`Status`}\n            dataCy=\"status\"\n            value={\n              instance.node_state ? (\n                <StatusLabel status={instance.node_state} />\n              ) : null\n            }\n          />\n          <Detail label={t`Node Type`} value={instance.node_type} />\n          <Detail label={t`Host`} value={instance.ip_address} />\n          <Detail label={t`Listener Port`} value={instance.listener_port} />\n          {!isManaged && instance.related?.install_bundle && (\n            <Detail\n              label={t`Install Bundle`}\n              value={\n                <Tooltip content={t`Click to download bundle`}>\n                  <Button\n                    component=\"a\"\n                    isSmall\n                    href={`${instance.related?.install_bundle}`}\n                    target=\"_blank\"\n                    variant=\"secondary\"\n                    dataCy=\"install-bundle-download-button\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <DownloadIcon />\n                  </Button>\n                </Tooltip>\n              }\n            />\n          )}\n          {(isExecutionNode || isHopNode) && (\n            <Detail\n              label={t`Peers from control nodes`}\n              value={instance.peers_from_control_nodes ? t`On` : t`Off`}\n            />\n          )}\n          {!isHopNode && (\n            <>\n              <Detail\n                label={t`Policy Type`}\n                value={instance.managed_by_policy ? t`Auto` : t`Manual`}\n              />\n              <Detail label={t`Running Jobs`} value={instance.jobs_running} />\n              <Detail label={t`Total Jobs`} value={instance.jobs_total} />\n              {instanceGroups && (\n                <Detail\n                  fullWidth\n                  label={t`Instance Groups`}\n                  dataCy=\"instance-groups\"\n                  helpText={t`The Instance Groups to which this instance belongs.`}\n                  value={\n                    <InstanceGroupLabels labels={instanceGroups} isLinkable />\n                  }\n                  isEmpty={instanceGroups.length === 0}\n                />\n              )}\n              <Detail\n                label={t`Last Health Check`}\n                dataCy=\"last-health-check\"\n                helpText={\n                  <>\n                    {t`Health checks are asynchronous tasks. See the`}{' '}\n                    <a\n                      href={`${getDocsBaseUrl(\n                        config\n                      )}/html/administration/instances.html#health-check`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {t`documentation`}\n                    </a>{' '}\n                    {t`for more info.`}\n                  </>\n                }\n                value={formatHealthCheckTimeStamp(instance.last_health_check)}\n              />\n              <Detail\n                label={t`Capacity Adjustment`}\n                dataCy=\"capacity-adjustment\"\n                value={\n                  <SliderHolder data-cy=\"slider-holder\">\n                    <div data-cy=\"cpu-capacity\">{t`CPU ${instance.cpu_capacity}`}</div>\n                    <SliderForks data-cy=\"slider-forks\">\n                      <div data-cy=\"number-forks\">\n                        <Plural value={forks} one=\"# fork\" other=\"# forks\" />\n                      </div>\n                      <Slider\n                        areCustomStepsContinuous\n                        max={1}\n                        min={0}\n                        step={0.1}\n                        value={instance.capacity_adjustment}\n                        onChange={handleChangeValue}\n                        isDisabled={\n                          !config?.me?.is_superuser ||\n                          !instance.enabled ||\n                          !isManaged\n                        }\n                        data-cy=\"slider\"\n                      />\n                    </SliderForks>\n                    <div data-cy=\"mem-capacity\">{t`RAM ${instance.mem_capacity}`}</div>\n                  </SliderHolder>\n                }\n              />\n              <Detail\n                label={t`Used Capacity`}\n                dataCy=\"used-capacity\"\n                value={\n                  instance.enabled ? (\n                    <Progress\n                      title={t`Used capacity`}\n                      value={Math.round(\n                        100 - instance.percent_capacity_remaining\n                      )}\n                      measureLocation={ProgressMeasureLocation.top}\n                      size={ProgressSize.sm}\n                      aria-label={t`Used capacity`}\n                    />\n                  ) : (\n                    <Unavailable>{t`Unavailable`}</Unavailable>\n                  )\n                }\n              />\n            </>\n          )}\n          {healthCheck?.errors && (\n            <Detail\n              fullWidth\n              label={t`Errors`}\n              dataCy=\"errors\"\n              value={\n                <CodeBlock>\n                  <CodeBlockCode>{healthCheck?.errors}</CodeBlockCode>\n                </CodeBlock>\n              }\n            />\n          )}\n        </DetailList>\n        <CardActionsRow>\n          {config?.me?.is_superuser && isK8s && !isManaged && (\n            <>\n              <Button\n                ouiaId=\"instance-detail-edit-button\"\n                aria-label={t`edit`}\n                component={Link}\n                to={`/instances/${id}/edit`}\n              >\n                {t`Edit`}\n              </Button>\n              <RemoveInstanceButton\n                dataCy=\"remove-instance-button\"\n                itemsToRemove={[instance]}\n                isK8s={isK8s}\n                onRemove={removeInstances}\n              />\n            </>\n          )}\n          {isExecutionNode && (\n            <Tooltip content={t`Run a health check on the instance`}>\n              <Button\n                isDisabled={\n                  !config?.me?.is_superuser ||\n                  instance.health_check_pending ||\n                  instance.managed\n                }\n                variant=\"primary\"\n                ouiaId=\"health-check-button\"\n                onClick={fetchHealthCheck}\n                isLoading={instance.health_check_pending}\n                spinnerAriaLabel={t`Running health check`}\n              >\n                {instance.health_check_pending\n                  ? t`Running health check`\n                  : t`Run health check`}\n              </Button>\n            </Tooltip>\n          )}\n          {!isHopNode && (\n            <InstanceToggle\n              css=\"display: inline-flex;\"\n              fetchInstances={fetchDetails}\n              instance={instance}\n              dataCy=\"enable-instance\"\n            />\n          )}\n        </CardActionsRow>\n\n        {error && (\n          <AlertModal\n            isOpen={error}\n            onClose={dismissError}\n            title={t`Error!`}\n            variant=\"error\"\n          >\n            {updateInstanceError\n              ? t`Failed to update capacity adjustment.`\n              : t`Failed to disassociate one or more instances.`}\n            <ErrorDetail error={error} />\n          </AlertModal>\n        )}\n\n        {removeError && (\n          <AlertModal\n            isOpen={removeError}\n            variant=\"error\"\n            aria-label={t`Removal Error`}\n            title={t`Error!`}\n            onClose={clearDeletionError}\n          >\n            {t`Failed to remove one or more instances.`}\n            <ErrorDetail error={removeError} />\n          </AlertModal>\n        )}\n      </CardBody>\n    </>\n  );\n}\n\nexport default InstanceDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}