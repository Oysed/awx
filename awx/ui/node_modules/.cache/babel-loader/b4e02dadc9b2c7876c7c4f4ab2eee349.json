{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import Base from'../Base';var Root=/*#__PURE__*/function(_Base){_inherits(Root,_Base);var _super=_createSuper(Root);function Root(http){var _this;_classCallCheck(this,Root);_this=_super.call(this,http);_this.baseUrl='api/';_this.redirectURL='api/v2/config/';return _this;}_createClass(Root,[{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,password){var redirect,loginUrl,un,pw,next,data,headers,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:redirect=_args.length>2&&_args[2]!==undefined?_args[2]:this.redirectURL;loginUrl=\"\".concat(this.baseUrl,\"login/\");un=encodeURIComponent(username);pw=encodeURIComponent(password);next=encodeURIComponent(redirect);data=\"username=\".concat(un,\"&password=\").concat(pw,\"&next=\").concat(next);headers={'Content-Type':'application/x-www-form-urlencoded'};_context.next=9;return this.http.get(loginUrl,{headers:headers});case 9:_context.next=11;return this.http.post(loginUrl,data,{headers:headers});case 11:response=_context.sent;return _context.abrupt(\"return\",response);case 13:case\"end\":return _context.stop();}}},_callee,this);}));function login(_x,_x2){return _login.apply(this,arguments);}return login;}()},{key:\"logout\",value:function logout(){return this.http.get(\"\".concat(this.baseUrl,\"logout/\"));}},{key:\"readAssetVariables\",value:function readAssetVariables(){// TODO: There's better ways of doing this. Build tools, scripts,\n// automation etc. should relocate this variable file to an importable\n// location in src prior to building. That said, a raw http call\n// works for now.\nreturn this.http.get('static/media/default.strings.json');}}]);return Root;}(Base);export default Root;","map":{"version":3,"names":["Base","Root","_Base","_inherits","_super","_createSuper","http","_this","_classCallCheck","call","baseUrl","redirectURL","_createClass","key","value","_login","_asyncToGenerator","_regeneratorRuntime","mark","_callee","username","password","redirect","loginUrl","un","pw","next","data","headers","response","_args","arguments","wrap","_callee$","_context","prev","length","undefined","concat","encodeURIComponent","get","post","sent","abrupt","stop","login","_x","_x2","apply","logout","readAssetVariables"],"sources":["/awx_devel/awx/ui/src/api/models/Root.js"],"sourcesContent":["import Base from '../Base';\n\nclass Root extends Base {\n  constructor(http) {\n    super(http);\n    this.baseUrl = 'api/';\n    this.redirectURL = 'api/v2/config/';\n  }\n\n  async login(username, password, redirect = this.redirectURL) {\n    const loginUrl = `${this.baseUrl}login/`;\n    const un = encodeURIComponent(username);\n    const pw = encodeURIComponent(password);\n    const next = encodeURIComponent(redirect);\n\n    const data = `username=${un}&password=${pw}&next=${next}`;\n    const headers = { 'Content-Type': 'application/x-www-form-urlencoded' };\n\n    await this.http.get(loginUrl, { headers });\n    const response = await this.http.post(loginUrl, data, { headers });\n\n    return response;\n  }\n\n  logout() {\n    return this.http.get(`${this.baseUrl}logout/`);\n  }\n\n  readAssetVariables() {\n    // TODO: There's better ways of doing this. Build tools, scripts,\n    // automation etc. should relocate this variable file to an importable\n    // location in src prior to building. That said, a raw http call\n    // works for now.\n    return this.http.get('static/media/default.strings.json');\n  }\n}\n\nexport default Root;\n"],"mappings":"6lBAAA,MAAO,CAAAA,IAAI,KAAM,SAAS,CAAC,GAErB,CAAAC,IAAI,uBAAAC,KAAA,EAAAC,SAAA,CAAAF,IAAA,CAAAC,KAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAJ,IAAA,EACR,SAAAA,KAAYK,IAAI,CAAE,KAAAC,KAAA,CAAAC,eAAA,MAAAP,IAAA,EAChBM,KAAA,CAAAH,MAAA,CAAAK,IAAA,MAAMH,IAAI,EACVC,KAAA,CAAKG,OAAO,CAAG,MAAM,CACrBH,KAAA,CAAKI,WAAW,CAAG,gBAAgB,CAAC,OAAAJ,KAAA,CACtC,CAACK,YAAA,CAAAX,IAAA,GAAAY,GAAA,SAAAC,KAAA,gBAAAC,MAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAED,SAAAC,QAAYC,QAAQ,CAAEC,QAAQ,MAAAC,QAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,EAAA,CAAAC,IAAA,CAAAC,IAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,KAAA,CAAAC,SAAA,QAAAd,mBAAA,CAAAe,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAR,IAAA,SAAEJ,QAAQ,CAAAQ,KAAA,CAAAM,MAAA,IAAAN,KAAA,MAAAO,SAAA,CAAAP,KAAA,IAAG,IAAI,CAACnB,WAAW,CACnDY,QAAQ,IAAAe,MAAA,CAAM,IAAI,CAAC5B,OAAO,WAC1Bc,EAAE,CAAGe,kBAAkB,CAACnB,QAAQ,CAAC,CACjCK,EAAE,CAAGc,kBAAkB,CAAClB,QAAQ,CAAC,CACjCK,IAAI,CAAGa,kBAAkB,CAACjB,QAAQ,CAAC,CAEnCK,IAAI,aAAAW,MAAA,CAAed,EAAE,eAAAc,MAAA,CAAab,EAAE,WAAAa,MAAA,CAASZ,IAAI,EACjDE,OAAO,CAAG,CAAE,cAAc,CAAE,mCAAoC,CAAC,CAAAM,QAAA,CAAAR,IAAA,SAEjE,KAAI,CAACpB,IAAI,CAACkC,GAAG,CAACjB,QAAQ,CAAE,CAAEK,OAAO,CAAPA,OAAQ,CAAC,CAAC,QAAAM,QAAA,CAAAR,IAAA,UACnB,KAAI,CAACpB,IAAI,CAACmC,IAAI,CAAClB,QAAQ,CAAEI,IAAI,CAAE,CAAEC,OAAO,CAAPA,OAAQ,CAAC,CAAC,SAA5DC,QAAQ,CAAAK,QAAA,CAAAQ,IAAA,QAAAR,QAAA,CAAAS,MAAA,UAEPd,QAAQ,2BAAAK,QAAA,CAAAU,IAAA,OAAAzB,OAAA,QAChB,YAAA0B,MAAAC,EAAA,CAAAC,GAAA,SAAAhC,MAAA,CAAAiC,KAAA,MAAAjB,SAAA,UAAAc,KAAA,OAAAhC,GAAA,UAAAC,KAAA,CAED,SAAAmC,OAAA,CAAS,CACP,MAAO,KAAI,CAAC3C,IAAI,CAACkC,GAAG,IAAAF,MAAA,CAAI,IAAI,CAAC5B,OAAO,WAAS,CAAC,CAChD,CAAC,GAAAG,GAAA,sBAAAC,KAAA,CAED,SAAAoC,mBAAA,CAAqB,CACnB;AACA;AACA;AACA;AACA,MAAO,KAAI,CAAC5C,IAAI,CAACkC,GAAG,CAAC,mCAAmC,CAAC,CAC3D,CAAC,WAAAvC,IAAA,GAhCgBD,IAAI,EAmCvB,cAAe,CAAAC,IAAI"},"metadata":{},"sourceType":"module"}