{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import{Button,Modal}from'@patternfly/react-core';import{SearchPlusIcon}from'@patternfly/react-icons';import{formatDateString}from'util/dates';import{DetailList,Detail}from'components/DetailList';import{VariablesDetail}from'components/CodeEditor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ActivityStreamDetailButton(_ref){var _streamItem$summary_f,_setting$,_setting$2;var streamItem=_ref.streamItem,user=_ref.user,description=_ref.description;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var setting=streamItem===null||streamItem===void 0?void 0:(_streamItem$summary_f=streamItem.summary_fields)===null||_streamItem$summary_f===void 0?void 0:_streamItem$summary_f.setting;var changeRows=Math.max(Object.keys((streamItem===null||streamItem===void 0?void 0:streamItem.changes)||[]).length+2,6);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{ouiaId:\"\".concat(streamItem.id,\"-view-details-button\"),\"aria-label\":/*i18n*/i18n._(\"View event details\"),variant:\"plain\",component:\"button\",onClick:function onClick(){return setIsOpen(true);},children:/*#__PURE__*/_jsx(SearchPlusIcon,{})}),/*#__PURE__*/_jsx(Modal,{variant:\"large\",isOpen:isOpen,title:/*i18n*/i18n._(\"Event detail\"),\"aria-label\":/*i18n*/i18n._(\"Event detail modal\"),onClose:function onClose(){return setIsOpen(false);},children:/*#__PURE__*/_jsxs(DetailList,{gutter:\"sm\",children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Time\"),value:formatDateString(streamItem.timestamp)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Initiated by\"),value:user}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Setting category\"),value:setting&&((_setting$=setting[0])===null||_setting$===void 0?void 0:_setting$.category)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Setting name\"),value:setting&&((_setting$2=setting[0])===null||_setting$2===void 0?void 0:_setting$2.name)}),/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Action\"),value:description}),(streamItem===null||streamItem===void 0?void 0:streamItem.changes)&&/*#__PURE__*/_jsx(VariablesDetail,{label:/*i18n*/i18n._(\"Changes\"),rows:changeRows,value:streamItem!==null&&streamItem!==void 0&&streamItem.changes?JSON.stringify(streamItem.changes):'',name:\"changes\",dataCy:\"activity-stream-detail-changes\"})]})})]});}export default ActivityStreamDetailButton;","map":{"version":3,"names":["React","useState","Button","Modal","SearchPlusIcon","formatDateString","DetailList","Detail","VariablesDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ActivityStreamDetailButton","_ref","_streamItem$summary_f","_setting$","_setting$2","streamItem","user","description","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","setting","summary_fields","changeRows","Math","max","Object","keys","changes","length","children","ouiaId","concat","id","i18n","_","variant","component","onClick","title","onClose","gutter","label","value","timestamp","category","name","fullWidth","rows","JSON","stringify","dataCy"],"sources":["/awx_devel/awx/ui/src/screens/ActivityStream/ActivityStreamDetailButton.js"],"sourcesContent":["import React, { useState } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Button, Modal } from '@patternfly/react-core';\nimport { SearchPlusIcon } from '@patternfly/react-icons';\n\nimport { formatDateString } from 'util/dates';\n\nimport { DetailList, Detail } from 'components/DetailList';\nimport { VariablesDetail } from 'components/CodeEditor';\n\nfunction ActivityStreamDetailButton({ streamItem, user, description }) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const setting = streamItem?.summary_fields?.setting;\n  const changeRows = Math.max(\n    Object.keys(streamItem?.changes || []).length + 2,\n    6\n  );\n\n  return (\n    <>\n      <Button\n        ouiaId={`${streamItem.id}-view-details-button`}\n        aria-label={t`View event details`}\n        variant=\"plain\"\n        component=\"button\"\n        onClick={() => setIsOpen(true)}\n      >\n        <SearchPlusIcon />\n      </Button>\n      <Modal\n        variant=\"large\"\n        isOpen={isOpen}\n        title={t`Event detail`}\n        aria-label={t`Event detail modal`}\n        onClose={() => setIsOpen(false)}\n      >\n        <DetailList gutter=\"sm\">\n          <Detail\n            label={t`Time`}\n            value={formatDateString(streamItem.timestamp)}\n          />\n          <Detail label={t`Initiated by`} value={user} />\n          <Detail\n            label={t`Setting category`}\n            value={setting && setting[0]?.category}\n          />\n          <Detail label={t`Setting name`} value={setting && setting[0]?.name} />\n          <Detail fullWidth label={t`Action`} value={description} />\n          {streamItem?.changes && (\n            <VariablesDetail\n              label={t`Changes`}\n              rows={changeRows}\n              value={\n                streamItem?.changes ? JSON.stringify(streamItem.changes) : ''\n              }\n              name=\"changes\"\n              dataCy=\"activity-stream-detail-changes\"\n            />\n          )}\n        </DetailList>\n      </Modal>\n    </>\n  );\n}\n\nexport default ActivityStreamDetailButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}