{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";/* eslint-disable react/jsx-no-useless-fragment */import React,{useState,useRef,useEffect}from'react';import{Dropdown,DropdownPosition}from'@patternfly/react-core';import{useKebabifiedMenu}from'contexts/Kebabified';import{ToolbarAddButton}from'../PaginatedTable';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function AddDropDownButton(_ref){var dropdownItems=_ref.dropdownItems,ouiaId=_ref.ouiaId;var _useKebabifiedMenu=useKebabifiedMenu(),isKebabified=_useKebabifiedMenu.isKebabified;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var element=useRef(null);useEffect(function(){var toggle=function toggle(e){var _element$current;if(!isKebabified&&(!element||!((_element$current=element.current)!==null&&_element$current!==void 0&&_element$current.contains(e.target)))){setIsOpen(false);}};document.addEventListener('click',toggle,false);return function(){document.removeEventListener('click',toggle);};},[isKebabified]);if(isKebabified){return/*#__PURE__*/_jsx(_Fragment,{children:dropdownItems});}return/*#__PURE__*/_jsx(\"div\",{ref:element,children:/*#__PURE__*/_jsx(Dropdown,{isPlain:true,isOpen:isOpen,position:DropdownPosition.right,toggle:/*#__PURE__*/_jsx(ToolbarAddButton,{ouiaId:ouiaId,\"aria-label\":/*i18n*/i18n._(\"Add\"),showToggleIndicator:true,onClick:function onClick(){return setIsOpen(!isOpen);}}),dropdownItems:dropdownItems,ouiaId:\"add-dropdown\"})},\"add\");}export{AddDropDownButton as _AddDropDownButton};export default AddDropDownButton;","map":{"version":3,"names":["React","useState","useRef","useEffect","Dropdown","DropdownPosition","useKebabifiedMenu","ToolbarAddButton","Fragment","_Fragment","jsx","_jsx","AddDropDownButton","_ref","dropdownItems","ouiaId","_useKebabifiedMenu","isKebabified","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","element","toggle","e","_element$current","current","contains","target","document","addEventListener","removeEventListener","children","ref","isPlain","position","right","i18n","_","showToggleIndicator","onClick","_AddDropDownButton"],"sources":["/awx_devel/awx/ui/src/components/AddDropDownButton/AddDropDownButton.js"],"sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { t } from '@lingui/macro';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownPosition } from '@patternfly/react-core';\nimport { useKebabifiedMenu } from 'contexts/Kebabified';\nimport { ToolbarAddButton } from '../PaginatedTable';\n\nfunction AddDropDownButton({ dropdownItems, ouiaId }) {\n  const { isKebabified } = useKebabifiedMenu();\n  const [isOpen, setIsOpen] = useState(false);\n  const element = useRef(null);\n\n  useEffect(() => {\n    const toggle = (e) => {\n      if (!isKebabified && (!element || !element.current?.contains(e.target))) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('click', toggle, false);\n    return () => {\n      document.removeEventListener('click', toggle);\n    };\n  }, [isKebabified]);\n\n  if (isKebabified) {\n    return <>{dropdownItems}</>;\n  }\n\n  return (\n    <div ref={element} key=\"add\">\n      <Dropdown\n        isPlain\n        isOpen={isOpen}\n        position={DropdownPosition.right}\n        toggle={\n          <ToolbarAddButton\n            ouiaId={ouiaId}\n            aria-label={t`Add`}\n            showToggleIndicator\n            onClick={() => setIsOpen(!isOpen)}\n          />\n        }\n        dropdownItems={dropdownItems}\n        ouiaId=\"add-dropdown\"\n      />\n    </div>\n  );\n}\n\nAddDropDownButton.propTypes = {\n  dropdownItems: PropTypes.arrayOf(PropTypes.element.isRequired).isRequired,\n};\n\nexport { AddDropDownButton as _AddDropDownButton };\nexport default AddDropDownButton;\n"],"mappings":"sIAAA,kDACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAG1D,OAASC,QAAQ,CAAEC,gBAAgB,KAAQ,wBAAwB,CACnE,OAASC,iBAAiB,KAAQ,qBAAqB,CACvD,OAASC,gBAAgB,KAAQ,mBAAmB,CAAC,OAAAC,QAAA,IAAAC,SAAA,gCAAAC,GAAA,IAAAC,IAAA,yBAErD,QAAS,CAAAC,iBAAiBA,CAAAC,IAAA,CAA4B,IAAzB,CAAAC,aAAa,CAAAD,IAAA,CAAbC,aAAa,CAAEC,MAAM,CAAAF,IAAA,CAANE,MAAM,CAChD,IAAAC,kBAAA,CAAyBV,iBAAiB,CAAC,CAAC,CAApCW,YAAY,CAAAD,kBAAA,CAAZC,YAAY,CACpB,IAAAC,SAAA,CAA4BjB,QAAQ,CAAC,KAAK,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,GAAM,CAAAI,OAAO,CAAGrB,MAAM,CAAC,IAAI,CAAC,CAE5BC,SAAS,CAAC,UAAM,CACd,GAAM,CAAAqB,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAIC,CAAC,CAAK,KAAAC,gBAAA,CACpB,GAAI,CAACT,YAAY,GAAK,CAACM,OAAO,EAAI,GAAAG,gBAAA,CAACH,OAAO,CAACI,OAAO,UAAAD,gBAAA,WAAfA,gBAAA,CAAiBE,QAAQ,CAACH,CAAC,CAACI,MAAM,CAAC,EAAC,CAAE,CACvEP,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAEDQ,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAEP,MAAM,CAAE,KAAK,CAAC,CACjD,MAAO,WAAM,CACXM,QAAQ,CAACE,mBAAmB,CAAC,OAAO,CAAER,MAAM,CAAC,CAC/C,CAAC,CACH,CAAC,CAAE,CAACP,YAAY,CAAC,CAAC,CAElB,GAAIA,YAAY,CAAE,CAChB,mBAAON,IAAA,CAAAF,SAAA,EAAAwB,QAAA,CAAGnB,aAAa,CAAG,CAAC,CAC7B,CAEA,mBACEH,IAAA,QAAKuB,GAAG,CAAEX,OAAQ,CAAAU,QAAA,cAChBtB,IAAA,CAACP,QAAQ,EACP+B,OAAO,MACPd,MAAM,CAAEA,MAAO,CACfe,QAAQ,CAAE/B,gBAAgB,CAACgC,KAAM,CACjCb,MAAM,cACJb,IAAA,CAACJ,gBAAgB,EACfQ,MAAM,CAAEA,MAAO,CACf,qBAAYuB,IAAA,CAAAC,CAAA,MAAK,CAAE,CACnBC,mBAAmB,MACnBC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAnB,SAAS,CAAC,CAACD,MAAM,CAAC,EAAC,CACnC,CACF,CACDP,aAAa,CAAEA,aAAc,CAC7BC,MAAM,CAAC,cAAc,CACtB,CAAC,EAfmB,KAgBlB,CAAC,CAEV,CAMA,OAASH,iBAAiB,GAAI,CAAA8B,kBAAkB,EAChD,cAAe,CAAA9B,iBAAiB"},"metadata":{},"sourceType":"module"}