{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import styled from'styled-components';import{Card as PFCard,CardBody as PFCardBody,ExpandableSection as PFExpandable}from'@patternfly/react-core';import getErrorMessage from'./getErrorMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Card=styled(PFCard).withConfig({displayName:\"ErrorDetail__Card\",componentId:\"sc-1grrpky-0\"})([\"background-color:var(--pf-global--BackgroundColor--200);overflow-wrap:break-word;\"]);var CardBody=styled(PFCardBody).withConfig({displayName:\"ErrorDetail__CardBody\",componentId:\"sc-1grrpky-1\"})([\"max-height:200px;overflow:scroll;\"]);var _StyledCardBody2=styled(CardBody).withConfig({displayName:\"ErrorDetail___StyledCardBody2\",componentId:\"sc-1grrpky-2\"})([\"white-space:pre;font-family:var(--pf-global--FontFamily--monospace)\"]);var _StyledCardBody=styled(CardBody).withConfig({displayName:\"ErrorDetail___StyledCardBody\",componentId:\"sc-1grrpky-3\"})([\"max-width:70vw\"]);var Expandable=styled(PFExpandable).withConfig({displayName:\"ErrorDetail__Expandable\",componentId:\"sc-1grrpky-4\"})([\"text-align:left;max-width:75vw;& .pf-c-expandable__toggle{padding-left:10px;margin-left:5px;margin-top:10px;margin-bottom:10px;}\"]);function ErrorDetail(_ref){var error=_ref.error;var response=error.response;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];if(!error){return null;}var handleToggle=function handleToggle(){setIsExpanded(!isExpanded);};var renderNetworkError=function renderNetworkError(){var _response$config,_response$config2;var message=getErrorMessage(response);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(CardBody,{children:[response===null||response===void 0?void 0:(_response$config=response.config)===null||_response$config===void 0?void 0:_response$config.method.toUpperCase(),\" \",response===null||response===void 0?void 0:(_response$config2=response.config)===null||_response$config2===void 0?void 0:_response$config2.url,' ',/*#__PURE__*/_jsx(\"strong\",{children:response===null||response===void 0?void 0:response.status})]}),/*#__PURE__*/_jsx(_StyledCardBody,{children:Array.isArray(message)?/*#__PURE__*/_jsx(\"ul\",{children:message.map(function(m){return typeof m==='string'?/*#__PURE__*/_jsx(\"li\",{children:m},m):null;})}):message})]});};var renderStack=function renderStack(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[error.name,\": \",error.message]})}),/*#__PURE__*/_jsx(_StyledCardBody2,{children:error.stack})]});};return/*#__PURE__*/_jsx(Expandable,{toggleText:/*i18n*/i18n._(\"Details\"),onToggle:handleToggle,isExpanded:isExpanded,children:/*#__PURE__*/_jsx(Card,{children:Object.prototype.hasOwnProperty.call(error,'response')?renderNetworkError():renderStack()})});}ErrorDetail.defaultProps={error:null};export default ErrorDetail;","map":{"version":3,"names":["React","useState","styled","Card","PFCard","CardBody","PFCardBody","ExpandableSection","PFExpandable","getErrorMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","withConfig","displayName","componentId","_StyledCardBody2","_StyledCardBody","Expandable","ErrorDetail","_ref","error","response","_useState","_useState2","_slicedToArray","isExpanded","setIsExpanded","handleToggle","renderNetworkError","_response$config","_response$config2","message","children","config","method","toUpperCase","url","status","Array","isArray","map","m","renderStack","name","stack","toggleText","i18n","_","onToggle","Object","prototype","hasOwnProperty","call","defaultProps"],"sources":["/awx_devel/awx/ui/src/components/ErrorDetail/ErrorDetail.js"],"sourcesContent":["import 'styled-components/macro';\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { t } from '@lingui/macro';\n\nimport {\n  Card as PFCard,\n  CardBody as PFCardBody,\n  ExpandableSection as PFExpandable,\n} from '@patternfly/react-core';\nimport getErrorMessage from './getErrorMessage';\n\nconst Card = styled(PFCard)`\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n`;\n\nconst CardBody = styled(PFCardBody)`\n  max-height: 200px;\n  overflow: scroll;\n`;\n\nconst Expandable = styled(PFExpandable)`\n  text-align: left;\n  max-width: 75vw;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n`;\n\nfunction ErrorDetail({ error }) {\n  const { response } = error;\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  if (!error) {\n    return null;\n  }\n\n  const handleToggle = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  const renderNetworkError = () => {\n    const message = getErrorMessage(response);\n\n    return (\n      <>\n        <CardBody>\n          {response?.config?.method.toUpperCase()} {response?.config?.url}{' '}\n          <strong>{response?.status}</strong>\n        </CardBody>\n        <CardBody css=\"max-width: 70vw\">\n          {Array.isArray(message) ? (\n            <ul>\n              {message.map((m) =>\n                typeof m === 'string' ? <li key={m}>{m}</li> : null\n              )}\n            </ul>\n          ) : (\n            message\n          )}\n        </CardBody>\n      </>\n    );\n  };\n\n  const renderStack = () => (\n    <>\n      <CardBody>\n        <strong>\n          {error.name}: {error.message}\n        </strong>\n      </CardBody>\n      <CardBody css=\"white-space: pre; font-family: var(--pf-global--FontFamily--monospace)\">\n        {error.stack}\n      </CardBody>\n    </>\n  );\n\n  return (\n    <Expandable\n      toggleText={t`Details`}\n      onToggle={handleToggle}\n      isExpanded={isExpanded}\n    >\n      <Card>\n        {Object.prototype.hasOwnProperty.call(error, 'response')\n          ? renderNetworkError()\n          : renderStack()}\n      </Card>\n    </Expandable>\n  );\n}\n\nErrorDetail.propTypes = {\n  error: PropTypes.instanceOf(Error),\n};\nErrorDetail.defaultProps = {\n  error: null,\n};\n\nexport default ErrorDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}