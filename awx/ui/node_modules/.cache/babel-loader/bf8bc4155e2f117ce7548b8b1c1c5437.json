{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{useFormikContext}from'formik';import{FormGroup,Title}from'@patternfly/react-core';import CredentialLookup from'components/Lookup/CredentialLookup';import FormField,{CheckboxField}from'components/FormField';import{required}from'util/validators';import{FormCheckboxLayout,FormFullWidthLayout}from'components/FormLayout';import getProjectHelpStrings from'../Project.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var UrlFormField=function UrlFormField(_ref){var tooltip=_ref.tooltip;return/*#__PURE__*/_jsx(FormField,{id:\"project-scm-url\",isRequired:true,label:/*i18n*/i18n._(\"Source Control URL\"),name:\"scm_url\",tooltip:tooltip,tooltipMaxWidth:\"350px\",type:\"text\",validate:required(null)});};export var BranchFormField=function BranchFormField(_ref2){var label=_ref2.label;var projectHelpStrings=getProjectHelpStrings();return/*#__PURE__*/_jsx(FormField,{id:\"project-scm-branch\",name:\"scm_branch\",type:\"text\",label:label,tooltip:projectHelpStrings.branchFormField});};export var ScmCredentialFormField=function ScmCredentialFormField(_ref3){var credential=_ref3.credential,onCredentialSelection=_ref3.onCredentialSelection;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched;var onCredentialChange=useCallback(function(value){onCredentialSelection('scm',value);setFieldValue('credential',value);setFieldTouched('credential',true,false);},[onCredentialSelection,setFieldValue,setFieldTouched]);return/*#__PURE__*/_jsx(CredentialLookup,{credentialTypeId:credential.typeId,label:/*i18n*/i18n._(\"Source Control Credential\"),value:credential.value,onChange:onCredentialChange});};export var ScmTypeOptions=function ScmTypeOptions(_ref4){var scmUpdateOnLaunch=_ref4.scmUpdateOnLaunch,hideAllowOverride=_ref4.hideAllowOverride;var _useFormikContext2=useFormikContext(),values=_useFormikContext2.values;var projectHelpStrings=getProjectHelpStrings();return/*#__PURE__*/_jsxs(FormFullWidthLayout,{children:[/*#__PURE__*/_jsx(FormGroup,{fieldId:\"project-option-checkboxes\",label:/*i18n*/i18n._(\"Options\"),children:/*#__PURE__*/_jsxs(FormCheckboxLayout,{children:[/*#__PURE__*/_jsx(CheckboxField,{id:\"option-scm-clean\",name:\"scm_clean\",label:/*i18n*/i18n._(\"Clean\"),tooltip:projectHelpStrings.options.clean}),/*#__PURE__*/_jsx(CheckboxField,{id:\"option-scm-delete-on-update\",name:\"scm_delete_on_update\",label:/*i18n*/i18n._(\"Delete\"),tooltip:projectHelpStrings.options.delete}),values.scm_type==='git'?/*#__PURE__*/_jsx(CheckboxField,{id:\"option-scm-track-submodules\",name:\"scm_track_submodules\",label:/*i18n*/i18n._(\"Track submodules\"),tooltip:projectHelpStrings.options.trackSubModules}):null,/*#__PURE__*/_jsx(CheckboxField,{id:\"option-scm-update-on-launch\",name:\"scm_update_on_launch\",label:/*i18n*/i18n._(\"Update Revision on Launch\"),tooltip:projectHelpStrings.options.updateOnLaunch}),!hideAllowOverride&&/*#__PURE__*/_jsx(CheckboxField,{id:\"option-allow-override\",name:\"allow_override\",label:/*i18n*/i18n._(\"Allow Branch Override\"),tooltip:projectHelpStrings.options.allowBranchOverride})]})}),scmUpdateOnLaunch&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{size:\"md\",headingLevel:\"h4\",children:/*i18n*/i18n._(\"Option Details\")}),/*#__PURE__*/_jsx(FormField,{id:\"project-cache-timeout\",name:\"scm_update_cache_timeout\",type:\"number\",min:\"0\",label:/*i18n*/i18n._(\"Cache Timeout\"),tooltip:projectHelpStrings.options.cacheTimeout})]})]});};","map":{"version":3,"names":["React","useCallback","useFormikContext","FormGroup","Title","CredentialLookup","FormField","CheckboxField","required","FormCheckboxLayout","FormFullWidthLayout","getProjectHelpStrings","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UrlFormField","_ref","tooltip","id","isRequired","label","i18n","_","name","tooltipMaxWidth","type","validate","BranchFormField","_ref2","projectHelpStrings","branchFormField","ScmCredentialFormField","_ref3","credential","onCredentialSelection","_useFormikContext","setFieldValue","setFieldTouched","onCredentialChange","value","credentialTypeId","typeId","onChange","ScmTypeOptions","_ref4","scmUpdateOnLaunch","hideAllowOverride","_useFormikContext2","values","children","fieldId","options","clean","delete","scm_type","trackSubModules","updateOnLaunch","allowBranchOverride","size","headingLevel","min","cacheTimeout"],"sources":["/awx_devel/awx/ui/src/screens/Project/shared/ProjectSubForms/SharedFields.js"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { useFormikContext } from 'formik';\nimport { FormGroup, Title } from '@patternfly/react-core';\nimport CredentialLookup from 'components/Lookup/CredentialLookup';\nimport FormField, { CheckboxField } from 'components/FormField';\nimport { required } from 'util/validators';\nimport { FormCheckboxLayout, FormFullWidthLayout } from 'components/FormLayout';\nimport getProjectHelpStrings from '../Project.helptext';\n\nexport const UrlFormField = ({ tooltip }) => (\n  <FormField\n    id=\"project-scm-url\"\n    isRequired\n    label={t`Source Control URL`}\n    name=\"scm_url\"\n    tooltip={tooltip}\n    tooltipMaxWidth=\"350px\"\n    type=\"text\"\n    validate={required(null)}\n  />\n);\n\nexport const BranchFormField = ({ label }) => {\n  const projectHelpStrings = getProjectHelpStrings();\n  return (\n    <FormField\n      id=\"project-scm-branch\"\n      name=\"scm_branch\"\n      type=\"text\"\n      label={label}\n      tooltip={projectHelpStrings.branchFormField}\n    />\n  );\n};\n\nexport const ScmCredentialFormField = ({\n  credential,\n  onCredentialSelection,\n}) => {\n  const { setFieldValue, setFieldTouched } = useFormikContext();\n\n  const onCredentialChange = useCallback(\n    (value) => {\n      onCredentialSelection('scm', value);\n      setFieldValue('credential', value);\n      setFieldTouched('credential', true, false);\n    },\n    [onCredentialSelection, setFieldValue, setFieldTouched]\n  );\n\n  return (\n    <CredentialLookup\n      credentialTypeId={credential.typeId}\n      label={t`Source Control Credential`}\n      value={credential.value}\n      onChange={onCredentialChange}\n    />\n  );\n};\n\nexport const ScmTypeOptions = ({ scmUpdateOnLaunch, hideAllowOverride }) => {\n  const { values } = useFormikContext();\n  const projectHelpStrings = getProjectHelpStrings();\n\n  return (\n    <FormFullWidthLayout>\n      <FormGroup fieldId=\"project-option-checkboxes\" label={t`Options`}>\n        <FormCheckboxLayout>\n          <CheckboxField\n            id=\"option-scm-clean\"\n            name=\"scm_clean\"\n            label={t`Clean`}\n            tooltip={projectHelpStrings.options.clean}\n          />\n          <CheckboxField\n            id=\"option-scm-delete-on-update\"\n            name=\"scm_delete_on_update\"\n            label={t`Delete`}\n            tooltip={projectHelpStrings.options.delete}\n          />\n          {values.scm_type === 'git' ? (\n            <CheckboxField\n              id=\"option-scm-track-submodules\"\n              name=\"scm_track_submodules\"\n              label={t`Track submodules`}\n              tooltip={projectHelpStrings.options.trackSubModules}\n            />\n          ) : null}\n          <CheckboxField\n            id=\"option-scm-update-on-launch\"\n            name=\"scm_update_on_launch\"\n            label={t`Update Revision on Launch`}\n            tooltip={projectHelpStrings.options.updateOnLaunch}\n          />\n          {!hideAllowOverride && (\n            <CheckboxField\n              id=\"option-allow-override\"\n              name=\"allow_override\"\n              label={t`Allow Branch Override`}\n              tooltip={projectHelpStrings.options.allowBranchOverride}\n            />\n          )}\n        </FormCheckboxLayout>\n      </FormGroup>\n\n      {scmUpdateOnLaunch && (\n        <>\n          <Title size=\"md\" headingLevel=\"h4\">\n            {t`Option Details`}\n          </Title>\n          <FormField\n            id=\"project-cache-timeout\"\n            name=\"scm_update_cache_timeout\"\n            type=\"number\"\n            min=\"0\"\n            label={t`Cache Timeout`}\n            tooltip={projectHelpStrings.options.cacheTimeout}\n          />\n        </>\n      )}\n    </FormFullWidthLayout>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}