{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{Button,DropdownItem,Tooltip}from'@patternfly/react-core';import{KebabifiedContext}from'contexts/Kebabified';import{WorkflowApproval}from'types';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function cannotDeny(item){return!item.can_approve_or_deny;}function WorkflowApprovalListDenyButton(_ref){var onDeny=_ref.onDeny,selectedItems=_ref.selectedItems;var _useContext=useContext(KebabifiedContext),isKebabified=_useContext.isKebabified;var renderTooltip=function renderTooltip(){if(selectedItems.length===0){return(/*i18n*/i18n._(\"Select a row to deny\"));}var itemsUnableToDeny=selectedItems.filter(cannotDeny).map(function(item){return item.name;}).join(', ');if(selectedItems.some(cannotDeny)){return(/*i18n*/i18n._(\"You are unable to act on the following workflow approvals: {itemsUnableToDeny}\",{itemsUnableToDeny:itemsUnableToDeny}));}return(/*i18n*/i18n._(\"Deny\"));};var isDisabled=selectedItems.length===0||selectedItems.some(cannotDeny);return/*#__PURE__*/ (/* eslint-disable-next-line react/jsx-no-useless-fragment */_jsx(_Fragment,{children:isKebabified?/*#__PURE__*/_jsx(DropdownItem,{isDisabled:isDisabled,component:\"button\",onClick:onDeny,children:/*i18n*/i18n._(\"Deny\")},\"deny\"):/*#__PURE__*/_jsx(Tooltip,{content:renderTooltip(),position:\"top\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{ouiaId:\"workflow-approval-deny-button\",isDisabled:isDisabled,\"aria-label\":/*i18n*/i18n._(\"Deny\"),variant:\"danger\",onClick:onDeny,children:/*i18n*/i18n._(\"Deny\")})})})}));}WorkflowApprovalListDenyButton.defaultProps={selectedItems:[]};export default WorkflowApprovalListDenyButton;","map":{"version":3,"names":["React","useContext","Button","DropdownItem","Tooltip","KebabifiedContext","WorkflowApproval","jsx","_jsx","Fragment","_Fragment","cannotDeny","item","can_approve_or_deny","WorkflowApprovalListDenyButton","_ref","onDeny","selectedItems","_useContext","isKebabified","renderTooltip","length","i18n","_","itemsUnableToDeny","filter","map","name","join","some","isDisabled","children","component","onClick","content","position","ouiaId","variant","defaultProps"],"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApprovalList/WorkflowApprovalListDenyButton.js"],"sourcesContent":["import React, { useContext } from 'react';\n\nimport { t } from '@lingui/macro';\nimport PropTypes from 'prop-types';\nimport { Button, DropdownItem, Tooltip } from '@patternfly/react-core';\nimport { KebabifiedContext } from 'contexts/Kebabified';\nimport { WorkflowApproval } from 'types';\n\nfunction cannotDeny(item) {\n  return !item.can_approve_or_deny;\n}\n\nfunction WorkflowApprovalListDenyButton({ onDeny, selectedItems }) {\n  const { isKebabified } = useContext(KebabifiedContext);\n\n  const renderTooltip = () => {\n    if (selectedItems.length === 0) {\n      return t`Select a row to deny`;\n    }\n\n    const itemsUnableToDeny = selectedItems\n      .filter(cannotDeny)\n      .map((item) => item.name)\n      .join(', ');\n\n    if (selectedItems.some(cannotDeny)) {\n      return t`You are unable to act on the following workflow approvals: ${itemsUnableToDeny}`;\n    }\n\n    return t`Deny`;\n  };\n\n  const isDisabled =\n    selectedItems.length === 0 || selectedItems.some(cannotDeny);\n\n  return (\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    <>\n      {isKebabified ? (\n        <DropdownItem\n          key=\"deny\"\n          isDisabled={isDisabled}\n          component=\"button\"\n          onClick={onDeny}\n        >\n          {t`Deny`}\n        </DropdownItem>\n      ) : (\n        <Tooltip content={renderTooltip()} position=\"top\">\n          <div>\n            <Button\n              ouiaId=\"workflow-approval-deny-button\"\n              isDisabled={isDisabled}\n              aria-label={t`Deny`}\n              variant=\"danger\"\n              onClick={onDeny}\n            >\n              {t`Deny`}\n            </Button>\n          </div>\n        </Tooltip>\n      )}\n    </>\n  );\n}\n\nWorkflowApprovalListDenyButton.propTypes = {\n  onDeny: PropTypes.func.isRequired,\n  selectedItems: PropTypes.arrayOf(WorkflowApproval),\n};\n\nWorkflowApprovalListDenyButton.defaultProps = {\n  selectedItems: [],\n};\n\nexport default WorkflowApprovalListDenyButton;\n"],"mappings":"+BAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CAIzC,OAASC,MAAM,CAAEC,YAAY,CAAEC,OAAO,KAAQ,wBAAwB,CACtE,OAASC,iBAAiB,KAAQ,qBAAqB,CACvD,OAASC,gBAAgB,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzC,QAAS,CAAAC,UAAUA,CAACC,IAAI,CAAE,CACxB,MAAO,CAACA,IAAI,CAACC,mBAAmB,CAClC,CAEA,QAAS,CAAAC,8BAA8BA,CAAAC,IAAA,CAA4B,IAAzB,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,aAAa,CAAAF,IAAA,CAAbE,aAAa,CAC7D,IAAAC,WAAA,CAAyBjB,UAAU,CAACI,iBAAiB,CAAC,CAA9Cc,YAAY,CAAAD,WAAA,CAAZC,YAAY,CAEpB,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAIH,aAAa,CAACI,MAAM,GAAK,CAAC,CAAE,CAC9B,eAAOC,IAAA,CAAAC,CAAA,uBAAsB,CAAC,EAChC,CAEA,GAAM,CAAAC,iBAAiB,CAAGP,aAAa,CACpCQ,MAAM,CAACd,UAAU,CAAC,CAClBe,GAAG,CAAC,SAACd,IAAI,QAAK,CAAAA,IAAI,CAACe,IAAI,GAAC,CACxBC,IAAI,CAAC,IAAI,CAAC,CAEb,GAAIX,aAAa,CAACY,IAAI,CAAClB,UAAU,CAAC,CAAE,CAClC,eAAOW,IAAA,CAAAC,CAAA,mFAAAC,iBAAA,CAA+DA,iBAAiB,CAAC,CAAC,EAC3F,CAEA,eAAOF,IAAA,CAAAC,CAAA,OAAM,CAAC,EAChB,CAAC,CAED,GAAM,CAAAO,UAAU,CACdb,aAAa,CAACI,MAAM,GAAK,CAAC,EAAIJ,aAAa,CAACY,IAAI,CAAClB,UAAU,CAAC,CAE9D,oBACE,6DACAH,IAAA,CAAAE,SAAA,EAAAqB,QAAA,CACGZ,YAAY,cACXX,IAAA,CAACL,YAAY,EAEX2B,UAAU,CAAEA,UAAW,CACvBE,SAAS,CAAC,QAAQ,CAClBC,OAAO,CAAEjB,MAAO,CAAAe,QAAA,SAEfT,IAAA,CAAAC,CAAA,OAAM,CAAC,EALJ,MAMQ,CAAC,cAEff,IAAA,CAACJ,OAAO,EAAC8B,OAAO,CAAEd,aAAa,CAAC,CAAE,CAACe,QAAQ,CAAC,KAAK,CAAAJ,QAAA,cAC/CvB,IAAA,QAAAuB,QAAA,cACEvB,IAAA,CAACN,MAAM,EACLkC,MAAM,CAAC,+BAA+B,CACtCN,UAAU,CAAEA,UAAW,CACvB,qBAAYR,IAAA,CAAAC,CAAA,OAAM,CAAE,CACpBc,OAAO,CAAC,QAAQ,CAChBJ,OAAO,CAAEjB,MAAO,CAAAe,QAAA,SAEfT,IAAA,CAAAC,CAAA,OAAM,CAAC,CACF,CAAC,CACN,CAAC,CACC,CACV,CACD,CAAC,EAEP,CAOAT,8BAA8B,CAACwB,YAAY,CAAG,CAC5CrB,aAAa,CAAE,EACjB,CAAC,CAED,cAAe,CAAAH,8BAA8B"},"metadata":{},"sourceType":"module"}