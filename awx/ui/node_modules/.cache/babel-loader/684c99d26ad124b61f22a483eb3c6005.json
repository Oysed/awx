{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import{Button,Tooltip}from'@patternfly/react-core';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";var ButtonWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-left: auto;\\n  &&& {\\n    --pf-c-button--FontSize: var(--pf-c-button--m-small--FontSize);\\n  }\\n\"])));function RevertButton(_ref){var _meta$initialValue;var id=_ref.id,defaultValue=_ref.defaultValue,_ref$isDisabled=_ref.isDisabled,isDisabled=_ref$isDisabled===void 0?false:_ref$isDisabled,_ref$onRevertCallback=_ref.onRevertCallback,onRevertCallback=_ref$onRevertCallback===void 0?function(){return null;}:_ref$onRevertCallback;var _useField=useField(id),_useField2=_slicedToArray(_useField,3),field=_useField2[0],meta=_useField2[1],helpers=_useField2[2];var initialValue=(_meta$initialValue=meta.initialValue)!==null&&_meta$initialValue!==void 0?_meta$initialValue:'';var currentValue=field.value;var isRevertable=true;var isMatch=false;if(currentValue===defaultValue&&currentValue!==initialValue){isRevertable=false;}if(currentValue===defaultValue&&currentValue===initialValue){isMatch=true;}var handleConfirm=function handleConfirm(){helpers.setValue(isRevertable?defaultValue:initialValue);onRevertCallback();};var revertTooltipContent=isRevertable?/*i18n*/i18n._(\"Revert to factory default.\"):/*i18n*/i18n._(\"Restore initial value.\");var tooltipContent=isDisabled||isMatch?/*i18n*/i18n._(\"Setting matches factory default.\"):revertTooltipContent;return/*#__PURE__*/_jsx(Tooltip,{entryDelay:700,content:tooltipContent,children:/*#__PURE__*/_jsx(ButtonWrapper,{children:/*#__PURE__*/_jsx(Button,{\"aria-label\":isRevertable?/*i18n*/i18n._(\"Revert\"):/*i18n*/i18n._(\"Undo\"),ouiaId:\"\".concat(id,\"-revert\"),isInline:true,isSmall:true,onClick:handleConfirm,type:\"button\",variant:\"link\",isDisabled:isDisabled||isMatch,children:isRevertable?/*i18n*/i18n._(\"Revert\"):/*i18n*/i18n._(\"Undo\")})})});}export default RevertButton;","map":{"version":3,"names":["React","useField","Button","Tooltip","styled","jsx","_jsx","ButtonWrapper","div","_templateObject","_taggedTemplateLiteral","RevertButton","_ref","_meta$initialValue","id","defaultValue","_ref$isDisabled","isDisabled","_ref$onRevertCallback","onRevertCallback","_useField","_useField2","_slicedToArray","field","meta","helpers","initialValue","currentValue","value","isRevertable","isMatch","handleConfirm","setValue","revertTooltipContent","i18n","_","tooltipContent","entryDelay","content","children","ouiaId","concat","isInline","isSmall","onClick","type","variant"],"sources":["/awx_devel/awx/ui/src/screens/Setting/shared/RevertButton.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport styled from 'styled-components';\n\nconst ButtonWrapper = styled.div`\n  margin-left: auto;\n  &&& {\n    --pf-c-button--FontSize: var(--pf-c-button--m-small--FontSize);\n  }\n`;\n\nfunction RevertButton({\n  id,\n  defaultValue,\n  isDisabled = false,\n  onRevertCallback = () => null,\n}) {\n  const [field, meta, helpers] = useField(id);\n  const initialValue = meta.initialValue ?? '';\n  const currentValue = field.value;\n  let isRevertable = true;\n  let isMatch = false;\n\n  if (currentValue === defaultValue && currentValue !== initialValue) {\n    isRevertable = false;\n  }\n\n  if (currentValue === defaultValue && currentValue === initialValue) {\n    isMatch = true;\n  }\n\n  const handleConfirm = () => {\n    helpers.setValue(isRevertable ? defaultValue : initialValue);\n    onRevertCallback();\n  };\n\n  const revertTooltipContent = isRevertable\n    ? t`Revert to factory default.`\n    : t`Restore initial value.`;\n  const tooltipContent =\n    isDisabled || isMatch\n      ? t`Setting matches factory default.`\n      : revertTooltipContent;\n\n  return (\n    <Tooltip entryDelay={700} content={tooltipContent}>\n      <ButtonWrapper>\n        <Button\n          aria-label={isRevertable ? t`Revert` : t`Undo`}\n          ouiaId={`${id}-revert`}\n          isInline\n          isSmall\n          onClick={handleConfirm}\n          type=\"button\"\n          variant=\"link\"\n          isDisabled={isDisabled || isMatch}\n        >\n          {isRevertable ? t`Revert` : t`Undo`}\n        </Button>\n      </ButtonWrapper>\n    </Tooltip>\n  );\n}\n\nRevertButton.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default RevertButton;\n"],"mappings":"iRAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAIzB,OAASC,QAAQ,KAAQ,QAAQ,CACjC,OAASC,MAAM,CAAEC,OAAO,KAAQ,wBAAwB,CACxD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvC,GAAM,CAAAC,aAAa,CAAGH,MAAM,CAACI,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,mHAK/B,CAED,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAKlB,KAAAC,kBAAA,IAJD,CAAAC,EAAE,CAAAF,IAAA,CAAFE,EAAE,CACFC,YAAY,CAAAH,IAAA,CAAZG,YAAY,CAAAC,eAAA,CAAAJ,IAAA,CACZK,UAAU,CAAVA,UAAU,CAAAD,eAAA,UAAG,KAAK,CAAAA,eAAA,CAAAE,qBAAA,CAAAN,IAAA,CAClBO,gBAAgB,CAAhBA,gBAAgB,CAAAD,qBAAA,UAAG,iBAAM,KAAI,GAAAA,qBAAA,CAE7B,IAAAE,SAAA,CAA+BnB,QAAQ,CAACa,EAAE,CAAC,CAAAO,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,KAAK,CAAAF,UAAA,IAAEG,IAAI,CAAAH,UAAA,IAAEI,OAAO,CAAAJ,UAAA,IAC3B,GAAM,CAAAK,YAAY,EAAAb,kBAAA,CAAGW,IAAI,CAACE,YAAY,UAAAb,kBAAA,UAAAA,kBAAA,CAAI,EAAE,CAC5C,GAAM,CAAAc,YAAY,CAAGJ,KAAK,CAACK,KAAK,CAChC,GAAI,CAAAC,YAAY,CAAG,IAAI,CACvB,GAAI,CAAAC,OAAO,CAAG,KAAK,CAEnB,GAAIH,YAAY,GAAKZ,YAAY,EAAIY,YAAY,GAAKD,YAAY,CAAE,CAClEG,YAAY,CAAG,KAAK,CACtB,CAEA,GAAIF,YAAY,GAAKZ,YAAY,EAAIY,YAAY,GAAKD,YAAY,CAAE,CAClEI,OAAO,CAAG,IAAI,CAChB,CAEA,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1BN,OAAO,CAACO,QAAQ,CAACH,YAAY,CAAGd,YAAY,CAAGW,YAAY,CAAC,CAC5DP,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAED,GAAM,CAAAc,oBAAoB,CAAGJ,YAAY,SACrCK,IAAA,CAAAC,CAAA,6BAA4B,CAAC,SAC7BD,IAAA,CAAAC,CAAA,yBAAwB,CAAC,CAC7B,GAAM,CAAAC,cAAc,CAClBnB,UAAU,EAAIa,OAAO,SACjBI,IAAA,CAAAC,CAAA,mCAAkC,CAAC,CACnCF,oBAAoB,CAE1B,mBACE3B,IAAA,CAACH,OAAO,EAACkC,UAAU,CAAE,GAAI,CAACC,OAAO,CAAEF,cAAe,CAAAG,QAAA,cAChDjC,IAAA,CAACC,aAAa,EAAAgC,QAAA,cACZjC,IAAA,CAACJ,MAAM,EACL,aAAY2B,YAAY,SAAGK,IAAA,CAAAC,CAAA,SAAQ,CAAC,SAAGD,IAAA,CAAAC,CAAA,OAAM,CAAE,CAC/CK,MAAM,IAAAC,MAAA,CAAK3B,EAAE,WAAU,CACvB4B,QAAQ,MACRC,OAAO,MACPC,OAAO,CAAEb,aAAc,CACvBc,IAAI,CAAC,QAAQ,CACbC,OAAO,CAAC,MAAM,CACd7B,UAAU,CAAEA,UAAU,EAAIa,OAAQ,CAAAS,QAAA,CAEjCV,YAAY,SAAGK,IAAA,CAAAC,CAAA,SAAQ,CAAC,SAAGD,IAAA,CAAAC,CAAA,OAAM,CAAC,CAC7B,CAAC,CACI,CAAC,CACT,CAAC,CAEd,CAMA,cAAe,CAAAxB,YAAY"},"metadata":{},"sourceType":"module"}