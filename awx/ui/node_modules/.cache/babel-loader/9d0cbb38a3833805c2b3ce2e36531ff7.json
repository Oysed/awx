{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";/* eslint-disable react/jsx-no-useless-fragment */import React,{useCallback,useEffect,useRef,useState}from'react';import{useHistory,useLocation}from'react-router-dom';import styled from'styled-components';import{AutoSizer,CellMeasurer,CellMeasurerCache,InfiniteLoader,List}from'react-virtualized';import{Button,Alert}from'@patternfly/react-core';import AlertModal from'components/AlertModal';import{CardBody as _CardBody}from'components/Card';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import ErrorDetail from'components/ErrorDetail';import StatusLabel from'components/StatusLabel';import{JobsAPI}from'api';import{getJobModel,isJobRunning}from'util/jobs';import useRequest,{useDismissableError}from'hooks/useRequest';import useInterval from'hooks/useInterval';import{parseQueryString,getQSConfig}from'util/qs';import useIsMounted from'hooks/useIsMounted';import JobEvent from'./JobEvent';import JobEventSkeleton from'./JobEventSkeleton';import PageControls from'./PageControls';import HostEventModal from'./HostEventModal';import JobOutputSearch from'./JobOutputSearch';import EmptyOutput from'./EmptyOutput';import{HostStatusBar,OutputToolbar}from'./shared';import getLineTextHtml from'./getLineTextHtml';import connectJobSocket,{closeWebSocket}from'./connectJobSocket';import getEventRequestParams from'./getEventRequestParams';import isHostEvent from'./isHostEvent';import{prependTraceback}from'./loadJobEvents';import useJobEvents from'./useJobEvents';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var QS_CONFIG=getQSConfig('job_output',{order_by:'counter'});var CardBody=styled(_CardBody)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-flow: column;\\n  height: calc(100vh - 267px);\\n\"])));var HeaderTitle=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  align-items: center;\\n  h1 {\\n    margin-right: 10px;\\n    font-weight: var(--pf-global--FontWeight--bold);\\n  }\\n\"])));var OutputHeader=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n\"])));var OutputWrapper=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background-color: #ffffff;\\n  display: flex;\\n  flex-direction: column;\\n  flex: 1 1 auto;\\n  font-family: monospace;\\n  font-size: 15px;\\n  outline: 1px solid #d7d7d7;\\n  \",\"\\n\"])),function(_ref){var cssMap=_ref.cssMap;return Object.keys(cssMap).map(function(className){return\".\".concat(className,\"{\").concat(cssMap[className],\"}\");});});var OutputFooter=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  background-color: #ebebeb;\\n  border-right: 1px solid #d7d7d7;\\n  width: 75px;\\n  flex: 1;\\n\"])));var cache=new CellMeasurerCache({fixedWidth:true,defaultHeight:25});function JobOutput(_ref2){var _job$status;var job=_ref2.job,eventRelatedSearchableKeys=_ref2.eventRelatedSearchableKeys,eventSearchableKeys=_ref2.eventSearchableKeys;var location=useLocation();var listRef=useRef(null);var previousWidth=useRef(0);var jobSocketCounter=useRef(0);var isMounted=useIsMounted();var scrollTop=useRef(0);var scrollHeight=useRef(0);var history=useHistory();var eventByUuidRequests=useRef([]);var eventsProcessedDelay=useRef(250);var fetchEventByUuid=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(uuid){var promise,_yield$promise,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:promise=eventByUuidRequests.current[uuid];if(!promise){promise=getJobModel(job.type).readEvents(job.id,{uuid:uuid});eventByUuidRequests.current[uuid]=promise;}_context.next=4;return promise;case 4:_yield$promise=_context.sent;data=_yield$promise.data;eventByUuidRequests.current[uuid]=null;return _context.abrupt(\"return\",data.results[0]||null);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchEventByUuid(_x){return _ref3.apply(this,arguments);};}();var fetchChildrenSummary=function fetchChildrenSummary(){return JobsAPI.readChildrenSummary(job.id);};var _useState=useState((_job$status=job.status)!==null&&_job$status!==void 0?_job$status:'waiting'),_useState2=_slicedToArray(_useState,2),jobStatus=_useState2[0],setJobStatus=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),forceFlatMode=_useState4[0],setForceFlatMode=_useState4[1];var isFlatMode=isJobRunning(jobStatus)||location.search.length>1||job.type!=='job';var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isTreeReady=_useState6[0],setIsTreeReady=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),onReadyEvents=_useState8[0],setOnReadyEvents=_useState8[1];var _useJobEvents=useJobEvents({fetchEventByUuid:fetchEventByUuid,fetchChildrenSummary:fetchChildrenSummary,setForceFlatMode:setForceFlatMode,setJobTreeReady:function setJobTreeReady(){return setIsTreeReady(true);}},job.id,isFlatMode||forceFlatMode),addEvents=_useJobEvents.addEvents,toggleNodeIsCollapsed=_useJobEvents.toggleNodeIsCollapsed,toggleCollapseAll=_useJobEvents.toggleCollapseAll,getEventForRow=_useJobEvents.getEventForRow,getNumCollapsedEvents=_useJobEvents.getNumCollapsedEvents,getCounterForRow=_useJobEvents.getCounterForRow,getEvent=_useJobEvents.getEvent,clearLoadedEvents=_useJobEvents.clearLoadedEvents,rebuildEventsTree=_useJobEvents.rebuildEventsTree,isAllCollapsed=_useJobEvents.isAllCollapsed;var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),wsEvents=_useState10[0],setWsEvents=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),cssMap=_useState12[0],setCssMap=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),remoteRowCount=_useState14[0],setRemoteRowCount=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),contentError=_useState16[0],setContentError=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),currentlyLoading=_useState18[0],setCurrentlyLoading=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),hasContentLoading=_useState20[0],setHasContentLoading=_useState20[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),hostEvent=_useState22[0],setHostEvent=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isHostModalOpen=_useState24[0],setIsHostModalOpen=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),showCancelModal=_useState26[0],setShowCancelModal=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),highestLoadedCounter=_useState28[0],setHighestLoadedCounter=_useState28[1];var _useState29=useState(isJobRunning(job.status)),_useState30=_slicedToArray(_useState29,2),isFollowModeEnabled=_useState30[0],setIsFollowModeEnabled=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),isMonitoringWebsocket=_useState32[0],setIsMonitoringWebsocket=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),lastScrollPosition=_useState34[0],setLastScrollPosition=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),showEventsRefresh=_useState36[0],setShowEventsRefresh=_useState36[1];useEffect(function(){if(!isTreeReady||!onReadyEvents.length){return;}addEvents(onReadyEvents);setOnReadyEvents([]);if(isFollowModeEnabled){setTimeout(function(){scrollToEnd();},0);}},[isTreeReady,onReadyEvents]);// eslint-disable-line react-hooks/exhaustive-deps\nvar totalNonCollapsedRows=Math.max(remoteRowCount-getNumCollapsedEvents(),0);useInterval(function(){monitorJobSocketCounter();},isMonitoringWebsocket?5000:null);useEffect(function(){var pendingRequests=Object.values(eventByUuidRequests.current||{});setHasContentLoading(true);// prevents \"no content found\" screen from flashing\nif(location.search){setIsFollowModeEnabled(false);}Promise.allSettled(pendingRequests).then(function(){setRemoteRowCount(0);clearLoadedEvents();loadJobEvents();});},[location.search]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(function(){rebuildEventsTree();},[isFlatMode]);// eslint-disable-line react-hooks/exhaustive-deps\nvar pollForEventsProcessed=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$getJobModel$re,event_processing_finished,fiveMinutes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getJobModel(job.type).readDetail(job.id);case 2:_yield$getJobModel$re=_context2.sent;event_processing_finished=_yield$getJobModel$re.data.event_processing_finished;if(!event_processing_finished){_context2.next=7;break;}setShowEventsRefresh(true);return _context2.abrupt(\"return\");case 7:fiveMinutes=1000*60*5;if(!(eventsProcessedDelay.current>=fiveMinutes)){_context2.next=10;break;}return _context2.abrupt(\"return\");case 10:setTimeout(pollForEventsProcessed,eventsProcessedDelay.current);eventsProcessedDelay.current*=2;// eslint-disable-next-line react-hooks/exhaustive-deps\ncase 12:case\"end\":return _context2.stop();}}},_callee2);})),[job.id,job.type,lastScrollPosition]);useEffect(function(){if(!isJobRunning(jobStatus)){if(wsEvents.length){pollForEventsProcessed();}return;}var batchTimeout;var batchedEvents=[];var addBatchedEvents=function addBatchedEvents(){var min;var max;var newCssMap;batchedEvents.forEach(function(event){if(!min||event.counter<min){min=event.counter;}if(!max||event.counter>max){max=event.counter;}var _getLineTextHtml=getLineTextHtml(event),lineCssMap=_getLineTextHtml.lineCssMap;newCssMap=_objectSpread(_objectSpread({},newCssMap),lineCssMap);});setWsEvents(function(oldWsEvents){var newEvents=[];batchedEvents.forEach(function(event){if(!oldWsEvents.find(function(e){return e.id===event.id;})){newEvents.push(event);}});var updated=oldWsEvents.concat(newEvents);jobSocketCounter.current=updated.length;if(!oldWsEvents.length&&min>remoteRowCount+1){loadJobEvents(min);}return updated.sort(function(a,b){return a.counter-b.counter;});});setCssMap(function(prevCssMap){return _objectSpread(_objectSpread({},prevCssMap),newCssMap);});if(max>jobSocketCounter.current){jobSocketCounter.current=max;}batchedEvents=[];};connectJobSocket(job,function(data){if(data.group_name===\"\".concat(job.type,\"_events\")){batchedEvents.push(data);clearTimeout(batchTimeout);if(batchedEvents.length>=10){addBatchedEvents();}else{batchTimeout=setTimeout(addBatchedEvents,500);}}if(data.group_name==='jobs'&&data.unified_job_id===job.id){if(data.final_counter){jobSocketCounter.current=data.final_counter;}if(data.status){setJobStatus(data.status);}}});setIsMonitoringWebsocket(true);// eslint-disable-next-line consistent-return\nreturn function cleanup(){clearTimeout(batchTimeout);closeWebSocket();setIsMonitoringWebsocket(false);isMounted.current=false;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[isJobRunning(jobStatus),pollForEventsProcessed]);useEffect(function(){if(isFollowModeEnabled){scrollToEnd();}},[wsEvents.length,isFollowModeEnabled]);// eslint-disable-line react-hooks/exhaustive-deps\nuseEffect(function(){var _listRef$current;if((_listRef$current=listRef.current)!==null&&_listRef$current!==void 0&&_listRef$current.recomputeRowHeights){listRef.current.recomputeRowHeights();}},[currentlyLoading,cssMap,remoteRowCount,wsEvents.length]);useEffect(function(){if(!jobStatus||isJobRunning(jobStatus)){return;}if(isMonitoringWebsocket){setIsMonitoringWebsocket(false);}if(isFollowModeEnabled){setTimeout(function(){return setIsFollowModeEnabled(false);},1000);}},[jobStatus]);// eslint-disable-line react-hooks/exhaustive-deps\nvar _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getJobModel(job.type).cancel(job.id);case 2:case\"end\":return _context3.stop();}}},_callee3);})),[job.id,job.type]),{}),cancelError=_useRequest.error,isCancelling=_useRequest.isLoading,cancelJob=_useRequest.request;var _useDismissableError=useDismissableError(cancelError),dismissableCancelError=_useDismissableError.error,dismissCancelError=_useDismissableError.dismissError;var _useRequest2=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getJobModel(job.type).destroy(job.id);case 2:history.push('/jobs');case 3:case\"end\":return _context4.stop();}}},_callee4);})),[job.type,job.id,history])),deleteJob=_useRequest2.request,isDeleting=_useRequest2.isLoading,deleteError=_useRequest2.error;var _useDismissableError2=useDismissableError(deleteError),dismissableDeleteError=_useDismissableError2.error,dismissDeleteError=_useDismissableError2.dismissError;var monitorJobSocketCounter=function monitorJobSocketCounter(){if(jobSocketCounter.current===remoteRowCount&&!isJobRunning(job.status)){setIsMonitoringWebsocket(false);}};var loadJobEvents=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var firstWsCounter,_getEventRequestParam,_getEventRequestParam2,params,loadRange,qsParams,eventPromise,_events,_yield$eventPromise,_yield$eventPromise$d,count,_yield$eventPromise$d2,fetchedEvents,newCssMap,rowNumber,_prependTraceback,events,countOffset,lastCounter,_args5=arguments;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:firstWsCounter=_args5.length>0&&_args5[0]!==undefined?_args5[0]:null;_getEventRequestParam=getEventRequestParams(job,50,[1,50]),_getEventRequestParam2=_slicedToArray(_getEventRequestParam,2),params=_getEventRequestParam2[0],loadRange=_getEventRequestParam2[1];if(isMounted.current){setHasContentLoading(true);setCurrentlyLoading(function(prevCurrentlyLoading){return prevCurrentlyLoading.concat(loadRange);});}if(isFlatMode){params.not__stdout='';}if(firstWsCounter){params.counter__lt=firstWsCounter;}qsParams=parseQueryString(QS_CONFIG,location.search);eventPromise=getJobModel(job.type).readEvents(job.id,_objectSpread(_objectSpread({},params),qsParams));_context5.prev=7;_context5.next=10;return eventPromise;case 10:_yield$eventPromise=_context5.sent;_yield$eventPromise$d=_yield$eventPromise.data;count=_yield$eventPromise$d.count;_yield$eventPromise$d2=_yield$eventPromise$d.results;fetchedEvents=_yield$eventPromise$d2===void 0?[]:_yield$eventPromise$d2;if(isMounted.current){_context5.next=17;break;}return _context5.abrupt(\"return\");case 17:rowNumber=0;_prependTraceback=prependTraceback(job,fetchedEvents),events=_prependTraceback.events,countOffset=_prependTraceback.countOffset;events.forEach(function(event){event.rowNumber=rowNumber;rowNumber++;var _getLineTextHtml2=getLineTextHtml(event),lineCssMap=_getLineTextHtml2.lineCssMap;newCssMap=_objectSpread(_objectSpread({},newCssMap),lineCssMap);});setCssMap(function(prevCssMap){return _objectSpread(_objectSpread({},prevCssMap),newCssMap);});lastCounter=((_events=events[events.length-1])===null||_events===void 0?void 0:_events.counter)||50;if(isTreeReady){addEvents(events);}else{setOnReadyEvents(function(prev){return prev.concat(events);});}setHighestLoadedCounter(lastCounter);setRemoteRowCount(count+countOffset);_context5.next=30;break;case 27:_context5.prev=27;_context5.t0=_context5[\"catch\"](7);setContentError(_context5.t0);case 30:_context5.prev=30;if(isMounted.current){setHasContentLoading(false);setCurrentlyLoading(function(prevCurrentlyLoading){return prevCurrentlyLoading.filter(function(n){return!loadRange.includes(n);});});loadRange.forEach(function(n){cache.clear(n);});}return _context5.finish(30);case 33:case\"end\":return _context5.stop();}}},_callee5,null,[[7,27,30,33]]);}));return function loadJobEvents(){return _ref7.apply(this,arguments);};}();var isRowLoaded=function isRowLoaded(_ref8){var index=_ref8.index;var counter;try{counter=getCounterForRow(index);}catch(e){console.error(e);// eslint-disable-line no-console\nreturn false;}if(getEvent(counter)){return true;}if(index>=remoteRowCount&&index<remoteRowCount+wsEvents.length){return true;}return currentlyLoading.includes(counter);};var handleHostEventClick=function handleHostEventClick(hostEventToOpen){setHostEvent(hostEventToOpen);setIsHostModalOpen(true);};var handleHostModalClose=function handleHostModalClose(){setIsHostModalOpen(false);};var rowRenderer=function rowRenderer(_ref9){var index=_ref9.index,parent=_ref9.parent,key=_ref9.key,style=_ref9.style;var event;var node;try{var eventForRow=getEventForRow(index)||{};event=eventForRow.event;node=eventForRow.node;}catch(e){event=null;}if(!event&&index>=remoteRowCount&&index<remoteRowCount+wsEvents.length){var _event;event=wsEvents[index-remoteRowCount];node={eventIndex:(_event=event)===null||_event===void 0?void 0:_event.counter,isCollapsed:false,children:[]};}var actualLineTextHtml=[];if(event){var _getLineTextHtml3=getLineTextHtml(event),lineTextHtml=_getLineTextHtml3.lineTextHtml;actualLineTextHtml=lineTextHtml;}return/*#__PURE__*/_jsx(CellMeasurer,{cache:cache,parent:parent,rowIndex:index,columnIndex:0,children:function children(_ref10){var measure=_ref10.measure;return event?/*#__PURE__*/_jsx(JobEvent,{isClickable:isHostEvent(event),onJobEventClick:function onJobEventClick(){return handleHostEventClick(event);},className:\"row\",style:style,lineTextHtml:actualLineTextHtml,index:index,event:event,measure:measure,isCollapsed:node.isCollapsed,hasChildren:node.children.length,onToggleCollapsed:function onToggleCollapsed(){toggleNodeIsCollapsed(event.uuid,!node.isCollapsed);},jobStatus:jobStatus}):/*#__PURE__*/_jsx(JobEventSkeleton,{className:\"row\",style:style,counter:index,contentLength:80,measure:measure});}},key);};var loadMoreRows=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref11){var _events2;var startIndex,stopIndex,range,diff,startCounter,_getEventRequestParam3,_getEventRequestParam4,requestParams,loadRange,qs,params,model,response,events,firstIndex,newCssMap,rowNumber,lastCounter;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:startIndex=_ref11.startIndex,stopIndex=_ref11.stopIndex;if(isMounted.current){_context6.next=3;break;}return _context6.abrupt(\"return\");case 3:if(!(startIndex===0&&stopIndex===0)){_context6.next=5;break;}return _context6.abrupt(\"return\");case 5:if(isMounted.current){setCurrentlyLoading(function(prevCurrentlyLoading){return prevCurrentlyLoading.concat(loadRange);});}range=[startIndex,stopIndex];if(!isFlatMode){diff=stopIndex-startIndex;startCounter=getCounterForRow(startIndex);range=[startCounter,startCounter+diff];}_getEventRequestParam3=getEventRequestParams(job,remoteRowCount,range),_getEventRequestParam4=_slicedToArray(_getEventRequestParam3,2),requestParams=_getEventRequestParam4[0],loadRange=_getEventRequestParam4[1];qs=parseQueryString(QS_CONFIG,location.search);params=_objectSpread(_objectSpread({},requestParams),qs);if(isFlatMode){params.not__stdout='';}model=getJobModel(job.type);_context6.prev=13;_context6.next=16;return model.readEvents(job.id,params);case 16:response=_context6.sent;_context6.next=24;break;case 19:_context6.prev=19;_context6.t0=_context6[\"catch\"](13);if(!(_context6.t0.response.status===404)){_context6.next=23;break;}return _context6.abrupt(\"return\");case 23:throw _context6.t0;case 24:if(isMounted.current){_context6.next=26;break;}return _context6.abrupt(\"return\");case 26:events=response.data.results;firstIndex=(params.page-1)*params.page_size;rowNumber=firstIndex;events.forEach(function(event){event.rowNumber=rowNumber;rowNumber++;var _getLineTextHtml4=getLineTextHtml(event),lineCssMap=_getLineTextHtml4.lineCssMap;newCssMap=_objectSpread(_objectSpread({},newCssMap),lineCssMap);});setCssMap(function(prevCssMap){return _objectSpread(_objectSpread({},prevCssMap),newCssMap);});lastCounter=((_events2=events[events.length-1])===null||_events2===void 0?void 0:_events2.counter)||50;addEvents(events);if(lastCounter>highestLoadedCounter){setHighestLoadedCounter(lastCounter);}setCurrentlyLoading(function(prevCurrentlyLoading){return prevCurrentlyLoading.filter(function(n){return!loadRange.includes(n);});});loadRange.forEach(function(n){cache.clear(n);});if(isFollowModeEnabled){scrollToEnd();}case 37:case\"end\":return _context6.stop();}}},_callee6,null,[[13,19]]);}));return function loadMoreRows(_x2){return _ref12.apply(this,arguments);};}();var scrollToRow=function scrollToRow(rowIndex){setLastScrollPosition(rowIndex);if(listRef.current){listRef.current.scrollToRow(rowIndex);}};var handleScrollPrevious=function handleScrollPrevious(){var startIndex=listRef.current.Grid._renderedRowStartIndex;var stopIndex=listRef.current.Grid._renderedRowStopIndex;var scrollRange=stopIndex-startIndex;scrollToRow(Math.max(0,startIndex-scrollRange));setIsFollowModeEnabled(false);};var handleScrollNext=function handleScrollNext(){var startIndex=listRef.current.Grid._renderedRowStartIndex;var stopIndex=listRef.current.Grid._renderedRowStopIndex;var scrollRange=stopIndex-startIndex;scrollToRow(stopIndex+scrollRange);};var handleScrollFirst=function handleScrollFirst(){scrollToRow(0);setIsFollowModeEnabled(false);};var scrollToEnd=useCallback(function(){scrollToRow(-1);var timeout;if(isFollowModeEnabled){setTimeout(function(){return scrollToRow(-1);},100);}return function(){return clearTimeout(timeout);};},[isFollowModeEnabled]);var handleScrollLast=function handleScrollLast(){scrollToEnd();setIsFollowModeEnabled(true);};var handleResize=function handleResize(_ref13){var width=_ref13.width;if(width!==previousWidth){var _listRef$current2;cache.clearAll();if((_listRef$current2=listRef.current)!==null&&_listRef$current2!==void 0&&_listRef$current2.recomputeRowHeights){listRef.current.recomputeRowHeights();}}previousWidth.current=width;};var handleScroll=function handleScroll(e){if(isFollowModeEnabled&&scrollTop.current>e.scrollTop&&scrollHeight.current===e.scrollHeight){setIsFollowModeEnabled(false);}scrollTop.current=e.scrollTop;scrollHeight.current=e.scrollHeight;if(e.scrollTop+e.clientHeight>=e.scrollHeight){setIsFollowModeEnabled(true);}};var handleExpandCollapseAll=function handleExpandCollapseAll(){toggleCollapseAll(!isAllCollapsed);};if(contentError){return/*#__PURE__*/_jsx(ContentError,{error:contentError});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(CardBody,{children:[isHostModalOpen&&/*#__PURE__*/_jsx(HostEventModal,{onClose:handleHostModalClose,isOpen:isHostModalOpen,hostEvent:hostEvent}),/*#__PURE__*/_jsxs(OutputHeader,{children:[/*#__PURE__*/_jsxs(HeaderTitle,{children:[/*#__PURE__*/_jsx(\"h1\",{children:job.name}),/*#__PURE__*/_jsx(StatusLabel,{status:job.status})]}),/*#__PURE__*/_jsx(OutputToolbar,{job:job,jobStatus:jobStatus,onCancel:function onCancel(){return setShowCancelModal(true);},onDelete:deleteJob,isDeleteDisabled:isDeleting})]}),/*#__PURE__*/_jsx(HostStatusBar,{counts:job.host_status_counts||{}}),/*#__PURE__*/_jsx(JobOutputSearch,{qsConfig:QS_CONFIG,job:job,eventRelatedSearchableKeys:eventRelatedSearchableKeys,eventSearchableKeys:eventSearchableKeys,scrollToEnd:scrollToEnd,isFollowModeEnabled:isFollowModeEnabled,setIsFollowModeEnabled:setIsFollowModeEnabled}),showEventsRefresh?/*#__PURE__*/_jsx(Alert,{variant:\"default\",title:/*#__PURE__*/_jsxs(_Fragment,{children:[/*i18n*/i18n._(\"Events processing complete.\"),' ',/*#__PURE__*/_jsx(Button,{variant:\"link\",isInline:true,onClick:function onClick(){loadJobEvents().then(function(){setWsEvents([]);});setShowEventsRefresh(false);},children:/*i18n*/i18n._(\"Reload output\")})]})}):null,/*#__PURE__*/_jsx(PageControls,{onScrollFirst:handleScrollFirst,onScrollLast:handleScrollLast,onScrollNext:handleScrollNext,onScrollPrevious:handleScrollPrevious,toggleExpandCollapseAll:handleExpandCollapseAll,isFlatMode:isFlatMode||forceFlatMode,isTemplateJob:job.type==='job',isAllCollapsed:isAllCollapsed}),/*#__PURE__*/_jsxs(OutputWrapper,{cssMap:cssMap,children:[/*#__PURE__*/_jsx(InfiniteLoader,{isRowLoaded:isRowLoaded,loadMoreRows:loadMoreRows,rowCount:totalNonCollapsedRows+wsEvents.length,minimumBatchSize:50,children:function children(_ref14){var onRowsRendered=_ref14.onRowsRendered,registerChild=_ref14.registerChild;if(!hasContentLoading&&remoteRowCount+wsEvents.length===0){return/*#__PURE__*/_jsx(EmptyOutput,{job:job,hasQueryParams:location.search.length>1,isJobRunning:isJobRunning(jobStatus),onUnmount:function onUnmount(){var _listRef$current3;if((_listRef$current3=listRef.current)!==null&&_listRef$current3!==void 0&&_listRef$current3.recomputeRowHeights){listRef.current.recomputeRowHeights();}}});}return/*#__PURE__*/_jsx(AutoSizer,{nonce:window.NONCE_ID,onResize:handleResize,children:function children(_ref15){var width=_ref15.width,height=_ref15.height;return/*#__PURE__*/_jsx(_Fragment,{children:hasContentLoading?/*#__PURE__*/_jsx(\"div\",{style:{width:width},children:/*#__PURE__*/_jsx(ContentLoading,{})}):/*#__PURE__*/_jsx(List,{ref:function ref(_ref16){registerChild(_ref16);listRef.current=_ref16;},deferredMeasurementCache:cache,height:height||1,onRowsRendered:onRowsRendered,rowCount:totalNonCollapsedRows+wsEvents.length,rowHeight:cache.rowHeight,rowRenderer:rowRenderer,width:width||1,overscanRowCount:20,onScroll:handleScroll})});}});}}),/*#__PURE__*/_jsx(OutputFooter,{})]})]}),showCancelModal&&isJobRunning(job.status)&&/*#__PURE__*/_jsx(AlertModal,{isOpen:showCancelModal,variant:\"danger\",onClose:function onClose(){return setShowCancelModal(false);},title:/*i18n*/i18n._(\"Cancel Job\"),label:/*i18n*/i18n._(\"Cancel Job\"),actions:[/*#__PURE__*/_jsx(Button,{id:\"cancel-job-confirm-button\",variant:\"danger\",isDisabled:isCancelling,\"aria-label\":/*i18n*/i18n._(\"Cancel job\"),onClick:cancelJob,children:/*i18n*/i18n._(\"Cancel job\")},\"delete\"),/*#__PURE__*/_jsx(Button,{id:\"cancel-job-return-button\",variant:\"secondary\",\"aria-label\":/*i18n*/i18n._(\"Return\"),onClick:function onClick(){return setShowCancelModal(false);},children:/*i18n*/i18n._(\"Return\")},\"cancel\")],children:/*i18n*/i18n._(\"Are you sure you want to submit the request to cancel this job?\")}),dismissableDeleteError&&/*#__PURE__*/_jsx(AlertModal,{isOpen:dismissableDeleteError,variant:\"danger\",onClose:dismissDeleteError,title:/*i18n*/i18n._(\"Job Delete Error\"),label:/*i18n*/i18n._(\"Job Delete Error\"),children:/*#__PURE__*/_jsx(ErrorDetail,{error:dismissableDeleteError})}),dismissableCancelError&&/*#__PURE__*/_jsx(AlertModal,{isOpen:dismissableCancelError,variant:\"danger\",onClose:dismissCancelError,title:/*i18n*/i18n._(\"Job Cancel Error\"),label:/*i18n*/i18n._(\"Job Cancel Error\"),children:/*#__PURE__*/_jsx(ErrorDetail,{error:dismissableCancelError})})]});}export default JobOutput;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","useHistory","useLocation","styled","AutoSizer","CellMeasurer","CellMeasurerCache","InfiniteLoader","List","Button","Alert","AlertModal","CardBody","_CardBody","ContentError","ContentLoading","ErrorDetail","StatusLabel","JobsAPI","getJobModel","isJobRunning","useRequest","useDismissableError","useInterval","parseQueryString","getQSConfig","useIsMounted","JobEvent","JobEventSkeleton","PageControls","HostEventModal","JobOutputSearch","EmptyOutput","HostStatusBar","OutputToolbar","getLineTextHtml","connectJobSocket","closeWebSocket","getEventRequestParams","isHostEvent","prependTraceback","useJobEvents","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","QS_CONFIG","order_by","_templateObject","_taggedTemplateLiteral","HeaderTitle","div","_templateObject2","OutputHeader","_templateObject3","OutputWrapper","_templateObject4","_ref","cssMap","Object","keys","map","className","concat","OutputFooter","_templateObject5","cache","fixedWidth","defaultHeight","JobOutput","_ref2","_job$status","job","eventRelatedSearchableKeys","eventSearchableKeys","location","listRef","previousWidth","jobSocketCounter","isMounted","scrollTop","scrollHeight","history","eventByUuidRequests","eventsProcessedDelay","fetchEventByUuid","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","uuid","promise","_yield$promise","data","wrap","_callee$","_context","prev","next","current","type","readEvents","id","sent","abrupt","results","stop","_x","apply","arguments","fetchChildrenSummary","readChildrenSummary","_useState","status","_useState2","_slicedToArray","jobStatus","setJobStatus","_useState3","_useState4","forceFlatMode","setForceFlatMode","isFlatMode","search","length","_useState5","_useState6","isTreeReady","setIsTreeReady","_useState7","_useState8","onReadyEvents","setOnReadyEvents","_useJobEvents","setJobTreeReady","addEvents","toggleNodeIsCollapsed","toggleCollapseAll","getEventForRow","getNumCollapsedEvents","getCounterForRow","getEvent","clearLoadedEvents","rebuildEventsTree","isAllCollapsed","_useState9","_useState10","wsEvents","setWsEvents","_useState11","_useState12","setCssMap","_useState13","_useState14","remoteRowCount","setRemoteRowCount","_useState15","_useState16","contentError","setContentError","_useState17","_useState18","currentlyLoading","setCurrentlyLoading","_useState19","_useState20","hasContentLoading","setHasContentLoading","_useState21","_useState22","hostEvent","setHostEvent","_useState23","_useState24","isHostModalOpen","setIsHostModalOpen","_useState25","_useState26","showCancelModal","setShowCancelModal","_useState27","_useState28","highestLoadedCounter","setHighestLoadedCounter","_useState29","_useState30","isFollowModeEnabled","setIsFollowModeEnabled","_useState31","_useState32","isMonitoringWebsocket","setIsMonitoringWebsocket","_useState33","_useState34","lastScrollPosition","setLastScrollPosition","_useState35","_useState36","showEventsRefresh","setShowEventsRefresh","setTimeout","scrollToEnd","totalNonCollapsedRows","Math","max","monitorJobSocketCounter","pendingRequests","values","Promise","allSettled","then","loadJobEvents","pollForEventsProcessed","_callee2","_yield$getJobModel$re","event_processing_finished","fiveMinutes","_callee2$","_context2","readDetail","batchTimeout","batchedEvents","addBatchedEvents","min","newCssMap","forEach","event","counter","_getLineTextHtml","lineCssMap","_objectSpread","oldWsEvents","newEvents","find","e","push","updated","sort","a","b","prevCssMap","group_name","clearTimeout","unified_job_id","final_counter","cleanup","_listRef$current","recomputeRowHeights","_useRequest","_callee3","_callee3$","_context3","cancel","cancelError","error","isCancelling","isLoading","cancelJob","request","_useDismissableError","dismissableCancelError","dismissCancelError","dismissError","_useRequest2","_callee4","_callee4$","_context4","destroy","deleteJob","isDeleting","deleteError","_useDismissableError2","dismissableDeleteError","dismissDeleteError","_ref7","_callee5","firstWsCounter","_getEventRequestParam","_getEventRequestParam2","params","loadRange","qsParams","eventPromise","_events","_yield$eventPromise","_yield$eventPromise$d","count","_yield$eventPromise$d2","fetchedEvents","rowNumber","_prependTraceback","events","countOffset","lastCounter","_args5","_callee5$","_context5","undefined","prevCurrentlyLoading","not__stdout","counter__lt","_getLineTextHtml2","t0","filter","n","includes","clear","finish","isRowLoaded","_ref8","index","console","handleHostEventClick","hostEventToOpen","handleHostModalClose","rowRenderer","_ref9","parent","key","style","node","eventForRow","_event","eventIndex","isCollapsed","children","actualLineTextHtml","_getLineTextHtml3","lineTextHtml","rowIndex","columnIndex","_ref10","measure","isClickable","onJobEventClick","hasChildren","onToggleCollapsed","contentLength","loadMoreRows","_ref12","_callee6","_ref11","_events2","startIndex","stopIndex","range","diff","startCounter","_getEventRequestParam3","_getEventRequestParam4","requestParams","qs","model","response","firstIndex","_callee6$","_context6","page","page_size","_getLineTextHtml4","_x2","scrollToRow","handleScrollPrevious","Grid","_renderedRowStartIndex","_renderedRowStopIndex","scrollRange","handleScrollNext","handleScrollFirst","timeout","handleScrollLast","handleResize","_ref13","width","_listRef$current2","clearAll","handleScroll","clientHeight","handleExpandCollapseAll","onClose","isOpen","name","onCancel","onDelete","isDeleteDisabled","counts","host_status_counts","qsConfig","variant","title","i18n","_","isInline","onClick","onScrollFirst","onScrollLast","onScrollNext","onScrollPrevious","toggleExpandCollapseAll","isTemplateJob","rowCount","minimumBatchSize","_ref14","onRowsRendered","registerChild","hasQueryParams","onUnmount","_listRef$current3","nonce","window","NONCE_ID","onResize","_ref15","height","ref","deferredMeasurementCache","rowHeight","overscanRowCount","onScroll","label","actions","isDisabled"],"sources":["/awx_devel/awx/ui/src/screens/Job/JobOutput/JobOutput.js"],"sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport styled from 'styled-components';\nimport {\n  AutoSizer,\n  CellMeasurer,\n  CellMeasurerCache,\n  InfiniteLoader,\n  List,\n} from 'react-virtualized';\nimport { Button, Alert } from '@patternfly/react-core';\n\nimport AlertModal from 'components/AlertModal';\nimport { CardBody as _CardBody } from 'components/Card';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport ErrorDetail from 'components/ErrorDetail';\nimport StatusLabel from 'components/StatusLabel';\nimport { JobsAPI } from 'api';\n\nimport { getJobModel, isJobRunning } from 'util/jobs';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport useInterval from 'hooks/useInterval';\nimport { parseQueryString, getQSConfig } from 'util/qs';\nimport useIsMounted from 'hooks/useIsMounted';\nimport JobEvent from './JobEvent';\nimport JobEventSkeleton from './JobEventSkeleton';\nimport PageControls from './PageControls';\nimport HostEventModal from './HostEventModal';\nimport JobOutputSearch from './JobOutputSearch';\nimport EmptyOutput from './EmptyOutput';\nimport { HostStatusBar, OutputToolbar } from './shared';\nimport getLineTextHtml from './getLineTextHtml';\nimport connectJobSocket, { closeWebSocket } from './connectJobSocket';\nimport getEventRequestParams from './getEventRequestParams';\nimport isHostEvent from './isHostEvent';\nimport { prependTraceback } from './loadJobEvents';\nimport useJobEvents from './useJobEvents';\n\nconst QS_CONFIG = getQSConfig('job_output', {\n  order_by: 'counter',\n});\n\nconst CardBody = styled(_CardBody)`\n  display: flex;\n  flex-flow: column;\n  height: calc(100vh - 267px);\n`;\n\nconst HeaderTitle = styled.div`\n  display: inline-flex;\n  align-items: center;\n  h1 {\n    margin-right: 10px;\n    font-weight: var(--pf-global--FontWeight--bold);\n  }\n`;\n\nconst OutputHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst OutputWrapper = styled.div`\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  font-family: monospace;\n  font-size: 15px;\n  outline: 1px solid #d7d7d7;\n  ${({ cssMap }) =>\n    Object.keys(cssMap).map(\n      (className) => `.${className}{${cssMap[className]}}`\n    )}\n`;\n\nconst OutputFooter = styled.div`\n  background-color: #ebebeb;\n  border-right: 1px solid #d7d7d7;\n  width: 75px;\n  flex: 1;\n`;\n\nconst cache = new CellMeasurerCache({\n  fixedWidth: true,\n  defaultHeight: 25,\n});\n\nfunction JobOutput({ job, eventRelatedSearchableKeys, eventSearchableKeys }) {\n  const location = useLocation();\n  const listRef = useRef(null);\n  const previousWidth = useRef(0);\n  const jobSocketCounter = useRef(0);\n  const isMounted = useIsMounted();\n  const scrollTop = useRef(0);\n  const scrollHeight = useRef(0);\n  const history = useHistory();\n  const eventByUuidRequests = useRef([]);\n  const eventsProcessedDelay = useRef(250);\n\n  const fetchEventByUuid = async (uuid) => {\n    let promise = eventByUuidRequests.current[uuid];\n    if (!promise) {\n      promise = getJobModel(job.type).readEvents(job.id, { uuid });\n      eventByUuidRequests.current[uuid] = promise;\n    }\n    const { data } = await promise;\n    eventByUuidRequests.current[uuid] = null;\n    return data.results[0] || null;\n  };\n\n  const fetchChildrenSummary = () => JobsAPI.readChildrenSummary(job.id);\n\n  const [jobStatus, setJobStatus] = useState(job.status ?? 'waiting');\n  const [forceFlatMode, setForceFlatMode] = useState(false);\n  const isFlatMode =\n    isJobRunning(jobStatus) || location.search.length > 1 || job.type !== 'job';\n  const [isTreeReady, setIsTreeReady] = useState(false);\n  const [onReadyEvents, setOnReadyEvents] = useState([]);\n\n  const {\n    addEvents,\n    toggleNodeIsCollapsed,\n    toggleCollapseAll,\n    getEventForRow,\n    getNumCollapsedEvents,\n    getCounterForRow,\n    getEvent,\n    clearLoadedEvents,\n    rebuildEventsTree,\n    isAllCollapsed,\n  } = useJobEvents(\n    {\n      fetchEventByUuid,\n      fetchChildrenSummary,\n      setForceFlatMode,\n      setJobTreeReady: () => setIsTreeReady(true),\n    },\n    job.id,\n    isFlatMode || forceFlatMode\n  );\n  const [wsEvents, setWsEvents] = useState([]);\n  const [cssMap, setCssMap] = useState({});\n  const [remoteRowCount, setRemoteRowCount] = useState(0);\n  const [contentError, setContentError] = useState(null);\n  const [currentlyLoading, setCurrentlyLoading] = useState([]);\n  const [hasContentLoading, setHasContentLoading] = useState(true);\n  const [hostEvent, setHostEvent] = useState({});\n  const [isHostModalOpen, setIsHostModalOpen] = useState(false);\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [highestLoadedCounter, setHighestLoadedCounter] = useState(0);\n  const [isFollowModeEnabled, setIsFollowModeEnabled] = useState(\n    isJobRunning(job.status)\n  );\n  const [isMonitoringWebsocket, setIsMonitoringWebsocket] = useState(false);\n  const [lastScrollPosition, setLastScrollPosition] = useState(0);\n  const [showEventsRefresh, setShowEventsRefresh] = useState(false);\n\n  useEffect(() => {\n    if (!isTreeReady || !onReadyEvents.length) {\n      return;\n    }\n    addEvents(onReadyEvents);\n    setOnReadyEvents([]);\n    if (isFollowModeEnabled) {\n      setTimeout(() => {\n        scrollToEnd();\n      }, 0);\n    }\n  }, [isTreeReady, onReadyEvents]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const totalNonCollapsedRows = Math.max(\n    remoteRowCount - getNumCollapsedEvents(),\n    0\n  );\n\n  useInterval(\n    () => {\n      monitorJobSocketCounter();\n    },\n    isMonitoringWebsocket ? 5000 : null\n  );\n\n  useEffect(() => {\n    const pendingRequests = Object.values(eventByUuidRequests.current || {});\n    setHasContentLoading(true); // prevents \"no content found\" screen from flashing\n    if (location.search) {\n      setIsFollowModeEnabled(false);\n    }\n    Promise.allSettled(pendingRequests).then(() => {\n      setRemoteRowCount(0);\n      clearLoadedEvents();\n      loadJobEvents();\n    });\n  }, [location.search]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    rebuildEventsTree();\n  }, [isFlatMode]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const pollForEventsProcessed = useCallback(async () => {\n    const {\n      data: { event_processing_finished },\n    } = await getJobModel(job.type).readDetail(job.id);\n    if (event_processing_finished) {\n      setShowEventsRefresh(true);\n      return;\n    }\n    const fiveMinutes = 1000 * 60 * 5;\n    if (eventsProcessedDelay.current >= fiveMinutes) {\n      return;\n    }\n    setTimeout(pollForEventsProcessed, eventsProcessedDelay.current);\n    eventsProcessedDelay.current *= 2;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [job.id, job.type, lastScrollPosition]);\n\n  useEffect(() => {\n    if (!isJobRunning(jobStatus)) {\n      if (wsEvents.length) {\n        pollForEventsProcessed();\n      }\n      return;\n    }\n    let batchTimeout;\n    let batchedEvents = [];\n    const addBatchedEvents = () => {\n      let min;\n      let max;\n      let newCssMap;\n      batchedEvents.forEach((event) => {\n        if (!min || event.counter < min) {\n          min = event.counter;\n        }\n        if (!max || event.counter > max) {\n          max = event.counter;\n        }\n        const { lineCssMap } = getLineTextHtml(event);\n        newCssMap = {\n          ...newCssMap,\n          ...lineCssMap,\n        };\n      });\n      setWsEvents((oldWsEvents) => {\n        const newEvents = [];\n        batchedEvents.forEach((event) => {\n          if (!oldWsEvents.find((e) => e.id === event.id)) {\n            newEvents.push(event);\n          }\n        });\n        const updated = oldWsEvents.concat(newEvents);\n        jobSocketCounter.current = updated.length;\n        if (!oldWsEvents.length && min > remoteRowCount + 1) {\n          loadJobEvents(min);\n        }\n        return updated.sort((a, b) => a.counter - b.counter);\n      });\n      setCssMap((prevCssMap) => ({\n        ...prevCssMap,\n        ...newCssMap,\n      }));\n      if (max > jobSocketCounter.current) {\n        jobSocketCounter.current = max;\n      }\n      batchedEvents = [];\n    };\n\n    connectJobSocket(job, (data) => {\n      if (data.group_name === `${job.type}_events`) {\n        batchedEvents.push(data);\n        clearTimeout(batchTimeout);\n        if (batchedEvents.length >= 10) {\n          addBatchedEvents();\n        } else {\n          batchTimeout = setTimeout(addBatchedEvents, 500);\n        }\n      }\n      if (data.group_name === 'jobs' && data.unified_job_id === job.id) {\n        if (data.final_counter) {\n          jobSocketCounter.current = data.final_counter;\n        }\n        if (data.status) {\n          setJobStatus(data.status);\n        }\n      }\n    });\n    setIsMonitoringWebsocket(true);\n\n    // eslint-disable-next-line consistent-return\n    return function cleanup() {\n      clearTimeout(batchTimeout);\n      closeWebSocket();\n      setIsMonitoringWebsocket(false);\n      isMounted.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isJobRunning(jobStatus), pollForEventsProcessed]);\n\n  useEffect(() => {\n    if (isFollowModeEnabled) {\n      scrollToEnd();\n    }\n  }, [wsEvents.length, isFollowModeEnabled]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    if (listRef.current?.recomputeRowHeights) {\n      listRef.current.recomputeRowHeights();\n    }\n  }, [currentlyLoading, cssMap, remoteRowCount, wsEvents.length]);\n\n  useEffect(() => {\n    if (!jobStatus || isJobRunning(jobStatus)) {\n      return;\n    }\n\n    if (isMonitoringWebsocket) {\n      setIsMonitoringWebsocket(false);\n    }\n\n    if (isFollowModeEnabled) {\n      setTimeout(() => setIsFollowModeEnabled(false), 1000);\n    }\n  }, [jobStatus]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const {\n    error: cancelError,\n    isLoading: isCancelling,\n    request: cancelJob,\n  } = useRequest(\n    useCallback(async () => {\n      await getJobModel(job.type).cancel(job.id);\n    }, [job.id, job.type]),\n    {}\n  );\n\n  const { error: dismissableCancelError, dismissError: dismissCancelError } =\n    useDismissableError(cancelError);\n\n  const {\n    request: deleteJob,\n    isLoading: isDeleting,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await getJobModel(job.type).destroy(job.id);\n\n      history.push('/jobs');\n    }, [job.type, job.id, history])\n  );\n\n  const { error: dismissableDeleteError, dismissError: dismissDeleteError } =\n    useDismissableError(deleteError);\n\n  const monitorJobSocketCounter = () => {\n    if (\n      jobSocketCounter.current === remoteRowCount &&\n      !isJobRunning(job.status)\n    ) {\n      setIsMonitoringWebsocket(false);\n    }\n  };\n\n  const loadJobEvents = async (firstWsCounter = null) => {\n    const [params, loadRange] = getEventRequestParams(job, 50, [1, 50]);\n\n    if (isMounted.current) {\n      setHasContentLoading(true);\n      setCurrentlyLoading((prevCurrentlyLoading) =>\n        prevCurrentlyLoading.concat(loadRange)\n      );\n    }\n\n    if (isFlatMode) {\n      params.not__stdout = '';\n    }\n    if (firstWsCounter) {\n      params.counter__lt = firstWsCounter;\n    }\n    const qsParams = parseQueryString(QS_CONFIG, location.search);\n    const eventPromise = getJobModel(job.type).readEvents(job.id, {\n      ...params,\n      ...qsParams,\n    });\n\n    try {\n      const {\n        data: { count, results: fetchedEvents = [] },\n      } = await eventPromise;\n\n      if (!isMounted.current) {\n        return;\n      }\n      let newCssMap;\n      let rowNumber = 0;\n      const { events, countOffset } = prependTraceback(job, fetchedEvents);\n      events.forEach((event) => {\n        event.rowNumber = rowNumber;\n        rowNumber++;\n        const { lineCssMap } = getLineTextHtml(event);\n        newCssMap = {\n          ...newCssMap,\n          ...lineCssMap,\n        };\n      });\n      setCssMap((prevCssMap) => ({\n        ...prevCssMap,\n        ...newCssMap,\n      }));\n      const lastCounter = events[events.length - 1]?.counter || 50;\n      if (isTreeReady) {\n        addEvents(events);\n      } else {\n        setOnReadyEvents((prev) => prev.concat(events));\n      }\n      setHighestLoadedCounter(lastCounter);\n      setRemoteRowCount(count + countOffset);\n    } catch (err) {\n      setContentError(err);\n    } finally {\n      if (isMounted.current) {\n        setHasContentLoading(false);\n        setCurrentlyLoading((prevCurrentlyLoading) =>\n          prevCurrentlyLoading.filter((n) => !loadRange.includes(n))\n        );\n        loadRange.forEach((n) => {\n          cache.clear(n);\n        });\n      }\n    }\n  };\n\n  const isRowLoaded = ({ index }) => {\n    let counter;\n    try {\n      counter = getCounterForRow(index);\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n      return false;\n    }\n    if (getEvent(counter)) {\n      return true;\n    }\n    if (index >= remoteRowCount && index < remoteRowCount + wsEvents.length) {\n      return true;\n    }\n    return currentlyLoading.includes(counter);\n  };\n\n  const handleHostEventClick = (hostEventToOpen) => {\n    setHostEvent(hostEventToOpen);\n    setIsHostModalOpen(true);\n  };\n\n  const handleHostModalClose = () => {\n    setIsHostModalOpen(false);\n  };\n\n  const rowRenderer = ({ index, parent, key, style }) => {\n    let event;\n    let node;\n    try {\n      const eventForRow = getEventForRow(index) || {};\n      event = eventForRow.event;\n      node = eventForRow.node;\n    } catch (e) {\n      event = null;\n    }\n    if (\n      !event &&\n      index >= remoteRowCount &&\n      index < remoteRowCount + wsEvents.length\n    ) {\n      event = wsEvents[index - remoteRowCount];\n      node = {\n        eventIndex: event?.counter,\n        isCollapsed: false,\n        children: [],\n      };\n    }\n    let actualLineTextHtml = [];\n    if (event) {\n      const { lineTextHtml } = getLineTextHtml(event);\n      actualLineTextHtml = lineTextHtml;\n    }\n\n    return (\n      <CellMeasurer\n        key={key}\n        cache={cache}\n        parent={parent}\n        rowIndex={index}\n        columnIndex={0}\n      >\n        {({ measure }) =>\n          event ? (\n            <JobEvent\n              isClickable={isHostEvent(event)}\n              onJobEventClick={() => handleHostEventClick(event)}\n              className=\"row\"\n              style={style}\n              lineTextHtml={actualLineTextHtml}\n              index={index}\n              event={event}\n              measure={measure}\n              isCollapsed={node.isCollapsed}\n              hasChildren={node.children.length}\n              onToggleCollapsed={() => {\n                toggleNodeIsCollapsed(event.uuid, !node.isCollapsed);\n              }}\n              jobStatus={jobStatus}\n            />\n          ) : (\n            <JobEventSkeleton\n              className=\"row\"\n              style={style}\n              counter={index}\n              contentLength={80}\n              measure={measure}\n            />\n          )\n        }\n      </CellMeasurer>\n    );\n  };\n\n  const loadMoreRows = async ({ startIndex, stopIndex }) => {\n    if (!isMounted.current) {\n      return;\n    }\n    if (startIndex === 0 && stopIndex === 0) {\n      return;\n    }\n\n    if (isMounted.current) {\n      setCurrentlyLoading((prevCurrentlyLoading) =>\n        prevCurrentlyLoading.concat(loadRange)\n      );\n    }\n\n    let range = [startIndex, stopIndex];\n    if (!isFlatMode) {\n      const diff = stopIndex - startIndex;\n      const startCounter = getCounterForRow(startIndex);\n      range = [startCounter, startCounter + diff];\n    }\n\n    const [requestParams, loadRange] = getEventRequestParams(\n      job,\n      remoteRowCount,\n      range\n    );\n    const qs = parseQueryString(QS_CONFIG, location.search);\n    const params = {\n      ...requestParams,\n      ...qs,\n    };\n    if (isFlatMode) {\n      params.not__stdout = '';\n    }\n\n    const model = getJobModel(job.type);\n\n    let response;\n    try {\n      response = await model.readEvents(job.id, params);\n    } catch (error) {\n      if (error.response.status === 404) {\n        return;\n      }\n      throw error;\n    }\n    if (!isMounted.current) {\n      return;\n    }\n    const events = response.data.results;\n    const firstIndex = (params.page - 1) * params.page_size;\n\n    let newCssMap;\n    let rowNumber = firstIndex;\n    events.forEach((event) => {\n      event.rowNumber = rowNumber;\n      rowNumber++;\n      const { lineCssMap } = getLineTextHtml(event);\n      newCssMap = {\n        ...newCssMap,\n        ...lineCssMap,\n      };\n    });\n    setCssMap((prevCssMap) => ({\n      ...prevCssMap,\n      ...newCssMap,\n    }));\n\n    const lastCounter = events[events.length - 1]?.counter || 50;\n    addEvents(events);\n    if (lastCounter > highestLoadedCounter) {\n      setHighestLoadedCounter(lastCounter);\n    }\n    setCurrentlyLoading((prevCurrentlyLoading) =>\n      prevCurrentlyLoading.filter((n) => !loadRange.includes(n))\n    );\n    loadRange.forEach((n) => {\n      cache.clear(n);\n    });\n    if (isFollowModeEnabled) {\n      scrollToEnd();\n    }\n  };\n\n  const scrollToRow = (rowIndex) => {\n    setLastScrollPosition(rowIndex);\n    if (listRef.current) {\n      listRef.current.scrollToRow(rowIndex);\n    }\n  };\n\n  const handleScrollPrevious = () => {\n    const startIndex = listRef.current.Grid._renderedRowStartIndex;\n    const stopIndex = listRef.current.Grid._renderedRowStopIndex;\n    const scrollRange = stopIndex - startIndex;\n    scrollToRow(Math.max(0, startIndex - scrollRange));\n    setIsFollowModeEnabled(false);\n  };\n\n  const handleScrollNext = () => {\n    const startIndex = listRef.current.Grid._renderedRowStartIndex;\n    const stopIndex = listRef.current.Grid._renderedRowStopIndex;\n    const scrollRange = stopIndex - startIndex;\n    scrollToRow(stopIndex + scrollRange);\n  };\n\n  const handleScrollFirst = () => {\n    scrollToRow(0);\n    setIsFollowModeEnabled(false);\n  };\n\n  const scrollToEnd = useCallback(() => {\n    scrollToRow(-1);\n    let timeout;\n    if (isFollowModeEnabled) {\n      setTimeout(() => scrollToRow(-1), 100);\n    }\n    return () => clearTimeout(timeout);\n  }, [isFollowModeEnabled]);\n\n  const handleScrollLast = () => {\n    scrollToEnd();\n    setIsFollowModeEnabled(true);\n  };\n\n  const handleResize = ({ width }) => {\n    if (width !== previousWidth) {\n      cache.clearAll();\n      if (listRef.current?.recomputeRowHeights) {\n        listRef.current.recomputeRowHeights();\n      }\n    }\n    previousWidth.current = width;\n  };\n\n  const handleScroll = (e) => {\n    if (\n      isFollowModeEnabled &&\n      scrollTop.current > e.scrollTop &&\n      scrollHeight.current === e.scrollHeight\n    ) {\n      setIsFollowModeEnabled(false);\n    }\n    scrollTop.current = e.scrollTop;\n    scrollHeight.current = e.scrollHeight;\n    if (e.scrollTop + e.clientHeight >= e.scrollHeight) {\n      setIsFollowModeEnabled(true);\n    }\n  };\n\n  const handleExpandCollapseAll = () => {\n    toggleCollapseAll(!isAllCollapsed);\n  };\n\n  if (contentError) {\n    return <ContentError error={contentError} />;\n  }\n\n  return (\n    <>\n      <CardBody>\n        {isHostModalOpen && (\n          <HostEventModal\n            onClose={handleHostModalClose}\n            isOpen={isHostModalOpen}\n            hostEvent={hostEvent}\n          />\n        )}\n        <OutputHeader>\n          <HeaderTitle>\n            <h1>{job.name}</h1>\n            <StatusLabel status={job.status} />\n          </HeaderTitle>\n          <OutputToolbar\n            job={job}\n            jobStatus={jobStatus}\n            onCancel={() => setShowCancelModal(true)}\n            onDelete={deleteJob}\n            isDeleteDisabled={isDeleting}\n          />\n        </OutputHeader>\n        <HostStatusBar counts={job.host_status_counts || {}} />\n        <JobOutputSearch\n          qsConfig={QS_CONFIG}\n          job={job}\n          eventRelatedSearchableKeys={eventRelatedSearchableKeys}\n          eventSearchableKeys={eventSearchableKeys}\n          scrollToEnd={scrollToEnd}\n          isFollowModeEnabled={isFollowModeEnabled}\n          setIsFollowModeEnabled={setIsFollowModeEnabled}\n        />\n        {showEventsRefresh ? (\n          <Alert\n            variant=\"default\"\n            title={\n              <>\n                {t`Events processing complete.`}{' '}\n                <Button\n                  variant=\"link\"\n                  isInline\n                  onClick={() => {\n                    loadJobEvents().then(() => {\n                      setWsEvents([]);\n                    });\n                    setShowEventsRefresh(false);\n                  }}\n                >{t`Reload output`}</Button>\n              </>\n            }\n          />\n        ) : null}\n        <PageControls\n          onScrollFirst={handleScrollFirst}\n          onScrollLast={handleScrollLast}\n          onScrollNext={handleScrollNext}\n          onScrollPrevious={handleScrollPrevious}\n          toggleExpandCollapseAll={handleExpandCollapseAll}\n          isFlatMode={isFlatMode || forceFlatMode}\n          isTemplateJob={job.type === 'job'}\n          isAllCollapsed={isAllCollapsed}\n        />\n        <OutputWrapper cssMap={cssMap}>\n          <InfiniteLoader\n            isRowLoaded={isRowLoaded}\n            loadMoreRows={loadMoreRows}\n            rowCount={totalNonCollapsedRows + wsEvents.length}\n            minimumBatchSize={50}\n          >\n            {({ onRowsRendered, registerChild }) => {\n              if (\n                !hasContentLoading &&\n                remoteRowCount + wsEvents.length === 0\n              ) {\n                return (\n                  <EmptyOutput\n                    job={job}\n                    hasQueryParams={location.search.length > 1}\n                    isJobRunning={isJobRunning(jobStatus)}\n                    onUnmount={() => {\n                      if (listRef.current?.recomputeRowHeights) {\n                        listRef.current.recomputeRowHeights();\n                      }\n                    }}\n                  />\n                );\n              }\n              return (\n                <AutoSizer nonce={window.NONCE_ID} onResize={handleResize}>\n                  {({ width, height }) => (\n                    <>\n                      {hasContentLoading ? (\n                        <div style={{ width }}>\n                          <ContentLoading />\n                        </div>\n                      ) : (\n                        <List\n                          ref={(ref) => {\n                            registerChild(ref);\n                            listRef.current = ref;\n                          }}\n                          deferredMeasurementCache={cache}\n                          height={height || 1}\n                          onRowsRendered={onRowsRendered}\n                          rowCount={totalNonCollapsedRows + wsEvents.length}\n                          rowHeight={cache.rowHeight}\n                          rowRenderer={rowRenderer}\n                          width={width || 1}\n                          overscanRowCount={20}\n                          onScroll={handleScroll}\n                        />\n                      )}\n                    </>\n                  )}\n                </AutoSizer>\n              );\n            }}\n          </InfiniteLoader>\n          <OutputFooter />\n        </OutputWrapper>\n      </CardBody>\n      {showCancelModal && isJobRunning(job.status) && (\n        <AlertModal\n          isOpen={showCancelModal}\n          variant=\"danger\"\n          onClose={() => setShowCancelModal(false)}\n          title={t`Cancel Job`}\n          label={t`Cancel Job`}\n          actions={[\n            <Button\n              id=\"cancel-job-confirm-button\"\n              key=\"delete\"\n              variant=\"danger\"\n              isDisabled={isCancelling}\n              aria-label={t`Cancel job`}\n              onClick={cancelJob}\n            >\n              {t`Cancel job`}\n            </Button>,\n            <Button\n              id=\"cancel-job-return-button\"\n              key=\"cancel\"\n              variant=\"secondary\"\n              aria-label={t`Return`}\n              onClick={() => setShowCancelModal(false)}\n            >\n              {t`Return`}\n            </Button>,\n          ]}\n        >\n          {t`Are you sure you want to submit the request to cancel this job?`}\n        </AlertModal>\n      )}\n      {dismissableDeleteError && (\n        <AlertModal\n          isOpen={dismissableDeleteError}\n          variant=\"danger\"\n          onClose={dismissDeleteError}\n          title={t`Job Delete Error`}\n          label={t`Job Delete Error`}\n        >\n          <ErrorDetail error={dismissableDeleteError} />\n        </AlertModal>\n      )}\n      {dismissableCancelError && (\n        <AlertModal\n          isOpen={dismissableCancelError}\n          variant=\"danger\"\n          onClose={dismissCancelError}\n          title={t`Job Cancel Error`}\n          label={t`Job Cancel Error`}\n        >\n          <ErrorDetail error={dismissableCancelError} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nexport default JobOutput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}