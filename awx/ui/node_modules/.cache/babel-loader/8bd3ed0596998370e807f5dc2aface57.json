{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Card,PageSection}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{Link,Switch,Route,Redirect,useParams,useRouteMatch,useLocation}from'react-router-dom';import useRequest from'hooks/useRequest';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import{WorkflowApprovalsAPI}from'api';import WorkflowApprovalDetail from'./WorkflowApprovalDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function WorkflowApproval(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useParams=useParams(),workflowApprovalId=_useParams.id;var match=useRouteMatch();var location=useLocation();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var detail;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return WorkflowApprovalsAPI.readDetail(workflowApprovalId);case 2:detail=_context.sent;setBreadcrumb(detail.data);return _context.abrupt(\"return\",{workflowApproval:detail.data});case 5:case\"end\":return _context.stop();}}},_callee);})),[workflowApprovalId,setBreadcrumb]),{workflowApproval:null}),workflowApproval=_useRequest.result.workflowApproval,isLoading=_useRequest.isLoading,error=_useRequest.error,fetchWorkflowApproval=_useRequest.request;useEffect(function(){fetchWorkflowApproval();},[fetchWorkflowApproval,location.pathname]);if(!isLoading&&error){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:error,children:error.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Workflow Approval not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/workflow_approvals\",children:/*i18n*/i18n._(\"View all Workflow Approvals.\")})]})})})});}var tabs=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Workflow Approvals\")]}),link:\"/workflow_approvals\",persistentFilterKey:'workflowApprovals',id:99},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:0}];return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabs}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/workflow_approvals/:id\",to:\"/workflow_approvals/:id/details\",exact:true}),workflowApproval&&/*#__PURE__*/_jsx(Route,{path:\"/workflow_approvals/:id/details\",children:/*#__PURE__*/_jsx(WorkflowApprovalDetail,{fetchWorkflowApproval:fetchWorkflowApproval,workflowApproval:workflowApproval})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:!isLoading&&/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:match.params.id&&/*#__PURE__*/_jsx(Link,{to:\"/workflow_approvals/\".concat(match.params.id,\"/details\"),children:/*i18n*/i18n._(\"View Workflow Approval Details\")})})},\"not-found\")]})]})});}export default WorkflowApproval;","map":{"version":3,"names":["React","useEffect","useCallback","Card","PageSection","CaretLeftIcon","Link","Switch","Route","Redirect","useParams","useRouteMatch","useLocation","useRequest","RoutedTabs","ContentError","WorkflowApprovalsAPI","WorkflowApprovalDetail","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","WorkflowApproval","_ref","setBreadcrumb","_useParams","workflowApprovalId","id","match","location","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","detail","wrap","_callee$","_context","prev","next","readDetail","sent","data","abrupt","workflowApproval","stop","result","isLoading","error","fetchWorkflowApproval","request","pathname","children","response","status","i18n","_","to","tabs","name","link","persistentFilterKey","concat","url","tabsArray","from","exact","path","isNotFound","params"],"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApproval.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { t } from '@lingui/macro';\n\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport {\n  Link,\n  Switch,\n  Route,\n  Redirect,\n  useParams,\n  useRouteMatch,\n  useLocation,\n} from 'react-router-dom';\nimport useRequest from 'hooks/useRequest';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport { WorkflowApprovalsAPI } from 'api';\nimport WorkflowApprovalDetail from './WorkflowApprovalDetail';\n\nfunction WorkflowApproval({ setBreadcrumb }) {\n  const { id: workflowApprovalId } = useParams();\n  const match = useRouteMatch();\n  const location = useLocation();\n  const {\n    result: { workflowApproval },\n    isLoading,\n    error,\n    request: fetchWorkflowApproval,\n  } = useRequest(\n    useCallback(async () => {\n      const detail = await WorkflowApprovalsAPI.readDetail(workflowApprovalId);\n      setBreadcrumb(detail.data);\n      return {\n        workflowApproval: detail.data,\n      };\n    }, [workflowApprovalId, setBreadcrumb]),\n    { workflowApproval: null }\n  );\n\n  useEffect(() => {\n    fetchWorkflowApproval();\n  }, [fetchWorkflowApproval, location.pathname]);\n\n  if (!isLoading && error) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={error}>\n            {error.response.status === 404 && (\n              <span>\n                {t`Workflow Approval not found.`}{' '}\n                <Link to=\"/workflow_approvals\">\n                  {t`View all Workflow Approvals.`}\n                </Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  const tabs = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Workflow Approvals`}\n        </>\n      ),\n      link: `/workflow_approvals`,\n      persistentFilterKey: 'workflowApprovals',\n      id: 99,\n    },\n    {\n      name: t`Details`,\n      link: `${match.url}/details`,\n      id: 0,\n    },\n  ];\n  return (\n    <PageSection>\n      <Card>\n        <RoutedTabs tabsArray={tabs} />\n        <Switch>\n          <Redirect\n            from=\"/workflow_approvals/:id\"\n            to=\"/workflow_approvals/:id/details\"\n            exact\n          />\n          {workflowApproval && (\n            <Route path=\"/workflow_approvals/:id/details\">\n              <WorkflowApprovalDetail\n                fetchWorkflowApproval={fetchWorkflowApproval}\n                workflowApproval={workflowApproval}\n              />\n            </Route>\n          )}\n          <Route key=\"not-found\" path=\"*\">\n            {!isLoading && (\n              <ContentError isNotFound>\n                {match.params.id && (\n                  <Link to={`/workflow_approvals/${match.params.id}/details`}>\n                    {t`View Workflow Approval Details`}\n                  </Link>\n                )}\n              </ContentError>\n            )}\n          </Route>\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default WorkflowApproval;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}