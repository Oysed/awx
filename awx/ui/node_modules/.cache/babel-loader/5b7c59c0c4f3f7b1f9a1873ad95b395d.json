{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{i18n}from\"@lingui/core\";import React,{useCallback,useState}from'react';import styled from'styled-components';import{Switch,Route,useParams}from'react-router-dom';import{Alert,ClipboardCopy,ClipboardCopyVariant,Modal}from'@patternfly/react-core';import{formatDateString}from'util/dates';import{Detail,DetailList}from'components/DetailList';import UserTokenAdd from'../UserTokenAdd';import UserTokenList from'../UserTokenList';import UserToken from'../UserToken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TokenAlert=styled(Alert)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-bottom: 20px;\\n\"])));function UserTokens(_ref){var setBreadcrumb=_ref.setBreadcrumb,user=_ref.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tokenModalSource=_useState2[0],setTokenModalSource=_useState2[1];var _useParams=useParams(),id=_useParams.id;var onSuccessfulAdd=useCallback(function(token){return setTokenModalSource(token);},[setTokenModalSource]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/users/:id/tokens/add\",children:/*#__PURE__*/_jsx(UserTokenAdd,{id:Number(id),onSuccessfulAdd:onSuccessfulAdd})},\"add\"),/*#__PURE__*/_jsx(Route,{path:\"/users/:id/tokens/:tokenId\",children:/*#__PURE__*/_jsx(UserToken,{user:user,setBreadcrumb:setBreadcrumb,id:Number(id)})},\"token\"),/*#__PURE__*/_jsx(Route,{path:\"/users/:id/tokens\",children:/*#__PURE__*/_jsx(UserTokenList,{id:Number(id)})},\"list\")]}),tokenModalSource&&/*#__PURE__*/_jsxs(Modal,{\"aria-label\":/*i18n*/i18n._(\"Token information\"),isOpen:true,variant:\"medium\",title:/*i18n*/i18n._(\"Token information\"),onClose:function onClose(){return setTokenModalSource(null);},children:[/*#__PURE__*/_jsx(TokenAlert,{variant:\"info\",isInline:true,title:/*i18n*/i18n._(\"This is the only time the token value and associated refresh token value will be shown.\")}),/*#__PURE__*/_jsxs(DetailList,{stacked:true,children:[tokenModalSource.token&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Token\"),value:/*#__PURE__*/_jsx(ClipboardCopy,{isReadOnly:true,variant:ClipboardCopyVariant.expansion,children:tokenModalSource.token})}),tokenModalSource.refresh_token&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Refresh Token\"),value:/*#__PURE__*/_jsx(ClipboardCopy,{isReadOnly:true,variant:ClipboardCopyVariant.expansion,children:tokenModalSource.refresh_token})}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Expires\"),value:formatDateString(tokenModalSource.expires)})]})]})]});}export default UserTokens;","map":{"version":3,"names":["React","useCallback","useState","styled","Switch","Route","useParams","Alert","ClipboardCopy","ClipboardCopyVariant","Modal","formatDateString","Detail","DetailList","UserTokenAdd","UserTokenList","UserToken","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TokenAlert","_templateObject","_taggedTemplateLiteral","UserTokens","_ref","setBreadcrumb","user","_useState","_useState2","_slicedToArray","tokenModalSource","setTokenModalSource","_useParams","id","onSuccessfulAdd","token","children","path","Number","i18n","_","isOpen","variant","title","onClose","isInline","stacked","label","value","isReadOnly","expansion","refresh_token","expires"],"sources":["/awx_devel/awx/ui/src/screens/User/UserTokens/UserTokens.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\n\nimport { t } from '@lingui/macro';\nimport styled from 'styled-components';\nimport { Switch, Route, useParams } from 'react-router-dom';\nimport {\n  Alert,\n  ClipboardCopy,\n  ClipboardCopyVariant,\n  Modal,\n} from '@patternfly/react-core';\nimport { formatDateString } from 'util/dates';\nimport { Detail, DetailList } from 'components/DetailList';\nimport UserTokenAdd from '../UserTokenAdd';\nimport UserTokenList from '../UserTokenList';\nimport UserToken from '../UserToken';\n\nconst TokenAlert = styled(Alert)`\n  margin-bottom: 20px;\n`;\n\nfunction UserTokens({ setBreadcrumb, user }) {\n  const [tokenModalSource, setTokenModalSource] = useState(null);\n  const { id } = useParams();\n\n  const onSuccessfulAdd = useCallback(\n    (token) => setTokenModalSource(token),\n    [setTokenModalSource]\n  );\n\n  return (\n    <>\n      <Switch>\n        <Route key=\"add\" path=\"/users/:id/tokens/add\">\n          <UserTokenAdd id={Number(id)} onSuccessfulAdd={onSuccessfulAdd} />\n        </Route>\n        <Route key=\"token\" path=\"/users/:id/tokens/:tokenId\">\n          <UserToken\n            user={user}\n            setBreadcrumb={setBreadcrumb}\n            id={Number(id)}\n          />\n        </Route>\n        <Route key=\"list\" path=\"/users/:id/tokens\">\n          <UserTokenList id={Number(id)} />\n        </Route>\n      </Switch>\n      {tokenModalSource && (\n        <Modal\n          aria-label={t`Token information`}\n          isOpen\n          variant=\"medium\"\n          title={t`Token information`}\n          onClose={() => setTokenModalSource(null)}\n        >\n          <TokenAlert\n            variant=\"info\"\n            isInline\n            title={t`This is the only time the token value and associated refresh token value will be shown.`}\n          />\n          <DetailList stacked>\n            {tokenModalSource.token && (\n              <Detail\n                label={t`Token`}\n                value={\n                  <ClipboardCopy\n                    isReadOnly\n                    variant={ClipboardCopyVariant.expansion}\n                  >\n                    {tokenModalSource.token}\n                  </ClipboardCopy>\n                }\n              />\n            )}\n            {tokenModalSource.refresh_token && (\n              <Detail\n                label={t`Refresh Token`}\n                value={\n                  <ClipboardCopy\n                    isReadOnly\n                    variant={ClipboardCopyVariant.expansion}\n                  >\n                    {tokenModalSource.refresh_token}\n                  </ClipboardCopy>\n                }\n              />\n            )}\n            <Detail\n              label={t`Expires`}\n              value={formatDateString(tokenModalSource.expires)}\n            />\n          </DetailList>\n        </Modal>\n      )}\n    </>\n  );\n}\n\nexport default UserTokens;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}