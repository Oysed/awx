{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Label}from'@patternfly/react-core';import{VariablesDetail}from'components/CodeEditor';import AlertModal from'components/AlertModal';import ErrorDetail from'components/ErrorDetail';import{CardBody,CardActionsRow}from'components/Card';import DeleteButton from'components/DeleteButton';import{Detail,DetailList,UserDateDetail,DetailBadge}from'components/DetailList';import useRequest,{useDismissableError}from'hooks/useRequest';import{jsonToYaml,isJsonString}from'util/yaml';import{InstanceGroupsAPI}from'api';import{relatedResourceDeleteRequests}from'util/getRelatedResourceDeleteDetails';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ContainerGroupDetails(_ref){var _instanceGroup$summar,_instanceGroup$summar2,_instanceGroup$summar3,_instanceGroup$summar4;var instanceGroup=_ref.instanceGroup;var id=instanceGroup.id,name=instanceGroup.name;var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InstanceGroupsAPI.destroy(id);case 2:history.push(\"/instance_groups\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteInstanceGroup=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var deleteDetailsRequests=relatedResourceDeleteRequests.instanceGroup(instanceGroup);return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:instanceGroup.name,dataCy:\"container-group-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Type\"),value:/*i18n*/i18n._(\"Container group\"),dataCy:\"container-group-type\"}),/*#__PURE__*/_jsx(DetailBadge,{label:/*i18n*/i18n._(\"Max concurrent jobs\"),dataCy:\"instance-group-max-concurrent-jobs\",helpText:/*i18n*/i18n._(\"Maximum number of jobs to run concurrently on this group.\\nZero means no limit will be enforced.\"),content:instanceGroup.max_concurrent_jobs}),/*#__PURE__*/_jsx(DetailBadge,{label:/*i18n*/i18n._(\"Max forks\"),dataCy:\"instance-group-max-forks\",helpText:/*i18n*/i18n._(\"Maximum number of forks to allow across all jobs running concurrently on this group.\\nZero means no limit will be enforced.\"),content:instanceGroup.max_forks}),instanceGroup.summary_fields.credential&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Credential\"),helpText:/*i18n*/i18n._(\"Credential to authenticate with Kubernetes or OpenShift\"),value:/*#__PURE__*/_jsx(Link,{to:\"/credentials/\".concat(instanceGroup===null||instanceGroup===void 0?void 0:(_instanceGroup$summar=instanceGroup.summary_fields)===null||_instanceGroup$summar===void 0?void 0:(_instanceGroup$summar2=_instanceGroup$summar.credential)===null||_instanceGroup$summar2===void 0?void 0:_instanceGroup$summar2.id),children:/*#__PURE__*/_jsx(Label,{variant:\"outline\",color:\"blue\",children:instanceGroup===null||instanceGroup===void 0?void 0:(_instanceGroup$summar3=instanceGroup.summary_fields)===null||_instanceGroup$summar3===void 0?void 0:(_instanceGroup$summar4=_instanceGroup$summar3.credential)===null||_instanceGroup$summar4===void 0?void 0:_instanceGroup$summar4.name})}),dataCy:\"container-group-credential\"}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:instanceGroup.created,user:instanceGroup.summary_fields.created_by}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:instanceGroup.modified,user:instanceGroup.summary_fields.modified_by}),instanceGroup.pod_spec_override&&/*#__PURE__*/_jsx(VariablesDetail,{label:/*i18n*/i18n._(\"Pod spec override\"),value:isJsonString(instanceGroup.pod_spec_override)?jsonToYaml(instanceGroup.pod_spec_override):instanceGroup.pod_spec_override,rows:6,helpText:/*i18n*/i18n._(\"Custom Kubernetes or OpenShift Pod specification.\"),name:\"pod_spec_override\",dataCy:\"container-group-detail-pod-spec-override\"})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[instanceGroup.summary_fields.user_capabilities&&instanceGroup.summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"container-group-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/instance_groups/container_group/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),instanceGroup.summary_fields.user_capabilities&&instanceGroup.summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{ouiaId:\"container-group-detail-delete-button\",name:name,modalTitle:/*i18n*/i18n._(\"Delete instance group\"),onConfirm:deleteInstanceGroup,isDisabled:isLoading,deleteDetailsRequests:deleteDetailsRequests,deleteMessage:/*i18n*/i18n._(\"This container group is currently being by other resources. Are you sure you want to delete it?\"),children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsx(AlertModal,{isOpen:error,onClose:dismissError,title:/*i18n*/i18n._(\"Error\"),variant:\"error\",children:/*#__PURE__*/_jsx(ErrorDetail,{error:error})})]});}export default ContainerGroupDetails;","map":{"version":3,"names":["React","useCallback","Link","useHistory","Button","Label","VariablesDetail","AlertModal","ErrorDetail","CardBody","CardActionsRow","DeleteButton","Detail","DetailList","UserDateDetail","DetailBadge","useRequest","useDismissableError","jsonToYaml","isJsonString","InstanceGroupsAPI","relatedResourceDeleteRequests","jsx","_jsx","jsxs","_jsxs","ContainerGroupDetails","_ref","_instanceGroup$summar","_instanceGroup$summar2","_instanceGroup$summar3","_instanceGroup$summar4","instanceGroup","id","name","history","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","destroy","push","stop","deleteInstanceGroup","request","isLoading","deleteError","error","_useDismissableError","dismissError","deleteDetailsRequests","children","label","i18n","_","value","dataCy","helpText","content","max_concurrent_jobs","max_forks","summary_fields","credential","to","concat","variant","color","date","created","user","created_by","modified","modified_by","pod_spec_override","rows","user_capabilities","edit","ouiaId","component","delete","modalTitle","onConfirm","isDisabled","deleteMessage","isOpen","onClose","title"],"sources":["/awx_devel/awx/ui/src/screens/InstanceGroup/ContainerGroupDetails/ContainerGroupDetails.js"],"sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button, Label } from '@patternfly/react-core';\n\nimport { VariablesDetail } from 'components/CodeEditor';\nimport AlertModal from 'components/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport DeleteButton from 'components/DeleteButton';\nimport {\n  Detail,\n  DetailList,\n  UserDateDetail,\n  DetailBadge,\n} from 'components/DetailList';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport { jsonToYaml, isJsonString } from 'util/yaml';\nimport { InstanceGroupsAPI } from 'api';\nimport { relatedResourceDeleteRequests } from 'util/getRelatedResourceDeleteDetails';\n\nfunction ContainerGroupDetails({ instanceGroup }) {\n  const { id, name } = instanceGroup;\n\n  const history = useHistory();\n\n  const {\n    request: deleteInstanceGroup,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await InstanceGroupsAPI.destroy(id);\n      history.push(`/instance_groups`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n  const deleteDetailsRequests =\n    relatedResourceDeleteRequests.instanceGroup(instanceGroup);\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={instanceGroup.name}\n          dataCy=\"container-group-detail-name\"\n        />\n        <Detail\n          label={t`Type`}\n          value={t`Container group`}\n          dataCy=\"container-group-type\"\n        />\n        <DetailBadge\n          label={t`Max concurrent jobs`}\n          dataCy=\"instance-group-max-concurrent-jobs\"\n          helpText={t`Maximum number of jobs to run concurrently on this group.\n          Zero means no limit will be enforced.`}\n          content={instanceGroup.max_concurrent_jobs}\n        />\n        <DetailBadge\n          label={t`Max forks`}\n          dataCy=\"instance-group-max-forks\"\n          helpText={t`Maximum number of forks to allow across all jobs running concurrently on this group.\n          Zero means no limit will be enforced.`}\n          content={instanceGroup.max_forks}\n        />\n        {instanceGroup.summary_fields.credential && (\n          <Detail\n            label={t`Credential`}\n            helpText={t`Credential to authenticate with Kubernetes or OpenShift`}\n            value={\n              <Link\n                to={`/credentials/${instanceGroup?.summary_fields?.credential?.id}`}\n              >\n                <Label variant=\"outline\" color=\"blue\">\n                  {instanceGroup?.summary_fields?.credential?.name}\n                </Label>\n              </Link>\n            }\n            dataCy=\"container-group-credential\"\n          />\n        )}\n        <UserDateDetail\n          label={t`Created`}\n          date={instanceGroup.created}\n          user={instanceGroup.summary_fields.created_by}\n        />\n        <UserDateDetail\n          label={t`Last Modified`}\n          date={instanceGroup.modified}\n          user={instanceGroup.summary_fields.modified_by}\n        />\n        {instanceGroup.pod_spec_override && (\n          <VariablesDetail\n            label={t`Pod spec override`}\n            value={\n              isJsonString(instanceGroup.pod_spec_override)\n                ? jsonToYaml(instanceGroup.pod_spec_override)\n                : instanceGroup.pod_spec_override\n            }\n            rows={6}\n            helpText={t`Custom Kubernetes or OpenShift Pod specification.`}\n            name=\"pod_spec_override\"\n            dataCy=\"container-group-detail-pod-spec-override\"\n          />\n        )}\n      </DetailList>\n\n      <CardActionsRow>\n        {instanceGroup.summary_fields.user_capabilities &&\n          instanceGroup.summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"container-group-detail-edit-button\"\n              aria-label={t`edit`}\n              component={Link}\n              to={`/instance_groups/container_group/${id}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {instanceGroup.summary_fields.user_capabilities &&\n          instanceGroup.summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              ouiaId=\"container-group-detail-delete-button\"\n              name={name}\n              modalTitle={t`Delete instance group`}\n              onConfirm={deleteInstanceGroup}\n              isDisabled={isLoading}\n              deleteDetailsRequests={deleteDetailsRequests}\n              deleteMessage={t`This container group is currently being by other resources. Are you sure you want to delete it?`}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          onClose={dismissError}\n          title={t`Error`}\n          variant=\"error\"\n        >\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\n\nexport default ContainerGroupDetails;\n"],"mappings":"gPAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,KAAQ,OAAO,CAG1C,OAASC,IAAI,CAAEC,UAAU,KAAQ,kBAAkB,CACnD,OAASC,MAAM,CAAEC,KAAK,KAAQ,wBAAwB,CAEtD,OAASC,eAAe,KAAQ,uBAAuB,CACvD,MAAO,CAAAC,UAAU,KAAM,uBAAuB,CAC9C,MAAO,CAAAC,WAAW,KAAM,wBAAwB,CAChD,OAASC,QAAQ,CAAEC,cAAc,KAAQ,iBAAiB,CAC1D,MAAO,CAAAC,YAAY,KAAM,yBAAyB,CAClD,OACEC,MAAM,CACNC,UAAU,CACVC,cAAc,CACdC,WAAW,KACN,uBAAuB,CAC9B,MAAO,CAAAC,UAAU,EAAIC,mBAAmB,KAAQ,kBAAkB,CAClE,OAASC,UAAU,CAAEC,YAAY,KAAQ,WAAW,CACpD,OAASC,iBAAiB,KAAQ,KAAK,CACvC,OAASC,6BAA6B,KAAQ,sCAAsC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErF,QAAS,CAAAC,qBAAqBA,CAAAC,IAAA,CAAoB,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,IAAjB,CAAAC,aAAa,CAAAL,IAAA,CAAbK,aAAa,CAC5C,GAAQ,CAAAC,EAAE,CAAWD,aAAa,CAA1BC,EAAE,CAAEC,IAAI,CAAKF,aAAa,CAAtBE,IAAI,CAEhB,GAAM,CAAAC,OAAO,CAAGhC,UAAU,CAAC,CAAC,CAE5B,IAAAiC,WAAA,CAIIpB,UAAU,CACZf,WAAW,cAAAoC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAC,SAAAC,QAAA,SAAAF,mBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACJ,CAAAzB,iBAAiB,CAAC0B,OAAO,CAACb,EAAE,CAAC,QACnCE,OAAO,CAACY,IAAI,mBAAmB,CAAC,CAAC,wBAAAJ,QAAA,CAAAK,IAAA,OAAAR,OAAA,GAClC,GAAE,CAACP,EAAE,CAAEE,OAAO,CAAC,CAClB,CAAC,CARUc,mBAAmB,CAAAb,WAAA,CAA5Bc,OAAO,CACPC,SAAS,CAAAf,WAAA,CAATe,SAAS,CACFC,WAAW,CAAAhB,WAAA,CAAlBiB,KAAK,CAQP,IAAAC,oBAAA,CAAgCrC,mBAAmB,CAACmC,WAAW,CAAC,CAAxDC,KAAK,CAAAC,oBAAA,CAALD,KAAK,CAAEE,YAAY,CAAAD,oBAAA,CAAZC,YAAY,CAC3B,GAAM,CAAAC,qBAAqB,CACzBnC,6BAA6B,CAACW,aAAa,CAACA,aAAa,CAAC,CAC5D,mBACEP,KAAA,CAAChB,QAAQ,EAAAgD,QAAA,eACPhC,KAAA,CAACZ,UAAU,EAAA4C,QAAA,eACTlC,IAAA,CAACX,MAAM,EACL8C,KAAK,SAAEC,IAAA,CAAAC,CAAA,OAAM,CAAE,CACfC,KAAK,CAAE7B,aAAa,CAACE,IAAK,CAC1B4B,MAAM,CAAC,6BAA6B,CACrC,CAAC,cACFvC,IAAA,CAACX,MAAM,EACL8C,KAAK,SAAEC,IAAA,CAAAC,CAAA,OAAM,CAAE,CACfC,KAAK,SAAEF,IAAA,CAAAC,CAAA,kBAAiB,CAAE,CAC1BE,MAAM,CAAC,sBAAsB,CAC9B,CAAC,cACFvC,IAAA,CAACR,WAAW,EACV2C,KAAK,SAAEC,IAAA,CAAAC,CAAA,sBAAqB,CAAE,CAC9BE,MAAM,CAAC,oCAAoC,CAC3CC,QAAQ,SAAEJ,IAAA,CAAAC,CAAA,mGAC2B,CAAE,CACvCI,OAAO,CAAEhC,aAAa,CAACiC,mBAAoB,CAC5C,CAAC,cACF1C,IAAA,CAACR,WAAW,EACV2C,KAAK,SAAEC,IAAA,CAAAC,CAAA,YAAW,CAAE,CACpBE,MAAM,CAAC,0BAA0B,CACjCC,QAAQ,SAAEJ,IAAA,CAAAC,CAAA,8HAC2B,CAAE,CACvCI,OAAO,CAAEhC,aAAa,CAACkC,SAAU,CAClC,CAAC,CACDlC,aAAa,CAACmC,cAAc,CAACC,UAAU,eACtC7C,IAAA,CAACX,MAAM,EACL8C,KAAK,SAAEC,IAAA,CAAAC,CAAA,aAAY,CAAE,CACrBG,QAAQ,SAAEJ,IAAA,CAAAC,CAAA,0DAAyD,CAAE,CACrEC,KAAK,cACHtC,IAAA,CAACrB,IAAI,EACHmE,EAAE,iBAAAC,MAAA,CAAkBtC,aAAa,SAAbA,aAAa,kBAAAJ,qBAAA,CAAbI,aAAa,CAAEmC,cAAc,UAAAvC,qBAAA,kBAAAC,sBAAA,CAA7BD,qBAAA,CAA+BwC,UAAU,UAAAvC,sBAAA,iBAAzCA,sBAAA,CAA2CI,EAAE,CAAG,CAAAwB,QAAA,cAEpElC,IAAA,CAAClB,KAAK,EAACkE,OAAO,CAAC,SAAS,CAACC,KAAK,CAAC,MAAM,CAAAf,QAAA,CAClCzB,aAAa,SAAbA,aAAa,kBAAAF,sBAAA,CAAbE,aAAa,CAAEmC,cAAc,UAAArC,sBAAA,kBAAAC,sBAAA,CAA7BD,sBAAA,CAA+BsC,UAAU,UAAArC,sBAAA,iBAAzCA,sBAAA,CAA2CG,IAAI,CAC3C,CAAC,CACJ,CACP,CACD4B,MAAM,CAAC,4BAA4B,CACpC,CACF,cACDvC,IAAA,CAACT,cAAc,EACb4C,KAAK,SAAEC,IAAA,CAAAC,CAAA,UAAS,CAAE,CAClBa,IAAI,CAAEzC,aAAa,CAAC0C,OAAQ,CAC5BC,IAAI,CAAE3C,aAAa,CAACmC,cAAc,CAACS,UAAW,CAC/C,CAAC,cACFrD,IAAA,CAACT,cAAc,EACb4C,KAAK,SAAEC,IAAA,CAAAC,CAAA,gBAAe,CAAE,CACxBa,IAAI,CAAEzC,aAAa,CAAC6C,QAAS,CAC7BF,IAAI,CAAE3C,aAAa,CAACmC,cAAc,CAACW,WAAY,CAChD,CAAC,CACD9C,aAAa,CAAC+C,iBAAiB,eAC9BxD,IAAA,CAACjB,eAAe,EACdoD,KAAK,SAAEC,IAAA,CAAAC,CAAA,oBAAmB,CAAE,CAC5BC,KAAK,CACH1C,YAAY,CAACa,aAAa,CAAC+C,iBAAiB,CAAC,CACzC7D,UAAU,CAACc,aAAa,CAAC+C,iBAAiB,CAAC,CAC3C/C,aAAa,CAAC+C,iBACnB,CACDC,IAAI,CAAE,CAAE,CACRjB,QAAQ,SAAEJ,IAAA,CAAAC,CAAA,oDAAmD,CAAE,CAC/D1B,IAAI,CAAC,mBAAmB,CACxB4B,MAAM,CAAC,0CAA0C,CAClD,CACF,EACS,CAAC,cAEbrC,KAAA,CAACf,cAAc,EAAA+C,QAAA,EACZzB,aAAa,CAACmC,cAAc,CAACc,iBAAiB,EAC7CjD,aAAa,CAACmC,cAAc,CAACc,iBAAiB,CAACC,IAAI,eACjD3D,IAAA,CAACnB,MAAM,EACL+E,MAAM,CAAC,oCAAoC,CAC3C,qBAAYxB,IAAA,CAAAC,CAAA,OAAM,CAAE,CACpBwB,SAAS,CAAElF,IAAK,CAChBmE,EAAE,qCAAAC,MAAA,CAAsCrC,EAAE,SAAQ,CAAAwB,QAAA,SAEjDE,IAAA,CAAAC,CAAA,OAAM,CAAC,CACF,CACT,CACF5B,aAAa,CAACmC,cAAc,CAACc,iBAAiB,EAC7CjD,aAAa,CAACmC,cAAc,CAACc,iBAAiB,CAACI,MAAM,eACnD9D,IAAA,CAACZ,YAAY,EACXwE,MAAM,CAAC,sCAAsC,CAC7CjD,IAAI,CAAEA,IAAK,CACXoD,UAAU,SAAE3B,IAAA,CAAAC,CAAA,wBAAuB,CAAE,CACrC2B,SAAS,CAAEtC,mBAAoB,CAC/BuC,UAAU,CAAErC,SAAU,CACtBK,qBAAqB,CAAEA,qBAAsB,CAC7CiC,aAAa,SAAE9B,IAAA,CAAAC,CAAA,kGAAiG,CAAE,CAAAH,QAAA,SAEjHE,IAAA,CAAAC,CAAA,SAAQ,CAAC,CACE,CACf,EACW,CAAC,CAChBP,KAAK,eACJ9B,IAAA,CAAChB,UAAU,EACTmF,MAAM,CAAErC,KAAM,CACdsC,OAAO,CAAEpC,YAAa,CACtBqC,KAAK,SAAEjC,IAAA,CAAAC,CAAA,QAAO,CAAE,CAChBW,OAAO,CAAC,OAAO,CAAAd,QAAA,cAEflC,IAAA,CAACf,WAAW,EAAC6C,KAAK,CAAEA,KAAM,CAAE,CAAC,CACnB,CACb,EACO,CAAC,CAEf,CAEA,cAAe,CAAA3B,qBAAqB"},"metadata":{},"sourceType":"module"}