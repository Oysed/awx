{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React from'react';import{useFormikContext}from'formik';import StepName from'../LaunchPrompt/steps/StepName';import AdHocDetailsStep from'./AdHocDetailsStep';import{jsx as _jsx}from\"react/jsx-runtime\";var STEP_ID='details';export default function useAdHocDetailsStep(visited,moduleOptions){var _useFormikContext=useFormikContext(),values=_useFormikContext.values,touched=_useFormikContext.touched,setFieldError=_useFormikContext.setFieldError;var hasError=function hasError(){if(!Object.keys(visited).includes(STEP_ID)){return false;}if(!values.module_name&&touched.module_name){return true;}if(values.module_name==='shell'||values.module_name==='command'){if(values.module_args){return false;// eslint-disable-next-line no-else-return\n}else{return true;}}return false;};return{step:{id:STEP_ID,key:1,name:/*#__PURE__*/_jsx(StepName,{hasErrors:hasError(),id:\"details-step\",children:/*i18n*/i18n._(\"Details\")}),component:/*#__PURE__*/_jsx(AdHocDetailsStep,{moduleOptions:moduleOptions}),enableNext:true,nextButtonText:/*i18n*/i18n._(\"Next\")},hasError:hasError(),validate:function validate(){if(Object.keys(touched).includes('module_name'||'module_args')){if(!values.module_name){setFieldError('module_name',/*i18n*/i18n._(\"This field must not be blank.\"));}if(values.module_name===('command'||'shell')&&!values.module_args){setFieldError('module_args',/*i18n*/i18n._(\"This field must not be blank\"));}}},setTouched:function setTouched(setFieldTouched){setFieldTouched('module_name',true,false);setFieldTouched('module_args',true,false);}};}","map":{"version":3,"names":["React","useFormikContext","StepName","AdHocDetailsStep","jsx","_jsx","STEP_ID","useAdHocDetailsStep","visited","moduleOptions","_useFormikContext","values","touched","setFieldError","hasError","Object","keys","includes","module_name","module_args","step","id","key","name","hasErrors","children","i18n","_","component","enableNext","nextButtonText","validate","setTouched","setFieldTouched"],"sources":["/awx_devel/awx/ui/src/components/AdHocCommands/useAdHocDetailsStep.js"],"sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { useFormikContext } from 'formik';\nimport StepName from '../LaunchPrompt/steps/StepName';\nimport AdHocDetailsStep from './AdHocDetailsStep';\n\nconst STEP_ID = 'details';\nexport default function useAdHocDetailsStep(visited, moduleOptions) {\n  const { values, touched, setFieldError } = useFormikContext();\n\n  const hasError = () => {\n    if (!Object.keys(visited).includes(STEP_ID)) {\n      return false;\n    }\n    if (!values.module_name && touched.module_name) {\n      return true;\n    }\n\n    if (values.module_name === 'shell' || values.module_name === 'command') {\n      if (values.module_args) {\n        return false;\n        // eslint-disable-next-line no-else-return\n      } else {\n        return true;\n      }\n    }\n    return false;\n  };\n  return {\n    step: {\n      id: STEP_ID,\n      key: 1,\n      name: (\n        <StepName hasErrors={hasError()} id=\"details-step\">\n          {t`Details`}\n        </StepName>\n      ),\n      component: <AdHocDetailsStep moduleOptions={moduleOptions} />,\n      enableNext: true,\n      nextButtonText: t`Next`,\n    },\n    hasError: hasError(),\n    validate: () => {\n      if (Object.keys(touched).includes('module_name' || 'module_args')) {\n        if (!values.module_name) {\n          setFieldError('module_name', t`This field must not be blank.`);\n        }\n        if (\n          values.module_name === ('command' || 'shell') &&\n          !values.module_args\n        ) {\n          setFieldError('module_args', t`This field must not be blank`);\n        }\n      }\n    },\n    setTouched: (setFieldTouched) => {\n      setFieldTouched('module_name', true, false);\n      setFieldTouched('module_args', true, false);\n    },\n  };\n}\n"],"mappings":"+BAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,gBAAgB,KAAQ,QAAQ,CACzC,MAAO,CAAAC,QAAQ,KAAM,gCAAgC,CACrD,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElD,GAAM,CAAAC,OAAO,CAAG,SAAS,CACzB,cAAe,SAAS,CAAAC,mBAAmBA,CAACC,OAAO,CAAEC,aAAa,CAAE,CAClE,IAAAC,iBAAA,CAA2CT,gBAAgB,CAAC,CAAC,CAArDU,MAAM,CAAAD,iBAAA,CAANC,MAAM,CAAEC,OAAO,CAAAF,iBAAA,CAAPE,OAAO,CAAEC,aAAa,CAAAH,iBAAA,CAAbG,aAAa,CAEtC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB,GAAI,CAACC,MAAM,CAACC,IAAI,CAACR,OAAO,CAAC,CAACS,QAAQ,CAACX,OAAO,CAAC,CAAE,CAC3C,MAAO,MAAK,CACd,CACA,GAAI,CAACK,MAAM,CAACO,WAAW,EAAIN,OAAO,CAACM,WAAW,CAAE,CAC9C,MAAO,KAAI,CACb,CAEA,GAAIP,MAAM,CAACO,WAAW,GAAK,OAAO,EAAIP,MAAM,CAACO,WAAW,GAAK,SAAS,CAAE,CACtE,GAAIP,MAAM,CAACQ,WAAW,CAAE,CACtB,MAAO,MAAK,CACZ;AACF,CAAC,IAAM,CACL,MAAO,KAAI,CACb,CACF,CACA,MAAO,MAAK,CACd,CAAC,CACD,MAAO,CACLC,IAAI,CAAE,CACJC,EAAE,CAAEf,OAAO,CACXgB,GAAG,CAAE,CAAC,CACNC,IAAI,cACFlB,IAAA,CAACH,QAAQ,EAACsB,SAAS,CAAEV,QAAQ,CAAC,CAAE,CAACO,EAAE,CAAC,cAAc,CAAAI,QAAA,SAC/CC,IAAA,CAAAC,CAAA,UAAS,CAAC,CACH,CACX,CACDC,SAAS,cAAEvB,IAAA,CAACF,gBAAgB,EAACM,aAAa,CAAEA,aAAc,CAAE,CAAC,CAC7DoB,UAAU,CAAE,IAAI,CAChBC,cAAc,SAAEJ,IAAA,CAAAC,CAAA,OAAM,CACxB,CAAC,CACDb,QAAQ,CAAEA,QAAQ,CAAC,CAAC,CACpBiB,QAAQ,CAAE,SAAAA,SAAA,CAAM,CACd,GAAIhB,MAAM,CAACC,IAAI,CAACJ,OAAO,CAAC,CAACK,QAAQ,CAAC,aAAa,EAAI,aAAa,CAAC,CAAE,CACjE,GAAI,CAACN,MAAM,CAACO,WAAW,CAAE,CACvBL,aAAa,CAAC,aAAa,SAAEa,IAAA,CAAAC,CAAA,gCAA+B,CAAC,CAAC,CAChE,CACA,GACEhB,MAAM,CAACO,WAAW,IAAM,SAAS,EAAI,OAAO,CAAC,EAC7C,CAACP,MAAM,CAACQ,WAAW,CACnB,CACAN,aAAa,CAAC,aAAa,SAAEa,IAAA,CAAAC,CAAA,+BAA8B,CAAC,CAAC,CAC/D,CACF,CACF,CAAC,CACDK,UAAU,CAAE,SAAAA,WAACC,eAAe,CAAK,CAC/BA,eAAe,CAAC,aAAa,CAAE,IAAI,CAAE,KAAK,CAAC,CAC3CA,eAAe,CAAC,aAAa,CAAE,IAAI,CAAE,KAAK,CAAC,CAC7C,CACF,CAAC,CACH"},"metadata":{},"sourceType":"module"}