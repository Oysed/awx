{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,Redirect,Route,Switch,useRouteMatch}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import RoutedTabs from'components/RoutedTabs';import useRequest from'hooks/useRequest';import{InventoriesAPI}from'api';import AdvancedInventoryHostDetail from'../AdvancedInventoryHostDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AdvancedInventoryHost(_ref){var inventory=_ref.inventory,setBreadcrumb=_ref.setBreadcrumb;var _useRouteMatch=useRouteMatch('/inventories/:inventoryType/:id/hosts/:hostId'),params=_useRouteMatch.params,path=_useRouteMatch.path,url=_useRouteMatch.url;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InventoriesAPI.readHostDetail(inventory.id,params.hostId);case 2:response=_context.sent;return _context.abrupt(\"return\",response);case 4:case\"end\":return _context.stop();}}},_callee);})),[inventory.id,params.hostId]),{isLoading:true}),host=_useRequest.result,error=_useRequest.error,isLoading=_useRequest.isLoading,fetchHost=_useRequest.request;useEffect(function(){fetchHost();},[fetchHost]);useEffect(function(){if(inventory&&host){setBreadcrumb(inventory,host);}},[inventory,host,setBreadcrumb]);if(error){return/*#__PURE__*/_jsx(ContentError,{error:error});}var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Hosts\")]}),link:\"/inventories/\".concat(params.inventoryType,\"/\").concat(inventory.id,\"/hosts\"),id:0},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(url,\"/details\"),id:1}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&host&&/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/inventories/:inventoryType/:id/hosts/:hostId\",to:\"\".concat(path,\"/details\"),exact:true}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(path,\"/details\"),children:/*#__PURE__*/_jsx(AdvancedInventoryHostDetail,{host:host})},\"details\"),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(url,\"/details\"),children:params.inventoryType==='smart_inventory'?/*i18n*/i18n._(\"View smart inventory host details\"):/*i18n*/i18n._(\"View constructed inventory host details\")})})},\"not-found\")]})]});}export default AdvancedInventoryHost;","map":{"version":3,"names":["React","useEffect","useCallback","Link","Redirect","Route","Switch","useRouteMatch","CaretLeftIcon","ContentError","ContentLoading","RoutedTabs","useRequest","InventoriesAPI","AdvancedInventoryHostDetail","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AdvancedInventoryHost","_ref","inventory","setBreadcrumb","_useRouteMatch","params","path","url","_useRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","readHostDetail","id","hostId","sent","abrupt","stop","isLoading","host","result","error","fetchHost","request","tabsArray","name","children","i18n","_","link","concat","inventoryType","from","to","exact","isNotFound"],"sources":["/awx_devel/awx/ui/src/screens/Inventory/AdvancedInventoryHost/AdvancedInventoryHost.js"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, Redirect, Route, Switch, useRouteMatch } from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport RoutedTabs from 'components/RoutedTabs';\nimport useRequest from 'hooks/useRequest';\nimport { InventoriesAPI } from 'api';\nimport AdvancedInventoryHostDetail from '../AdvancedInventoryHostDetail';\n\nfunction AdvancedInventoryHost({ inventory, setBreadcrumb }) {\n  const { params, path, url } = useRouteMatch(\n    '/inventories/:inventoryType/:id/hosts/:hostId'\n  );\n\n  const {\n    result: host,\n    error,\n    isLoading,\n    request: fetchHost,\n  } = useRequest(\n    useCallback(async () => {\n      const response = await InventoriesAPI.readHostDetail(\n        inventory.id,\n        params.hostId\n      );\n      return response;\n    }, [inventory.id, params.hostId]),\n    { isLoading: true }\n  );\n\n  useEffect(() => {\n    fetchHost();\n  }, [fetchHost]);\n\n  useEffect(() => {\n    if (inventory && host) {\n      setBreadcrumb(inventory, host);\n    }\n  }, [inventory, host, setBreadcrumb]);\n\n  if (error) {\n    return <ContentError error={error} />;\n  }\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Hosts`}\n        </>\n      ),\n      link: `/inventories/${params.inventoryType}/${inventory.id}/hosts`,\n      id: 0,\n    },\n    {\n      name: t`Details`,\n      link: `${url}/details`,\n      id: 1,\n    },\n  ];\n\n  return (\n    <>\n      <RoutedTabs tabsArray={tabsArray} />\n\n      {isLoading && <ContentLoading />}\n\n      {!isLoading && host && (\n        <Switch>\n          <Redirect\n            from=\"/inventories/:inventoryType/:id/hosts/:hostId\"\n            to={`${path}/details`}\n            exact\n          />\n          <Route key=\"details\" path={`${path}/details`}>\n            <AdvancedInventoryHostDetail host={host} />\n          </Route>\n          <Route key=\"not-found\" path=\"*\">\n            <ContentError isNotFound>\n              <Link to={`${url}/details`}>\n                {params.inventoryType === 'smart_inventory'\n                  ? t`View smart inventory host details`\n                  : t`View constructed inventory host details`}\n              </Link>\n            </ContentError>\n          </Route>\n        </Switch>\n      )}\n    </>\n  );\n}\n\nexport default AdvancedInventoryHost;\n"],"mappings":"gPAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAGrD,OAASC,IAAI,CAAEC,QAAQ,CAAEC,KAAK,CAAEC,MAAM,CAAEC,aAAa,KAAQ,kBAAkB,CAC/E,OAASC,aAAa,KAAQ,yBAAyB,CACvD,MAAO,CAAAC,YAAY,KAAM,yBAAyB,CAClD,MAAO,CAAAC,cAAc,KAAM,2BAA2B,CACtD,MAAO,CAAAC,UAAU,KAAM,uBAAuB,CAC9C,MAAO,CAAAC,UAAU,KAAM,kBAAkB,CACzC,OAASC,cAAc,KAAQ,KAAK,CACpC,MAAO,CAAAC,2BAA2B,KAAM,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzE,QAAS,CAAAC,qBAAqBA,CAAAC,IAAA,CAA+B,IAA5B,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CAAEC,aAAa,CAAAF,IAAA,CAAbE,aAAa,CACvD,IAAAC,cAAA,CAA8BlB,aAAa,CACzC,+CACF,CAAC,CAFOmB,MAAM,CAAAD,cAAA,CAANC,MAAM,CAAEC,IAAI,CAAAF,cAAA,CAAJE,IAAI,CAAEC,GAAG,CAAAH,cAAA,CAAHG,GAAG,CAIzB,IAAAC,WAAA,CAKIjB,UAAU,CACZV,WAAW,cAAA4B,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACa,CAAA1B,cAAc,CAAC2B,cAAc,CAClDjB,SAAS,CAACkB,EAAE,CACZf,MAAM,CAACgB,MACT,CAAC,QAHKR,QAAQ,CAAAG,QAAA,CAAAM,IAAA,QAAAN,QAAA,CAAAO,MAAA,UAIPV,QAAQ,0BAAAG,QAAA,CAAAQ,IAAA,OAAAZ,OAAA,GAChB,GAAE,CAACV,SAAS,CAACkB,EAAE,CAAEf,MAAM,CAACgB,MAAM,CAAC,CAAC,CACjC,CAAEI,SAAS,CAAE,IAAK,CACpB,CAAC,CAbSC,IAAI,CAAAlB,WAAA,CAAZmB,MAAM,CACNC,KAAK,CAAApB,WAAA,CAALoB,KAAK,CACLH,SAAS,CAAAjB,WAAA,CAATiB,SAAS,CACAI,SAAS,CAAArB,WAAA,CAAlBsB,OAAO,CAYTlD,SAAS,CAAC,UAAM,CACdiD,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEfjD,SAAS,CAAC,UAAM,CACd,GAAIsB,SAAS,EAAIwB,IAAI,CAAE,CACrBvB,aAAa,CAACD,SAAS,CAAEwB,IAAI,CAAC,CAChC,CACF,CAAC,CAAE,CAACxB,SAAS,CAAEwB,IAAI,CAAEvB,aAAa,CAAC,CAAC,CAEpC,GAAIyB,KAAK,CAAE,CACT,mBAAOjC,IAAA,CAACP,YAAY,EAACwC,KAAK,CAAEA,KAAM,CAAE,CAAC,CACvC,CACA,GAAM,CAAAG,SAAS,CAAG,CAChB,CACEC,IAAI,cACFjC,KAAA,CAAAF,SAAA,EAAAoC,QAAA,eACEtC,IAAA,CAACR,aAAa,GAAE,CAAC,SAChB+C,IAAA,CAAAC,CAAA,gBAAe,CAAC,EACjB,CACH,CACDC,IAAI,iBAAAC,MAAA,CAAkBhC,MAAM,CAACiC,aAAa,MAAAD,MAAA,CAAInC,SAAS,CAACkB,EAAE,UAAQ,CAClEA,EAAE,CAAE,CACN,CAAC,CACD,CACEY,IAAI,SAAEE,IAAA,CAAAC,CAAA,UAAS,CAAC,CAChBC,IAAI,IAAAC,MAAA,CAAK9B,GAAG,YAAU,CACtBa,EAAE,CAAE,CACN,CAAC,CACF,CAED,mBACErB,KAAA,CAAAF,SAAA,EAAAoC,QAAA,eACEtC,IAAA,CAACL,UAAU,EAACyC,SAAS,CAAEA,SAAU,CAAE,CAAC,CAEnCN,SAAS,eAAI9B,IAAA,CAACN,cAAc,GAAE,CAAC,CAE/B,CAACoC,SAAS,EAAIC,IAAI,eACjB3B,KAAA,CAACd,MAAM,EAAAgD,QAAA,eACLtC,IAAA,CAACZ,QAAQ,EACPwD,IAAI,CAAC,+CAA+C,CACpDC,EAAE,IAAAH,MAAA,CAAK/B,IAAI,YAAW,CACtBmC,KAAK,MACN,CAAC,cACF9C,IAAA,CAACX,KAAK,EAAesB,IAAI,IAAA+B,MAAA,CAAK/B,IAAI,YAAW,CAAA2B,QAAA,cAC3CtC,IAAA,CAACF,2BAA2B,EAACiC,IAAI,CAAEA,IAAK,CAAE,CAAC,EADlC,SAEJ,CAAC,cACR/B,IAAA,CAACX,KAAK,EAAiBsB,IAAI,CAAC,GAAG,CAAA2B,QAAA,cAC7BtC,IAAA,CAACP,YAAY,EAACsD,UAAU,MAAAT,QAAA,cACtBtC,IAAA,CAACb,IAAI,EAAC0D,EAAE,IAAAH,MAAA,CAAK9B,GAAG,YAAW,CAAA0B,QAAA,CACxB5B,MAAM,CAACiC,aAAa,GAAK,iBAAiB,SACvCJ,IAAA,CAAAC,CAAA,oCAAmC,CAAC,SACpCD,IAAA,CAAAC,CAAA,0CAAyC,CAAC,CAC1C,CAAC,CACK,CAAC,EAPN,WAQJ,CAAC,EACF,CACT,EACD,CAAC,CAEP,CAEA,cAAe,CAAAnC,qBAAqB"},"metadata":{},"sourceType":"module"}