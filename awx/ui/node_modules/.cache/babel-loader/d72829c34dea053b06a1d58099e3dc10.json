{"ast":null,"code":"import _defineProperty from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";export default function sortErrorMessages(error){var _error$response;var formValues=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!error){return{};}if(error!==null&&error!==void 0&&(_error$response=error.response)!==null&&_error$response!==void 0&&_error$response.data&&typeof error.response.data==='object'&&Object.keys(error.response.data).length>0){var parsed=parseFieldErrors(error.response.data,formValues);return{formError:parsed.formErrors.join('; '),fieldErrors:Object.keys(parsed.fieldErrors).length?parsed.fieldErrors:null};}/* eslint-disable-next-line no-console */console.error(error);return{formError:error.message,fieldErrors:null};}// Recursively traverse field errors object and build up field/form errors\nfunction parseFieldErrors(obj,formValues){var fieldErrors={};var formErrors=[];Object.keys(obj).forEach(function(key){var value=obj[key];if(typeof value==='string'){if(typeof formValues[key]==='undefined'){formErrors.push(value);}else{fieldErrors[key]=value;}}else if(Array.isArray(value)){if(typeof formValues[key]==='undefined'){formErrors=formErrors.concat(value);}else{fieldErrors[key]=value.join('; ');}}else if(typeof value==='object'){var parsed=parseFieldErrors(value,formValues[key]||{});if(Object.keys(parsed.fieldErrors).length){fieldErrors=_objectSpread(_objectSpread({},fieldErrors),{},_defineProperty({},key,parsed.fieldErrors));}formErrors=formErrors.concat(parsed.formErrors);}if(typeof formValues[key]==='boolean'){formErrors=formErrors.concat(value);}});return{fieldErrors:fieldErrors,formErrors:formErrors};}","map":{"version":3,"names":["sortErrorMessages","error","_error$response","formValues","arguments","length","undefined","response","data","Object","keys","parsed","parseFieldErrors","formError","formErrors","join","fieldErrors","console","message","obj","forEach","key","value","push","Array","isArray","concat","_objectSpread","_defineProperty"],"sources":["/awx_devel/awx/ui/src/components/FormField/sortErrorMessages.js"],"sourcesContent":["export default function sortErrorMessages(error, formValues = {}) {\n  if (!error) {\n    return {};\n  }\n\n  if (\n    error?.response?.data &&\n    typeof error.response.data === 'object' &&\n    Object.keys(error.response.data).length > 0\n  ) {\n    const parsed = parseFieldErrors(error.response.data, formValues);\n    return {\n      formError: parsed.formErrors.join('; '),\n      fieldErrors: Object.keys(parsed.fieldErrors).length\n        ? parsed.fieldErrors\n        : null,\n    };\n  }\n  /* eslint-disable-next-line no-console */\n  console.error(error);\n  return {\n    formError: error.message,\n    fieldErrors: null,\n  };\n}\n\n// Recursively traverse field errors object and build up field/form errors\nfunction parseFieldErrors(obj, formValues) {\n  let fieldErrors = {};\n  let formErrors = [];\n  Object.keys(obj).forEach((key) => {\n    const value = obj[key];\n    if (typeof value === 'string') {\n      if (typeof formValues[key] === 'undefined') {\n        formErrors.push(value);\n      } else {\n        fieldErrors[key] = value;\n      }\n    } else if (Array.isArray(value)) {\n      if (typeof formValues[key] === 'undefined') {\n        formErrors = formErrors.concat(value);\n      } else {\n        fieldErrors[key] = value.join('; ');\n      }\n    } else if (typeof value === 'object') {\n      const parsed = parseFieldErrors(value, formValues[key] || {});\n      if (Object.keys(parsed.fieldErrors).length) {\n        fieldErrors = {\n          ...fieldErrors,\n          [key]: parsed.fieldErrors,\n        };\n      }\n      formErrors = formErrors.concat(parsed.formErrors);\n    }\n    if (typeof formValues[key] === 'boolean') {\n      formErrors = formErrors.concat(value);\n    }\n  });\n\n  return { fieldErrors, formErrors };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}