{"ast":null,"code":"import _defineProperty from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;/* eslint-disable react/jsx-no-useless-fragment */import React,{useState}from'react';import{useHistory,useLocation}from'react-router-dom';import styled from'styled-components';import{Toolbar,ToolbarContent}from'@patternfly/react-core';import{parseQueryString,mergeParams,removeParams,updateQueryString}from'util/qs';import{QSConfig,SearchColumns,SortColumns,SearchableKeys}from'types';import DataListToolbar from'../DataListToolbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EmptyStateControlsWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-top: 20px;\\n  margin-right: 20px;\\n  margin-bottom: 20px;\\n  justify-content: flex-end;\\n\\n  & > :not(:first-child) {\\n    margin-left: 20px;\\n  }\\n\"])));function ListHeader(props){var _useLocation=useLocation(),search=_useLocation.search,pathname=_useLocation.pathname;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFilterCleared=_useState2[0],setIsFilterCleared=_useState2[1];var history=useHistory();var emptyStateControls=props.emptyStateControls,itemCount=props.itemCount,pagination=props.pagination,qsConfig=props.qsConfig,relatedSearchableKeys=props.relatedSearchableKeys,renderToolbar=props.renderToolbar,searchColumns=props.searchColumns,searchableKeys=props.searchableKeys,sortColumns=props.sortColumns;var handleSearch=function handleSearch(key,value){var params=parseQueryString(qsConfig,search);var qs=updateQueryString(qsConfig,search,_objectSpread(_objectSpread({},mergeParams(params,_defineProperty({},key,value))),{},{page:1}));pushHistoryState(qs);};var handleReplaceSearch=function handleReplaceSearch(key,value){var qs=updateQueryString(qsConfig,search,_defineProperty({},key,value));pushHistoryState(qs);};var handleRemove=function handleRemove(key,value){var oldParams=parseQueryString(qsConfig,search);var updatedParams=removeParams(qsConfig,oldParams,_defineProperty({},key,value));var qs=updateQueryString(qsConfig,search,updatedParams);pushHistoryState(qs);};var handleRemoveAll=function handleRemoveAll(){var oldParams=parseQueryString(qsConfig,search);Object.keys(oldParams).forEach(function(key){oldParams[key]=null;});delete oldParams.page_size;delete oldParams.order_by;var qs=updateQueryString(qsConfig,search,oldParams);setIsFilterCleared(true);pushHistoryState(qs);};var handleSort=function handleSort(key,order){var qs=updateQueryString(qsConfig,search,{order_by:order==='ascending'?key:\"-\".concat(key),page:null});pushHistoryState(qs);};var pushHistoryState=function pushHistoryState(queryString){history.push(queryString?\"\".concat(pathname,\"?\").concat(queryString):pathname);};var params=parseQueryString(qsConfig,search);var isEmpty=itemCount===0&&Object.keys(params).length===0;return/*#__PURE__*/_jsx(_Fragment,{children:isEmpty?/*#__PURE__*/_jsx(Toolbar,{id:\"\".concat(qsConfig.namespace,\"-list-toolbar\"),clearAllFilters:handleRemoveAll,collapseListedFiltersBreakpoint:\"lg\",ouiaId:\"\".concat(qsConfig.namespace,\"-list-toolbar\"),children:/*#__PURE__*/_jsx(ToolbarContent,{children:/*#__PURE__*/_jsx(EmptyStateControlsWrapper,{children:emptyStateControls})})}):/*#__PURE__*/_jsx(_Fragment,{children:renderToolbar({itemCount:itemCount,searchColumns:searchColumns,sortColumns:sortColumns,searchableKeys:searchableKeys,relatedSearchableKeys:relatedSearchableKeys,onSearch:handleSearch,onReplaceSearch:handleReplaceSearch,onSort:handleSort,onRemove:handleRemove,clearAllFilters:handleRemoveAll,qsConfig:qsConfig,pagination:pagination,isFilterCleared:isFilterCleared})})});}ListHeader.defaultProps={renderToolbar:function renderToolbar(props){return/*#__PURE__*/_jsx(DataListToolbar,_objectSpread({},props));},searchableKeys:[],sortColumns:null,relatedSearchableKeys:[]};export default ListHeader;","map":{"version":3,"names":["React","useState","useHistory","useLocation","styled","Toolbar","ToolbarContent","parseQueryString","mergeParams","removeParams","updateQueryString","QSConfig","SearchColumns","SortColumns","SearchableKeys","DataListToolbar","jsx","_jsx","Fragment","_Fragment","EmptyStateControlsWrapper","div","_templateObject","_taggedTemplateLiteral","ListHeader","props","_useLocation","search","pathname","_useState","_useState2","_slicedToArray","isFilterCleared","setIsFilterCleared","history","emptyStateControls","itemCount","pagination","qsConfig","relatedSearchableKeys","renderToolbar","searchColumns","searchableKeys","sortColumns","handleSearch","key","value","params","qs","_objectSpread","_defineProperty","page","pushHistoryState","handleReplaceSearch","handleRemove","oldParams","updatedParams","handleRemoveAll","Object","keys","forEach","page_size","order_by","handleSort","order","concat","queryString","push","isEmpty","length","children","id","namespace","clearAllFilters","collapseListedFiltersBreakpoint","ouiaId","onSearch","onReplaceSearch","onSort","onRemove","defaultProps"],"sources":["/awx_devel/awx/ui/src/components/ListHeader/ListHeader.js"],"sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Toolbar, ToolbarContent } from '@patternfly/react-core';\n\nimport {\n  parseQueryString,\n  mergeParams,\n  removeParams,\n  updateQueryString,\n} from 'util/qs';\nimport { QSConfig, SearchColumns, SortColumns, SearchableKeys } from 'types';\nimport DataListToolbar from '../DataListToolbar';\n\nconst EmptyStateControlsWrapper = styled.div`\n  display: flex;\n  margin-top: 20px;\n  margin-right: 20px;\n  margin-bottom: 20px;\n  justify-content: flex-end;\n\n  & > :not(:first-child) {\n    margin-left: 20px;\n  }\n`;\nfunction ListHeader(props) {\n  const { search, pathname } = useLocation();\n  const [isFilterCleared, setIsFilterCleared] = useState(false);\n  const history = useHistory();\n  const {\n    emptyStateControls,\n    itemCount,\n    pagination,\n    qsConfig,\n    relatedSearchableKeys,\n    renderToolbar,\n    searchColumns,\n    searchableKeys,\n    sortColumns,\n  } = props;\n\n  const handleSearch = (key, value) => {\n    const params = parseQueryString(qsConfig, search);\n    const qs = updateQueryString(qsConfig, search, {\n      ...mergeParams(params, { [key]: value }),\n      page: 1,\n    });\n    pushHistoryState(qs);\n  };\n\n  const handleReplaceSearch = (key, value) => {\n    const qs = updateQueryString(qsConfig, search, {\n      [key]: value,\n    });\n    pushHistoryState(qs);\n  };\n\n  const handleRemove = (key, value) => {\n    const oldParams = parseQueryString(qsConfig, search);\n    const updatedParams = removeParams(qsConfig, oldParams, {\n      [key]: value,\n    });\n    const qs = updateQueryString(qsConfig, search, updatedParams);\n    pushHistoryState(qs);\n  };\n\n  const handleRemoveAll = () => {\n    const oldParams = parseQueryString(qsConfig, search);\n    Object.keys(oldParams).forEach((key) => {\n      oldParams[key] = null;\n    });\n    delete oldParams.page_size;\n    delete oldParams.order_by;\n    const qs = updateQueryString(qsConfig, search, oldParams);\n    setIsFilterCleared(true);\n    pushHistoryState(qs);\n  };\n\n  const handleSort = (key, order) => {\n    const qs = updateQueryString(qsConfig, search, {\n      order_by: order === 'ascending' ? key : `-${key}`,\n      page: null,\n    });\n    pushHistoryState(qs);\n  };\n\n  const pushHistoryState = (queryString) => {\n    history.push(queryString ? `${pathname}?${queryString}` : pathname);\n  };\n\n  const params = parseQueryString(qsConfig, search);\n  const isEmpty = itemCount === 0 && Object.keys(params).length === 0;\n  return (\n    <>\n      {isEmpty ? (\n        <Toolbar\n          id={`${qsConfig.namespace}-list-toolbar`}\n          clearAllFilters={handleRemoveAll}\n          collapseListedFiltersBreakpoint=\"lg\"\n          ouiaId={`${qsConfig.namespace}-list-toolbar`}\n        >\n          <ToolbarContent>\n            <EmptyStateControlsWrapper>\n              {emptyStateControls}\n            </EmptyStateControlsWrapper>\n          </ToolbarContent>\n        </Toolbar>\n      ) : (\n        <>\n          {renderToolbar({\n            itemCount,\n            searchColumns,\n            sortColumns,\n            searchableKeys,\n            relatedSearchableKeys,\n            onSearch: handleSearch,\n            onReplaceSearch: handleReplaceSearch,\n            onSort: handleSort,\n            onRemove: handleRemove,\n            clearAllFilters: handleRemoveAll,\n            qsConfig,\n            pagination,\n            isFilterCleared,\n          })}\n        </>\n      )}\n    </>\n  );\n}\n\nListHeader.propTypes = {\n  itemCount: PropTypes.number.isRequired,\n  qsConfig: QSConfig.isRequired,\n  searchColumns: SearchColumns.isRequired,\n  searchableKeys: SearchableKeys,\n  relatedSearchableKeys: PropTypes.arrayOf(PropTypes.string),\n  sortColumns: SortColumns,\n  renderToolbar: PropTypes.func,\n};\n\nListHeader.defaultProps = {\n  renderToolbar: (props) => <DataListToolbar {...props} />,\n  searchableKeys: [],\n  sortColumns: null,\n  relatedSearchableKeys: [],\n};\n\nexport default ListHeader;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}