{"ast":null,"code":"import _defineProperty from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState,useCallback}from'react';import{Route,Switch,useParams,useRouteMatch}from'react-router-dom';import{PageSection}from'@patternfly/react-core';import ScreenHeader from'components/ScreenHeader/ScreenHeader';import JobList from'components/JobList';import PersistentFilters from'components/PersistentFilters';import Job from'./Job';import JobTypeRedirect from'./JobTypeRedirect';import{JOB_TYPE_URL_SEGMENTS}from'../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function TypeRedirect(_ref){var view=_ref.view;var _useParams=useParams(),id=_useParams.id;var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;return/*#__PURE__*/_jsx(JobTypeRedirect,{id:id,path:path,view:view});}function Jobs(){var match=useRouteMatch();var _useState=useState({'/jobs':/*i18n*/i18n._(\"Jobs\")}),_useState2=_slicedToArray(_useState,2),breadcrumbConfig=_useState2[0],setBreadcrumbConfig=_useState2[1];var buildBreadcrumbConfig=useCallback(function(job){var _setBreadcrumbConfig;if(!job){return;}var typeSegment=JOB_TYPE_URL_SEGMENTS[job.type];setBreadcrumbConfig((_setBreadcrumbConfig={'/jobs':/*i18n*/i18n._(\"Jobs\")},_defineProperty(_setBreadcrumbConfig,\"/jobs/\".concat(typeSegment,\"/\").concat(job.id),\"\".concat(job.id,\" - \").concat(job.name)),_defineProperty(_setBreadcrumbConfig,\"/jobs/\".concat(typeSegment,\"/\").concat(job.id,\"/output\"),/*i18n*/i18n._(\"Output\")),_defineProperty(_setBreadcrumbConfig,\"/jobs/\".concat(typeSegment,\"/\").concat(job.id,\"/details\"),/*i18n*/i18n._(\"Details\")),_setBreadcrumbConfig));},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ScreenHeader,{streamType:\"job\",breadcrumbConfig:breadcrumbConfig}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:match.path,children:/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(PersistentFilters,{pageKey:\"jobs\",children:/*#__PURE__*/_jsx(JobList,{showTypeColumn:true})})})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/:id/details\"),children:/*#__PURE__*/_jsx(TypeRedirect,{view:\"details\"})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/:id/output\"),children:/*#__PURE__*/_jsx(TypeRedirect,{view:\"output\"})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/:typeSegment/:id\"),children:/*#__PURE__*/_jsx(Job,{setBreadcrumb:buildBreadcrumbConfig})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/:id\"),children:/*#__PURE__*/_jsx(TypeRedirect,{})})]})]});}export{Jobs as _Jobs};export default Jobs;","map":{"version":3,"names":["React","useState","useCallback","Route","Switch","useParams","useRouteMatch","PageSection","ScreenHeader","JobList","PersistentFilters","Job","JobTypeRedirect","JOB_TYPE_URL_SEGMENTS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TypeRedirect","_ref","view","_useParams","id","_useRouteMatch","path","Jobs","match","_useState","i18n","_","_useState2","_slicedToArray","breadcrumbConfig","setBreadcrumbConfig","buildBreadcrumbConfig","job","_setBreadcrumbConfig","typeSegment","type","_defineProperty","concat","name","children","streamType","exact","pageKey","showTypeColumn","setBreadcrumb","_Jobs"],"sources":["/awx_devel/awx/ui/src/screens/Job/Jobs.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { Route, Switch, useParams, useRouteMatch } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { PageSection } from '@patternfly/react-core';\nimport ScreenHeader from 'components/ScreenHeader/ScreenHeader';\nimport JobList from 'components/JobList';\nimport PersistentFilters from 'components/PersistentFilters';\nimport Job from './Job';\nimport JobTypeRedirect from './JobTypeRedirect';\nimport { JOB_TYPE_URL_SEGMENTS } from '../../constants';\n\nfunction TypeRedirect({ view }) {\n  const { id } = useParams();\n  const { path } = useRouteMatch();\n  return <JobTypeRedirect id={id} path={path} view={view} />;\n}\n\nfunction Jobs() {\n  const match = useRouteMatch();\n  const [breadcrumbConfig, setBreadcrumbConfig] = useState({\n    '/jobs': t`Jobs`,\n  });\n\n  const buildBreadcrumbConfig = useCallback((job) => {\n    if (!job) {\n      return;\n    }\n\n    const typeSegment = JOB_TYPE_URL_SEGMENTS[job.type];\n    setBreadcrumbConfig({\n      '/jobs': t`Jobs`,\n      [`/jobs/${typeSegment}/${job.id}`]: `${job.id} - ${job.name}`,\n      [`/jobs/${typeSegment}/${job.id}/output`]: t`Output`,\n      [`/jobs/${typeSegment}/${job.id}/details`]: t`Details`,\n    });\n  }, []);\n\n  return (\n    <>\n      <ScreenHeader streamType=\"job\" breadcrumbConfig={breadcrumbConfig} />\n      <Switch>\n        <Route exact path={match.path}>\n          <PageSection>\n            <PersistentFilters pageKey=\"jobs\">\n              <JobList showTypeColumn />\n            </PersistentFilters>\n          </PageSection>\n        </Route>\n        <Route path={`${match.path}/:id/details`}>\n          <TypeRedirect view=\"details\" />\n        </Route>\n        <Route path={`${match.path}/:id/output`}>\n          <TypeRedirect view=\"output\" />\n        </Route>\n        <Route path={`${match.path}/:typeSegment/:id`}>\n          <Job setBreadcrumb={buildBreadcrumbConfig} />\n        </Route>\n        <Route path={`${match.path}/:id`}>\n          <TypeRedirect />\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport { Jobs as _Jobs };\nexport default Jobs;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}