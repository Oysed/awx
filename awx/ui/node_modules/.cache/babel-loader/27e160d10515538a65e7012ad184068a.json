{"ast":null,"code":"import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{useHistory}from'react-router-dom';import{Badge as PFBadge,Button,Tooltip}from'@patternfly/react-core';import{CompassIcon,WrenchIcon,ProjectDiagramIcon}from'@patternfly/react-icons';import styled from'styled-components';import StatusLabel from'components/StatusLabel';import JobCancelButton from'components/JobCancelButton';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Toolbar=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  border-bottom: 1px solid grey;\\n  display: flex;\\n  height: 56px;\\n\"])));var ToolbarJob=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  align-items: center;\\n\\n  h1 {\\n    margin-right: 10px;\\n    font-weight: var(--pf-global--FontWeight--bold);\\n  }\\n\"])));var ToolbarActions=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex: 1;\\n  justify-content: flex-end;\\n\"])));var Badge=styled(PFBadge)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n  margin-left: 10px;\\n\"])));var ActionButton=styled(Button)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  border: none;\\n  margin: 0px 6px;\\n  padding: 6px 10px;\\n  &:hover {\\n    background-color: #0066cc;\\n    color: white;\\n  }\\n\\n  &.pf-m-active {\\n    background-color: #0066cc;\\n    color: white;\\n  }\\n\"])));function WorkflowOutputToolbar(_ref){var _job$summary_fields,_job$summary_fields$u;var job=_ref.job;var dispatch=useContext(WorkflowDispatchContext);var history=useHistory();var _useContext=useContext(WorkflowStateContext),nodes=_useContext.nodes,showLegend=_useContext.showLegend,showTools=_useContext.showTools;var totalNodes=nodes.reduce(function(n,node){return n+!node.isDeleted;},0)-1;var navToWorkflow=function navToWorkflow(){history.push(\"/templates/workflow_job_template/\".concat(job.unified_job_template,\"/visualizer\"));};return/*#__PURE__*/_jsxs(Toolbar,{id:\"workflow-output-toolbar\",ouiaId:\"workflow-output-toolbar\",children:[/*#__PURE__*/_jsxs(ToolbarJob,{children:[/*#__PURE__*/_jsx(\"h1\",{children:job.name}),/*#__PURE__*/_jsx(StatusLabel,{status:job.status})]}),/*#__PURE__*/_jsxs(ToolbarActions,{children:[['new','pending','waiting','running'].includes(job===null||job===void 0?void 0:job.status)&&job!==null&&job!==void 0&&(_job$summary_fields=job.summary_fields)!==null&&_job$summary_fields!==void 0&&(_job$summary_fields$u=_job$summary_fields.user_capabilities)!==null&&_job$summary_fields$u!==void 0&&_job$summary_fields$u.start?/*#__PURE__*/_jsx(JobCancelButton,{style:{margin:'0px 6px',padding:'6px 10px'},job:job,errorTitle:/*i18n*/i18n._(\"Job Cancel Error\"),title:/*i18n*/i18n._(\"Cancel {0}\",{0:job.name}),errorMessage:/*i18n*/i18n._(\"Failed to cancel {0}\",{0:job.name}),showIconButton:true}):null,/*#__PURE__*/_jsx(ActionButton,{ouiaId:\"edit-workflow\",\"aria-label\":/*i18n*/i18n._(\"Edit workflow\"),id:\"edit-workflow\",variant:\"plain\",onClick:navToWorkflow,children:/*#__PURE__*/_jsx(ProjectDiagramIcon,{})}),/*#__PURE__*/_jsx(\"div\",{children:/*i18n*/i18n._(\"Total Nodes\")}),/*#__PURE__*/_jsx(Badge,{isRead:true,children:totalNodes}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Toggle Legend\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{id:\"workflow-output-toggle-legend\",isActive:showLegend,onClick:function onClick(){return dispatch({type:'TOGGLE_LEGEND'});},variant:\"plain\",children:/*#__PURE__*/_jsx(CompassIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Toggle Tools\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{id:\"workflow-output-toggle-tools\",isActive:showTools,onClick:function onClick(){return dispatch({type:'TOGGLE_TOOLS'});},variant:\"plain\",children:/*#__PURE__*/_jsx(WrenchIcon,{})})})]})]});}export default WorkflowOutputToolbar;","map":{"version":3,"names":["React","useContext","useHistory","Badge","PFBadge","Button","Tooltip","CompassIcon","WrenchIcon","ProjectDiagramIcon","styled","StatusLabel","JobCancelButton","WorkflowDispatchContext","WorkflowStateContext","jsx","_jsx","jsxs","_jsxs","Toolbar","div","_templateObject","_taggedTemplateLiteral","ToolbarJob","_templateObject2","ToolbarActions","_templateObject3","_templateObject4","ActionButton","_templateObject5","WorkflowOutputToolbar","_ref","_job$summary_fields","_job$summary_fields$u","job","dispatch","history","_useContext","nodes","showLegend","showTools","totalNodes","reduce","n","node","isDeleted","navToWorkflow","push","concat","unified_job_template","id","ouiaId","children","name","status","includes","summary_fields","user_capabilities","start","style","margin","padding","errorTitle","i18n","_","title","0","errorMessage","showIconButton","variant","onClick","isRead","content","position","isActive","type"],"sources":["/awx_devel/awx/ui/src/screens/Job/WorkflowOutput/WorkflowOutputToolbar.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { shape } from 'prop-types';\nimport { Badge as PFBadge, Button, Tooltip } from '@patternfly/react-core';\n\nimport {\n  CompassIcon,\n  WrenchIcon,\n  ProjectDiagramIcon,\n} from '@patternfly/react-icons';\nimport styled from 'styled-components';\nimport StatusLabel from 'components/StatusLabel';\nimport JobCancelButton from 'components/JobCancelButton';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\n\nconst Toolbar = styled.div`\n  align-items: center;\n  border-bottom: 1px solid grey;\n  display: flex;\n  height: 56px;\n`;\n\nconst ToolbarJob = styled.div`\n  display: inline-flex;\n  align-items: center;\n\n  h1 {\n    margin-right: 10px;\n    font-weight: var(--pf-global--FontWeight--bold);\n  }\n`;\n\nconst ToolbarActions = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n`;\n\nconst Badge = styled(PFBadge)`\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  margin-left: 10px;\n`;\n\nconst ActionButton = styled(Button)`\n  border: none;\n  margin: 0px 6px;\n  padding: 6px 10px;\n  &:hover {\n    background-color: #0066cc;\n    color: white;\n  }\n\n  &.pf-m-active {\n    background-color: #0066cc;\n    color: white;\n  }\n`;\nfunction WorkflowOutputToolbar({ job }) {\n  const dispatch = useContext(WorkflowDispatchContext);\n  const history = useHistory();\n  const { nodes, showLegend, showTools } = useContext(WorkflowStateContext);\n\n  const totalNodes = nodes.reduce((n, node) => n + !node.isDeleted, 0) - 1;\n  const navToWorkflow = () => {\n    history.push(\n      `/templates/workflow_job_template/${job.unified_job_template}/visualizer`\n    );\n  };\n  return (\n    <Toolbar id=\"workflow-output-toolbar\" ouiaId=\"workflow-output-toolbar\">\n      <ToolbarJob>\n        <h1>{job.name}</h1>\n        <StatusLabel status={job.status} />\n      </ToolbarJob>\n      <ToolbarActions>\n        {['new', 'pending', 'waiting', 'running'].includes(job?.status) &&\n        job?.summary_fields?.user_capabilities?.start ? (\n          <JobCancelButton\n            style={{ margin: '0px 6px', padding: '6px 10px' }}\n            job={job}\n            errorTitle={t`Job Cancel Error`}\n            title={t`Cancel ${job.name}`}\n            errorMessage={t`Failed to cancel ${job.name}`}\n            showIconButton\n          />\n        ) : null}\n\n        <ActionButton\n          ouiaId=\"edit-workflow\"\n          aria-label={t`Edit workflow`}\n          id=\"edit-workflow\"\n          variant=\"plain\"\n          onClick={navToWorkflow}\n        >\n          <ProjectDiagramIcon />\n        </ActionButton>\n        <div>{t`Total Nodes`}</div>\n        <Badge isRead>{totalNodes}</Badge>\n        <Tooltip content={t`Toggle Legend`} position=\"bottom\">\n          <ActionButton\n            id=\"workflow-output-toggle-legend\"\n            isActive={showLegend}\n            onClick={() => dispatch({ type: 'TOGGLE_LEGEND' })}\n            variant=\"plain\"\n          >\n            <CompassIcon />\n          </ActionButton>\n        </Tooltip>\n        <Tooltip content={t`Toggle Tools`} position=\"bottom\">\n          <ActionButton\n            id=\"workflow-output-toggle-tools\"\n            isActive={showTools}\n            onClick={() => dispatch({ type: 'TOGGLE_TOOLS' })}\n            variant=\"plain\"\n          >\n            <WrenchIcon />\n          </ActionButton>\n        </Tooltip>\n      </ToolbarActions>\n    </Toolbar>\n  );\n}\n\nWorkflowOutputToolbar.propTypes = {\n  job: shape().isRequired,\n};\n\nexport default WorkflowOutputToolbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}