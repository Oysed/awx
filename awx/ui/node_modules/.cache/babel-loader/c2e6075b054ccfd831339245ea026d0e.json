{"ast":null,"code":"import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import{useField}from'formik';import{FormGroup,Select,SelectOption,SelectVariant}from'@patternfly/react-core';import Popover from'components/Popover';import{jsx as _jsx}from\"react/jsx-runtime\";function BecomeMethodField(_ref){var fieldOptions=_ref.fieldOptions,isRequired=_ref.isRequired;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(['sudo','su','pbrun','pfexec','dzdo','pmrun','runas','enable','doas','ksu','machinectl','sesu'].map(function(val){return{value:val};})),_useState4=_slicedToArray(_useState3,2),options=_useState4[0],setOptions=_useState4[1];var _useField=useField({name:\"inputs.\".concat(fieldOptions.id)}),_useField2=_slicedToArray(_useField,3),becomeMethodField=_useField2[0],meta=_useField2[1],helpers=_useField2[2];return/*#__PURE__*/_jsx(FormGroup,{fieldId:\"credential-\".concat(fieldOptions.id),helperTextInvalid:meta.error,label:fieldOptions.label,labelIcon:fieldOptions.help_text&&/*#__PURE__*/_jsx(Popover,{content:fieldOptions.help_text}),isRequired:isRequired,validated:!(meta.touched&&meta.error)?'default':'error',children:/*#__PURE__*/_jsx(Select,{ouiaId:\"CredentialForm-\".concat(fieldOptions.id),typeAheadAriaLabel:fieldOptions.label,maxHeight:200,variant:SelectVariant.typeahead,onToggle:setIsOpen,onClear:function onClear(){helpers.setValue('');},onSelect:function onSelect(event,option){helpers.setValue(option);setIsOpen(false);},isOpen:isOpen,id:\"privilege-escalation-methods\",selections:becomeMethodField.value,isCreatable:true,onCreateOption:function onCreateOption(option){setOptions([].concat(_toConsumableArray(options),[{value:option}]));},noResultsFoundText:/*i18n*/i18n._(\"No results found\"),createText:/*i18n*/i18n._(\"Create\"),children:options.map(function(option){return/*#__PURE__*/_jsx(SelectOption,{value:option.value},option.value);})})});}BecomeMethodField.defaultProps={isRequired:false};export default BecomeMethodField;","map":{"version":3,"names":["React","useState","useField","FormGroup","Select","SelectOption","SelectVariant","Popover","jsx","_jsx","BecomeMethodField","_ref","fieldOptions","isRequired","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","_useState3","map","val","value","_useState4","options","setOptions","_useField","name","concat","id","_useField2","becomeMethodField","meta","helpers","fieldId","helperTextInvalid","error","label","labelIcon","help_text","content","validated","touched","children","ouiaId","typeAheadAriaLabel","maxHeight","variant","typeahead","onToggle","onClear","setValue","onSelect","event","option","selections","isCreatable","onCreateOption","_toConsumableArray","noResultsFoundText","i18n","_","createText","defaultProps"],"sources":["/awx_devel/awx/ui/src/screens/Credential/shared/CredentialFormFields/BecomeMethodField.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useField } from 'formik';\nimport { bool, shape, string } from 'prop-types';\nimport { t } from '@lingui/macro';\nimport {\n  FormGroup,\n  Select,\n  SelectOption,\n  SelectVariant,\n} from '@patternfly/react-core';\nimport Popover from 'components/Popover';\n\nfunction BecomeMethodField({ fieldOptions, isRequired }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [options, setOptions] = useState(\n    [\n      'sudo',\n      'su',\n      'pbrun',\n      'pfexec',\n      'dzdo',\n      'pmrun',\n      'runas',\n      'enable',\n      'doas',\n      'ksu',\n      'machinectl',\n      'sesu',\n    ].map((val) => ({ value: val }))\n  );\n  const [becomeMethodField, meta, helpers] = useField({\n    name: `inputs.${fieldOptions.id}`,\n  });\n  return (\n    <FormGroup\n      fieldId={`credential-${fieldOptions.id}`}\n      helperTextInvalid={meta.error}\n      label={fieldOptions.label}\n      labelIcon={\n        fieldOptions.help_text && <Popover content={fieldOptions.help_text} />\n      }\n      isRequired={isRequired}\n      validated={!(meta.touched && meta.error) ? 'default' : 'error'}\n    >\n      <Select\n        ouiaId={`CredentialForm-${fieldOptions.id}`}\n        typeAheadAriaLabel={fieldOptions.label}\n        maxHeight={200}\n        variant={SelectVariant.typeahead}\n        onToggle={setIsOpen}\n        onClear={() => {\n          helpers.setValue('');\n        }}\n        onSelect={(event, option) => {\n          helpers.setValue(option);\n          setIsOpen(false);\n        }}\n        isOpen={isOpen}\n        id=\"privilege-escalation-methods\"\n        selections={becomeMethodField.value}\n        isCreatable\n        onCreateOption={(option) => {\n          setOptions([...options, { value: option }]);\n        }}\n        noResultsFoundText={t`No results found`}\n        createText={t`Create`}\n      >\n        {options.map((option) => (\n          <SelectOption key={option.value} value={option.value} />\n        ))}\n      </Select>\n    </FormGroup>\n  );\n}\nBecomeMethodField.propTypes = {\n  fieldOptions: shape({\n    id: string.isRequired,\n    label: string.isRequired,\n  }).isRequired,\n  isRequired: bool,\n};\nBecomeMethodField.defaultProps = {\n  isRequired: false,\n};\n\nexport default BecomeMethodField;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}